#!/usr/bin/env node
"use strict";var e=require("node:fs"),t=require("node:process"),r=require("node:path"),i=require("readline"),n=require("events"),s=require("tty"),o=require("node:util"),u=require("node:os"),a=require("node:tty"),h=require("net"),c=require("stream"),l=require("path"),D=require("fs"),d=require("child_process"),f=require("crypto"),p=require("assert"),g=require("buffer"),E=require("http"),A=require("https"),_=require("tls"),F=require("dns"),m=require("util"),C=require("zlib"),y=require("node:child_process"),b=require("node:buffer"),w="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function v(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var B,S,I,k,R,T,O,N,P,L,x,U,M,H,Q,$,W,K,q,j,G,Y,X,V,z,J,Z,ee,te,re,ie,ne,se,oe,ue,ae,he,ce,le,De,de,fe,pe,ge,Ee,Ae,_e,Fe,me,Ce,ye,be,we,ve,Be,Se,Ie,ke,Re,Te,Oe,Ne,Pe,Le,xe,Ue,Me,He={};function Qe(){if(S)return B;S=1;const{FORCE_COLOR:e,NODE_DISABLE_COLORS:t,TERM:r}=process.env,i={enabled:!t&&"dumb"!==r&&"0"!==e,reset:s(0,0),bold:s(1,22),dim:s(2,22),italic:s(3,23),underline:s(4,24),inverse:s(7,27),hidden:s(8,28),strikethrough:s(9,29),black:s(30,39),red:s(31,39),green:s(32,39),yellow:s(33,39),blue:s(34,39),magenta:s(35,39),cyan:s(36,39),white:s(37,39),gray:s(90,39),grey:s(90,39),bgBlack:s(40,49),bgRed:s(41,49),bgGreen:s(42,49),bgYellow:s(43,49),bgBlue:s(44,49),bgMagenta:s(45,49),bgCyan:s(46,49),bgWhite:s(47,49)};function n(e,t){let r,i=0,n="",s="";for(;i<e.length;i++)r=e[i],n+=r.open,s+=r.close,t.includes(r.close)&&(t=t.replace(r.rgx,r.close+r.open));return n+t+s}function s(e,t){let r={open:`[${e}m`,close:`[${t}m`,rgx:new RegExp(`\\x1b\\[${t}m`,"g")};return function(t){return void 0!==this&&void 0!==this.has?(this.has.includes(e)||(this.has.push(e),this.keys.push(r)),void 0===t?this:i.enabled?n(this.keys,t+""):t+""):void 0===t?function(e,t){let r={has:e,keys:t};return r.reset=i.reset.bind(r),r.bold=i.bold.bind(r),r.dim=i.dim.bind(r),r.italic=i.italic.bind(r),r.underline=i.underline.bind(r),r.inverse=i.inverse.bind(r),r.hidden=i.hidden.bind(r),r.strikethrough=i.strikethrough.bind(r),r.black=i.black.bind(r),r.red=i.red.bind(r),r.green=i.green.bind(r),r.yellow=i.yellow.bind(r),r.blue=i.blue.bind(r),r.magenta=i.magenta.bind(r),r.cyan=i.cyan.bind(r),r.white=i.white.bind(r),r.gray=i.gray.bind(r),r.grey=i.grey.bind(r),r.bgBlack=i.bgBlack.bind(r),r.bgRed=i.bgRed.bind(r),r.bgGreen=i.bgGreen.bind(r),r.bgYellow=i.bgYellow.bind(r),r.bgBlue=i.bgBlue.bind(r),r.bgMagenta=i.bgMagenta.bind(r),r.bgCyan=i.bgCyan.bind(r),r.bgWhite=i.bgWhite.bind(r),r}([e],[r]):i.enabled?n([r],t+""):t+""}}return B=i}function $e(){return T?R:(T=1,R=e=>{const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|"),r=new RegExp(t,"g");return"string"==typeof e?e.replace(r,""):e})}function We(){if(N)return O;N=1;const e="[",t={to:(t,r)=>r?`${e}${r+1};${t+1}H`:`${e}${t+1}G`,move(t,r){let i="";return t<0?i+=`${e}${-t}D`:t>0&&(i+=`${e}${t}C`),r<0?i+=`${e}${-r}A`:r>0&&(i+=`${e}${r}B`),i},up:(t=1)=>`${e}${t}A`,down:(t=1)=>`${e}${t}B`,forward:(t=1)=>`${e}${t}C`,backward:(t=1)=>`${e}${t}D`,nextLine:(t=1)=>`${e}E`.repeat(t),prevLine:(t=1)=>`${e}F`.repeat(t),left:`${e}G`,hide:`${e}?25l`,show:`${e}?25h`,save:"7",restore:"8"},r={up:(t=1)=>`${e}S`.repeat(t),down:(t=1)=>`${e}T`.repeat(t)},i={screen:`${e}2J`,up:(t=1)=>`${e}1J`.repeat(t),down:(t=1)=>`${e}J`.repeat(t),line:`${e}2K`,lineEnd:`${e}K`,lineStart:`${e}1K`,lines(e){let r="";for(let i=0;i<e;i++)r+=this.line+(i<e-1?t.up():"");return e&&(r+=t.left),r}};return O={cursor:t,scroll:r,erase:i,beep:""}}function Ke(){if(L)return P;function e(e,r){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,r){if(!e)return;if("string"==typeof e)return t(e,r);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,r)}(e))||r){i&&(e=i);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,a=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return u=e.done,e},e:function(e){a=!0,o=e},f:function(){try{u||null==i.return||i.return()}finally{if(a)throw o}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}L=1;const r=$e(),i=We(),n=i.erase,s=i.cursor;return P=function(t,i){if(!i)return n.line+s.to(0);let o=0;var u,a=e(t.split(/\r?\n/));try{for(a.s();!(u=a.n()).done;){let e=u.value;o+=1+Math.floor(Math.max([...r(e)].length-1,0)/i)}}catch(e){a.e(e)}finally{a.f()}return n.lines(o)},P}function qe(){if(U)return x;U=1;const e={arrowUp:"↑",arrowDown:"↓",arrowLeft:"←",arrowRight:"→",radioOn:"◉",radioOff:"◯",tick:"✔",cross:"✖",ellipsis:"…",pointerSmall:"›",line:"─",pointer:"❯"},t={arrowUp:e.arrowUp,arrowDown:e.arrowDown,arrowLeft:e.arrowLeft,arrowRight:e.arrowRight,radioOn:"(*)",radioOff:"( )",tick:"√",cross:"×",ellipsis:"...",pointerSmall:"»",line:"─",pointer:">"},r="win32"===process.platform?t:e;return x=r}function je(){if(H)return M;H=1;const e=Qe(),t=qe(),r=Object.freeze({password:{scale:1,render:e=>"*".repeat(e.length)},emoji:{scale:2,render:e=>"😃".repeat(e.length)},invisible:{scale:0,render:e=>""},default:{scale:1,render:e=>`${e}`}}),i=Object.freeze({aborted:e.red(t.cross),done:e.green(t.tick),exited:e.yellow(t.cross),default:e.cyan("?")});return M={styles:r,render:e=>r[e]||r.default,symbols:i,symbol:(e,t,r)=>t?i.aborted:r?i.exited:e?i.done:i.default,delimiter:r=>e.gray(r?t.ellipsis:t.pointerSmall),item:(r,i)=>e.gray(r?i?t.pointerSmall:"+":t.line)}}function Ge(){if($)return Q;$=1;const e=$e();return Q=function(t,r){let i=String(e(t)||"").split(/\r?\n/);return r?i.map((e=>Math.ceil(e.length/r))).reduce(((e,t)=>e+t)):i.length},Q}function Ye(){return Y||(Y=1,G={action:(k||(k=1,I=(e,t)=>{if(!e.meta||"escape"===e.name){if(e.ctrl){if("a"===e.name)return"first";if("c"===e.name)return"abort";if("d"===e.name)return"abort";if("e"===e.name)return"last";if("g"===e.name)return"reset"}if(t){if("j"===e.name)return"down";if("k"===e.name)return"up"}return"return"===e.name||"enter"===e.name?"submit":"backspace"===e.name?"delete":"delete"===e.name?"deleteForward":"abort"===e.name?"abort":"escape"===e.name?"exit":"tab"===e.name?"next":"pagedown"===e.name?"nextPage":"pageup"===e.name?"prevPage":"home"===e.name?"home":"end"===e.name?"end":"up"===e.name?"up":"down"===e.name?"down":"right"===e.name?"right":"left"===e.name&&"left"}}),I),clear:Ke(),style:je(),strip:$e(),figures:qe(),lines:Ge(),wrap:(K||(K=1,W=(e,t={})=>{const r=Number.isSafeInteger(parseInt(t.margin))?new Array(parseInt(t.margin)).fill(" ").join(""):t.margin||"",i=t.width;return(e||"").split(/\r?\n/g).map((e=>e.split(/\s+/g).reduce(((e,t)=>(t.length+r.length>=i||e[e.length-1].length+t.length+1<i?e[e.length-1]+=` ${t}`:e.push(`${r}${t}`),e)),[r]).join("\n"))).join("\n")}),W),entriesToDisplay:j?q:(j=1,q=(e,t,r)=>{r=r||t;let i=Math.min(t-r,e-Math.floor(r/2));return i<0&&(i=0),{startIndex:i,endIndex:Math.min(i+r,t)}})}),G}function Xe(){if(V)return X;V=1;const e=i,t=Ye().action,r=n,s=We(),o=s.beep,u=s.cursor,a=Qe();return X=class extends r{constructor(r={}){super(),this.firstRender=!0,this.in=r.stdin||process.stdin,this.out=r.stdout||process.stdout,this.onRender=(r.onRender||(()=>{})).bind(this);const i=e.createInterface({input:this.in,escapeCodeTimeout:50});e.emitKeypressEvents(this.in,i),this.in.isTTY&&this.in.setRawMode(!0);const n=["SelectPrompt","MultiselectPrompt"].indexOf(this.constructor.name)>-1,s=(e,r)=>{let i=t(r,n);!1===i?this._&&this._(e,r):"function"==typeof this[i]?this[i](r):this.bell()};this.close=()=>{this.out.write(u.show),this.in.removeListener("keypress",s),this.in.isTTY&&this.in.setRawMode(!1),i.close(),this.emit(this.aborted?"abort":this.exited?"exit":"submit",this.value),this.closed=!0},this.in.on("keypress",s)}fire(){this.emit("state",{value:this.value,aborted:!!this.aborted,exited:!!this.exited})}bell(){this.out.write(o)}render(){this.onRender(a),this.firstRender&&(this.firstRender=!1)}},X}function Ve(){if(J)return z;function e(e,t,r,i,n,s,o){try{var u=e[s](o),a=u.value}catch(e){return void r(e)}u.done?t(a):Promise.resolve(a).then(i,n)}function t(t){return function(){var r=this,i=arguments;return new Promise((function(n,s){var o=t.apply(r,i);function u(t){e(o,n,s,u,a,"next",t)}function a(t){e(o,n,s,u,a,"throw",t)}u(void 0)}))}}J=1;const r=Qe(),i=Xe(),n=We(),s=n.erase,o=n.cursor,u=Ye(),a=u.style,h=u.clear,c=u.lines,l=u.figures;return z=class extends i{constructor(e={}){super(e),this.transform=a.render(e.style),this.scale=this.transform.scale,this.msg=e.message,this.initial=e.initial||"",this.validator=e.validate||(()=>!0),this.value="",this.errorMsg=e.error||"Please Enter A Valid Value",this.cursor=Number(!!this.initial),this.cursorOffset=0,this.clear=h("",this.out.columns),this.render()}set value(e){!e&&this.initial?(this.placeholder=!0,this.rendered=r.gray(this.transform.render(this.initial))):(this.placeholder=!1,this.rendered=this.transform.render(e)),this._value=e,this.fire()}get value(){return this._value}reset(){this.value="",this.cursor=Number(!!this.initial),this.cursorOffset=0,this.fire(),this.render()}exit(){this.abort()}abort(){this.value=this.value||this.initial,this.done=this.aborted=!0,this.error=!1,this.red=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}validate(){var e=this;return t((function*(){let t=yield e.validator(e.value);"string"==typeof t&&(e.errorMsg=t,t=!1),e.error=!t}))()}submit(){var e=this;return t((function*(){if(e.value=e.value||e.initial,e.cursorOffset=0,e.cursor=e.rendered.length,yield e.validate(),e.error)return e.red=!0,e.fire(),void e.render();e.done=!0,e.aborted=!1,e.fire(),e.render(),e.out.write("\n"),e.close()}))()}next(){if(!this.placeholder)return this.bell();this.value=this.initial,this.cursor=this.rendered.length,this.fire(),this.render()}moveCursor(e){this.placeholder||(this.cursor=this.cursor+e,this.cursorOffset+=e)}_(e,t){let r=this.value.slice(0,this.cursor),i=this.value.slice(this.cursor);this.value=`${r}${e}${i}`,this.red=!1,this.cursor=this.placeholder?0:r.length+1,this.render()}delete(){if(this.isCursorAtStart())return this.bell();let e=this.value.slice(0,this.cursor-1),t=this.value.slice(this.cursor);this.value=`${e}${t}`,this.red=!1,this.isCursorAtStart()?this.cursorOffset=0:(this.cursorOffset++,this.moveCursor(-1)),this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();let e=this.value.slice(0,this.cursor),t=this.value.slice(this.cursor+1);this.value=`${e}${t}`,this.red=!1,this.isCursorAtEnd()?this.cursorOffset=0:this.cursorOffset++,this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length,this.render()}left(){if(this.cursor<=0||this.placeholder)return this.bell();this.moveCursor(-1),this.render()}right(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();this.moveCursor(1),this.render()}isCursorAtStart(){return 0===this.cursor||this.placeholder&&1===this.cursor}isCursorAtEnd(){return this.cursor===this.rendered.length||this.placeholder&&this.cursor===this.rendered.length+1}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(o.down(c(this.outputError,this.out.columns)-1)+h(this.outputError,this.out.columns)),this.out.write(h(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[a.symbol(this.done,this.aborted),r.bold(this.msg),a.delimiter(this.done),this.red?r.red(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split("\n").reduce(((e,t,i)=>e+`\n${i?" ":l.pointerSmall} ${r.red().italic(t)}`),"")),this.out.write(s.line+o.to(0)+this.outputText+o.save+this.outputError+o.restore+o.move(this.cursorOffset,0)))}}}function ze(){if(ee)return Z;ee=1;const e=Qe(),t=Xe(),r=Ye(),i=r.style,n=r.clear,s=r.figures,o=r.wrap,u=r.entriesToDisplay,a=We().cursor;return Z=class extends t{constructor(e={}){super(e),this.msg=e.message,this.hint=e.hint||"- Use arrow-keys. Return to submit.",this.warn=e.warn||"- This option is disabled",this.cursor=e.initial||0,this.choices=e.choices.map(((e,t)=>("string"==typeof e&&(e={title:e,value:t}),{title:e&&(e.title||e.value||e),value:e&&(void 0===e.value?t:e.value),description:e&&e.description,selected:e&&e.selected,disabled:e&&e.disabled}))),this.optionsPerPage=e.optionsPerPage||10,this.value=(this.choices[this.cursor]||{}).value,this.clear=n("",this.out.columns),this.render()}moveCursor(e){this.cursor=e,this.value=this.choices[e].value,this.fire()}reset(){this.moveCursor(0),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write("\n"),this.close()}submit(){this.selection.disabled?this.bell():(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close())}first(){this.moveCursor(0),this.render()}last(){this.moveCursor(this.choices.length-1),this.render()}up(){0===this.cursor?this.moveCursor(this.choices.length-1):this.moveCursor(this.cursor-1),this.render()}down(){this.cursor===this.choices.length-1?this.moveCursor(0):this.moveCursor(this.cursor+1),this.render()}next(){this.moveCursor((this.cursor+1)%this.choices.length),this.render()}_(e,t){if(" "===e)return this.submit()}get selection(){return this.choices[this.cursor]}render(){if(this.closed)return;this.firstRender?this.out.write(a.hide):this.out.write(n(this.outputText,this.out.columns)),super.render();let t=u(this.cursor,this.choices.length,this.optionsPerPage),r=t.startIndex,h=t.endIndex;if(this.outputText=[i.symbol(this.done,this.aborted),e.bold(this.msg),i.delimiter(!1),this.done?this.selection.title:this.selection.disabled?e.yellow(this.warn):e.gray(this.hint)].join(" "),!this.done){this.outputText+="\n";for(let t=r;t<h;t++){let i,n,u="",a=this.choices[t];n=t===r&&r>0?s.arrowUp:t===h-1&&h<this.choices.length?s.arrowDown:" ",a.disabled?(i=this.cursor===t?e.gray().underline(a.title):e.strikethrough().gray(a.title),n=(this.cursor===t?e.bold().gray(s.pointer)+" ":"  ")+n):(i=this.cursor===t?e.cyan().underline(a.title):a.title,n=(this.cursor===t?e.cyan(s.pointer)+" ":"  ")+n,a.description&&this.cursor===t&&(u=` - ${a.description}`,(n.length+i.length+u.length>=this.out.columns||a.description.split(/\r?\n/).length>1)&&(u="\n"+o(a.description,{margin:3,width:this.out.columns})))),this.outputText+=`${n} ${i}${e.gray(u)}\n`}}this.out.write(this.outputText)}}}function Je(){if(re)return te;re=1;const e=Qe(),t=Xe(),r=Ye(),i=r.style,n=r.clear,s=We(),o=s.cursor,u=s.erase;return te=class extends t{constructor(e={}){super(e),this.msg=e.message,this.value=!!e.initial,this.active=e.active||"on",this.inactive=e.inactive||"off",this.initialValue=this.value,this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write("\n"),this.close()}submit(){this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}deactivate(){if(!1===this.value)return this.bell();this.value=!1,this.render()}activate(){if(!0===this.value)return this.bell();this.value=!0,this.render()}delete(){this.deactivate()}left(){this.deactivate()}right(){this.activate()}down(){this.deactivate()}up(){this.activate()}next(){this.value=!this.value,this.fire(),this.render()}_(e,t){if(" "===e)this.value=!this.value;else if("1"===e)this.value=!0;else{if("0"!==e)return this.bell();this.value=!1}this.render()}render(){this.closed||(this.firstRender?this.out.write(o.hide):this.out.write(n(this.outputText,this.out.columns)),super.render(),this.outputText=[i.symbol(this.done,this.aborted),e.bold(this.msg),i.delimiter(this.done),this.value?this.inactive:e.cyan().underline(this.inactive),e.gray("/"),this.value?e.cyan().underline(this.active):this.active].join(" "),this.out.write(u.line+o.to(0)+this.outputText))}}}function Ze(){if(ne)return ie;ne=1;class e{constructor({token:e,date:t,parts:r,locales:i}){this.token=e,this.date=t||new Date,this.parts=r||[this],this.locales=i||{}}up(){}down(){}next(){const t=this.parts.indexOf(this);return this.parts.find(((r,i)=>i>t&&r instanceof e))}setTo(e){}prev(){let t=[].concat(this.parts).reverse();const r=t.indexOf(this);return t.find(((t,i)=>i>r&&t instanceof e))}toString(){return String(this.date)}}return ie=e}function et(){if(oe)return se;oe=1;const e=Ze();return se=class extends e{constructor(e={}){super(e)}up(){this.date.setHours((this.date.getHours()+12)%24)}down(){this.up()}toString(){let e=this.date.getHours()>12?"pm":"am";return/\A/.test(this.token)?e.toUpperCase():e}},se}function tt(){if(ae)return ue;ae=1;const e=Ze();return ue=class extends e{constructor(e={}){super(e)}up(){this.date.setDate(this.date.getDate()+1)}down(){this.date.setDate(this.date.getDate()-1)}setTo(e){this.date.setDate(parseInt(e.substr(-2)))}toString(){let e=this.date.getDate(),t=this.date.getDay();return"DD"===this.token?String(e).padStart(2,"0"):"Do"===this.token?e+(r=e,1==(r%=10)?"st":2===r?"nd":3===r?"rd":"th"):"d"===this.token?t+1:"ddd"===this.token?this.locales.weekdaysShort[t]:"dddd"===this.token?this.locales.weekdays[t]:e;var r}},ue}function rt(){if(ce)return he;ce=1;const e=Ze();return he=class extends e{constructor(e={}){super(e)}up(){this.date.setHours(this.date.getHours()+1)}down(){this.date.setHours(this.date.getHours()-1)}setTo(e){this.date.setHours(parseInt(e.substr(-2)))}toString(){let e=this.date.getHours();return/h/.test(this.token)&&(e=e%12||12),this.token.length>1?String(e).padStart(2,"0"):e}},he}function it(){if(De)return le;De=1;const e=Ze();return le=class extends e{constructor(e={}){super(e)}up(){this.date.setMilliseconds(this.date.getMilliseconds()+1)}down(){this.date.setMilliseconds(this.date.getMilliseconds()-1)}setTo(e){this.date.setMilliseconds(parseInt(e.substr(-this.token.length)))}toString(){return String(this.date.getMilliseconds()).padStart(4,"0").substr(0,this.token.length)}}}function nt(){if(fe)return de;fe=1;const e=Ze();return de=class extends e{constructor(e={}){super(e)}up(){this.date.setMinutes(this.date.getMinutes()+1)}down(){this.date.setMinutes(this.date.getMinutes()-1)}setTo(e){this.date.setMinutes(parseInt(e.substr(-2)))}toString(){let e=this.date.getMinutes();return this.token.length>1?String(e).padStart(2,"0"):e}}}function st(){if(ge)return pe;ge=1;const e=Ze();return pe=class extends e{constructor(e={}){super(e)}up(){this.date.setMonth(this.date.getMonth()+1)}down(){this.date.setMonth(this.date.getMonth()-1)}setTo(e){e=parseInt(e.substr(-2))-1,this.date.setMonth(e<0?0:e)}toString(){let e=this.date.getMonth(),t=this.token.length;return 2===t?String(e+1).padStart(2,"0"):3===t?this.locales.monthsShort[e]:4===t?this.locales.months[e]:String(e+1)}},pe}function ot(){if(Ae)return Ee;Ae=1;const e=Ze();return Ee=class extends e{constructor(e={}){super(e)}up(){this.date.setSeconds(this.date.getSeconds()+1)}down(){this.date.setSeconds(this.date.getSeconds()-1)}setTo(e){this.date.setSeconds(parseInt(e.substr(-2)))}toString(){let e=this.date.getSeconds();return this.token.length>1?String(e).padStart(2,"0"):e}}}function ut(){if(Fe)return _e;Fe=1;const e=Ze();return _e=class extends e{constructor(e={}){super(e)}up(){this.date.setFullYear(this.date.getFullYear()+1)}down(){this.date.setFullYear(this.date.getFullYear()-1)}setTo(e){this.date.setFullYear(e.substr(-4))}toString(){let e=String(this.date.getFullYear()).padStart(4,"0");return 2===this.token.length?e.substr(-2):e}},_e}function at(){if(be)return ye;function e(e,t,r,i,n,s,o){try{var u=e[s](o),a=u.value}catch(e){return void r(e)}u.done?t(a):Promise.resolve(a).then(i,n)}function t(t){return function(){var r=this,i=arguments;return new Promise((function(n,s){var o=t.apply(r,i);function u(t){e(o,n,s,u,a,"next",t)}function a(t){e(o,n,s,u,a,"throw",t)}u(void 0)}))}}be=1;const r=Qe(),i=Xe(),n=Ye(),s=n.style,o=n.clear,u=n.figures,a=We(),h=a.erase,c=a.cursor,l=Ce?me:(Ce=1,me={DatePart:Ze(),Meridiem:et(),Day:tt(),Hours:rt(),Milliseconds:it(),Minutes:nt(),Month:st(),Seconds:ot(),Year:ut()}),D=l.DatePart,d=l.Meridiem,f=l.Day,p=l.Hours,g=l.Milliseconds,E=l.Minutes,A=l.Month,_=l.Seconds,F=l.Year,m=/\\(.)|"((?:\\["\\]|[^"])+)"|(D[Do]?|d{3,4}|d)|(M{1,4})|(YY(?:YY)?)|([aA])|([Hh]{1,2})|(m{1,2})|(s{1,2})|(S{1,4})|./g,C={1:({token:e})=>e.replace(/\\(.)/g,"$1"),2:e=>new f(e),3:e=>new A(e),4:e=>new F(e),5:e=>new d(e),6:e=>new p(e),7:e=>new E(e),8:e=>new _(e),9:e=>new g(e)},y={months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthsShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),weekdaysShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")};return ye=class extends i{constructor(e={}){super(e),this.msg=e.message,this.cursor=0,this.typed="",this.locales=Object.assign(y,e.locales),this._date=e.initial||new Date,this.errorMsg=e.error||"Please Enter A Valid Value",this.validator=e.validate||(()=>!0),this.mask=e.mask||"YYYY-MM-DD HH:mm:ss",this.clear=o("",this.out.columns),this.render()}get value(){return this.date}get date(){return this._date}set date(e){e&&this._date.setTime(e.getTime())}set mask(e){let t;for(this.parts=[];t=m.exec(e);){let e=t.shift(),r=t.findIndex((e=>null!=e));this.parts.push(r in C?C[r]({token:t[r]||e,date:this.date,parts:this.parts,locales:this.locales}):t[r]||e)}let r=this.parts.reduce(((e,t)=>("string"==typeof t&&"string"==typeof e[e.length-1]?e[e.length-1]+=t:e.push(t),e)),[]);this.parts.splice(0),this.parts.push(...r),this.reset()}moveCursor(e){this.typed="",this.cursor=e,this.fire()}reset(){this.moveCursor(this.parts.findIndex((e=>e instanceof D))),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}validate(){var e=this;return t((function*(){let t=yield e.validator(e.value);"string"==typeof t&&(e.errorMsg=t,t=!1),e.error=!t}))()}submit(){var e=this;return t((function*(){if(yield e.validate(),e.error)return e.color="red",e.fire(),void e.render();e.done=!0,e.aborted=!1,e.fire(),e.render(),e.out.write("\n"),e.close()}))()}up(){this.typed="",this.parts[this.cursor].up(),this.render()}down(){this.typed="",this.parts[this.cursor].down(),this.render()}left(){let e=this.parts[this.cursor].prev();if(null==e)return this.bell();this.moveCursor(this.parts.indexOf(e)),this.render()}right(){let e=this.parts[this.cursor].next();if(null==e)return this.bell();this.moveCursor(this.parts.indexOf(e)),this.render()}next(){let e=this.parts[this.cursor].next();this.moveCursor(e?this.parts.indexOf(e):this.parts.findIndex((e=>e instanceof D))),this.render()}_(e){/\d/.test(e)&&(this.typed+=e,this.parts[this.cursor].setTo(this.typed),this.render())}render(){this.closed||(this.firstRender?this.out.write(c.hide):this.out.write(o(this.outputText,this.out.columns)),super.render(),this.outputText=[s.symbol(this.done,this.aborted),r.bold(this.msg),s.delimiter(!1),this.parts.reduce(((e,t,i)=>e.concat(i!==this.cursor||this.done?t:r.cyan().underline(t.toString()))),[]).join("")].join(" "),this.error&&(this.outputText+=this.errorMsg.split("\n").reduce(((e,t,i)=>e+`\n${i?" ":u.pointerSmall} ${r.red().italic(t)}`),"")),this.out.write(h.line+c.to(0)+this.outputText))}},ye}function ht(){if(ve)return we;function e(e,t,r,i,n,s,o){try{var u=e[s](o),a=u.value}catch(e){return void r(e)}u.done?t(a):Promise.resolve(a).then(i,n)}function t(t){return function(){var r=this,i=arguments;return new Promise((function(n,s){var o=t.apply(r,i);function u(t){e(o,n,s,u,a,"next",t)}function a(t){e(o,n,s,u,a,"throw",t)}u(void 0)}))}}ve=1;const r=Qe(),i=Xe(),n=We(),s=n.cursor,o=n.erase,u=Ye(),a=u.style,h=u.figures,c=u.clear,l=u.lines,D=/[0-9]/,d=e=>void 0!==e,f=(e,t)=>{let r=Math.pow(10,t);return Math.round(e*r)/r};return we=class extends i{constructor(e={}){super(e),this.transform=a.render(e.style),this.msg=e.message,this.initial=d(e.initial)?e.initial:"",this.float=!!e.float,this.round=e.round||2,this.inc=e.increment||1,this.min=d(e.min)?e.min:-1/0,this.max=d(e.max)?e.max:1/0,this.errorMsg=e.error||"Please Enter A Valid Value",this.validator=e.validate||(()=>!0),this.color="cyan",this.value="",this.typed="",this.lastHit=0,this.render()}set value(e){e||0===e?(this.placeholder=!1,this.rendered=this.transform.render(`${f(e,this.round)}`),this._value=f(e,this.round)):(this.placeholder=!0,this.rendered=r.gray(this.transform.render(`${this.initial}`)),this._value=""),this.fire()}get value(){return this._value}parse(e){return this.float?parseFloat(e):parseInt(e)}valid(e){return"-"===e||"."===e&&this.float||D.test(e)}reset(){this.typed="",this.value="",this.fire(),this.render()}exit(){this.abort()}abort(){let e=this.value;this.value=""!==e?e:this.initial,this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}validate(){var e=this;return t((function*(){let t=yield e.validator(e.value);"string"==typeof t&&(e.errorMsg=t,t=!1),e.error=!t}))()}submit(){var e=this;return t((function*(){if(yield e.validate(),e.error)return e.color="red",e.fire(),void e.render();let t=e.value;e.value=""!==t?t:e.initial,e.done=!0,e.aborted=!1,e.error=!1,e.fire(),e.render(),e.out.write("\n"),e.close()}))()}up(){if(this.typed="",""===this.value&&(this.value=this.min-this.inc),this.value>=this.max)return this.bell();this.value+=this.inc,this.color="cyan",this.fire(),this.render()}down(){if(this.typed="",""===this.value&&(this.value=this.min+this.inc),this.value<=this.min)return this.bell();this.value-=this.inc,this.color="cyan",this.fire(),this.render()}delete(){let e=this.value.toString();if(0===e.length)return this.bell();this.value=this.parse(e=e.slice(0,-1))||"",""!==this.value&&this.value<this.min&&(this.value=this.min),this.color="cyan",this.fire(),this.render()}next(){this.value=this.initial,this.fire(),this.render()}_(e,t){if(!this.valid(e))return this.bell();const r=Date.now();if(r-this.lastHit>1e3&&(this.typed=""),this.typed+=e,this.lastHit=r,this.color="cyan","."===e)return this.fire();this.value=Math.min(this.parse(this.typed),this.max),this.value>this.max&&(this.value=this.max),this.value<this.min&&(this.value=this.min),this.fire(),this.render()}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(s.down(l(this.outputError,this.out.columns)-1)+c(this.outputError,this.out.columns)),this.out.write(c(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[a.symbol(this.done,this.aborted),r.bold(this.msg),a.delimiter(this.done),this.done&&(this.done||this.placeholder)?this.rendered:r[this.color]().underline(this.rendered)].join(" "),this.error&&(this.outputError+=this.errorMsg.split("\n").reduce(((e,t,i)=>e+`\n${i?" ":h.pointerSmall} ${r.red().italic(t)}`),"")),this.out.write(o.line+s.to(0)+this.outputText+s.save+this.outputError+s.restore))}}}function ct(){if(Se)return Be;Se=1;const e=Qe(),t=We().cursor,r=Xe(),i=Ye(),n=i.clear,s=i.figures,o=i.style,u=i.wrap,a=i.entriesToDisplay;return Be=class extends r{constructor(e={}){super(e),this.msg=e.message,this.cursor=e.cursor||0,this.scrollIndex=e.cursor||0,this.hint=e.hint||"",this.warn=e.warn||"- This option is disabled -",this.minSelected=e.min,this.showMinError=!1,this.maxChoices=e.max,this.instructions=e.instructions,this.optionsPerPage=e.optionsPerPage||10,this.value=e.choices.map(((e,t)=>("string"==typeof e&&(e={title:e,value:t}),{title:e&&(e.title||e.value||e),description:e&&e.description,value:e&&(void 0===e.value?t:e.value),selected:e&&e.selected,disabled:e&&e.disabled}))),this.clear=n("",this.out.columns),e.overrideRender||this.render()}reset(){this.value.map((e=>!e.selected)),this.cursor=0,this.fire(),this.render()}selected(){return this.value.filter((e=>e.selected))}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write("\n"),this.close()}submit(){const e=this.value.filter((e=>e.selected));this.minSelected&&e.length<this.minSelected?(this.showMinError=!0,this.render()):(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close())}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.value.length,this.render()}up(){0===this.cursor?this.cursor=this.value.length-1:this.cursor--,this.render()}down(){this.cursor===this.value.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.value[this.cursor].selected=!1,this.render()}right(){if(this.value.filter((e=>e.selected)).length>=this.maxChoices)return this.bell();this.value[this.cursor].selected=!0,this.render()}handleSpaceToggle(){const e=this.value[this.cursor];if(e.selected)e.selected=!1,this.render();else{if(e.disabled||this.value.filter((e=>e.selected)).length>=this.maxChoices)return this.bell();e.selected=!0,this.render()}}toggleAll(){if(void 0!==this.maxChoices||this.value[this.cursor].disabled)return this.bell();const e=!this.value[this.cursor].selected;this.value.filter((e=>!e.disabled)).forEach((t=>t.selected=e)),this.render()}_(e,t){if(" "===e)this.handleSpaceToggle();else{if("a"!==e)return this.bell();this.toggleAll()}}renderInstructions(){return void 0===this.instructions||this.instructions?"string"==typeof this.instructions?this.instructions:`\nInstructions:\n    ${s.arrowUp}/${s.arrowDown}: Highlight option\n    ${s.arrowLeft}/${s.arrowRight}/[space]: Toggle selection\n`+(void 0===this.maxChoices?"    a: Toggle all\n":"")+"    enter/return: Complete answer":""}renderOption(t,r,i,n){const o=(r.selected?e.green(s.radioOn):s.radioOff)+" "+n+" ";let a,h;return r.disabled?a=t===i?e.gray().underline(r.title):e.strikethrough().gray(r.title):(a=t===i?e.cyan().underline(r.title):r.title,t===i&&r.description&&(h=` - ${r.description}`,(o.length+a.length+h.length>=this.out.columns||r.description.split(/\r?\n/).length>1)&&(h="\n"+u(r.description,{margin:o.length,width:this.out.columns})))),o+a+e.gray(h||"")}paginateOptions(t){if(0===t.length)return e.red("No matches for this query.");let r,i=a(this.cursor,t.length,this.optionsPerPage),n=i.startIndex,o=i.endIndex,u=[];for(let e=n;e<o;e++)r=e===n&&n>0?s.arrowUp:e===o-1&&o<t.length?s.arrowDown:" ",u.push(this.renderOption(this.cursor,t[e],e,r));return"\n"+u.join("\n")}renderOptions(e){return this.done?"":this.paginateOptions(e)}renderDoneOrInstructions(){if(this.done)return this.value.filter((e=>e.selected)).map((e=>e.title)).join(", ");const t=[e.gray(this.hint),this.renderInstructions()];return this.value[this.cursor].disabled&&t.push(e.yellow(this.warn)),t.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(t.hide),super.render();let r=[o.symbol(this.done,this.aborted),e.bold(this.msg),o.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(r+=e.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),r+=this.renderOptions(this.value),this.out.write(this.clear+r),this.clear=n(r,this.out.columns)}},Be}function lt(){if(ke)return Ie;function e(e,t,r,i,n,s,o){try{var u=e[s](o),a=u.value}catch(e){return void r(e)}u.done?t(a):Promise.resolve(a).then(i,n)}ke=1;const t=Qe(),r=Xe(),i=We(),n=i.erase,s=i.cursor,o=Ye(),u=o.style,a=o.clear,h=o.figures,c=o.wrap,l=o.entriesToDisplay,D=(e,t)=>e[t]&&(e[t].value||e[t].title||e[t]),d=(e,t)=>e[t]&&(e[t].title||e[t].value||e[t]);return Ie=class extends r{constructor(e={}){super(e),this.msg=e.message,this.suggest=e.suggest,this.choices=e.choices,this.initial="number"==typeof e.initial?e.initial:((e,t)=>{const r=e.findIndex((e=>e.value===t||e.title===t));return r>-1?r:void 0})(e.choices,e.initial),this.select=this.initial||e.cursor||0,this.i18n={noMatches:e.noMatches||"no matches found"},this.fallback=e.fallback||this.initial,this.clearFirst=e.clearFirst||!1,this.suggestions=[],this.input="",this.limit=e.limit||10,this.cursor=0,this.transform=u.render(e.style),this.scale=this.transform.scale,this.render=this.render.bind(this),this.complete=this.complete.bind(this),this.clear=a("",this.out.columns),this.complete(this.render),this.render()}set fallback(e){this._fb=Number.isSafeInteger(parseInt(e))?parseInt(e):e}get fallback(){let e;return"number"==typeof this._fb?e=this.choices[this._fb]:"string"==typeof this._fb&&(e={title:this._fb}),e||this._fb||{title:this.i18n.noMatches}}moveSelect(e){this.select=e,this.suggestions.length>0?this.value=D(this.suggestions,e):this.value=this.fallback.value,this.fire()}complete(t){var r,i=this;return(r=function*(){const e=i.completing=i.suggest(i.input,i.choices),r=yield e;if(i.completing!==e)return;i.suggestions=r.map(((e,t,r)=>({title:d(r,t),value:D(r,t),description:e.description}))),i.completing=!1;const n=Math.max(r.length-1,0);i.moveSelect(Math.min(n,i.select)),t&&t()},function(){var t=this,i=arguments;return new Promise((function(n,s){var o=r.apply(t,i);function u(t){e(o,n,s,u,a,"next",t)}function a(t){e(o,n,s,u,a,"throw",t)}u(void 0)}))})()}reset(){this.input="",this.complete((()=>{this.moveSelect(void 0!==this.initial?this.initial:0),this.render()})),this.render()}exit(){this.clearFirst&&this.input.length>0?this.reset():(this.done=this.exited=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close())}abort(){this.done=this.aborted=!0,this.exited=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}submit(){this.done=!0,this.aborted=this.exited=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}_(e,t){let r=this.input.slice(0,this.cursor),i=this.input.slice(this.cursor);this.input=`${r}${e}${i}`,this.cursor=r.length+1,this.complete(this.render),this.render()}delete(){if(0===this.cursor)return this.bell();let e=this.input.slice(0,this.cursor-1),t=this.input.slice(this.cursor);this.input=`${e}${t}`,this.complete(this.render),this.cursor=this.cursor-1,this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();let e=this.input.slice(0,this.cursor),t=this.input.slice(this.cursor+1);this.input=`${e}${t}`,this.complete(this.render),this.render()}first(){this.moveSelect(0),this.render()}last(){this.moveSelect(this.suggestions.length-1),this.render()}up(){0===this.select?this.moveSelect(this.suggestions.length-1):this.moveSelect(this.select-1),this.render()}down(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}next(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}nextPage(){this.moveSelect(Math.min(this.select+this.limit,this.suggestions.length-1)),this.render()}prevPage(){this.moveSelect(Math.max(this.select-this.limit,0)),this.render()}left(){if(this.cursor<=0)return this.bell();this.cursor=this.cursor-1,this.render()}right(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();this.cursor=this.cursor+1,this.render()}renderOption(e,r,i,n){let s,o=i?h.arrowUp:n?h.arrowDown:" ",u=r?t.cyan().underline(e.title):e.title;return o=(r?t.cyan(h.pointer)+" ":"  ")+o,e.description&&(s=` - ${e.description}`,(o.length+u.length+s.length>=this.out.columns||e.description.split(/\r?\n/).length>1)&&(s="\n"+c(e.description,{margin:3,width:this.out.columns}))),o+" "+u+t.gray(s||"")}render(){if(this.closed)return;this.firstRender?this.out.write(s.hide):this.out.write(a(this.outputText,this.out.columns)),super.render();let e=l(this.select,this.choices.length,this.limit),r=e.startIndex,i=e.endIndex;if(this.outputText=[u.symbol(this.done,this.aborted,this.exited),t.bold(this.msg),u.delimiter(this.completing),this.done&&this.suggestions[this.select]?this.suggestions[this.select].title:this.rendered=this.transform.render(this.input)].join(" "),!this.done){const e=this.suggestions.slice(r,i).map(((e,t)=>this.renderOption(e,this.select===t+r,0===t&&r>0,t+r===i-1&&i<this.choices.length))).join("\n");this.outputText+="\n"+(e||t.gray(this.fallback.title))}this.out.write(n.line+s.to(0)+this.outputText)}},Ie}function Dt(){if(Te)return Re;Te=1;const e=Qe(),t=We().cursor,r=ct(),i=Ye(),n=i.clear,s=i.style,o=i.figures;return Re=class extends r{constructor(e={}){e.overrideRender=!0,super(e),this.inputValue="",this.clear=n("",this.out.columns),this.filteredOptions=this.value,this.render()}last(){this.cursor=this.filteredOptions.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.filteredOptions.length,this.render()}up(){0===this.cursor?this.cursor=this.filteredOptions.length-1:this.cursor--,this.render()}down(){this.cursor===this.filteredOptions.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.filteredOptions[this.cursor].selected=!1,this.render()}right(){if(this.value.filter((e=>e.selected)).length>=this.maxChoices)return this.bell();this.filteredOptions[this.cursor].selected=!0,this.render()}delete(){this.inputValue.length&&(this.inputValue=this.inputValue.substr(0,this.inputValue.length-1),this.updateFilteredOptions())}updateFilteredOptions(){const e=this.filteredOptions[this.cursor];this.filteredOptions=this.value.filter((e=>!this.inputValue||(!("string"!=typeof e.title||!e.title.toLowerCase().includes(this.inputValue.toLowerCase()))||!("string"!=typeof e.value||!e.value.toLowerCase().includes(this.inputValue.toLowerCase())))));const t=this.filteredOptions.findIndex((t=>t===e));this.cursor=t<0?0:t,this.render()}handleSpaceToggle(){const e=this.filteredOptions[this.cursor];if(e.selected)e.selected=!1,this.render();else{if(e.disabled||this.value.filter((e=>e.selected)).length>=this.maxChoices)return this.bell();e.selected=!0,this.render()}}handleInputChange(e){this.inputValue=this.inputValue+e,this.updateFilteredOptions()}_(e,t){" "===e?this.handleSpaceToggle():this.handleInputChange(e)}renderInstructions(){return void 0===this.instructions||this.instructions?"string"==typeof this.instructions?this.instructions:`\nInstructions:\n    ${o.arrowUp}/${o.arrowDown}: Highlight option\n    ${o.arrowLeft}/${o.arrowRight}/[space]: Toggle selection\n    [a,b,c]/delete: Filter choices\n    enter/return: Complete answer\n`:""}renderCurrentInput(){return`\nFiltered results for: ${this.inputValue?this.inputValue:e.gray("Enter something to filter")}\n`}renderOption(t,r,i){let n;return n=r.disabled?t===i?e.gray().underline(r.title):e.strikethrough().gray(r.title):t===i?e.cyan().underline(r.title):r.title,(r.selected?e.green(o.radioOn):o.radioOff)+"  "+n}renderDoneOrInstructions(){if(this.done)return this.value.filter((e=>e.selected)).map((e=>e.title)).join(", ");const t=[e.gray(this.hint),this.renderInstructions(),this.renderCurrentInput()];return this.filteredOptions.length&&this.filteredOptions[this.cursor].disabled&&t.push(e.yellow(this.warn)),t.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(t.hide),super.render();let r=[s.symbol(this.done,this.aborted),e.bold(this.msg),s.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(r+=e.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),r+=this.renderOptions(this.filteredOptions),this.out.write(this.clear+r),this.clear=n(r,this.out.columns)}},Re}function dt(){if(Ne)return Oe;Ne=1;const e=Qe(),t=Xe(),r=Ye(),i=r.style,n=r.clear,s=We(),o=s.erase,u=s.cursor;return Oe=class extends t{constructor(e={}){super(e),this.msg=e.message,this.value=e.initial,this.initialValue=!!e.initial,this.yesMsg=e.yes||"yes",this.yesOption=e.yesOption||"(Y/n)",this.noMsg=e.no||"no",this.noOption=e.noOption||"(y/N)",this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write("\n"),this.close()}submit(){this.value=this.value||!1,this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}_(e,t){return"y"===e.toLowerCase()?(this.value=!0,this.submit()):"n"===e.toLowerCase()?(this.value=!1,this.submit()):this.bell()}render(){this.closed||(this.firstRender?this.out.write(u.hide):this.out.write(n(this.outputText,this.out.columns)),super.render(),this.outputText=[i.symbol(this.done,this.aborted),e.bold(this.msg),i.delimiter(this.done),this.done?this.value?this.yesMsg:this.noMsg:e.gray(this.initialValue?this.yesOption:this.noOption)].join(" "),this.out.write(o.line+u.to(0)+this.outputText))}}}function ft(){return xe||(xe=1,function(){const e=He,t=Le?Pe:(Le=1,Pe={TextPrompt:Ve(),SelectPrompt:ze(),TogglePrompt:Je(),DatePrompt:at(),NumberPrompt:ht(),MultiselectPrompt:ct(),AutocompletePrompt:lt(),AutocompleteMultiselectPrompt:Dt(),ConfirmPrompt:dt()}),r=e=>e;function i(e,i,n={}){return new Promise(((s,o)=>{const u=new t[e](i),a=n.onAbort||r,h=n.onSubmit||r,c=n.onExit||r;u.on("state",i.onState||r),u.on("submit",(e=>s(h(e)))),u.on("exit",(e=>s(c(e)))),u.on("abort",(e=>o(a(e))))}))}e.text=e=>i("TextPrompt",e),e.password=t=>(t.style="password",e.text(t)),e.invisible=t=>(t.style="invisible",e.text(t)),e.number=e=>i("NumberPrompt",e),e.date=e=>i("DatePrompt",e),e.confirm=e=>i("ConfirmPrompt",e),e.list=e=>{const t=e.separator||",";return i("TextPrompt",e,{onSubmit:e=>e.split(t).map((e=>e.trim()))})},e.toggle=e=>i("TogglePrompt",e),e.select=e=>i("SelectPrompt",e),e.multiselect=e=>{e.choices=[].concat(e.choices||[]);const t=e=>e.filter((e=>e.selected)).map((e=>e.value));return i("MultiselectPrompt",e,{onAbort:t,onSubmit:t})},e.autocompleteMultiselect=e=>{e.choices=[].concat(e.choices||[]);const t=e=>e.filter((e=>e.selected)).map((e=>e.value));return i("AutocompleteMultiselectPrompt",e,{onAbort:t,onSubmit:t})};const n=(e,t)=>Promise.resolve(t.filter((t=>t.title.slice(0,e.length).toLowerCase()===e.toLowerCase())));e.autocomplete=e=>(e.suggest=e.suggest||n,e.choices=[].concat(e.choices||[]),i("AutocompletePrompt",e))}()),He}var pt,gt,Et,At,_t,Ft,mt,Ct,yt,bt,wt,vt,Bt,St,It,kt,Rt,Tt,Ot,Nt,Pt,Lt,xt,Ut,Mt,Ht,Qt,$t,Wt,Kt,qt,jt,Gt,Yt,Xt,Vt,zt,Jt,Zt,er,tr,rr,ir,nr,sr,or,ur,ar,hr,cr,lr,Dr,dr,fr,pr,gr,Er,Ar,_r,Fr,mr,Cr,yr,br={};function wr(){return At?Et:(At=1,Et=e=>{const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|"),r=new RegExp(t,"g");return"string"==typeof e?e.replace(r,""):e})}function vr(){if(Ft)return _t;Ft=1;const e=wr(),{erase:t,cursor:r}=We();return _t=function(i,n){if(!n)return t.line+r.to(0);let s=0;const o=i.split(/\r?\n/);for(let t of o)s+=1+Math.floor(Math.max([...e(t)].length-1,0)/n);return t.lines(s)},_t}function Br(){if(Ct)return mt;Ct=1;const e={arrowUp:"↑",arrowDown:"↓",arrowLeft:"←",arrowRight:"→",radioOn:"◉",radioOff:"◯",tick:"✔",cross:"✖",ellipsis:"…",pointerSmall:"›",line:"─",pointer:"❯"},t={arrowUp:e.arrowUp,arrowDown:e.arrowDown,arrowLeft:e.arrowLeft,arrowRight:e.arrowRight,radioOn:"(*)",radioOff:"( )",tick:"√",cross:"×",ellipsis:"...",pointerSmall:"»",line:"─",pointer:">"},r="win32"===process.platform?t:e;return mt=r}function Sr(){if(bt)return yt;bt=1;const e=Qe(),t=Br(),r=Object.freeze({password:{scale:1,render:e=>"*".repeat(e.length)},emoji:{scale:2,render:e=>"😃".repeat(e.length)},invisible:{scale:0,render:e=>""},default:{scale:1,render:e=>`${e}`}}),i=Object.freeze({aborted:e.red(t.cross),done:e.green(t.tick),exited:e.yellow(t.cross),default:e.cyan("?")});return yt={styles:r,render:e=>r[e]||r.default,symbols:i,symbol:(e,t,r)=>t?i.aborted:r?i.exited:e?i.done:i.default,delimiter:r=>e.gray(r?t.ellipsis:t.pointerSmall),item:(r,i)=>e.gray(r?i?t.pointerSmall:"+":t.line)}}function Ir(){if(vt)return wt;vt=1;const e=wr();return wt=function(t,r){let i=String(e(t)||"").split(/\r?\n/);return r?i.map((e=>Math.ceil(e.length/r))).reduce(((e,t)=>e+t)):i.length}}function kr(){return Tt||(Tt=1,Rt={action:(gt||(gt=1,pt=(e,t)=>{if(!e.meta||"escape"===e.name){if(e.ctrl){if("a"===e.name)return"first";if("c"===e.name)return"abort";if("d"===e.name)return"abort";if("e"===e.name)return"last";if("g"===e.name)return"reset"}if(t){if("j"===e.name)return"down";if("k"===e.name)return"up"}return"return"===e.name||"enter"===e.name?"submit":"backspace"===e.name?"delete":"delete"===e.name?"deleteForward":"abort"===e.name?"abort":"escape"===e.name?"exit":"tab"===e.name?"next":"pagedown"===e.name?"nextPage":"pageup"===e.name?"prevPage":"home"===e.name?"home":"end"===e.name?"end":"up"===e.name?"up":"down"===e.name?"down":"right"===e.name?"right":"left"===e.name&&"left"}}),pt),clear:vr(),style:Sr(),strip:wr(),figures:Br(),lines:Ir(),wrap:(St||(St=1,Bt=(e,t={})=>{const r=Number.isSafeInteger(parseInt(t.margin))?new Array(parseInt(t.margin)).fill(" ").join(""):t.margin||"",i=t.width;return(e||"").split(/\r?\n/g).map((e=>e.split(/\s+/g).reduce(((e,t)=>(t.length+r.length>=i||e[e.length-1].length+t.length+1<i?e[e.length-1]+=` ${t}`:e.push(`${r}${t}`),e)),[r]).join("\n"))).join("\n")}),Bt),entriesToDisplay:kt?It:(kt=1,It=(e,t,r)=>{r=r||t;let i=Math.min(t-r,e-Math.floor(r/2));return i<0&&(i=0),{startIndex:i,endIndex:Math.min(i+r,t)}})}),Rt}function Rr(){if(Nt)return Ot;Nt=1;const e=i,{action:t}=kr(),r=n,{beep:s,cursor:o}=We(),u=Qe();return Ot=class extends r{constructor(r={}){super(),this.firstRender=!0,this.in=r.stdin||process.stdin,this.out=r.stdout||process.stdout,this.onRender=(r.onRender||(()=>{})).bind(this);const i=e.createInterface({input:this.in,escapeCodeTimeout:50});e.emitKeypressEvents(this.in,i),this.in.isTTY&&this.in.setRawMode(!0);const n=["SelectPrompt","MultiselectPrompt"].indexOf(this.constructor.name)>-1,s=(e,r)=>{let i=t(r,n);!1===i?this._&&this._(e,r):"function"==typeof this[i]?this[i](r):this.bell()};this.close=()=>{this.out.write(o.show),this.in.removeListener("keypress",s),this.in.isTTY&&this.in.setRawMode(!1),i.close(),this.emit(this.aborted?"abort":this.exited?"exit":"submit",this.value),this.closed=!0},this.in.on("keypress",s)}fire(){this.emit("state",{value:this.value,aborted:!!this.aborted,exited:!!this.exited})}bell(){this.out.write(s)}render(){this.onRender(u),this.firstRender&&(this.firstRender=!1)}},Ot}function Tr(){if(Lt)return Pt;Lt=1;const e=Qe(),t=Rr(),{erase:r,cursor:i}=We(),{style:n,clear:s,lines:o,figures:u}=kr();return Pt=class extends t{constructor(e={}){super(e),this.transform=n.render(e.style),this.scale=this.transform.scale,this.msg=e.message,this.initial=e.initial||"",this.validator=e.validate||(()=>!0),this.value="",this.errorMsg=e.error||"Please Enter A Valid Value",this.cursor=Number(!!this.initial),this.cursorOffset=0,this.clear=s("",this.out.columns),this.render()}set value(t){!t&&this.initial?(this.placeholder=!0,this.rendered=e.gray(this.transform.render(this.initial))):(this.placeholder=!1,this.rendered=this.transform.render(t)),this._value=t,this.fire()}get value(){return this._value}reset(){this.value="",this.cursor=Number(!!this.initial),this.cursorOffset=0,this.fire(),this.render()}exit(){this.abort()}abort(){this.value=this.value||this.initial,this.done=this.aborted=!0,this.error=!1,this.red=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}async validate(){let e=await this.validator(this.value);"string"==typeof e&&(this.errorMsg=e,e=!1),this.error=!e}async submit(){if(this.value=this.value||this.initial,this.cursorOffset=0,this.cursor=this.rendered.length,await this.validate(),this.error)return this.red=!0,this.fire(),void this.render();this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}next(){if(!this.placeholder)return this.bell();this.value=this.initial,this.cursor=this.rendered.length,this.fire(),this.render()}moveCursor(e){this.placeholder||(this.cursor=this.cursor+e,this.cursorOffset+=e)}_(e,t){let r=this.value.slice(0,this.cursor),i=this.value.slice(this.cursor);this.value=`${r}${e}${i}`,this.red=!1,this.cursor=this.placeholder?0:r.length+1,this.render()}delete(){if(this.isCursorAtStart())return this.bell();let e=this.value.slice(0,this.cursor-1),t=this.value.slice(this.cursor);this.value=`${e}${t}`,this.red=!1,this.isCursorAtStart()?this.cursorOffset=0:(this.cursorOffset++,this.moveCursor(-1)),this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();let e=this.value.slice(0,this.cursor),t=this.value.slice(this.cursor+1);this.value=`${e}${t}`,this.red=!1,this.isCursorAtEnd()?this.cursorOffset=0:this.cursorOffset++,this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length,this.render()}left(){if(this.cursor<=0||this.placeholder)return this.bell();this.moveCursor(-1),this.render()}right(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();this.moveCursor(1),this.render()}isCursorAtStart(){return 0===this.cursor||this.placeholder&&1===this.cursor}isCursorAtEnd(){return this.cursor===this.rendered.length||this.placeholder&&this.cursor===this.rendered.length+1}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(i.down(o(this.outputError,this.out.columns)-1)+s(this.outputError,this.out.columns)),this.out.write(s(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[n.symbol(this.done,this.aborted),e.bold(this.msg),n.delimiter(this.done),this.red?e.red(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split("\n").reduce(((t,r,i)=>t+`\n${i?" ":u.pointerSmall} ${e.red().italic(r)}`),"")),this.out.write(r.line+i.to(0)+this.outputText+i.save+this.outputError+i.restore+i.move(this.cursorOffset,0)))}}}function Or(){if(Ut)return xt;Ut=1;const e=Qe(),t=Rr(),{style:r,clear:i,figures:n,wrap:s,entriesToDisplay:o}=kr(),{cursor:u}=We();return xt=class extends t{constructor(e={}){super(e),this.msg=e.message,this.hint=e.hint||"- Use arrow-keys. Return to submit.",this.warn=e.warn||"- This option is disabled",this.cursor=e.initial||0,this.choices=e.choices.map(((e,t)=>("string"==typeof e&&(e={title:e,value:t}),{title:e&&(e.title||e.value||e),value:e&&(void 0===e.value?t:e.value),description:e&&e.description,selected:e&&e.selected,disabled:e&&e.disabled}))),this.optionsPerPage=e.optionsPerPage||10,this.value=(this.choices[this.cursor]||{}).value,this.clear=i("",this.out.columns),this.render()}moveCursor(e){this.cursor=e,this.value=this.choices[e].value,this.fire()}reset(){this.moveCursor(0),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write("\n"),this.close()}submit(){this.selection.disabled?this.bell():(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close())}first(){this.moveCursor(0),this.render()}last(){this.moveCursor(this.choices.length-1),this.render()}up(){0===this.cursor?this.moveCursor(this.choices.length-1):this.moveCursor(this.cursor-1),this.render()}down(){this.cursor===this.choices.length-1?this.moveCursor(0):this.moveCursor(this.cursor+1),this.render()}next(){this.moveCursor((this.cursor+1)%this.choices.length),this.render()}_(e,t){if(" "===e)return this.submit()}get selection(){return this.choices[this.cursor]}render(){if(this.closed)return;this.firstRender?this.out.write(u.hide):this.out.write(i(this.outputText,this.out.columns)),super.render();let{startIndex:t,endIndex:a}=o(this.cursor,this.choices.length,this.optionsPerPage);if(this.outputText=[r.symbol(this.done,this.aborted),e.bold(this.msg),r.delimiter(!1),this.done?this.selection.title:this.selection.disabled?e.yellow(this.warn):e.gray(this.hint)].join(" "),!this.done){this.outputText+="\n";for(let r=t;r<a;r++){let i,o,u="",h=this.choices[r];o=r===t&&t>0?n.arrowUp:r===a-1&&a<this.choices.length?n.arrowDown:" ",h.disabled?(i=this.cursor===r?e.gray().underline(h.title):e.strikethrough().gray(h.title),o=(this.cursor===r?e.bold().gray(n.pointer)+" ":"  ")+o):(i=this.cursor===r?e.cyan().underline(h.title):h.title,o=(this.cursor===r?e.cyan(n.pointer)+" ":"  ")+o,h.description&&this.cursor===r&&(u=` - ${h.description}`,(o.length+i.length+u.length>=this.out.columns||h.description.split(/\r?\n/).length>1)&&(u="\n"+s(h.description,{margin:3,width:this.out.columns})))),this.outputText+=`${o} ${i}${e.gray(u)}\n`}}this.out.write(this.outputText)}}}function Nr(){if(Ht)return Mt;Ht=1;const e=Qe(),t=Rr(),{style:r,clear:i}=kr(),{cursor:n,erase:s}=We();return Mt=class extends t{constructor(e={}){super(e),this.msg=e.message,this.value=!!e.initial,this.active=e.active||"on",this.inactive=e.inactive||"off",this.initialValue=this.value,this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write("\n"),this.close()}submit(){this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}deactivate(){if(!1===this.value)return this.bell();this.value=!1,this.render()}activate(){if(!0===this.value)return this.bell();this.value=!0,this.render()}delete(){this.deactivate()}left(){this.deactivate()}right(){this.activate()}down(){this.deactivate()}up(){this.activate()}next(){this.value=!this.value,this.fire(),this.render()}_(e,t){if(" "===e)this.value=!this.value;else if("1"===e)this.value=!0;else{if("0"!==e)return this.bell();this.value=!1}this.render()}render(){this.closed||(this.firstRender?this.out.write(n.hide):this.out.write(i(this.outputText,this.out.columns)),super.render(),this.outputText=[r.symbol(this.done,this.aborted),e.bold(this.msg),r.delimiter(this.done),this.value?this.inactive:e.cyan().underline(this.inactive),e.gray("/"),this.value?e.cyan().underline(this.active):this.active].join(" "),this.out.write(s.line+n.to(0)+this.outputText))}}}function Pr(){if($t)return Qt;$t=1;class e{constructor({token:e,date:t,parts:r,locales:i}){this.token=e,this.date=t||new Date,this.parts=r||[this],this.locales=i||{}}up(){}down(){}next(){const t=this.parts.indexOf(this);return this.parts.find(((r,i)=>i>t&&r instanceof e))}setTo(e){}prev(){let t=[].concat(this.parts).reverse();const r=t.indexOf(this);return t.find(((t,i)=>i>r&&t instanceof e))}toString(){return String(this.date)}}return Qt=e}function Lr(){if(Kt)return Wt;Kt=1;const e=Pr();return Wt=class extends e{constructor(e={}){super(e)}up(){this.date.setHours((this.date.getHours()+12)%24)}down(){this.up()}toString(){let e=this.date.getHours()>12?"pm":"am";return/\A/.test(this.token)?e.toUpperCase():e}}}function xr(){if(jt)return qt;jt=1;const e=Pr();return qt=class extends e{constructor(e={}){super(e)}up(){this.date.setDate(this.date.getDate()+1)}down(){this.date.setDate(this.date.getDate()-1)}setTo(e){this.date.setDate(parseInt(e.substr(-2)))}toString(){let e=this.date.getDate(),t=this.date.getDay();return"DD"===this.token?String(e).padStart(2,"0"):"Do"===this.token?e+(r=e,1==(r%=10)?"st":2===r?"nd":3===r?"rd":"th"):"d"===this.token?t+1:"ddd"===this.token?this.locales.weekdaysShort[t]:"dddd"===this.token?this.locales.weekdays[t]:e;var r}},qt}function Ur(){if(Yt)return Gt;Yt=1;const e=Pr();return Gt=class extends e{constructor(e={}){super(e)}up(){this.date.setHours(this.date.getHours()+1)}down(){this.date.setHours(this.date.getHours()-1)}setTo(e){this.date.setHours(parseInt(e.substr(-2)))}toString(){let e=this.date.getHours();return/h/.test(this.token)&&(e=e%12||12),this.token.length>1?String(e).padStart(2,"0"):e}}}function Mr(){if(Vt)return Xt;Vt=1;const e=Pr();return Xt=class extends e{constructor(e={}){super(e)}up(){this.date.setMilliseconds(this.date.getMilliseconds()+1)}down(){this.date.setMilliseconds(this.date.getMilliseconds()-1)}setTo(e){this.date.setMilliseconds(parseInt(e.substr(-this.token.length)))}toString(){return String(this.date.getMilliseconds()).padStart(4,"0").substr(0,this.token.length)}}}function Hr(){if(Jt)return zt;Jt=1;const e=Pr();return zt=class extends e{constructor(e={}){super(e)}up(){this.date.setMinutes(this.date.getMinutes()+1)}down(){this.date.setMinutes(this.date.getMinutes()-1)}setTo(e){this.date.setMinutes(parseInt(e.substr(-2)))}toString(){let e=this.date.getMinutes();return this.token.length>1?String(e).padStart(2,"0"):e}}}function Qr(){if(er)return Zt;er=1;const e=Pr();return Zt=class extends e{constructor(e={}){super(e)}up(){this.date.setMonth(this.date.getMonth()+1)}down(){this.date.setMonth(this.date.getMonth()-1)}setTo(e){e=parseInt(e.substr(-2))-1,this.date.setMonth(e<0?0:e)}toString(){let e=this.date.getMonth(),t=this.token.length;return 2===t?String(e+1).padStart(2,"0"):3===t?this.locales.monthsShort[e]:4===t?this.locales.months[e]:String(e+1)}}}function $r(){if(rr)return tr;rr=1;const e=Pr();return tr=class extends e{constructor(e={}){super(e)}up(){this.date.setSeconds(this.date.getSeconds()+1)}down(){this.date.setSeconds(this.date.getSeconds()-1)}setTo(e){this.date.setSeconds(parseInt(e.substr(-2)))}toString(){let e=this.date.getSeconds();return this.token.length>1?String(e).padStart(2,"0"):e}}}function Wr(){if(nr)return ir;nr=1;const e=Pr();return ir=class extends e{constructor(e={}){super(e)}up(){this.date.setFullYear(this.date.getFullYear()+1)}down(){this.date.setFullYear(this.date.getFullYear()-1)}setTo(e){this.date.setFullYear(e.substr(-4))}toString(){let e=String(this.date.getFullYear()).padStart(4,"0");return 2===this.token.length?e.substr(-2):e}}}function Kr(){if(ar)return ur;ar=1;const e=Qe(),t=Rr(),{style:r,clear:i,figures:n}=kr(),{erase:s,cursor:o}=We(),{DatePart:u,Meridiem:a,Day:h,Hours:c,Milliseconds:l,Minutes:D,Month:d,Seconds:f,Year:p}=or?sr:(or=1,sr={DatePart:Pr(),Meridiem:Lr(),Day:xr(),Hours:Ur(),Milliseconds:Mr(),Minutes:Hr(),Month:Qr(),Seconds:$r(),Year:Wr()}),g=/\\(.)|"((?:\\["\\]|[^"])+)"|(D[Do]?|d{3,4}|d)|(M{1,4})|(YY(?:YY)?)|([aA])|([Hh]{1,2})|(m{1,2})|(s{1,2})|(S{1,4})|./g,E={1:({token:e})=>e.replace(/\\(.)/g,"$1"),2:e=>new h(e),3:e=>new d(e),4:e=>new p(e),5:e=>new a(e),6:e=>new c(e),7:e=>new D(e),8:e=>new f(e),9:e=>new l(e)},A={months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthsShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),weekdaysShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")};return ur=class extends t{constructor(e={}){super(e),this.msg=e.message,this.cursor=0,this.typed="",this.locales=Object.assign(A,e.locales),this._date=e.initial||new Date,this.errorMsg=e.error||"Please Enter A Valid Value",this.validator=e.validate||(()=>!0),this.mask=e.mask||"YYYY-MM-DD HH:mm:ss",this.clear=i("",this.out.columns),this.render()}get value(){return this.date}get date(){return this._date}set date(e){e&&this._date.setTime(e.getTime())}set mask(e){let t;for(this.parts=[];t=g.exec(e);){let e=t.shift(),r=t.findIndex((e=>null!=e));this.parts.push(r in E?E[r]({token:t[r]||e,date:this.date,parts:this.parts,locales:this.locales}):t[r]||e)}let r=this.parts.reduce(((e,t)=>("string"==typeof t&&"string"==typeof e[e.length-1]?e[e.length-1]+=t:e.push(t),e)),[]);this.parts.splice(0),this.parts.push(...r),this.reset()}moveCursor(e){this.typed="",this.cursor=e,this.fire()}reset(){this.moveCursor(this.parts.findIndex((e=>e instanceof u))),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}async validate(){let e=await this.validator(this.value);"string"==typeof e&&(this.errorMsg=e,e=!1),this.error=!e}async submit(){if(await this.validate(),this.error)return this.color="red",this.fire(),void this.render();this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}up(){this.typed="",this.parts[this.cursor].up(),this.render()}down(){this.typed="",this.parts[this.cursor].down(),this.render()}left(){let e=this.parts[this.cursor].prev();if(null==e)return this.bell();this.moveCursor(this.parts.indexOf(e)),this.render()}right(){let e=this.parts[this.cursor].next();if(null==e)return this.bell();this.moveCursor(this.parts.indexOf(e)),this.render()}next(){let e=this.parts[this.cursor].next();this.moveCursor(e?this.parts.indexOf(e):this.parts.findIndex((e=>e instanceof u))),this.render()}_(e){/\d/.test(e)&&(this.typed+=e,this.parts[this.cursor].setTo(this.typed),this.render())}render(){this.closed||(this.firstRender?this.out.write(o.hide):this.out.write(i(this.outputText,this.out.columns)),super.render(),this.outputText=[r.symbol(this.done,this.aborted),e.bold(this.msg),r.delimiter(!1),this.parts.reduce(((t,r,i)=>t.concat(i!==this.cursor||this.done?r:e.cyan().underline(r.toString()))),[]).join("")].join(" "),this.error&&(this.outputText+=this.errorMsg.split("\n").reduce(((t,r,i)=>t+`\n${i?" ":n.pointerSmall} ${e.red().italic(r)}`),"")),this.out.write(s.line+o.to(0)+this.outputText))}}}function qr(){if(cr)return hr;cr=1;const e=Qe(),t=Rr(),{cursor:r,erase:i}=We(),{style:n,figures:s,clear:o,lines:u}=kr(),a=/[0-9]/,h=e=>void 0!==e,c=(e,t)=>{let r=Math.pow(10,t);return Math.round(e*r)/r};return hr=class extends t{constructor(e={}){super(e),this.transform=n.render(e.style),this.msg=e.message,this.initial=h(e.initial)?e.initial:"",this.float=!!e.float,this.round=e.round||2,this.inc=e.increment||1,this.min=h(e.min)?e.min:-1/0,this.max=h(e.max)?e.max:1/0,this.errorMsg=e.error||"Please Enter A Valid Value",this.validator=e.validate||(()=>!0),this.color="cyan",this.value="",this.typed="",this.lastHit=0,this.render()}set value(t){t||0===t?(this.placeholder=!1,this.rendered=this.transform.render(`${c(t,this.round)}`),this._value=c(t,this.round)):(this.placeholder=!0,this.rendered=e.gray(this.transform.render(`${this.initial}`)),this._value=""),this.fire()}get value(){return this._value}parse(e){return this.float?parseFloat(e):parseInt(e)}valid(e){return"-"===e||"."===e&&this.float||a.test(e)}reset(){this.typed="",this.value="",this.fire(),this.render()}exit(){this.abort()}abort(){let e=this.value;this.value=""!==e?e:this.initial,this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}async validate(){let e=await this.validator(this.value);"string"==typeof e&&(this.errorMsg=e,e=!1),this.error=!e}async submit(){if(await this.validate(),this.error)return this.color="red",this.fire(),void this.render();let e=this.value;this.value=""!==e?e:this.initial,this.done=!0,this.aborted=!1,this.error=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}up(){if(this.typed="",""===this.value&&(this.value=this.min-this.inc),this.value>=this.max)return this.bell();this.value+=this.inc,this.color="cyan",this.fire(),this.render()}down(){if(this.typed="",""===this.value&&(this.value=this.min+this.inc),this.value<=this.min)return this.bell();this.value-=this.inc,this.color="cyan",this.fire(),this.render()}delete(){let e=this.value.toString();if(0===e.length)return this.bell();this.value=this.parse(e=e.slice(0,-1))||"",""!==this.value&&this.value<this.min&&(this.value=this.min),this.color="cyan",this.fire(),this.render()}next(){this.value=this.initial,this.fire(),this.render()}_(e,t){if(!this.valid(e))return this.bell();const r=Date.now();if(r-this.lastHit>1e3&&(this.typed=""),this.typed+=e,this.lastHit=r,this.color="cyan","."===e)return this.fire();this.value=Math.min(this.parse(this.typed),this.max),this.value>this.max&&(this.value=this.max),this.value<this.min&&(this.value=this.min),this.fire(),this.render()}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(r.down(u(this.outputError,this.out.columns)-1)+o(this.outputError,this.out.columns)),this.out.write(o(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[n.symbol(this.done,this.aborted),e.bold(this.msg),n.delimiter(this.done),this.done&&(this.done||this.placeholder)?this.rendered:e[this.color]().underline(this.rendered)].join(" "),this.error&&(this.outputError+=this.errorMsg.split("\n").reduce(((t,r,i)=>t+`\n${i?" ":s.pointerSmall} ${e.red().italic(r)}`),"")),this.out.write(i.line+r.to(0)+this.outputText+r.save+this.outputError+r.restore))}}}function jr(){if(Dr)return lr;Dr=1;const e=Qe(),{cursor:t}=We(),r=Rr(),{clear:i,figures:n,style:s,wrap:o,entriesToDisplay:u}=kr();return lr=class extends r{constructor(e={}){super(e),this.msg=e.message,this.cursor=e.cursor||0,this.scrollIndex=e.cursor||0,this.hint=e.hint||"",this.warn=e.warn||"- This option is disabled -",this.minSelected=e.min,this.showMinError=!1,this.maxChoices=e.max,this.instructions=e.instructions,this.optionsPerPage=e.optionsPerPage||10,this.value=e.choices.map(((e,t)=>("string"==typeof e&&(e={title:e,value:t}),{title:e&&(e.title||e.value||e),description:e&&e.description,value:e&&(void 0===e.value?t:e.value),selected:e&&e.selected,disabled:e&&e.disabled}))),this.clear=i("",this.out.columns),e.overrideRender||this.render()}reset(){this.value.map((e=>!e.selected)),this.cursor=0,this.fire(),this.render()}selected(){return this.value.filter((e=>e.selected))}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write("\n"),this.close()}submit(){const e=this.value.filter((e=>e.selected));this.minSelected&&e.length<this.minSelected?(this.showMinError=!0,this.render()):(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close())}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.value.length,this.render()}up(){0===this.cursor?this.cursor=this.value.length-1:this.cursor--,this.render()}down(){this.cursor===this.value.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.value[this.cursor].selected=!1,this.render()}right(){if(this.value.filter((e=>e.selected)).length>=this.maxChoices)return this.bell();this.value[this.cursor].selected=!0,this.render()}handleSpaceToggle(){const e=this.value[this.cursor];if(e.selected)e.selected=!1,this.render();else{if(e.disabled||this.value.filter((e=>e.selected)).length>=this.maxChoices)return this.bell();e.selected=!0,this.render()}}toggleAll(){if(void 0!==this.maxChoices||this.value[this.cursor].disabled)return this.bell();const e=!this.value[this.cursor].selected;this.value.filter((e=>!e.disabled)).forEach((t=>t.selected=e)),this.render()}_(e,t){if(" "===e)this.handleSpaceToggle();else{if("a"!==e)return this.bell();this.toggleAll()}}renderInstructions(){return void 0===this.instructions||this.instructions?"string"==typeof this.instructions?this.instructions:`\nInstructions:\n    ${n.arrowUp}/${n.arrowDown}: Highlight option\n    ${n.arrowLeft}/${n.arrowRight}/[space]: Toggle selection\n`+(void 0===this.maxChoices?"    a: Toggle all\n":"")+"    enter/return: Complete answer":""}renderOption(t,r,i,s){const u=(r.selected?e.green(n.radioOn):n.radioOff)+" "+s+" ";let a,h;return r.disabled?a=t===i?e.gray().underline(r.title):e.strikethrough().gray(r.title):(a=t===i?e.cyan().underline(r.title):r.title,t===i&&r.description&&(h=` - ${r.description}`,(u.length+a.length+h.length>=this.out.columns||r.description.split(/\r?\n/).length>1)&&(h="\n"+o(r.description,{margin:u.length,width:this.out.columns})))),u+a+e.gray(h||"")}paginateOptions(t){if(0===t.length)return e.red("No matches for this query.");let r,{startIndex:i,endIndex:s}=u(this.cursor,t.length,this.optionsPerPage),o=[];for(let e=i;e<s;e++)r=e===i&&i>0?n.arrowUp:e===s-1&&s<t.length?n.arrowDown:" ",o.push(this.renderOption(this.cursor,t[e],e,r));return"\n"+o.join("\n")}renderOptions(e){return this.done?"":this.paginateOptions(e)}renderDoneOrInstructions(){if(this.done)return this.value.filter((e=>e.selected)).map((e=>e.title)).join(", ");const t=[e.gray(this.hint),this.renderInstructions()];return this.value[this.cursor].disabled&&t.push(e.yellow(this.warn)),t.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(t.hide),super.render();let r=[s.symbol(this.done,this.aborted),e.bold(this.msg),s.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(r+=e.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),r+=this.renderOptions(this.value),this.out.write(this.clear+r),this.clear=i(r,this.out.columns)}},lr}function Gr(){if(fr)return dr;fr=1;const e=Qe(),t=Rr(),{erase:r,cursor:i}=We(),{style:n,clear:s,figures:o,wrap:u,entriesToDisplay:a}=kr(),h=(e,t)=>e[t]&&(e[t].value||e[t].title||e[t]),c=(e,t)=>e[t]&&(e[t].title||e[t].value||e[t]);return dr=class extends t{constructor(e={}){super(e),this.msg=e.message,this.suggest=e.suggest,this.choices=e.choices,this.initial="number"==typeof e.initial?e.initial:((e,t)=>{const r=e.findIndex((e=>e.value===t||e.title===t));return r>-1?r:void 0})(e.choices,e.initial),this.select=this.initial||e.cursor||0,this.i18n={noMatches:e.noMatches||"no matches found"},this.fallback=e.fallback||this.initial,this.clearFirst=e.clearFirst||!1,this.suggestions=[],this.input="",this.limit=e.limit||10,this.cursor=0,this.transform=n.render(e.style),this.scale=this.transform.scale,this.render=this.render.bind(this),this.complete=this.complete.bind(this),this.clear=s("",this.out.columns),this.complete(this.render),this.render()}set fallback(e){this._fb=Number.isSafeInteger(parseInt(e))?parseInt(e):e}get fallback(){let e;return"number"==typeof this._fb?e=this.choices[this._fb]:"string"==typeof this._fb&&(e={title:this._fb}),e||this._fb||{title:this.i18n.noMatches}}moveSelect(e){this.select=e,this.suggestions.length>0?this.value=h(this.suggestions,e):this.value=this.fallback.value,this.fire()}async complete(e){const t=this.completing=this.suggest(this.input,this.choices),r=await t;if(this.completing!==t)return;this.suggestions=r.map(((e,t,r)=>({title:c(r,t),value:h(r,t),description:e.description}))),this.completing=!1;const i=Math.max(r.length-1,0);this.moveSelect(Math.min(i,this.select)),e&&e()}reset(){this.input="",this.complete((()=>{this.moveSelect(void 0!==this.initial?this.initial:0),this.render()})),this.render()}exit(){this.clearFirst&&this.input.length>0?this.reset():(this.done=this.exited=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close())}abort(){this.done=this.aborted=!0,this.exited=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}submit(){this.done=!0,this.aborted=this.exited=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}_(e,t){let r=this.input.slice(0,this.cursor),i=this.input.slice(this.cursor);this.input=`${r}${e}${i}`,this.cursor=r.length+1,this.complete(this.render),this.render()}delete(){if(0===this.cursor)return this.bell();let e=this.input.slice(0,this.cursor-1),t=this.input.slice(this.cursor);this.input=`${e}${t}`,this.complete(this.render),this.cursor=this.cursor-1,this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();let e=this.input.slice(0,this.cursor),t=this.input.slice(this.cursor+1);this.input=`${e}${t}`,this.complete(this.render),this.render()}first(){this.moveSelect(0),this.render()}last(){this.moveSelect(this.suggestions.length-1),this.render()}up(){0===this.select?this.moveSelect(this.suggestions.length-1):this.moveSelect(this.select-1),this.render()}down(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}next(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}nextPage(){this.moveSelect(Math.min(this.select+this.limit,this.suggestions.length-1)),this.render()}prevPage(){this.moveSelect(Math.max(this.select-this.limit,0)),this.render()}left(){if(this.cursor<=0)return this.bell();this.cursor=this.cursor-1,this.render()}right(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();this.cursor=this.cursor+1,this.render()}renderOption(t,r,i,n){let s,a=i?o.arrowUp:n?o.arrowDown:" ",h=r?e.cyan().underline(t.title):t.title;return a=(r?e.cyan(o.pointer)+" ":"  ")+a,t.description&&(s=` - ${t.description}`,(a.length+h.length+s.length>=this.out.columns||t.description.split(/\r?\n/).length>1)&&(s="\n"+u(t.description,{margin:3,width:this.out.columns}))),a+" "+h+e.gray(s||"")}render(){if(this.closed)return;this.firstRender?this.out.write(i.hide):this.out.write(s(this.outputText,this.out.columns)),super.render();let{startIndex:t,endIndex:o}=a(this.select,this.choices.length,this.limit);if(this.outputText=[n.symbol(this.done,this.aborted,this.exited),e.bold(this.msg),n.delimiter(this.completing),this.done&&this.suggestions[this.select]?this.suggestions[this.select].title:this.rendered=this.transform.render(this.input)].join(" "),!this.done){const r=this.suggestions.slice(t,o).map(((e,r)=>this.renderOption(e,this.select===r+t,0===r&&t>0,r+t===o-1&&o<this.choices.length))).join("\n");this.outputText+="\n"+(r||e.gray(this.fallback.title))}this.out.write(r.line+i.to(0)+this.outputText)}}}function Yr(){if(gr)return pr;gr=1;const e=Qe(),{cursor:t}=We(),r=jr(),{clear:i,style:n,figures:s}=kr();return pr=class extends r{constructor(e={}){e.overrideRender=!0,super(e),this.inputValue="",this.clear=i("",this.out.columns),this.filteredOptions=this.value,this.render()}last(){this.cursor=this.filteredOptions.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.filteredOptions.length,this.render()}up(){0===this.cursor?this.cursor=this.filteredOptions.length-1:this.cursor--,this.render()}down(){this.cursor===this.filteredOptions.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.filteredOptions[this.cursor].selected=!1,this.render()}right(){if(this.value.filter((e=>e.selected)).length>=this.maxChoices)return this.bell();this.filteredOptions[this.cursor].selected=!0,this.render()}delete(){this.inputValue.length&&(this.inputValue=this.inputValue.substr(0,this.inputValue.length-1),this.updateFilteredOptions())}updateFilteredOptions(){const e=this.filteredOptions[this.cursor];this.filteredOptions=this.value.filter((e=>!this.inputValue||(!("string"!=typeof e.title||!e.title.toLowerCase().includes(this.inputValue.toLowerCase()))||!("string"!=typeof e.value||!e.value.toLowerCase().includes(this.inputValue.toLowerCase())))));const t=this.filteredOptions.findIndex((t=>t===e));this.cursor=t<0?0:t,this.render()}handleSpaceToggle(){const e=this.filteredOptions[this.cursor];if(e.selected)e.selected=!1,this.render();else{if(e.disabled||this.value.filter((e=>e.selected)).length>=this.maxChoices)return this.bell();e.selected=!0,this.render()}}handleInputChange(e){this.inputValue=this.inputValue+e,this.updateFilteredOptions()}_(e,t){" "===e?this.handleSpaceToggle():this.handleInputChange(e)}renderInstructions(){return void 0===this.instructions||this.instructions?"string"==typeof this.instructions?this.instructions:`\nInstructions:\n    ${s.arrowUp}/${s.arrowDown}: Highlight option\n    ${s.arrowLeft}/${s.arrowRight}/[space]: Toggle selection\n    [a,b,c]/delete: Filter choices\n    enter/return: Complete answer\n`:""}renderCurrentInput(){return`\nFiltered results for: ${this.inputValue?this.inputValue:e.gray("Enter something to filter")}\n`}renderOption(t,r,i){let n;return n=r.disabled?t===i?e.gray().underline(r.title):e.strikethrough().gray(r.title):t===i?e.cyan().underline(r.title):r.title,(r.selected?e.green(s.radioOn):s.radioOff)+"  "+n}renderDoneOrInstructions(){if(this.done)return this.value.filter((e=>e.selected)).map((e=>e.title)).join(", ");const t=[e.gray(this.hint),this.renderInstructions(),this.renderCurrentInput()];return this.filteredOptions.length&&this.filteredOptions[this.cursor].disabled&&t.push(e.yellow(this.warn)),t.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(t.hide),super.render();let r=[n.symbol(this.done,this.aborted),e.bold(this.msg),n.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(r+=e.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),r+=this.renderOptions(this.filteredOptions),this.out.write(this.clear+r),this.clear=i(r,this.out.columns)}},pr}function Xr(){if(Ar)return Er;Ar=1;const e=Qe(),t=Rr(),{style:r,clear:i}=kr(),{erase:n,cursor:s}=We();return Er=class extends t{constructor(e={}){super(e),this.msg=e.message,this.value=e.initial,this.initialValue=!!e.initial,this.yesMsg=e.yes||"yes",this.yesOption=e.yesOption||"(Y/n)",this.noMsg=e.no||"no",this.noOption=e.noOption||"(y/N)",this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write("\n"),this.close()}submit(){this.value=this.value||!1,this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}_(e,t){return"y"===e.toLowerCase()?(this.value=!0,this.submit()):"n"===e.toLowerCase()?(this.value=!1,this.submit()):this.bell()}render(){this.closed||(this.firstRender?this.out.write(s.hide):this.out.write(i(this.outputText,this.out.columns)),super.render(),this.outputText=[r.symbol(this.done,this.aborted),e.bold(this.msg),r.delimiter(this.done),this.done?this.value?this.yesMsg:this.noMsg:e.gray(this.initialValue?this.yesOption:this.noOption)].join(" "),this.out.write(n.line+s.to(0)+this.outputText))}}}function Vr(){return mr||(mr=1,function(){const e=br,t=Fr?_r:(Fr=1,_r={TextPrompt:Tr(),SelectPrompt:Or(),TogglePrompt:Nr(),DatePrompt:Kr(),NumberPrompt:qr(),MultiselectPrompt:jr(),AutocompletePrompt:Gr(),AutocompleteMultiselectPrompt:Yr(),ConfirmPrompt:Xr()}),r=e=>e;function i(e,i,n={}){return new Promise(((s,o)=>{const u=new t[e](i),a=n.onAbort||r,h=n.onSubmit||r,c=n.onExit||r;u.on("state",i.onState||r),u.on("submit",(e=>s(h(e)))),u.on("exit",(e=>s(c(e)))),u.on("abort",(e=>o(a(e))))}))}e.text=e=>i("TextPrompt",e),e.password=t=>(t.style="password",e.text(t)),e.invisible=t=>(t.style="invisible",e.text(t)),e.number=e=>i("NumberPrompt",e),e.date=e=>i("DatePrompt",e),e.confirm=e=>i("ConfirmPrompt",e),e.list=e=>{const t=e.separator||",";return i("TextPrompt",e,{onSubmit:e=>e.split(t).map((e=>e.trim()))})},e.toggle=e=>i("TogglePrompt",e),e.select=e=>i("SelectPrompt",e),e.multiselect=e=>{e.choices=[].concat(e.choices||[]);const t=e=>e.filter((e=>e.selected)).map((e=>e.value));return i("MultiselectPrompt",e,{onAbort:t,onSubmit:t})},e.autocompleteMultiselect=e=>{e.choices=[].concat(e.choices||[]);const t=e=>e.filter((e=>e.selected)).map((e=>e.value));return i("AutocompleteMultiselectPrompt",e,{onAbort:t,onSubmit:t})};const n=(e,t)=>Promise.resolve(t.filter((t=>t.title.slice(0,e.length).toLowerCase()===e.toLowerCase())));e.autocomplete=e=>(e.suggest=e.suggest||n,e.choices=[].concat(e.choices||[]),i("AutocompletePrompt",e))}()),br}var zr=function(e){e=(Array.isArray(e)?e:e.split(".")).map(Number);let t=0,r=process.versions.node.split(".").map(Number);for(;t<e.length;t++){if(r[t]>e[t])return!1;if(e[t]>r[t])return!0}return!1}("8.6.0")?function(){if(Me)return Ue;function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function t(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?e(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e))||t){r&&(e=r);var i=0,s=function(){};return{s:s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){a=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw o}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function s(e,t,r,i,n,s,o){try{var u=e[s](o),a=u.value}catch(e){return void r(e)}u.done?t(a):Promise.resolve(a).then(i,n)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var o=e.apply(t,r);function u(e){s(o,i,n,u,a,"next",e)}function a(e){s(o,i,n,u,a,"throw",e)}u(void 0)}))}}Me=1;const u=ft(),a=["suggest","format","onState","validate","onRender","type"],h=()=>{};function c(){return l.apply(this,arguments)}function l(){return l=o((function*(e=[],{onSubmit:r=h,onCancel:n=h}={}){const s={},l=c._override||{};let d,f,p,g,E,A;e=[].concat(e);const _=function(){var e=o((function*(e,t,r=!1){if(r||!e.validate||!0===e.validate(t))return e.format?yield e.format(t,s):t}));return function(t,r){return e.apply(this,arguments)}}();var F,m=i(e);try{for(m.s();!(F=m.n()).done;){f=F.value;var C=f;if(g=C.name,E=C.type,"function"==typeof E&&(E=yield E(d,t({},s),f),f.type=E),E){for(let e in f){if(a.includes(e))continue;let r=f[e];f[e]="function"==typeof r?yield r(d,t({},s),A):r}if(A=f,"string"!=typeof f.message)throw new Error("prompt message is required");var y=f;if(g=y.name,E=y.type,void 0===u[E])throw new Error(`prompt type (${E}) is not defined`);if(void 0===l[f.name]||(d=yield _(f,l[f.name]),void 0===d)){try{d=c._injected?D(c._injected,f.initial):yield u[E](f),s[g]=d=yield _(f,d,!0),p=yield r(f,d,s)}catch(e){p=!(yield n(f,s))}if(p)return s}else s[g]=d}}}catch(e){m.e(e)}finally{m.f()}return s})),l.apply(this,arguments)}function D(e,t){const r=e.shift();if(r instanceof Error)throw r;return void 0===r?t:r}return Ue=Object.assign(c,{prompt:c,prompts:u,inject:function(e){c._injected=(c._injected||[]).concat(e)},override:function(e){c._override=Object.assign({},e)}})}():function(){if(yr)return Cr;yr=1;const e=Vr(),t=["suggest","format","onState","validate","onRender","type"],r=()=>{};async function i(s=[],{onSubmit:o=r,onCancel:u=r}={}){const a={},h=i._override||{};let c,l,D,d,f,p;s=[].concat(s);const g=async(e,t,r=!1)=>{if(r||!e.validate||!0===e.validate(t))return e.format?await e.format(t,a):t};for(l of s)if(({name:d,type:f}=l),"function"==typeof f&&(f=await f(c,{...a},l),l.type=f),f){for(let e in l){if(t.includes(e))continue;let r=l[e];l[e]="function"==typeof r?await r(c,{...a},p):r}if(p=l,"string"!=typeof l.message)throw new Error("prompt message is required");if(({name:d,type:f}=l),void 0===e[f])throw new Error(`prompt type (${f}) is not defined`);if(void 0===h[l.name]||(c=await g(l,h[l.name]),void 0===c)){try{c=i._injected?n(i._injected,l.initial):await e[f](l),a[d]=c=await g(l,c,!0),D=await o(l,c,a)}catch(e){D=!await u(l,a)}if(D)return a}else a[d]=c}return a}function n(e,t){const r=e.shift();if(r instanceof Error)throw r;return void 0===r?t:r}return Cr=Object.assign(i,{prompt:i,prompts:e,inject:function(e){i._injected=(i._injected||[]).concat(e)},override:function(e){i._override=Object.assign({},e)}})}(),Jr=v(zr);function Zr(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ei={exports:{}};let ti=process.argv||[],ri=process.env,ii=!("NO_COLOR"in ri||ti.includes("--no-color"))&&("FORCE_COLOR"in ri||ti.includes("--color")||"win32"===process.platform||null!=Zr&&s.isatty(1)&&"dumb"!==ri.TERM||"CI"in ri),ni=(e,t,r=e)=>i=>{let n=""+i,s=n.indexOf(t,e.length);return~s?e+si(n,t,r,s)+t:e+n+t},si=(e,t,r,i)=>{let n="",s=0;do{n+=e.substring(s,i)+r,s=i+t.length,i=e.indexOf(t,s)}while(~i);return n+e.substring(s)},oi=(e=ii)=>{let t=e?ni:()=>String;return{isColorSupported:e,reset:t("[0m","[0m"),bold:t("[1m","[22m","[22m[1m"),dim:t("[2m","[22m","[22m[2m"),italic:t("[3m","[23m"),underline:t("[4m","[24m"),inverse:t("[7m","[27m"),hidden:t("[8m","[28m"),strikethrough:t("[9m","[29m"),black:t("[30m","[39m"),red:t("[31m","[39m"),green:t("[32m","[39m"),yellow:t("[33m","[39m"),blue:t("[34m","[39m"),magenta:t("[35m","[39m"),cyan:t("[36m","[39m"),white:t("[37m","[39m"),gray:t("[90m","[39m"),bgBlack:t("[40m","[49m"),bgRed:t("[41m","[49m"),bgGreen:t("[42m","[49m"),bgYellow:t("[43m","[49m"),bgBlue:t("[44m","[49m"),bgMagenta:t("[45m","[49m"),bgCyan:t("[46m","[49m"),bgWhite:t("[47m","[49m")}};ei.exports=oi(),ei.exports.createColors=oi;var ui=ei.exports;const ai="操作已取消";function hi(){throw new Error(ai)}const{values:ci,positionals:li}=o.parseArgs({allowPositionals:!0,options:{config:{type:"string",short:"c"},localdir:{type:"string",short:"l"},serverdir:{type:"string",short:"s"}}});const Di=(e=0)=>t=>`[${t+e}m`,di=(e=0)=>t=>`[${38+e};5;${t}m`,fi=(e=0)=>(t,r,i)=>`[${38+e};2;${t};${r};${i}m`,pi={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(pi.modifier);Object.keys(pi.color),Object.keys(pi.bgColor);const gi=function(){const e=new Map;for(const[t,r]of Object.entries(pi)){for(const[t,i]of Object.entries(r))pi[t]={open:`[${i[0]}m`,close:`[${i[1]}m`},r[t]=pi[t],e.set(i[0],i[1]);Object.defineProperty(pi,t,{value:r,enumerable:!1})}return Object.defineProperty(pi,"codes",{value:e,enumerable:!1}),pi.color.close="[39m",pi.bgColor.close="[49m",pi.color.ansi=Di(),pi.color.ansi256=di(),pi.color.ansi16m=fi(),pi.bgColor.ansi=Di(10),pi.bgColor.ansi256=di(10),pi.bgColor.ansi16m=fi(10),Object.defineProperties(pi,{rgbToAnsi256:{value:(e,t,r)=>e===t&&t===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5),enumerable:!1},hexToRgb:{value(e){const t=/[a-f\d]{6}|[a-f\d]{3}/i.exec(e.toString(16));if(!t)return[0,0,0];let[r]=t;3===r.length&&(r=[...r].map((e=>e+e)).join(""));const i=Number.parseInt(r,16);return[i>>16&255,i>>8&255,255&i]},enumerable:!1},hexToAnsi256:{value:e=>pi.rgbToAnsi256(...pi.hexToRgb(e)),enumerable:!1},ansi256ToAnsi:{value(e){if(e<8)return 30+e;if(e<16)return e-8+90;let t,r,i;if(e>=232)t=(10*(e-232)+8)/255,r=t,i=t;else{const n=(e-=16)%36;t=Math.floor(e/36)/5,r=Math.floor(n/6)/5,i=n%6/5}const n=2*Math.max(t,r,i);if(0===n)return 30;let s=30+(Math.round(i)<<2|Math.round(r)<<1|Math.round(t));return 2===n&&(s+=60),s},enumerable:!1},rgbToAnsi:{value:(e,t,r)=>pi.ansi256ToAnsi(pi.rgbToAnsi256(e,t,r)),enumerable:!1},hexToAnsi:{value:e=>pi.ansi256ToAnsi(pi.hexToAnsi256(e)),enumerable:!1}}),pi}();function Ei(e,r=(globalThis.Deno?globalThis.Deno.args:t.argv)){const i=e.startsWith("-")?"":1===e.length?"-":"--",n=r.indexOf(i+e),s=r.indexOf("--");return-1!==n&&(-1===s||n<s)}const{env:Ai}=t;let _i;function Fi(e,{streamIsTTY:r,sniffFlags:i=!0}={}){const n=function(){if("FORCE_COLOR"in Ai)return"true"===Ai.FORCE_COLOR?1:"false"===Ai.FORCE_COLOR?0:0===Ai.FORCE_COLOR.length?1:Math.min(Number.parseInt(Ai.FORCE_COLOR,10),3)}();void 0!==n&&(_i=n);const s=i?_i:n;if(0===s)return 0;if(i){if(Ei("color=16m")||Ei("color=full")||Ei("color=truecolor"))return 3;if(Ei("color=256"))return 2}if("TF_BUILD"in Ai&&"AGENT_NAME"in Ai)return 1;if(e&&!r&&void 0===s)return 0;const o=s||0;if("dumb"===Ai.TERM)return o;if("win32"===t.platform){const e=u.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in Ai)return"GITHUB_ACTIONS"in Ai||"GITEA_ACTIONS"in Ai?3:["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some((e=>e in Ai))||"codeship"===Ai.CI_NAME?1:o;if("TEAMCITY_VERSION"in Ai)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Ai.TEAMCITY_VERSION)?1:0;if("truecolor"===Ai.COLORTERM)return 3;if("xterm-kitty"===Ai.TERM)return 3;if("TERM_PROGRAM"in Ai){const e=Number.parseInt((Ai.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Ai.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Ai.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Ai.TERM)||"COLORTERM"in Ai?1:o}function mi(e,t={}){return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(Fi(e,{streamIsTTY:e&&e.isTTY,...t}))}Ei("no-color")||Ei("no-colors")||Ei("color=false")||Ei("color=never")?_i=0:(Ei("color")||Ei("colors")||Ei("color=true")||Ei("color=always"))&&(_i=1);const Ci={stdout:mi({isTTY:a.isatty(1)}),stderr:mi({isTTY:a.isatty(2)})};function yi(e,t,r){let i=e.indexOf(t);if(-1===i)return e;const n=t.length;let s=0,o="";do{o+=e.slice(s,i)+t+r,s=i+n,i=e.indexOf(t,s)}while(-1!==i);return o+=e.slice(s),o}const{stdout:bi,stderr:wi}=Ci,vi=Symbol("GENERATOR"),Bi=Symbol("STYLER"),Si=Symbol("IS_EMPTY"),Ii=["ansi","ansi","ansi256","ansi16m"],ki=Object.create(null),Ri=e=>{const t=(...e)=>e.join(" ");return((e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const r=bi?bi.level:0;e.level=void 0===t.level?r:t.level})(t,e),Object.setPrototypeOf(t,Ti.prototype),t};function Ti(e){return Ri(e)}Object.setPrototypeOf(Ti.prototype,Function.prototype);for(const[SE,IE]of Object.entries(gi))ki[SE]={get(){const e=xi(this,Li(IE.open,IE.close,this[Bi]),this[Si]);return Object.defineProperty(this,SE,{value:e}),e}};ki.visible={get(){const e=xi(this,this[Bi],!0);return Object.defineProperty(this,"visible",{value:e}),e}};const Oi=(e,t,r,...i)=>"rgb"===e?"ansi16m"===t?gi[r].ansi16m(...i):"ansi256"===t?gi[r].ansi256(gi.rgbToAnsi256(...i)):gi[r].ansi(gi.rgbToAnsi(...i)):"hex"===e?Oi("rgb",t,r,...gi.hexToRgb(...i)):gi[r][e](...i),Ni=["rgb","hex","ansi256"];for(const kE of Ni){ki[kE]={get(){const{level:e}=this;return function(...t){const r=Li(Oi(kE,Ii[e],"color",...t),gi.color.close,this[Bi]);return xi(this,r,this[Si])}}};ki["bg"+kE[0].toUpperCase()+kE.slice(1)]={get(){const{level:e}=this;return function(...t){const r=Li(Oi(kE,Ii[e],"bgColor",...t),gi.bgColor.close,this[Bi]);return xi(this,r,this[Si])}}}}const Pi=Object.defineProperties((()=>{}),{...ki,level:{enumerable:!0,get(){return this[vi].level},set(e){this[vi].level=e}}}),Li=(e,t,r)=>{let i,n;return void 0===r?(i=e,n=t):(i=r.openAll+e,n=t+r.closeAll),{open:e,close:t,openAll:i,closeAll:n,parent:r}},xi=(e,t,r)=>{const i=(...e)=>Ui(i,1===e.length?""+e[0]:e.join(" "));return Object.setPrototypeOf(i,Pi),i[vi]=e,i[Bi]=t,i[Si]=r,i},Ui=(e,t)=>{if(e.level<=0||!t)return e[Si]?"":t;let r=e[Bi];if(void 0===r)return t;const{openAll:i,closeAll:n}=r;if(t.includes(""))for(;void 0!==r;)t=yi(t,r.close,r.open),r=r.parent;const s=t.indexOf("\n");return-1!==s&&(t=function(e,t,r,i){let n=0,s="";do{const o="\r"===e[i-1];s+=e.slice(n,o?i-1:i)+t+(o?"\r\n":"\n")+r,n=i+1,i=e.indexOf("\n",n)}while(-1!==i);return s+=e.slice(n),s}(t,n,i,s)),i+t+n};Object.defineProperties(Ti.prototype,ki);const Mi=Ti();Ti({level:wi?wi.level:0});const Hi=(e,t,r,i)=>{if("length"===r||"prototype"===r)return;if("arguments"===r||"caller"===r)return;const n=Object.getOwnPropertyDescriptor(e,r),s=Object.getOwnPropertyDescriptor(t,r);!Qi(n,s)&&i||Object.defineProperty(e,r,s)},Qi=function(e,t){return void 0===e||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},$i=(e,t)=>`/* Wrapped ${e}*/\n${t}`,Wi=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Ki=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name");function qi(e,t,{ignoreNonConfigurable:r=!1}={}){const{name:i}=e;for(const i of Reflect.ownKeys(t))Hi(e,t,i,r);return((e,t)=>{const r=Object.getPrototypeOf(t);r!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,r)})(e,t),((e,t,r)=>{const i=""===r?"":`with ${r.trim()}() `,n=$i.bind(null,i,t.toString());Object.defineProperty(n,"name",Ki);const{writable:s,enumerable:o,configurable:u}=Wi;Object.defineProperty(e,"toString",{value:n,writable:s,enumerable:o,configurable:u})})(e,t,i),e}const ji=new WeakMap,Gi=(e,t={})=>{if("function"!=typeof e)throw new TypeError("Expected a function");let r,i=0;const n=e.displayName||e.name||"<anonymous>",s=function(...o){if(ji.set(s,++i),1===i)r=e.apply(this,o),e=void 0;else if(!0===t.throw)throw new Error(`Function \`${n}\` can only be called once`);return r};return qi(s,e),ji.set(s,i),s};Gi.callCount=e=>{if(!ji.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return ji.get(e)};const Yi=[];Yi.push("SIGHUP","SIGINT","SIGTERM"),"win32"!==process.platform&&Yi.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),"linux"===process.platform&&Yi.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT");const Xi=e=>!!e&&"object"==typeof e&&"function"==typeof e.removeListener&&"function"==typeof e.emit&&"function"==typeof e.reallyExit&&"function"==typeof e.listeners&&"function"==typeof e.kill&&"number"==typeof e.pid&&"function"==typeof e.on,Vi=Symbol.for("signal-exit emitter"),zi=globalThis,Ji=Object.defineProperty.bind(Object);class Zi{emitted={afterExit:!1,exit:!1};listeners={afterExit:[],exit:[]};count=0;id=Math.random();constructor(){if(zi[Vi])return zi[Vi];Ji(zi,Vi,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(e,t){this.listeners[e].push(t)}removeListener(e,t){const r=this.listeners[e],i=r.indexOf(t);-1!==i&&(0===i&&1===r.length?r.length=0:r.splice(i,1))}emit(e,t,r){if(this.emitted[e])return!1;this.emitted[e]=!0;let i=!1;for(const n of this.listeners[e])i=!0===n(t,r)||i;return"exit"===e&&(i=this.emit("afterExit",t,r)||i),i}}class en{}const tn=globalThis.process,{onExit:rn,load:nn,unload:sn}=(on=Xi(tn)?new class extends en{#e="win32"===tn.platform?"SIGINT":"SIGHUP";#t=new Zi;#r;#i;#n;#s={};#o=!1;constructor(e){super(),this.#r=e,this.#s={};for(const t of Yi)this.#s[t]=()=>{const r=this.#r.listeners(t);let{count:i}=this.#t;const n=e;if("object"==typeof n.__signal_exit_emitter__&&"number"==typeof n.__signal_exit_emitter__.count&&(i+=n.__signal_exit_emitter__.count),r.length===i){this.unload();const r=this.#t.emit("exit",null,t),i="SIGHUP"===t?this.#e:t;r||e.kill(e.pid,i)}};this.#n=e.reallyExit,this.#i=e.emit}onExit(e,t){if(!Xi(this.#r))return()=>{};!1===this.#o&&this.load();const r=t?.alwaysLast?"afterExit":"exit";return this.#t.on(r,e),()=>{this.#t.removeListener(r,e),0===this.#t.listeners.exit.length&&0===this.#t.listeners.afterExit.length&&this.unload()}}load(){if(!this.#o){this.#o=!0,this.#t.count+=1;for(const e of Yi)try{const t=this.#s[e];t&&this.#r.on(e,t)}catch(e){}this.#r.emit=(e,...t)=>this.#u(e,...t),this.#r.reallyExit=e=>this.#a(e)}}unload(){this.#o&&(this.#o=!1,Yi.forEach((e=>{const t=this.#s[e];if(!t)throw new Error("Listener not defined for signal: "+e);try{this.#r.removeListener(e,t)}catch(e){}})),this.#r.emit=this.#i,this.#r.reallyExit=this.#n,this.#t.count-=1)}#a(e){return Xi(this.#r)?(this.#r.exitCode=e||0,this.#t.emit("exit",this.#r.exitCode,null),this.#n.call(this.#r,this.#r.exitCode)):0}#u(e,...t){const r=this.#i;if("exit"===e&&Xi(this.#r)){"number"==typeof t[0]&&(this.#r.exitCode=t[0]);const i=r.call(this.#r,e,...t);return this.#t.emit("exit",this.#r.exitCode,null),i}return r.call(this.#r,e,...t)}}(tn):new class extends en{onExit(){return()=>{}}load(){}unload(){}},{onExit:(e,t)=>on.onExit(e,t),load:()=>on.load(),unload:()=>on.unload()});var on;const un=t.stderr.isTTY?t.stderr:t.stdout.isTTY?t.stdout:void 0,an=un?Gi((()=>{rn((()=>{un.write("[?25h")}),{alwaysLast:!0})})):()=>{};let hn=!1;const cn={show:(e=t.stderr)=>{e.isTTY&&(hn=!1,e.write("[?25h"))},hide:(e=t.stderr)=>{e.isTTY&&(an(),hn=!0,e.write("[?25l"))},toggle:(e,t)=>{void 0!==e&&(hn=e),hn?cn.show(t):cn.hide(t)}};var ln={dots:{interval:80,frames:["⠋","⠙","⠹","⠸","⠼","⠴","⠦","⠧","⠇","⠏"]},dots2:{interval:80,frames:["⣾","⣽","⣻","⢿","⡿","⣟","⣯","⣷"]},dots3:{interval:80,frames:["⠋","⠙","⠚","⠞","⠖","⠦","⠴","⠲","⠳","⠓"]},dots4:{interval:80,frames:["⠄","⠆","⠇","⠋","⠙","⠸","⠰","⠠","⠰","⠸","⠙","⠋","⠇","⠆"]},dots5:{interval:80,frames:["⠋","⠙","⠚","⠒","⠂","⠂","⠒","⠲","⠴","⠦","⠖","⠒","⠐","⠐","⠒","⠓","⠋"]},dots6:{interval:80,frames:["⠁","⠉","⠙","⠚","⠒","⠂","⠂","⠒","⠲","⠴","⠤","⠄","⠄","⠤","⠴","⠲","⠒","⠂","⠂","⠒","⠚","⠙","⠉","⠁"]},dots7:{interval:80,frames:["⠈","⠉","⠋","⠓","⠒","⠐","⠐","⠒","⠖","⠦","⠤","⠠","⠠","⠤","⠦","⠖","⠒","⠐","⠐","⠒","⠓","⠋","⠉","⠈"]},dots8:{interval:80,frames:["⠁","⠁","⠉","⠙","⠚","⠒","⠂","⠂","⠒","⠲","⠴","⠤","⠄","⠄","⠤","⠠","⠠","⠤","⠦","⠖","⠒","⠐","⠐","⠒","⠓","⠋","⠉","⠈","⠈"]},dots9:{interval:80,frames:["⢹","⢺","⢼","⣸","⣇","⡧","⡗","⡏"]},dots10:{interval:80,frames:["⢄","⢂","⢁","⡁","⡈","⡐","⡠"]},dots11:{interval:100,frames:["⠁","⠂","⠄","⡀","⢀","⠠","⠐","⠈"]},dots12:{interval:80,frames:["⢀⠀","⡀⠀","⠄⠀","⢂⠀","⡂⠀","⠅⠀","⢃⠀","⡃⠀","⠍⠀","⢋⠀","⡋⠀","⠍⠁","⢋⠁","⡋⠁","⠍⠉","⠋⠉","⠋⠉","⠉⠙","⠉⠙","⠉⠩","⠈⢙","⠈⡙","⢈⠩","⡀⢙","⠄⡙","⢂⠩","⡂⢘","⠅⡘","⢃⠨","⡃⢐","⠍⡐","⢋⠠","⡋⢀","⠍⡁","⢋⠁","⡋⠁","⠍⠉","⠋⠉","⠋⠉","⠉⠙","⠉⠙","⠉⠩","⠈⢙","⠈⡙","⠈⠩","⠀⢙","⠀⡙","⠀⠩","⠀⢘","⠀⡘","⠀⠨","⠀⢐","⠀⡐","⠀⠠","⠀⢀","⠀⡀"]},dots13:{interval:80,frames:["⣼","⣹","⢻","⠿","⡟","⣏","⣧","⣶"]},dots8Bit:{interval:80,frames:["⠀","⠁","⠂","⠃","⠄","⠅","⠆","⠇","⡀","⡁","⡂","⡃","⡄","⡅","⡆","⡇","⠈","⠉","⠊","⠋","⠌","⠍","⠎","⠏","⡈","⡉","⡊","⡋","⡌","⡍","⡎","⡏","⠐","⠑","⠒","⠓","⠔","⠕","⠖","⠗","⡐","⡑","⡒","⡓","⡔","⡕","⡖","⡗","⠘","⠙","⠚","⠛","⠜","⠝","⠞","⠟","⡘","⡙","⡚","⡛","⡜","⡝","⡞","⡟","⠠","⠡","⠢","⠣","⠤","⠥","⠦","⠧","⡠","⡡","⡢","⡣","⡤","⡥","⡦","⡧","⠨","⠩","⠪","⠫","⠬","⠭","⠮","⠯","⡨","⡩","⡪","⡫","⡬","⡭","⡮","⡯","⠰","⠱","⠲","⠳","⠴","⠵","⠶","⠷","⡰","⡱","⡲","⡳","⡴","⡵","⡶","⡷","⠸","⠹","⠺","⠻","⠼","⠽","⠾","⠿","⡸","⡹","⡺","⡻","⡼","⡽","⡾","⡿","⢀","⢁","⢂","⢃","⢄","⢅","⢆","⢇","⣀","⣁","⣂","⣃","⣄","⣅","⣆","⣇","⢈","⢉","⢊","⢋","⢌","⢍","⢎","⢏","⣈","⣉","⣊","⣋","⣌","⣍","⣎","⣏","⢐","⢑","⢒","⢓","⢔","⢕","⢖","⢗","⣐","⣑","⣒","⣓","⣔","⣕","⣖","⣗","⢘","⢙","⢚","⢛","⢜","⢝","⢞","⢟","⣘","⣙","⣚","⣛","⣜","⣝","⣞","⣟","⢠","⢡","⢢","⢣","⢤","⢥","⢦","⢧","⣠","⣡","⣢","⣣","⣤","⣥","⣦","⣧","⢨","⢩","⢪","⢫","⢬","⢭","⢮","⢯","⣨","⣩","⣪","⣫","⣬","⣭","⣮","⣯","⢰","⢱","⢲","⢳","⢴","⢵","⢶","⢷","⣰","⣱","⣲","⣳","⣴","⣵","⣶","⣷","⢸","⢹","⢺","⢻","⢼","⢽","⢾","⢿","⣸","⣹","⣺","⣻","⣼","⣽","⣾","⣿"]},sand:{interval:80,frames:["⠁","⠂","⠄","⡀","⡈","⡐","⡠","⣀","⣁","⣂","⣄","⣌","⣔","⣤","⣥","⣦","⣮","⣶","⣷","⣿","⡿","⠿","⢟","⠟","⡛","⠛","⠫","⢋","⠋","⠍","⡉","⠉","⠑","⠡","⢁"]},line:{interval:130,frames:["-","\\","|","/"]},line2:{interval:100,frames:["⠂","-","–","—","–","-"]},pipe:{interval:100,frames:["┤","┘","┴","└","├","┌","┬","┐"]},simpleDots:{interval:400,frames:[".  ",".. ","...","   "]},simpleDotsScrolling:{interval:200,frames:[".  ",".. ","..."," ..","  .","   "]},star:{interval:70,frames:["✶","✸","✹","✺","✹","✷"]},star2:{interval:80,frames:["+","x","*"]},flip:{interval:70,frames:["_","_","_","-","`","`","'","´","-","_","_","_"]},hamburger:{interval:100,frames:["☱","☲","☴"]},growVertical:{interval:120,frames:["▁","▃","▄","▅","▆","▇","▆","▅","▄","▃"]},growHorizontal:{interval:120,frames:["▏","▎","▍","▌","▋","▊","▉","▊","▋","▌","▍","▎"]},balloon:{interval:140,frames:[" ",".","o","O","@","*"," "]},balloon2:{interval:120,frames:[".","o","O","°","O","o","."]},noise:{interval:100,frames:["▓","▒","░"]},bounce:{interval:120,frames:["⠁","⠂","⠄","⠂"]},boxBounce:{interval:120,frames:["▖","▘","▝","▗"]},boxBounce2:{interval:100,frames:["▌","▀","▐","▄"]},triangle:{interval:50,frames:["◢","◣","◤","◥"]},binary:{interval:80,frames:["010010","001100","100101","111010","111101","010111","101011","111000","110011","110101"]},arc:{interval:100,frames:["◜","◠","◝","◞","◡","◟"]},circle:{interval:120,frames:["◡","⊙","◠"]},squareCorners:{interval:180,frames:["◰","◳","◲","◱"]},circleQuarters:{interval:120,frames:["◴","◷","◶","◵"]},circleHalves:{interval:50,frames:["◐","◓","◑","◒"]},squish:{interval:100,frames:["╫","╪"]},toggle:{interval:250,frames:["⊶","⊷"]},toggle2:{interval:80,frames:["▫","▪"]},toggle3:{interval:120,frames:["□","■"]},toggle4:{interval:100,frames:["■","□","▪","▫"]},toggle5:{interval:100,frames:["▮","▯"]},toggle6:{interval:300,frames:["ဝ","၀"]},toggle7:{interval:80,frames:["⦾","⦿"]},toggle8:{interval:100,frames:["◍","◌"]},toggle9:{interval:100,frames:["◉","◎"]},toggle10:{interval:100,frames:["㊂","㊀","㊁"]},toggle11:{interval:50,frames:["⧇","⧆"]},toggle12:{interval:120,frames:["☗","☖"]},toggle13:{interval:80,frames:["=","*","-"]},arrow:{interval:100,frames:["←","↖","↑","↗","→","↘","↓","↙"]},arrow2:{interval:80,frames:["⬆️ ","↗️ ","➡️ ","↘️ ","⬇️ ","↙️ ","⬅️ ","↖️ "]},arrow3:{interval:120,frames:["▹▹▹▹▹","▸▹▹▹▹","▹▸▹▹▹","▹▹▸▹▹","▹▹▹▸▹","▹▹▹▹▸"]},bouncingBar:{interval:80,frames:["[    ]","[=   ]","[==  ]","[=== ]","[====]","[ ===]","[  ==]","[   =]","[    ]","[   =]","[  ==]","[ ===]","[====]","[=== ]","[==  ]","[=   ]"]},bouncingBall:{interval:80,frames:["( ●    )","(  ●   )","(   ●  )","(    ● )","(     ●)","(    ● )","(   ●  )","(  ●   )","( ●    )","(●     )"]},smiley:{interval:200,frames:["😄 ","😝 "]},monkey:{interval:300,frames:["🙈 ","🙈 ","🙉 ","🙊 "]},hearts:{interval:100,frames:["💛 ","💙 ","💜 ","💚 ","❤️ "]},clock:{interval:100,frames:["🕛 ","🕐 ","🕑 ","🕒 ","🕓 ","🕔 ","🕕 ","🕖 ","🕗 ","🕘 ","🕙 ","🕚 "]},earth:{interval:180,frames:["🌍 ","🌎 ","🌏 "]},material:{interval:17,frames:["█▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁","██▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁","███▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁","████▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁","██████▁▁▁▁▁▁▁▁▁▁▁▁▁▁","██████▁▁▁▁▁▁▁▁▁▁▁▁▁▁","███████▁▁▁▁▁▁▁▁▁▁▁▁▁","████████▁▁▁▁▁▁▁▁▁▁▁▁","█████████▁▁▁▁▁▁▁▁▁▁▁","█████████▁▁▁▁▁▁▁▁▁▁▁","██████████▁▁▁▁▁▁▁▁▁▁","███████████▁▁▁▁▁▁▁▁▁","█████████████▁▁▁▁▁▁▁","██████████████▁▁▁▁▁▁","██████████████▁▁▁▁▁▁","▁██████████████▁▁▁▁▁","▁██████████████▁▁▁▁▁","▁██████████████▁▁▁▁▁","▁▁██████████████▁▁▁▁","▁▁▁██████████████▁▁▁","▁▁▁▁█████████████▁▁▁","▁▁▁▁██████████████▁▁","▁▁▁▁██████████████▁▁","▁▁▁▁▁██████████████▁","▁▁▁▁▁██████████████▁","▁▁▁▁▁██████████████▁","▁▁▁▁▁▁██████████████","▁▁▁▁▁▁██████████████","▁▁▁▁▁▁▁█████████████","▁▁▁▁▁▁▁█████████████","▁▁▁▁▁▁▁▁████████████","▁▁▁▁▁▁▁▁████████████","▁▁▁▁▁▁▁▁▁███████████","▁▁▁▁▁▁▁▁▁███████████","▁▁▁▁▁▁▁▁▁▁██████████","▁▁▁▁▁▁▁▁▁▁██████████","▁▁▁▁▁▁▁▁▁▁▁▁████████","▁▁▁▁▁▁▁▁▁▁▁▁▁███████","▁▁▁▁▁▁▁▁▁▁▁▁▁▁██████","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁█████","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁█████","█▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁████","██▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁███","██▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁███","███▁▁▁▁▁▁▁▁▁▁▁▁▁▁███","████▁▁▁▁▁▁▁▁▁▁▁▁▁▁██","█████▁▁▁▁▁▁▁▁▁▁▁▁▁▁█","█████▁▁▁▁▁▁▁▁▁▁▁▁▁▁█","██████▁▁▁▁▁▁▁▁▁▁▁▁▁█","████████▁▁▁▁▁▁▁▁▁▁▁▁","█████████▁▁▁▁▁▁▁▁▁▁▁","█████████▁▁▁▁▁▁▁▁▁▁▁","█████████▁▁▁▁▁▁▁▁▁▁▁","█████████▁▁▁▁▁▁▁▁▁▁▁","███████████▁▁▁▁▁▁▁▁▁","████████████▁▁▁▁▁▁▁▁","████████████▁▁▁▁▁▁▁▁","██████████████▁▁▁▁▁▁","██████████████▁▁▁▁▁▁","▁██████████████▁▁▁▁▁","▁██████████████▁▁▁▁▁","▁▁▁█████████████▁▁▁▁","▁▁▁▁▁████████████▁▁▁","▁▁▁▁▁████████████▁▁▁","▁▁▁▁▁▁███████████▁▁▁","▁▁▁▁▁▁▁▁█████████▁▁▁","▁▁▁▁▁▁▁▁█████████▁▁▁","▁▁▁▁▁▁▁▁▁█████████▁▁","▁▁▁▁▁▁▁▁▁█████████▁▁","▁▁▁▁▁▁▁▁▁▁█████████▁","▁▁▁▁▁▁▁▁▁▁▁████████▁","▁▁▁▁▁▁▁▁▁▁▁████████▁","▁▁▁▁▁▁▁▁▁▁▁▁███████▁","▁▁▁▁▁▁▁▁▁▁▁▁███████▁","▁▁▁▁▁▁▁▁▁▁▁▁▁███████","▁▁▁▁▁▁▁▁▁▁▁▁▁███████","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁█████","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁████","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁████","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁████","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁███","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁███","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁██","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁██","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁██","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁█","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁█","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁█","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁"]},moon:{interval:80,frames:["🌑 ","🌒 ","🌓 ","🌔 ","🌕 ","🌖 ","🌗 ","🌘 "]},runner:{interval:140,frames:["🚶 ","🏃 "]},pong:{interval:80,frames:["▐⠂       ▌","▐⠈       ▌","▐ ⠂      ▌","▐ ⠠      ▌","▐  ⡀     ▌","▐  ⠠     ▌","▐   ⠂    ▌","▐   ⠈    ▌","▐    ⠂   ▌","▐    ⠠   ▌","▐     ⡀  ▌","▐     ⠠  ▌","▐      ⠂ ▌","▐      ⠈ ▌","▐       ⠂▌","▐       ⠠▌","▐       ⡀▌","▐      ⠠ ▌","▐      ⠂ ▌","▐     ⠈  ▌","▐     ⠂  ▌","▐    ⠠   ▌","▐    ⡀   ▌","▐   ⠠    ▌","▐   ⠂    ▌","▐  ⠈     ▌","▐  ⠂     ▌","▐ ⠠      ▌","▐ ⡀      ▌","▐⠠       ▌"]},shark:{interval:120,frames:["▐|\\____________▌","▐_|\\___________▌","▐__|\\__________▌","▐___|\\_________▌","▐____|\\________▌","▐_____|\\_______▌","▐______|\\______▌","▐_______|\\_____▌","▐________|\\____▌","▐_________|\\___▌","▐__________|\\__▌","▐___________|\\_▌","▐____________|\\▌","▐____________/|▌","▐___________/|_▌","▐__________/|__▌","▐_________/|___▌","▐________/|____▌","▐_______/|_____▌","▐______/|______▌","▐_____/|_______▌","▐____/|________▌","▐___/|_________▌","▐__/|__________▌","▐_/|___________▌","▐/|____________▌"]},dqpb:{interval:100,frames:["d","q","p","b"]},weather:{interval:100,frames:["☀️ ","☀️ ","☀️ ","🌤 ","⛅️ ","🌥 ","☁️ ","🌧 ","🌨 ","🌧 ","🌨 ","🌧 ","🌨 ","⛈ ","🌨 ","🌧 ","🌨 ","☁️ ","🌥 ","⛅️ ","🌤 ","☀️ ","☀️ "]},christmas:{interval:400,frames:["🌲","🎄"]},grenade:{interval:80,frames:["،  ","′  "," ´ "," ‾ ","  ⸌","  ⸊","  |","  ⁎","  ⁕"," ෴ ","  ⁓","   ","   ","   "]},point:{interval:125,frames:["∙∙∙","●∙∙","∙●∙","∙∙●","∙∙∙"]},layer:{interval:150,frames:["-","=","≡"]},betaWave:{interval:80,frames:["ρββββββ","βρβββββ","ββρββββ","βββρβββ","ββββρββ","βββββρβ","ββββββρ"]},fingerDance:{interval:160,frames:["🤘 ","🤟 ","🖖 ","✋ ","🤚 ","👆 "]},fistBump:{interval:80,frames:["🤜　　　　🤛 ","🤜　　　　🤛 ","🤜　　　　🤛 ","　🤜　　🤛　 ","　　🤜🤛　　 ","　🤜✨🤛　　 ","🤜　✨　🤛　 "]},soccerHeader:{interval:80,frames:[" 🧑⚽️       🧑 ","🧑  ⚽️      🧑 ","🧑   ⚽️     🧑 ","🧑    ⚽️    🧑 ","🧑     ⚽️   🧑 ","🧑      ⚽️  🧑 ","🧑       ⚽️🧑  ","🧑      ⚽️  🧑 ","🧑     ⚽️   🧑 ","🧑    ⚽️    🧑 ","🧑   ⚽️     🧑 ","🧑  ⚽️      🧑 "]},mindblown:{interval:160,frames:["😐 ","😐 ","😮 ","😮 ","😦 ","😦 ","😧 ","😧 ","🤯 ","💥 ","✨ ","　 ","　 ","　 "]},speaker:{interval:160,frames:["🔈 ","🔉 ","🔊 ","🔉 "]},orangePulse:{interval:100,frames:["🔸 ","🔶 ","🟠 ","🟠 ","🔶 "]},bluePulse:{interval:100,frames:["🔹 ","🔷 ","🔵 ","🔵 ","🔷 "]},orangeBluePulse:{interval:100,frames:["🔸 ","🔶 ","🟠 ","🟠 ","🔶 ","🔹 ","🔷 ","🔵 ","🔵 ","🔷 "]},timeTravel:{interval:100,frames:["🕛 ","🕚 ","🕙 ","🕘 ","🕗 ","🕖 ","🕕 ","🕔 ","🕓 ","🕒 ","🕑 ","🕐 "]},aesthetic:{interval:80,frames:["▰▱▱▱▱▱▱","▰▰▱▱▱▱▱","▰▰▰▱▱▱▱","▰▰▰▰▱▱▱","▰▰▰▰▰▱▱","▰▰▰▰▰▰▱","▰▰▰▰▰▰▰","▰▱▱▱▱▱▱"]},dwarfFortress:{interval:80,frames:[" ██████£££  ","☺██████£££  ","☺██████£££  ","☺▓█████£££  ","☺▓█████£££  ","☺▒█████£££  ","☺▒█████£££  ","☺░█████£££  ","☺░█████£££  ","☺ █████£££  "," ☺█████£££  "," ☺█████£££  "," ☺▓████£££  "," ☺▓████£££  "," ☺▒████£££  "," ☺▒████£££  "," ☺░████£££  "," ☺░████£££  "," ☺ ████£££  ","  ☺████£££  ","  ☺████£££  ","  ☺▓███£££  ","  ☺▓███£££  ","  ☺▒███£££  ","  ☺▒███£££  ","  ☺░███£££  ","  ☺░███£££  ","  ☺ ███£££  ","   ☺███£££  ","   ☺███£££  ","   ☺▓██£££  ","   ☺▓██£££  ","   ☺▒██£££  ","   ☺▒██£££  ","   ☺░██£££  ","   ☺░██£££  ","   ☺ ██£££  ","    ☺██£££  ","    ☺██£££  ","    ☺▓█£££  ","    ☺▓█£££  ","    ☺▒█£££  ","    ☺▒█£££  ","    ☺░█£££  ","    ☺░█£££  ","    ☺ █£££  ","     ☺█£££  ","     ☺█£££  ","     ☺▓£££  ","     ☺▓£££  ","     ☺▒£££  ","     ☺▒£££  ","     ☺░£££  ","     ☺░£££  ","     ☺ £££  ","      ☺£££  ","      ☺£££  ","      ☺▓££  ","      ☺▓££  ","      ☺▒££  ","      ☺▒££  ","      ☺░££  ","      ☺░££  ","      ☺ ££  ","       ☺££  ","       ☺££  ","       ☺▓£  ","       ☺▓£  ","       ☺▒£  ","       ☺▒£  ","       ☺░£  ","       ☺░£  ","       ☺ £  ","        ☺£  ","        ☺£  ","        ☺▓  ","        ☺▓  ","        ☺▒  ","        ☺▒  ","        ☺░  ","        ☺░  ","        ☺   ","        ☺  &","        ☺ ☼&","       ☺ ☼ &","       ☺☼  &","      ☺☼  & ","      ‼   & ","     ☺   &  ","    ‼    &  ","   ☺    &   ","  ‼     &   "," ☺     &    ","‼      &    ","      &     ","      &     ","     &   ░  ","     &   ▒  ","    &    ▓  ","    &    £  ","   &    ░£  ","   &    ▒£  ","  &     ▓£  ","  &     ££  "," &     ░££  "," &     ▒££  ","&      ▓££  ","&      £££  ","      ░£££  ","      ▒£££  ","      ▓£££  ","      █£££  ","     ░█£££  ","     ▒█£££  ","     ▓█£££  ","     ██£££  ","    ░██£££  ","    ▒██£££  ","    ▓██£££  ","    ███£££  ","   ░███£££  ","   ▒███£££  ","   ▓███£££  ","   ████£££  ","  ░████£££  ","  ▒████£££  ","  ▓████£££  ","  █████£££  "," ░█████£££  "," ▒█████£££  "," ▓█████£££  "," ██████£££  "," ██████£££  "]}};const Dn=Object.assign({},ln),dn=Object.keys(Dn);Object.defineProperty(Dn,"random",{get(){const e=Math.floor(Math.random()*dn.length),t=dn[e];return Dn[t]}});var fn=v(Dn);const pn={info:Mi.blue("ℹ"),success:Mi.green("✔"),warning:Mi.yellow("⚠"),error:Mi.red("✖")},gn={info:Mi.blue("i"),success:Mi.green("√"),warning:Mi.yellow("‼"),error:Mi.red("×")},En=("win32"!==t.platform?"linux"!==t.env.TERM:Boolean(t.env.CI)||Boolean(t.env.WT_SESSION)||Boolean(t.env.TERMINUS_SUBLIME)||"{cmd::Cmder}"===t.env.ConEmuTask||"Terminus-Sublime"===t.env.TERM_PROGRAM||"vscode"===t.env.TERM_PROGRAM||"xterm-256color"===t.env.TERM||"alacritty"===t.env.TERM||"JetBrains-JediTerm"===t.env.TERMINAL_EMULATOR)?pn:gn;const An=function({onlyFirst:e=!1}={}){const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}();function _n(e){if("string"!=typeof e)throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(An,"")}function Fn(e,{ambiguousAsWide:t=!1}={}){return function(e){if(!Number.isSafeInteger(e))throw new TypeError(`Expected a code point, got \`${typeof e}\`.`)}(e),12288===(r=e)||r>=65281&&r<=65376||r>=65504&&r<=65510||function(e){return e>=4352&&e<=4447||8986===e||8987===e||9001===e||9002===e||e>=9193&&e<=9196||9200===e||9203===e||9725===e||9726===e||9748===e||9749===e||e>=9800&&e<=9811||9855===e||9875===e||9889===e||9898===e||9899===e||9917===e||9918===e||9924===e||9925===e||9934===e||9940===e||9962===e||9970===e||9971===e||9973===e||9978===e||9981===e||9989===e||9994===e||9995===e||10024===e||10060===e||10062===e||e>=10067&&e<=10069||10071===e||e>=10133&&e<=10135||10160===e||10175===e||11035===e||11036===e||11088===e||11093===e||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12287||e>=12289&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12591||e>=12593&&e<=12686||e>=12688&&e<=12771||e>=12783&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=94176&&e<=94180||94192===e||94193===e||e>=94208&&e<=100343||e>=100352&&e<=101589||e>=101632&&e<=101640||e>=110576&&e<=110579||e>=110581&&e<=110587||110589===e||110590===e||e>=110592&&e<=110882||110898===e||e>=110928&&e<=110930||110933===e||e>=110948&&e<=110951||e>=110960&&e<=111355||126980===e||127183===e||127374===e||e>=127377&&e<=127386||e>=127488&&e<=127490||e>=127504&&e<=127547||e>=127552&&e<=127560||127568===e||127569===e||e>=127584&&e<=127589||e>=127744&&e<=127776||e>=127789&&e<=127797||e>=127799&&e<=127868||e>=127870&&e<=127891||e>=127904&&e<=127946||e>=127951&&e<=127955||e>=127968&&e<=127984||127988===e||e>=127992&&e<=128062||128064===e||e>=128066&&e<=128252||e>=128255&&e<=128317||e>=128331&&e<=128334||e>=128336&&e<=128359||128378===e||128405===e||128406===e||128420===e||e>=128507&&e<=128591||e>=128640&&e<=128709||128716===e||e>=128720&&e<=128722||e>=128725&&e<=128727||e>=128732&&e<=128735||128747===e||128748===e||e>=128756&&e<=128764||e>=128992&&e<=129003||129008===e||e>=129292&&e<=129338||e>=129340&&e<=129349||e>=129351&&e<=129535||e>=129648&&e<=129660||e>=129664&&e<=129672||e>=129680&&e<=129725||e>=129727&&e<=129733||e>=129742&&e<=129755||e>=129760&&e<=129768||e>=129776&&e<=129784||e>=131072&&e<=196605||e>=196608&&e<=262141}(e)||t&&function(e){return 161===e||164===e||167===e||168===e||170===e||173===e||174===e||e>=176&&e<=180||e>=182&&e<=186||e>=188&&e<=191||198===e||208===e||215===e||216===e||e>=222&&e<=225||230===e||e>=232&&e<=234||236===e||237===e||240===e||242===e||243===e||e>=247&&e<=250||252===e||254===e||257===e||273===e||275===e||283===e||294===e||295===e||299===e||e>=305&&e<=307||312===e||e>=319&&e<=322||324===e||e>=328&&e<=331||333===e||338===e||339===e||358===e||359===e||363===e||462===e||464===e||466===e||468===e||470===e||472===e||474===e||476===e||593===e||609===e||708===e||711===e||e>=713&&e<=715||717===e||720===e||e>=728&&e<=731||733===e||735===e||e>=768&&e<=879||e>=913&&e<=929||e>=931&&e<=937||e>=945&&e<=961||e>=963&&e<=969||1025===e||e>=1040&&e<=1103||1105===e||8208===e||e>=8211&&e<=8214||8216===e||8217===e||8220===e||8221===e||e>=8224&&e<=8226||e>=8228&&e<=8231||8240===e||8242===e||8243===e||8245===e||8251===e||8254===e||8308===e||8319===e||e>=8321&&e<=8324||8364===e||8451===e||8453===e||8457===e||8467===e||8470===e||8481===e||8482===e||8486===e||8491===e||8531===e||8532===e||e>=8539&&e<=8542||e>=8544&&e<=8555||e>=8560&&e<=8569||8585===e||e>=8592&&e<=8601||8632===e||8633===e||8658===e||8660===e||8679===e||8704===e||8706===e||8707===e||8711===e||8712===e||8715===e||8719===e||8721===e||8725===e||8730===e||e>=8733&&e<=8736||8739===e||8741===e||e>=8743&&e<=8748||8750===e||e>=8756&&e<=8759||8764===e||8765===e||8776===e||8780===e||8786===e||8800===e||8801===e||e>=8804&&e<=8807||8810===e||8811===e||8814===e||8815===e||8834===e||8835===e||8838===e||8839===e||8853===e||8857===e||8869===e||8895===e||8978===e||e>=9312&&e<=9449||e>=9451&&e<=9547||e>=9552&&e<=9587||e>=9600&&e<=9615||e>=9618&&e<=9621||9632===e||9633===e||e>=9635&&e<=9641||9650===e||9651===e||9654===e||9655===e||9660===e||9661===e||9664===e||9665===e||e>=9670&&e<=9672||9675===e||e>=9678&&e<=9681||e>=9698&&e<=9701||9711===e||9733===e||9734===e||9737===e||9742===e||9743===e||9756===e||9758===e||9792===e||9794===e||9824===e||9825===e||e>=9827&&e<=9829||e>=9831&&e<=9834||9836===e||9837===e||9839===e||9886===e||9887===e||9919===e||e>=9926&&e<=9933||e>=9935&&e<=9939||e>=9941&&e<=9953||9955===e||9960===e||9961===e||e>=9963&&e<=9969||9972===e||e>=9974&&e<=9977||9979===e||9980===e||9982===e||9983===e||10045===e||e>=10102&&e<=10111||e>=11094&&e<=11097||e>=12872&&e<=12879||e>=57344&&e<=63743||e>=65024&&e<=65039||65533===e||e>=127232&&e<=127242||e>=127248&&e<=127277||e>=127280&&e<=127337||e>=127344&&e<=127373||127375===e||127376===e||e>=127387&&e<=127404||e>=917760&&e<=917999||e>=983040&&e<=1048573||e>=1048576&&e<=1114109}(e)?2:1;var r}const mn=new Intl.Segmenter,Cn=/^\p{Default_Ignorable_Code_Point}$/u;function yn(e,t={}){if("string"!=typeof e||0===e.length)return 0;const{ambiguousIsNarrow:r=!0,countAnsiEscapeCodes:i=!1}=t;if(i||(e=_n(e)),0===e.length)return 0;let n=0;const s={ambiguousAsWide:!r};for(const{segment:t}of mn.segment(e)){const e=t.codePointAt(0);e<=31||e>=127&&e<=159||(e>=8203&&e<=8207||65279===e||e>=768&&e<=879||e>=6832&&e<=6911||e>=7616&&e<=7679||e>=8400&&e<=8447||e>=65056&&e<=65071||e>=55296&&e<=57343||e>=65024&&e<=65039||Cn.test(t)||(/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g.test(t)?n+=2:n+=Fn(e,s)))}return n}const bn=new class{#h=0;start(){this.#h++,1===this.#h&&this.#c()}stop(){if(this.#h<=0)throw new Error("`stop` called more times than `start`");this.#h--,0===this.#h&&this.#l()}#c(){"win32"!==t.platform&&t.stdin.isTTY&&(t.stdin.setRawMode(!0),t.stdin.on("data",this.#D),t.stdin.resume())}#l(){t.stdin.isTTY&&(t.stdin.off("data",this.#D),t.stdin.pause(),t.stdin.setRawMode(!1))}#D(e){3===e[0]&&t.emit("SIGINT")}};class wn{#d=0;#f=!1;#p=0;#g=0;#E;#A;#_;#F;#m;#C;#y;#b;#w;#v;#B;color;constructor(e){"string"==typeof e&&(e={text:e}),this.#E={color:"cyan",stream:t.stderr,discardStdin:!0,hideCursor:!0,...e},this.color=this.#E.color,this.spinner=this.#E.spinner,this.#m=this.#E.interval,this.#_=this.#E.stream,this.#C="boolean"==typeof this.#E.isEnabled?this.#E.isEnabled:function({stream:e=process.stdout}={}){return Boolean(e&&e.isTTY&&"dumb"!==process.env.TERM&&!("CI"in process.env))}({stream:this.#_}),this.#y="boolean"==typeof this.#E.isSilent&&this.#E.isSilent,this.text=this.#E.text,this.prefixText=this.#E.prefixText,this.suffixText=this.#E.suffixText,this.indent=this.#E.indent,"test"===t.env.NODE_ENV&&(this._stream=this.#_,this._isEnabled=this.#C,Object.defineProperty(this,"_linesToClear",{get(){return this.#d},set(e){this.#d=e}}),Object.defineProperty(this,"_frameIndex",{get(){return this.#g}}),Object.defineProperty(this,"_lineCount",{get(){return this.#p}}))}get indent(){return this.#b}set indent(e=0){if(!(e>=0&&Number.isInteger(e)))throw new Error("The `indent` option must be an integer from 0 and up");this.#b=e,this.#S()}get interval(){return this.#m??this.#A.interval??100}get spinner(){return this.#A}set spinner(e){if(this.#g=0,this.#m=void 0,"object"==typeof e){if(void 0===e.frames)throw new Error("The given spinner must have a `frames` property");this.#A=e}else if("win32"!==t.platform?"linux"!==t.env.TERM:Boolean(t.env.WT_SESSION)||Boolean(t.env.TERMINUS_SUBLIME)||"{cmd::Cmder}"===t.env.ConEmuTask||"Terminus-Sublime"===t.env.TERM_PROGRAM||"vscode"===t.env.TERM_PROGRAM||"xterm-256color"===t.env.TERM||"alacritty"===t.env.TERM||"JetBrains-JediTerm"===t.env.TERMINAL_EMULATOR)if(void 0===e)this.#A=fn.dots;else{if("default"===e||!fn[e])throw new Error(`There is no built-in spinner named '${e}'. See https://github.com/sindresorhus/cli-spinners/blob/main/spinners.json for a full list.`);this.#A=fn[e]}else this.#A=fn.line}get text(){return this.#w}set text(e=""){this.#w=e,this.#S()}get prefixText(){return this.#v}set prefixText(e=""){this.#v=e,this.#S()}get suffixText(){return this.#B}set suffixText(e=""){this.#B=e,this.#S()}get isSpinning(){return void 0!==this.#F}#I(e=this.#v,t=" "){return"string"==typeof e&&""!==e?e+t:"function"==typeof e?e()+t:""}#k(e=this.#B,t=" "){return"string"==typeof e&&""!==e?t+e:"function"==typeof e?t+e():""}#S(){const e=this.#_.columns??80,t=this.#I(this.#v,"-"),r=this.#k(this.#B,"-"),i=" ".repeat(this.#b)+t+"--"+this.#w+"--"+r;this.#p=0;for(const t of _n(i).split("\n"))this.#p+=Math.max(1,Math.ceil(yn(t,{countAnsiEscapeCodes:!0})/e))}get isEnabled(){return this.#C&&!this.#y}set isEnabled(e){if("boolean"!=typeof e)throw new TypeError("The `isEnabled` option must be a boolean");this.#C=e}get isSilent(){return this.#y}set isSilent(e){if("boolean"!=typeof e)throw new TypeError("The `isSilent` option must be a boolean");this.#y=e}frame(){const{frames:e}=this.#A;let t=e[this.#g];this.color&&(t=Mi[this.color](t)),this.#g=++this.#g%e.length;return("string"==typeof this.#v&&""!==this.#v?this.#v+" ":"")+t+("string"==typeof this.text?" "+this.text:"")+("string"==typeof this.#B&&""!==this.#B?" "+this.#B:"")}clear(){if(!this.#C||!this.#_.isTTY)return this;this.#_.cursorTo(0);for(let e=0;e<this.#d;e++)e>0&&this.#_.moveCursor(0,-1),this.#_.clearLine(1);return(this.#b||this.lastIndent!==this.#b)&&this.#_.cursorTo(this.#b),this.lastIndent=this.#b,this.#d=0,this}render(){return this.#y||(this.clear(),this.#_.write(this.frame()),this.#d=this.#p),this}start(e){return e&&(this.text=e),this.#y?this:this.#C?(this.isSpinning||(this.#E.hideCursor&&cn.hide(this.#_),this.#E.discardStdin&&t.stdin.isTTY&&(this.#f=!0,bn.start()),this.render(),this.#F=setInterval(this.render.bind(this),this.interval)),this):(this.text&&this.#_.write(`- ${this.text}\n`),this)}stop(){return this.#C?(clearInterval(this.#F),this.#F=void 0,this.#g=0,this.clear(),this.#E.hideCursor&&cn.show(this.#_),this.#E.discardStdin&&t.stdin.isTTY&&this.#f&&(bn.stop(),this.#f=!1),this):this}succeed(e){return this.stopAndPersist({symbol:En.success,text:e})}fail(e){return this.stopAndPersist({symbol:En.error,text:e})}warn(e){return this.stopAndPersist({symbol:En.warning,text:e})}info(e){return this.stopAndPersist({symbol:En.info,text:e})}stopAndPersist(e={}){if(this.#y)return this;const t=e.prefixText??this.#v,r=this.#I(t," "),i=e.symbol??" ",n=e.text??this.text,s="string"==typeof n?" "+n:"",o=e.suffixText??this.#B,u=r+i+s+this.#k(o," ")+"\n";return this.stop(),this.#_.write(u),this}}const vn=new class{spinner;ln=()=>console.log();withStartLn=e=>{this.ln(),e()};withEndLn=e=>{e(),this.ln()};withBothLn=e=>{this.ln(),e(),this.ln()};warning=e=>{console.warn(`${ui.bgYellow(" WARNING ")} ${ui.yellow(e)}`)};info=e=>{console.log(`${ui.bgCyan(" INFO ")} ${ui.cyan(e)}`)};success=e=>{console.log(`${ui.bgGreen(" SUCCESS ")} ${ui.green(e)}`)};error=e=>{console.error(`${ui.bgRed(" ERROR ")} ${ui.red(e)}`)};warningText=e=>{console.warn(`${ui.yellow(e)}`)};infoText=e=>{console.log(`${ui.cyan(e)}`)};successText=e=>{console.log(`${ui.green(e)}`)};errorText=e=>{console.error(`${ui.red(e)}`)};loading(e,t="yellow"){var r;this.spinner=(r="Loading...",new wn(r)).start(),this.spinner.color=t,this.spinner.text=e}stopLoading(){this.spinner&&this.spinner?.stop()}};var Bn,Sn={exports:{}},In={newInvalidAsn1Error:function(e){var t=new Error;return t.name="InvalidAsn1Error",t.message=e||"",t}},kn={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128},Rn=g,Tn=Rn.Buffer,On={};for(Bn in Rn)Rn.hasOwnProperty(Bn)&&"SlowBuffer"!==Bn&&"Buffer"!==Bn&&(On[Bn]=Rn[Bn]);var Nn=On.Buffer={};for(Bn in Tn)Tn.hasOwnProperty(Bn)&&"allocUnsafe"!==Bn&&"allocUnsafeSlow"!==Bn&&(Nn[Bn]=Tn[Bn]);if(On.Buffer.prototype=Tn.prototype,Nn.from&&Nn.from!==Uint8Array.from||(Nn.from=function(e,t,r){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return Tn(e,t,r)}),Nn.alloc||(Nn.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var i=Tn(e);return t&&0!==t.length?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i}),!On.kStringMaxLength)try{On.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(RE){}On.constants||(On.constants={MAX_LENGTH:On.kMaxLength},On.kStringMaxLength&&(On.constants.MAX_STRING_LENGTH=On.kStringMaxLength));var Pn=On,Ln=p,xn=Pn.Buffer,Un=kn,Mn=In.newInvalidAsn1Error;function Hn(e){if(!e||!xn.isBuffer(e))throw new TypeError("data must be a node Buffer");this._buf=e,this._size=e.length,this._len=0,this._offset=0}Object.defineProperty(Hn.prototype,"length",{enumerable:!0,get:function(){return this._len}}),Object.defineProperty(Hn.prototype,"offset",{enumerable:!0,get:function(){return this._offset}}),Object.defineProperty(Hn.prototype,"remain",{get:function(){return this._size-this._offset}}),Object.defineProperty(Hn.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}}),Hn.prototype.readByte=function(e){if(this._size-this._offset<1)return null;var t=255&this._buf[this._offset];return e||(this._offset+=1),t},Hn.prototype.peek=function(){return this.readByte(!0)},Hn.prototype.readLength=function(e){if(void 0===e&&(e=this._offset),e>=this._size)return null;var t=255&this._buf[e++];if(null===t)return null;if(128&~t)this._len=t;else{if(0===(t&=127))throw Mn("Indefinite length not supported");if(t>4)throw Mn("encoding too long");if(this._size-e<t)return null;this._len=0;for(var r=0;r<t;r++)this._len=(this._len<<8)+(255&this._buf[e++])}return e},Hn.prototype.readSequence=function(e){var t=this.peek();if(null===t)return null;if(void 0!==e&&e!==t)throw Mn("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var r=this.readLength(this._offset+1);return null===r?null:(this._offset=r,t)},Hn.prototype.readInt=function(){return this._readTag(Un.Integer)},Hn.prototype.readBoolean=function(){return 0!==this._readTag(Un.Boolean)},Hn.prototype.readEnumeration=function(){return this._readTag(Un.Enumeration)},Hn.prototype.readString=function(e,t){e||(e=Un.OctetString);var r=this.peek();if(null===r)return null;if(r!==e)throw Mn("Expected 0x"+e.toString(16)+": got 0x"+r.toString(16));var i=this.readLength(this._offset+1);if(null===i)return null;if(this.length>this._size-i)return null;if(this._offset=i,0===this.length)return t?xn.alloc(0):"";var n=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,t?n:n.toString("utf8")},Hn.prototype.readOID=function(e){e||(e=Un.OID);var t=this.readString(e,!0);if(null===t)return null;for(var r=[],i=0,n=0;n<t.length;n++){var s=255&t[n];i<<=7,i+=127&s,128&s||(r.push(i),i=0)}return i=r.shift(),r.unshift(i%40),r.unshift(i/40|0),r.join(".")},Hn.prototype._readTag=function(e){Ln.ok(void 0!==e);var t=this.peek();if(null===t)return null;if(t!==e)throw Mn("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var r=this.readLength(this._offset+1);if(null===r)return null;if(this.length>4)throw Mn("Integer too long: "+this.length);if(this.length>this._size-r)return null;this._offset=r;for(var i=this._buf[this._offset],n=0,s=0;s<this.length;s++)n<<=8,n|=255&this._buf[this._offset++];return 128&~i||4===s||(n-=1<<8*s),n|0};var Qn=Hn,$n=p,Wn=Pn.Buffer,Kn=kn,qn=In.newInvalidAsn1Error,jn={size:1024,growthFactor:8};function Gn(e){var t,r;t=jn,r=e||{},$n.ok(t),$n.equal(typeof t,"object"),$n.ok(r),$n.equal(typeof r,"object"),Object.getOwnPropertyNames(t).forEach((function(e){if(!r[e]){var i=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(r,e,i)}})),e=r,this._buf=Wn.alloc(e.size||1024),this._size=this._buf.length,this._offset=0,this._options=e,this._seq=[]}Object.defineProperty(Gn.prototype,"buffer",{get:function(){if(this._seq.length)throw qn(this._seq.length+" unended sequence(s)");return this._buf.slice(0,this._offset)}}),Gn.prototype.writeByte=function(e){if("number"!=typeof e)throw new TypeError("argument must be a Number");this._ensure(1),this._buf[this._offset++]=e},Gn.prototype.writeInt=function(e,t){if("number"!=typeof e)throw new TypeError("argument must be a Number");"number"!=typeof t&&(t=Kn.Integer);for(var r=4;(!(4286578688&e)||-8388608==(4286578688&e))&&r>1;)r--,e<<=8;if(r>4)throw qn("BER ints cannot be > 0xffffffff");for(this._ensure(2+r),this._buf[this._offset++]=t,this._buf[this._offset++]=r;r-- >0;)this._buf[this._offset++]=(4278190080&e)>>>24,e<<=8},Gn.prototype.writeNull=function(){this.writeByte(Kn.Null),this.writeByte(0)},Gn.prototype.writeEnumeration=function(e,t){if("number"!=typeof e)throw new TypeError("argument must be a Number");return"number"!=typeof t&&(t=Kn.Enumeration),this.writeInt(e,t)},Gn.prototype.writeBoolean=function(e,t){if("boolean"!=typeof e)throw new TypeError("argument must be a Boolean");"number"!=typeof t&&(t=Kn.Boolean),this._ensure(3),this._buf[this._offset++]=t,this._buf[this._offset++]=1,this._buf[this._offset++]=e?255:0},Gn.prototype.writeString=function(e,t){if("string"!=typeof e)throw new TypeError("argument must be a string (was: "+typeof e+")");"number"!=typeof t&&(t=Kn.OctetString);var r=Wn.byteLength(e);this.writeByte(t),this.writeLength(r),r&&(this._ensure(r),this._buf.write(e,this._offset),this._offset+=r)},Gn.prototype.writeBuffer=function(e,t){if("number"!=typeof t)throw new TypeError("tag must be a number");if(!Wn.isBuffer(e))throw new TypeError("argument must be a buffer");this.writeByte(t),this.writeLength(e.length),this._ensure(e.length),e.copy(this._buf,this._offset,0,e.length),this._offset+=e.length},Gn.prototype.writeStringArray=function(e){if(!e instanceof Array)throw new TypeError("argument must be an Array[String]");var t=this;e.forEach((function(e){t.writeString(e)}))},Gn.prototype.writeOID=function(e,t){if("string"!=typeof e)throw new TypeError("argument must be a string");if("number"!=typeof t&&(t=Kn.OID),!/^([0-9]+\.){3,}[0-9]+$/.test(e))throw new Error("argument is not a valid OID string");var r=e.split("."),i=[];i.push(40*parseInt(r[0],10)+parseInt(r[1],10)),r.slice(2).forEach((function(e){!function(e,t){t<128?e.push(t):t<16384?(e.push(t>>>7|128),e.push(127&t)):t<2097152?(e.push(t>>>14|128),e.push(t>>>7&255|128),e.push(127&t)):t<268435456?(e.push(t>>>21|128),e.push(t>>>14&255|128),e.push(t>>>7&255|128),e.push(127&t)):(e.push(t>>>28&255|128),e.push(t>>>21&255|128),e.push(t>>>14&255|128),e.push(t>>>7&255|128),e.push(127&t))}(i,parseInt(e,10))}));var n=this;this._ensure(2+i.length),this.writeByte(t),this.writeLength(i.length),i.forEach((function(e){n.writeByte(e)}))},Gn.prototype.writeLength=function(e){if("number"!=typeof e)throw new TypeError("argument must be a Number");if(this._ensure(4),e<=127)this._buf[this._offset++]=e;else if(e<=255)this._buf[this._offset++]=129,this._buf[this._offset++]=e;else if(e<=65535)this._buf[this._offset++]=130,this._buf[this._offset++]=e>>8,this._buf[this._offset++]=e;else{if(!(e<=16777215))throw qn("Length too long (> 4 bytes)");this._buf[this._offset++]=131,this._buf[this._offset++]=e>>16,this._buf[this._offset++]=e>>8,this._buf[this._offset++]=e}},Gn.prototype.startSequence=function(e){"number"!=typeof e&&(e=Kn.Sequence|Kn.Constructor),this.writeByte(e),this._seq.push(this._offset),this._ensure(3),this._offset+=3},Gn.prototype.endSequence=function(){var e=this._seq.pop(),t=e+3,r=this._offset-t;if(r<=127)this._shift(t,r,-2),this._buf[e]=r;else if(r<=255)this._shift(t,r,-1),this._buf[e]=129,this._buf[e+1]=r;else if(r<=65535)this._buf[e]=130,this._buf[e+1]=r>>8,this._buf[e+2]=r;else{if(!(r<=16777215))throw qn("Sequence too long");this._shift(t,r,1),this._buf[e]=131,this._buf[e+1]=r>>16,this._buf[e+2]=r>>8,this._buf[e+3]=r}},Gn.prototype._shift=function(e,t,r){$n.ok(void 0!==e),$n.ok(void 0!==t),$n.ok(r),this._buf.copy(this._buf,e+r,e,e+t),this._offset+=r},Gn.prototype._ensure=function(e){if($n.ok(e),this._size-this._offset<e){var t=this._size*this._options.growthFactor;t-this._offset<e&&(t+=e);var r=Wn.alloc(t);this._buf.copy(r,0,0,this._offset),this._buf=r,this._size=t}};var Yn=Gn;!function(e){var t=In,r=kn,i=Qn,n=Yn;for(var s in e.exports={Reader:i,Writer:n},r)r.hasOwnProperty(s)&&(e.exports[s]=r[s]);for(var o in t)t.hasOwnProperty(o)&&(e.exports[o]=t[o])}(Sn);var Xn=Sn.exports,Vn={Ber:Xn,BerReader:Xn.Reader,BerWriter:Xn.Writer},zn={exports:{}};!function(e){var t=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},r=function(){throw new Error("no PRNG")},i=new Uint8Array(16),n=new Uint8Array(32);n[0]=9;var s=t(),o=t([1]),u=t([56129,1]),a=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),h=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),c=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),l=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),D=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function d(e,t,r,i){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=i>>24&255,e[t+5]=i>>16&255,e[t+6]=i>>8&255,e[t+7]=255&i}function p(e,t,r,i,n){var s,o=0;for(s=0;s<n;s++)o|=e[t+s]^r[i+s];return(1&o-1>>>8)-1}function g(e,t,r,i){return p(e,t,r,i,16)}function E(e,t,r,i){return p(e,t,r,i,32)}function A(e,t,r,i){!function(e,t,r,i){for(var n,s=255&i[0]|(255&i[1])<<8|(255&i[2])<<16|(255&i[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,u=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,a=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,h=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,c=255&i[4]|(255&i[5])<<8|(255&i[6])<<16|(255&i[7])<<24,l=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,D=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,d=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,f=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,p=255&i[8]|(255&i[9])<<8|(255&i[10])<<16|(255&i[11])<<24,g=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,E=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,A=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,_=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,F=255&i[12]|(255&i[13])<<8|(255&i[14])<<16|(255&i[15])<<24,m=s,C=o,y=u,b=a,w=h,v=c,B=l,S=D,I=d,k=f,R=p,T=g,O=E,N=A,P=_,L=F,x=0;x<20;x+=2)m^=(n=(O^=(n=(I^=(n=(w^=(n=m+O|0)<<7|n>>>25)+m|0)<<9|n>>>23)+w|0)<<13|n>>>19)+I|0)<<18|n>>>14,v^=(n=(C^=(n=(N^=(n=(k^=(n=v+C|0)<<7|n>>>25)+v|0)<<9|n>>>23)+k|0)<<13|n>>>19)+N|0)<<18|n>>>14,R^=(n=(B^=(n=(y^=(n=(P^=(n=R+B|0)<<7|n>>>25)+R|0)<<9|n>>>23)+P|0)<<13|n>>>19)+y|0)<<18|n>>>14,L^=(n=(T^=(n=(S^=(n=(b^=(n=L+T|0)<<7|n>>>25)+L|0)<<9|n>>>23)+b|0)<<13|n>>>19)+S|0)<<18|n>>>14,m^=(n=(b^=(n=(y^=(n=(C^=(n=m+b|0)<<7|n>>>25)+m|0)<<9|n>>>23)+C|0)<<13|n>>>19)+y|0)<<18|n>>>14,v^=(n=(w^=(n=(S^=(n=(B^=(n=v+w|0)<<7|n>>>25)+v|0)<<9|n>>>23)+B|0)<<13|n>>>19)+S|0)<<18|n>>>14,R^=(n=(k^=(n=(I^=(n=(T^=(n=R+k|0)<<7|n>>>25)+R|0)<<9|n>>>23)+T|0)<<13|n>>>19)+I|0)<<18|n>>>14,L^=(n=(P^=(n=(N^=(n=(O^=(n=L+P|0)<<7|n>>>25)+L|0)<<9|n>>>23)+O|0)<<13|n>>>19)+N|0)<<18|n>>>14;m=m+s|0,C=C+o|0,y=y+u|0,b=b+a|0,w=w+h|0,v=v+c|0,B=B+l|0,S=S+D|0,I=I+d|0,k=k+f|0,R=R+p|0,T=T+g|0,O=O+E|0,N=N+A|0,P=P+_|0,L=L+F|0,e[0]=m>>>0&255,e[1]=m>>>8&255,e[2]=m>>>16&255,e[3]=m>>>24&255,e[4]=C>>>0&255,e[5]=C>>>8&255,e[6]=C>>>16&255,e[7]=C>>>24&255,e[8]=y>>>0&255,e[9]=y>>>8&255,e[10]=y>>>16&255,e[11]=y>>>24&255,e[12]=b>>>0&255,e[13]=b>>>8&255,e[14]=b>>>16&255,e[15]=b>>>24&255,e[16]=w>>>0&255,e[17]=w>>>8&255,e[18]=w>>>16&255,e[19]=w>>>24&255,e[20]=v>>>0&255,e[21]=v>>>8&255,e[22]=v>>>16&255,e[23]=v>>>24&255,e[24]=B>>>0&255,e[25]=B>>>8&255,e[26]=B>>>16&255,e[27]=B>>>24&255,e[28]=S>>>0&255,e[29]=S>>>8&255,e[30]=S>>>16&255,e[31]=S>>>24&255,e[32]=I>>>0&255,e[33]=I>>>8&255,e[34]=I>>>16&255,e[35]=I>>>24&255,e[36]=k>>>0&255,e[37]=k>>>8&255,e[38]=k>>>16&255,e[39]=k>>>24&255,e[40]=R>>>0&255,e[41]=R>>>8&255,e[42]=R>>>16&255,e[43]=R>>>24&255,e[44]=T>>>0&255,e[45]=T>>>8&255,e[46]=T>>>16&255,e[47]=T>>>24&255,e[48]=O>>>0&255,e[49]=O>>>8&255,e[50]=O>>>16&255,e[51]=O>>>24&255,e[52]=N>>>0&255,e[53]=N>>>8&255,e[54]=N>>>16&255,e[55]=N>>>24&255,e[56]=P>>>0&255,e[57]=P>>>8&255,e[58]=P>>>16&255,e[59]=P>>>24&255,e[60]=L>>>0&255,e[61]=L>>>8&255,e[62]=L>>>16&255,e[63]=L>>>24&255}(e,t,r,i)}function _(e,t,r,i){!function(e,t,r,i){for(var n,s=255&i[0]|(255&i[1])<<8|(255&i[2])<<16|(255&i[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,u=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,a=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,h=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,c=255&i[4]|(255&i[5])<<8|(255&i[6])<<16|(255&i[7])<<24,l=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,D=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,d=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,f=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,p=255&i[8]|(255&i[9])<<8|(255&i[10])<<16|(255&i[11])<<24,g=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,E=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,A=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,_=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,F=255&i[12]|(255&i[13])<<8|(255&i[14])<<16|(255&i[15])<<24,m=0;m<20;m+=2)s^=(n=(E^=(n=(d^=(n=(h^=(n=s+E|0)<<7|n>>>25)+s|0)<<9|n>>>23)+h|0)<<13|n>>>19)+d|0)<<18|n>>>14,c^=(n=(o^=(n=(A^=(n=(f^=(n=c+o|0)<<7|n>>>25)+c|0)<<9|n>>>23)+f|0)<<13|n>>>19)+A|0)<<18|n>>>14,p^=(n=(l^=(n=(u^=(n=(_^=(n=p+l|0)<<7|n>>>25)+p|0)<<9|n>>>23)+_|0)<<13|n>>>19)+u|0)<<18|n>>>14,F^=(n=(g^=(n=(D^=(n=(a^=(n=F+g|0)<<7|n>>>25)+F|0)<<9|n>>>23)+a|0)<<13|n>>>19)+D|0)<<18|n>>>14,s^=(n=(a^=(n=(u^=(n=(o^=(n=s+a|0)<<7|n>>>25)+s|0)<<9|n>>>23)+o|0)<<13|n>>>19)+u|0)<<18|n>>>14,c^=(n=(h^=(n=(D^=(n=(l^=(n=c+h|0)<<7|n>>>25)+c|0)<<9|n>>>23)+l|0)<<13|n>>>19)+D|0)<<18|n>>>14,p^=(n=(f^=(n=(d^=(n=(g^=(n=p+f|0)<<7|n>>>25)+p|0)<<9|n>>>23)+g|0)<<13|n>>>19)+d|0)<<18|n>>>14,F^=(n=(_^=(n=(A^=(n=(E^=(n=F+_|0)<<7|n>>>25)+F|0)<<9|n>>>23)+E|0)<<13|n>>>19)+A|0)<<18|n>>>14;e[0]=s>>>0&255,e[1]=s>>>8&255,e[2]=s>>>16&255,e[3]=s>>>24&255,e[4]=c>>>0&255,e[5]=c>>>8&255,e[6]=c>>>16&255,e[7]=c>>>24&255,e[8]=p>>>0&255,e[9]=p>>>8&255,e[10]=p>>>16&255,e[11]=p>>>24&255,e[12]=F>>>0&255,e[13]=F>>>8&255,e[14]=F>>>16&255,e[15]=F>>>24&255,e[16]=l>>>0&255,e[17]=l>>>8&255,e[18]=l>>>16&255,e[19]=l>>>24&255,e[20]=D>>>0&255,e[21]=D>>>8&255,e[22]=D>>>16&255,e[23]=D>>>24&255,e[24]=d>>>0&255,e[25]=d>>>8&255,e[26]=d>>>16&255,e[27]=d>>>24&255,e[28]=f>>>0&255,e[29]=f>>>8&255,e[30]=f>>>16&255,e[31]=f>>>24&255}(e,t,r,i)}var F=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function m(e,t,r,i,n,s,o){var u,a,h=new Uint8Array(16),c=new Uint8Array(64);for(a=0;a<16;a++)h[a]=0;for(a=0;a<8;a++)h[a]=s[a];for(;n>=64;){for(A(c,h,o,F),a=0;a<64;a++)e[t+a]=r[i+a]^c[a];for(u=1,a=8;a<16;a++)u=u+(255&h[a])|0,h[a]=255&u,u>>>=8;n-=64,t+=64,i+=64}if(n>0)for(A(c,h,o,F),a=0;a<n;a++)e[t+a]=r[i+a]^c[a];return 0}function C(e,t,r,i,n){var s,o,u=new Uint8Array(16),a=new Uint8Array(64);for(o=0;o<16;o++)u[o]=0;for(o=0;o<8;o++)u[o]=i[o];for(;r>=64;){for(A(a,u,n,F),o=0;o<64;o++)e[t+o]=a[o];for(s=1,o=8;o<16;o++)s=s+(255&u[o])|0,u[o]=255&s,s>>>=8;r-=64,t+=64}if(r>0)for(A(a,u,n,F),o=0;o<r;o++)e[t+o]=a[o];return 0}function y(e,t,r,i,n){var s=new Uint8Array(32);_(s,i,n,F);for(var o=new Uint8Array(8),u=0;u<8;u++)o[u]=i[u+16];return C(e,t,r,o,s)}function b(e,t,r,i,n,s,o){var u=new Uint8Array(32);_(u,s,o,F);for(var a=new Uint8Array(8),h=0;h<8;h++)a[h]=s[h+16];return m(e,t,r,i,n,a,u)}var w=function(e){var t,r,i,n,s,o,u,a;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),i=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|i<<6),n=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(i>>>7|n<<9),s=255&e[8]|(255&e[9])<<8,this.r[4]=255&(n>>>4|s<<12),this.r[5]=s>>>1&8190,o=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(s>>>14|o<<2),u=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(o>>>11|u<<5),a=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(u>>>8|a<<8),this.r[9]=a>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function v(e,t,r,i,n,s){var o=new w(s);return o.update(r,i,n),o.finish(e,t),0}function B(e,t,r,i,n,s){var o=new Uint8Array(16);return v(o,0,r,i,n,s),g(e,t,o,0)}function S(e,t,r,i,n){var s;if(r<32)return-1;for(b(e,0,t,0,r,i,n),v(e,16,e,32,r-32,e),s=0;s<16;s++)e[s]=0;return 0}function I(e,t,r,i,n){var s,o=new Uint8Array(32);if(r<32)return-1;if(y(o,0,32,i,n),0!==B(t,16,t,32,r-32,o))return-1;for(b(e,0,t,0,r,i,n),s=0;s<32;s++)e[s]=0;return 0}function k(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function R(e){var t,r,i=1;for(t=0;t<16;t++)r=e[t]+i+65535,i=Math.floor(r/65536),e[t]=r-65536*i;e[0]+=i-1+37*(i-1)}function T(e,t,r){for(var i,n=~(r-1),s=0;s<16;s++)i=n&(e[s]^t[s]),e[s]^=i,t[s]^=i}function O(e,r){var i,n,s,o=t(),u=t();for(i=0;i<16;i++)u[i]=r[i];for(R(u),R(u),R(u),n=0;n<2;n++){for(o[0]=u[0]-65517,i=1;i<15;i++)o[i]=u[i]-65535-(o[i-1]>>16&1),o[i-1]&=65535;o[15]=u[15]-32767-(o[14]>>16&1),s=o[15]>>16&1,o[14]&=65535,T(u,o,1-s)}for(i=0;i<16;i++)e[2*i]=255&u[i],e[2*i+1]=u[i]>>8}function N(e,t){var r=new Uint8Array(32),i=new Uint8Array(32);return O(r,e),O(i,t),E(r,0,i,0)}function P(e){var t=new Uint8Array(32);return O(t,e),1&t[0]}function L(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function x(e,t,r){for(var i=0;i<16;i++)e[i]=t[i]+r[i]}function U(e,t,r){for(var i=0;i<16;i++)e[i]=t[i]-r[i]}function M(e,t,r){var i,n,s=0,o=0,u=0,a=0,h=0,c=0,l=0,D=0,d=0,f=0,p=0,g=0,E=0,A=0,_=0,F=0,m=0,C=0,y=0,b=0,w=0,v=0,B=0,S=0,I=0,k=0,R=0,T=0,O=0,N=0,P=0,L=r[0],x=r[1],U=r[2],M=r[3],H=r[4],Q=r[5],$=r[6],W=r[7],K=r[8],q=r[9],j=r[10],G=r[11],Y=r[12],X=r[13],V=r[14],z=r[15];s+=(i=t[0])*L,o+=i*x,u+=i*U,a+=i*M,h+=i*H,c+=i*Q,l+=i*$,D+=i*W,d+=i*K,f+=i*q,p+=i*j,g+=i*G,E+=i*Y,A+=i*X,_+=i*V,F+=i*z,o+=(i=t[1])*L,u+=i*x,a+=i*U,h+=i*M,c+=i*H,l+=i*Q,D+=i*$,d+=i*W,f+=i*K,p+=i*q,g+=i*j,E+=i*G,A+=i*Y,_+=i*X,F+=i*V,m+=i*z,u+=(i=t[2])*L,a+=i*x,h+=i*U,c+=i*M,l+=i*H,D+=i*Q,d+=i*$,f+=i*W,p+=i*K,g+=i*q,E+=i*j,A+=i*G,_+=i*Y,F+=i*X,m+=i*V,C+=i*z,a+=(i=t[3])*L,h+=i*x,c+=i*U,l+=i*M,D+=i*H,d+=i*Q,f+=i*$,p+=i*W,g+=i*K,E+=i*q,A+=i*j,_+=i*G,F+=i*Y,m+=i*X,C+=i*V,y+=i*z,h+=(i=t[4])*L,c+=i*x,l+=i*U,D+=i*M,d+=i*H,f+=i*Q,p+=i*$,g+=i*W,E+=i*K,A+=i*q,_+=i*j,F+=i*G,m+=i*Y,C+=i*X,y+=i*V,b+=i*z,c+=(i=t[5])*L,l+=i*x,D+=i*U,d+=i*M,f+=i*H,p+=i*Q,g+=i*$,E+=i*W,A+=i*K,_+=i*q,F+=i*j,m+=i*G,C+=i*Y,y+=i*X,b+=i*V,w+=i*z,l+=(i=t[6])*L,D+=i*x,d+=i*U,f+=i*M,p+=i*H,g+=i*Q,E+=i*$,A+=i*W,_+=i*K,F+=i*q,m+=i*j,C+=i*G,y+=i*Y,b+=i*X,w+=i*V,v+=i*z,D+=(i=t[7])*L,d+=i*x,f+=i*U,p+=i*M,g+=i*H,E+=i*Q,A+=i*$,_+=i*W,F+=i*K,m+=i*q,C+=i*j,y+=i*G,b+=i*Y,w+=i*X,v+=i*V,B+=i*z,d+=(i=t[8])*L,f+=i*x,p+=i*U,g+=i*M,E+=i*H,A+=i*Q,_+=i*$,F+=i*W,m+=i*K,C+=i*q,y+=i*j,b+=i*G,w+=i*Y,v+=i*X,B+=i*V,S+=i*z,f+=(i=t[9])*L,p+=i*x,g+=i*U,E+=i*M,A+=i*H,_+=i*Q,F+=i*$,m+=i*W,C+=i*K,y+=i*q,b+=i*j,w+=i*G,v+=i*Y,B+=i*X,S+=i*V,I+=i*z,p+=(i=t[10])*L,g+=i*x,E+=i*U,A+=i*M,_+=i*H,F+=i*Q,m+=i*$,C+=i*W,y+=i*K,b+=i*q,w+=i*j,v+=i*G,B+=i*Y,S+=i*X,I+=i*V,k+=i*z,g+=(i=t[11])*L,E+=i*x,A+=i*U,_+=i*M,F+=i*H,m+=i*Q,C+=i*$,y+=i*W,b+=i*K,w+=i*q,v+=i*j,B+=i*G,S+=i*Y,I+=i*X,k+=i*V,R+=i*z,E+=(i=t[12])*L,A+=i*x,_+=i*U,F+=i*M,m+=i*H,C+=i*Q,y+=i*$,b+=i*W,w+=i*K,v+=i*q,B+=i*j,S+=i*G,I+=i*Y,k+=i*X,R+=i*V,T+=i*z,A+=(i=t[13])*L,_+=i*x,F+=i*U,m+=i*M,C+=i*H,y+=i*Q,b+=i*$,w+=i*W,v+=i*K,B+=i*q,S+=i*j,I+=i*G,k+=i*Y,R+=i*X,T+=i*V,O+=i*z,_+=(i=t[14])*L,F+=i*x,m+=i*U,C+=i*M,y+=i*H,b+=i*Q,w+=i*$,v+=i*W,B+=i*K,S+=i*q,I+=i*j,k+=i*G,R+=i*Y,T+=i*X,O+=i*V,N+=i*z,F+=(i=t[15])*L,o+=38*(C+=i*U),u+=38*(y+=i*M),a+=38*(b+=i*H),h+=38*(w+=i*Q),c+=38*(v+=i*$),l+=38*(B+=i*W),D+=38*(S+=i*K),d+=38*(I+=i*q),f+=38*(k+=i*j),p+=38*(R+=i*G),g+=38*(T+=i*Y),E+=38*(O+=i*X),A+=38*(N+=i*V),_+=38*(P+=i*z),s=(i=(s+=38*(m+=i*x))+(n=1)+65535)-65536*(n=Math.floor(i/65536)),o=(i=o+n+65535)-65536*(n=Math.floor(i/65536)),u=(i=u+n+65535)-65536*(n=Math.floor(i/65536)),a=(i=a+n+65535)-65536*(n=Math.floor(i/65536)),h=(i=h+n+65535)-65536*(n=Math.floor(i/65536)),c=(i=c+n+65535)-65536*(n=Math.floor(i/65536)),l=(i=l+n+65535)-65536*(n=Math.floor(i/65536)),D=(i=D+n+65535)-65536*(n=Math.floor(i/65536)),d=(i=d+n+65535)-65536*(n=Math.floor(i/65536)),f=(i=f+n+65535)-65536*(n=Math.floor(i/65536)),p=(i=p+n+65535)-65536*(n=Math.floor(i/65536)),g=(i=g+n+65535)-65536*(n=Math.floor(i/65536)),E=(i=E+n+65535)-65536*(n=Math.floor(i/65536)),A=(i=A+n+65535)-65536*(n=Math.floor(i/65536)),_=(i=_+n+65535)-65536*(n=Math.floor(i/65536)),F=(i=F+n+65535)-65536*(n=Math.floor(i/65536)),s=(i=(s+=n-1+37*(n-1))+(n=1)+65535)-65536*(n=Math.floor(i/65536)),o=(i=o+n+65535)-65536*(n=Math.floor(i/65536)),u=(i=u+n+65535)-65536*(n=Math.floor(i/65536)),a=(i=a+n+65535)-65536*(n=Math.floor(i/65536)),h=(i=h+n+65535)-65536*(n=Math.floor(i/65536)),c=(i=c+n+65535)-65536*(n=Math.floor(i/65536)),l=(i=l+n+65535)-65536*(n=Math.floor(i/65536)),D=(i=D+n+65535)-65536*(n=Math.floor(i/65536)),d=(i=d+n+65535)-65536*(n=Math.floor(i/65536)),f=(i=f+n+65535)-65536*(n=Math.floor(i/65536)),p=(i=p+n+65535)-65536*(n=Math.floor(i/65536)),g=(i=g+n+65535)-65536*(n=Math.floor(i/65536)),E=(i=E+n+65535)-65536*(n=Math.floor(i/65536)),A=(i=A+n+65535)-65536*(n=Math.floor(i/65536)),_=(i=_+n+65535)-65536*(n=Math.floor(i/65536)),F=(i=F+n+65535)-65536*(n=Math.floor(i/65536)),s+=n-1+37*(n-1),e[0]=s,e[1]=o,e[2]=u,e[3]=a,e[4]=h,e[5]=c,e[6]=l,e[7]=D,e[8]=d,e[9]=f,e[10]=p,e[11]=g,e[12]=E,e[13]=A,e[14]=_,e[15]=F}function H(e,t){M(e,t,t)}function Q(e,r){var i,n=t();for(i=0;i<16;i++)n[i]=r[i];for(i=253;i>=0;i--)H(n,n),2!==i&&4!==i&&M(n,n,r);for(i=0;i<16;i++)e[i]=n[i]}function $(e,r,i){var n,s,o=new Uint8Array(32),a=new Float64Array(80),h=t(),c=t(),l=t(),D=t(),d=t(),f=t();for(s=0;s<31;s++)o[s]=r[s];for(o[31]=127&r[31]|64,o[0]&=248,L(a,i),s=0;s<16;s++)c[s]=a[s],D[s]=h[s]=l[s]=0;for(h[0]=D[0]=1,s=254;s>=0;--s)T(h,c,n=o[s>>>3]>>>(7&s)&1),T(l,D,n),x(d,h,l),U(h,h,l),x(l,c,D),U(c,c,D),H(D,d),H(f,h),M(h,l,h),M(l,c,d),x(d,h,l),U(h,h,l),H(c,h),U(l,D,f),M(h,l,u),x(h,h,D),M(l,l,h),M(h,D,f),M(D,c,a),H(c,d),T(h,c,n),T(l,D,n);for(s=0;s<16;s++)a[s+16]=h[s],a[s+32]=l[s],a[s+48]=c[s],a[s+64]=D[s];var p=a.subarray(32),g=a.subarray(16);return Q(p,p),M(g,g,p),O(e,g),0}function W(e,t){return $(e,t,n)}function K(e,t){return r(t,32),W(e,t)}function q(e,t,r){var n=new Uint8Array(32);return $(n,r,t),_(e,i,n,F)}w.prototype.blocks=function(e,t,r){for(var i,n,s,o,u,a,h,c,l,D,d,f,p,g,E,A,_,F,m,C=this.fin?0:2048,y=this.h[0],b=this.h[1],w=this.h[2],v=this.h[3],B=this.h[4],S=this.h[5],I=this.h[6],k=this.h[7],R=this.h[8],T=this.h[9],O=this.r[0],N=this.r[1],P=this.r[2],L=this.r[3],x=this.r[4],U=this.r[5],M=this.r[6],H=this.r[7],Q=this.r[8],$=this.r[9];r>=16;)D=l=0,D+=(y+=8191&(i=255&e[t+0]|(255&e[t+1])<<8))*O,D+=(b+=8191&(i>>>13|(n=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*$),D+=(w+=8191&(n>>>10|(s=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*Q),D+=(v+=8191&(s>>>7|(o=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*H),l=(D+=(B+=8191&(o>>>4|(u=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*M))>>>13,D&=8191,D+=(S+=u>>>1&8191)*(5*U),D+=(I+=8191&(u>>>14|(a=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*x),D+=(k+=8191&(a>>>11|(h=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*L),D+=(R+=8191&(h>>>8|(c=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*P),d=l+=(D+=(T+=c>>>5|C)*(5*N))>>>13,d+=y*N,d+=b*O,d+=w*(5*$),d+=v*(5*Q),l=(d+=B*(5*H))>>>13,d&=8191,d+=S*(5*M),d+=I*(5*U),d+=k*(5*x),d+=R*(5*L),l+=(d+=T*(5*P))>>>13,d&=8191,f=l,f+=y*P,f+=b*N,f+=w*O,f+=v*(5*$),l=(f+=B*(5*Q))>>>13,f&=8191,f+=S*(5*H),f+=I*(5*M),f+=k*(5*U),f+=R*(5*x),p=l+=(f+=T*(5*L))>>>13,p+=y*L,p+=b*P,p+=w*N,p+=v*O,l=(p+=B*(5*$))>>>13,p&=8191,p+=S*(5*Q),p+=I*(5*H),p+=k*(5*M),p+=R*(5*U),g=l+=(p+=T*(5*x))>>>13,g+=y*x,g+=b*L,g+=w*P,g+=v*N,l=(g+=B*O)>>>13,g&=8191,g+=S*(5*$),g+=I*(5*Q),g+=k*(5*H),g+=R*(5*M),E=l+=(g+=T*(5*U))>>>13,E+=y*U,E+=b*x,E+=w*L,E+=v*P,l=(E+=B*N)>>>13,E&=8191,E+=S*O,E+=I*(5*$),E+=k*(5*Q),E+=R*(5*H),A=l+=(E+=T*(5*M))>>>13,A+=y*M,A+=b*U,A+=w*x,A+=v*L,l=(A+=B*P)>>>13,A&=8191,A+=S*N,A+=I*O,A+=k*(5*$),A+=R*(5*Q),_=l+=(A+=T*(5*H))>>>13,_+=y*H,_+=b*M,_+=w*U,_+=v*x,l=(_+=B*L)>>>13,_&=8191,_+=S*P,_+=I*N,_+=k*O,_+=R*(5*$),F=l+=(_+=T*(5*Q))>>>13,F+=y*Q,F+=b*H,F+=w*M,F+=v*U,l=(F+=B*x)>>>13,F&=8191,F+=S*L,F+=I*P,F+=k*N,F+=R*O,m=l+=(F+=T*(5*$))>>>13,m+=y*$,m+=b*Q,m+=w*H,m+=v*M,l=(m+=B*U)>>>13,m&=8191,m+=S*x,m+=I*L,m+=k*P,m+=R*N,y=D=8191&(l=(l=((l+=(m+=T*O)>>>13)<<2)+l|0)+(D&=8191)|0),b=d+=l>>>=13,w=f&=8191,v=p&=8191,B=g&=8191,S=E&=8191,I=A&=8191,k=_&=8191,R=F&=8191,T=m&=8191,t+=16,r-=16;this.h[0]=y,this.h[1]=b,this.h[2]=w,this.h[3]=v,this.h[4]=B,this.h[5]=S,this.h[6]=I,this.h[7]=k,this.h[8]=R,this.h[9]=T},w.prototype.finish=function(e,t){var r,i,n,s,o=new Uint16Array(10);if(this.leftover){for(s=this.leftover,this.buffer[s++]=1;s<16;s++)this.buffer[s]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,s=2;s<10;s++)this.h[s]+=r,r=this.h[s]>>>13,this.h[s]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,o[0]=this.h[0]+5,r=o[0]>>>13,o[0]&=8191,s=1;s<10;s++)o[s]=this.h[s]+r,r=o[s]>>>13,o[s]&=8191;for(o[9]-=8192,i=(1^r)-1,s=0;s<10;s++)o[s]&=i;for(i=~i,s=0;s<10;s++)this.h[s]=this.h[s]&i|o[s];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),n=this.h[0]+this.pad[0],this.h[0]=65535&n,s=1;s<8;s++)n=(this.h[s]+this.pad[s]|0)+(n>>>16)|0,this.h[s]=65535&n;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},w.prototype.update=function(e,t,r){var i,n;if(this.leftover){for((n=16-this.leftover)>r&&(n=r),i=0;i<n;i++)this.buffer[this.leftover+i]=e[t+i];if(r-=n,t+=n,this.leftover+=n,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(n=r-r%16,this.blocks(e,t,n),t+=n,r-=n),r){for(i=0;i<r;i++)this.buffer[this.leftover+i]=e[t+i];this.leftover+=r}};var j=S,G=I,Y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function X(e,t,r,i){for(var n,s,o,u,a,h,c,l,D,d,f,p,g,E,A,_,F,m,C,y,b,w,v,B,S,I,k=new Int32Array(16),R=new Int32Array(16),T=e[0],O=e[1],N=e[2],P=e[3],L=e[4],x=e[5],U=e[6],M=e[7],H=t[0],Q=t[1],$=t[2],W=t[3],K=t[4],q=t[5],j=t[6],G=t[7],X=0;i>=128;){for(C=0;C<16;C++)y=8*C+X,k[C]=r[y+0]<<24|r[y+1]<<16|r[y+2]<<8|r[y+3],R[C]=r[y+4]<<24|r[y+5]<<16|r[y+6]<<8|r[y+7];for(C=0;C<80;C++)if(n=T,s=O,o=N,u=P,a=L,h=x,c=U,D=H,d=Q,f=$,p=W,g=K,E=q,A=j,v=65535&(w=G),B=w>>>16,S=65535&(b=M),I=b>>>16,v+=65535&(w=(K>>>14|L<<18)^(K>>>18|L<<14)^(L>>>9|K<<23)),B+=w>>>16,S+=65535&(b=(L>>>14|K<<18)^(L>>>18|K<<14)^(K>>>9|L<<23)),I+=b>>>16,v+=65535&(w=K&q^~K&j),B+=w>>>16,S+=65535&(b=L&x^~L&U),I+=b>>>16,b=Y[2*C],v+=65535&(w=Y[2*C+1]),B+=w>>>16,S+=65535&b,I+=b>>>16,b=k[C%16],B+=(w=R[C%16])>>>16,S+=65535&b,I+=b>>>16,S+=(B+=(v+=65535&w)>>>16)>>>16,v=65535&(w=m=65535&v|B<<16),B=w>>>16,S=65535&(b=F=65535&S|(I+=S>>>16)<<16),I=b>>>16,v+=65535&(w=(H>>>28|T<<4)^(T>>>2|H<<30)^(T>>>7|H<<25)),B+=w>>>16,S+=65535&(b=(T>>>28|H<<4)^(H>>>2|T<<30)^(H>>>7|T<<25)),I+=b>>>16,B+=(w=H&Q^H&$^Q&$)>>>16,S+=65535&(b=T&O^T&N^O&N),I+=b>>>16,l=65535&(S+=(B+=(v+=65535&w)>>>16)>>>16)|(I+=S>>>16)<<16,_=65535&v|B<<16,v=65535&(w=p),B=w>>>16,S=65535&(b=u),I=b>>>16,B+=(w=m)>>>16,S+=65535&(b=F),I+=b>>>16,O=n,N=s,P=o,L=u=65535&(S+=(B+=(v+=65535&w)>>>16)>>>16)|(I+=S>>>16)<<16,x=a,U=h,M=c,T=l,Q=D,$=d,W=f,K=p=65535&v|B<<16,q=g,j=E,G=A,H=_,C%16==15)for(y=0;y<16;y++)b=k[y],v=65535&(w=R[y]),B=w>>>16,S=65535&b,I=b>>>16,b=k[(y+9)%16],v+=65535&(w=R[(y+9)%16]),B+=w>>>16,S+=65535&b,I+=b>>>16,F=k[(y+1)%16],v+=65535&(w=((m=R[(y+1)%16])>>>1|F<<31)^(m>>>8|F<<24)^(m>>>7|F<<25)),B+=w>>>16,S+=65535&(b=(F>>>1|m<<31)^(F>>>8|m<<24)^F>>>7),I+=b>>>16,F=k[(y+14)%16],B+=(w=((m=R[(y+14)%16])>>>19|F<<13)^(F>>>29|m<<3)^(m>>>6|F<<26))>>>16,S+=65535&(b=(F>>>19|m<<13)^(m>>>29|F<<3)^F>>>6),I+=b>>>16,I+=(S+=(B+=(v+=65535&w)>>>16)>>>16)>>>16,k[y]=65535&S|I<<16,R[y]=65535&v|B<<16;v=65535&(w=H),B=w>>>16,S=65535&(b=T),I=b>>>16,b=e[0],B+=(w=t[0])>>>16,S+=65535&b,I+=b>>>16,I+=(S+=(B+=(v+=65535&w)>>>16)>>>16)>>>16,e[0]=T=65535&S|I<<16,t[0]=H=65535&v|B<<16,v=65535&(w=Q),B=w>>>16,S=65535&(b=O),I=b>>>16,b=e[1],B+=(w=t[1])>>>16,S+=65535&b,I+=b>>>16,I+=(S+=(B+=(v+=65535&w)>>>16)>>>16)>>>16,e[1]=O=65535&S|I<<16,t[1]=Q=65535&v|B<<16,v=65535&(w=$),B=w>>>16,S=65535&(b=N),I=b>>>16,b=e[2],B+=(w=t[2])>>>16,S+=65535&b,I+=b>>>16,I+=(S+=(B+=(v+=65535&w)>>>16)>>>16)>>>16,e[2]=N=65535&S|I<<16,t[2]=$=65535&v|B<<16,v=65535&(w=W),B=w>>>16,S=65535&(b=P),I=b>>>16,b=e[3],B+=(w=t[3])>>>16,S+=65535&b,I+=b>>>16,I+=(S+=(B+=(v+=65535&w)>>>16)>>>16)>>>16,e[3]=P=65535&S|I<<16,t[3]=W=65535&v|B<<16,v=65535&(w=K),B=w>>>16,S=65535&(b=L),I=b>>>16,b=e[4],B+=(w=t[4])>>>16,S+=65535&b,I+=b>>>16,I+=(S+=(B+=(v+=65535&w)>>>16)>>>16)>>>16,e[4]=L=65535&S|I<<16,t[4]=K=65535&v|B<<16,v=65535&(w=q),B=w>>>16,S=65535&(b=x),I=b>>>16,b=e[5],B+=(w=t[5])>>>16,S+=65535&b,I+=b>>>16,I+=(S+=(B+=(v+=65535&w)>>>16)>>>16)>>>16,e[5]=x=65535&S|I<<16,t[5]=q=65535&v|B<<16,v=65535&(w=j),B=w>>>16,S=65535&(b=U),I=b>>>16,b=e[6],B+=(w=t[6])>>>16,S+=65535&b,I+=b>>>16,I+=(S+=(B+=(v+=65535&w)>>>16)>>>16)>>>16,e[6]=U=65535&S|I<<16,t[6]=j=65535&v|B<<16,v=65535&(w=G),B=w>>>16,S=65535&(b=M),I=b>>>16,b=e[7],B+=(w=t[7])>>>16,S+=65535&b,I+=b>>>16,I+=(S+=(B+=(v+=65535&w)>>>16)>>>16)>>>16,e[7]=M=65535&S|I<<16,t[7]=G=65535&v|B<<16,X+=128,i-=128}return i}function V(e,t,r){var i,n=new Int32Array(8),s=new Int32Array(8),o=new Uint8Array(256),u=r;for(n[0]=1779033703,n[1]=3144134277,n[2]=1013904242,n[3]=2773480762,n[4]=1359893119,n[5]=2600822924,n[6]=528734635,n[7]=1541459225,s[0]=4089235720,s[1]=2227873595,s[2]=4271175723,s[3]=1595750129,s[4]=2917565137,s[5]=725511199,s[6]=4215389547,s[7]=327033209,X(n,s,t,r),r%=128,i=0;i<r;i++)o[i]=t[u-r+i];for(o[r]=128,o[(r=256-128*(r<112?1:0))-9]=0,d(o,r-8,u/536870912|0,u<<3),X(n,s,o,r),i=0;i<8;i++)d(e,8*i,n[i],s[i]);return 0}function z(e,r){var i=t(),n=t(),s=t(),o=t(),u=t(),a=t(),c=t(),l=t(),D=t();U(i,e[1],e[0]),U(D,r[1],r[0]),M(i,i,D),x(n,e[0],e[1]),x(D,r[0],r[1]),M(n,n,D),M(s,e[3],r[3]),M(s,s,h),M(o,e[2],r[2]),x(o,o,o),U(u,n,i),U(a,o,s),x(c,o,s),x(l,n,i),M(e[0],u,a),M(e[1],l,c),M(e[2],c,a),M(e[3],u,l)}function J(e,t,r){var i;for(i=0;i<4;i++)T(e[i],t[i],r)}function Z(e,r){var i=t(),n=t(),s=t();Q(s,r[2]),M(i,r[0],s),M(n,r[1],s),O(e,n),e[31]^=P(i)<<7}function ee(e,t,r){var i,n;for(k(e[0],s),k(e[1],o),k(e[2],o),k(e[3],s),n=255;n>=0;--n)J(e,t,i=r[n/8|0]>>(7&n)&1),z(t,e),z(e,e),J(e,t,i)}function te(e,r){var i=[t(),t(),t(),t()];k(i[0],c),k(i[1],l),k(i[2],o),M(i[3],c,l),ee(e,i,r)}function re(e,i,n){var s,o=new Uint8Array(64),u=[t(),t(),t(),t()];for(n||r(i,32),V(o,i,32),o[0]&=248,o[31]&=127,o[31]|=64,te(u,o),Z(e,u),s=0;s<32;s++)i[s+32]=e[s];return 0}var ie=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ne(e,t){var r,i,n,s;for(i=63;i>=32;--i){for(r=0,n=i-32,s=i-12;n<s;++n)t[n]+=r-16*t[i]*ie[n-(i-32)],r=t[n]+128>>8,t[n]-=256*r;t[n]+=r,t[i]=0}for(r=0,n=0;n<32;n++)t[n]+=r-(t[31]>>4)*ie[n],r=t[n]>>8,t[n]&=255;for(n=0;n<32;n++)t[n]-=r*ie[n];for(i=0;i<32;i++)t[i+1]+=t[i]>>8,e[i]=255&t[i]}function se(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;ne(e,r)}function oe(e,r,i,n){var s,o,u=new Uint8Array(64),a=new Uint8Array(64),h=new Uint8Array(64),c=new Float64Array(64),l=[t(),t(),t(),t()];V(u,n,32),u[0]&=248,u[31]&=127,u[31]|=64;var D=i+64;for(s=0;s<i;s++)e[64+s]=r[s];for(s=0;s<32;s++)e[32+s]=u[32+s];for(V(h,e.subarray(32),i+32),se(h),te(l,h),Z(e,l),s=32;s<64;s++)e[s]=n[s];for(V(a,e,i+64),se(a),s=0;s<64;s++)c[s]=0;for(s=0;s<32;s++)c[s]=h[s];for(s=0;s<32;s++)for(o=0;o<32;o++)c[s+o]+=a[s]*u[o];return ne(e.subarray(32),c),D}function ue(e,r){var i=t(),n=t(),u=t(),h=t(),c=t(),l=t(),d=t();return k(e[2],o),L(e[1],r),H(u,e[1]),M(h,u,a),U(u,u,e[2]),x(h,e[2],h),H(c,h),H(l,c),M(d,l,c),M(i,d,u),M(i,i,h),function(e,r){var i,n=t();for(i=0;i<16;i++)n[i]=r[i];for(i=250;i>=0;i--)H(n,n),1!==i&&M(n,n,r);for(i=0;i<16;i++)e[i]=n[i]}(i,i),M(i,i,u),M(i,i,h),M(i,i,h),M(e[0],i,h),H(n,e[0]),M(n,n,h),N(n,u)&&M(e[0],e[0],D),H(n,e[0]),M(n,n,h),N(n,u)?-1:(P(e[0])===r[31]>>7&&U(e[0],s,e[0]),M(e[3],e[0],e[1]),0)}function ae(e,r,i,n){var s,o=new Uint8Array(32),u=new Uint8Array(64),a=[t(),t(),t(),t()],h=[t(),t(),t(),t()];if(i<64)return-1;if(ue(h,n))return-1;for(s=0;s<i;s++)e[s]=r[s];for(s=0;s<32;s++)e[s+32]=n[s];if(V(u,e,i),se(u),ee(a,h,u),te(h,r.subarray(32)),z(a,h),Z(o,a),i-=64,E(r,0,o,0)){for(s=0;s<i;s++)e[s]=0;return-1}for(s=0;s<i;s++)e[s]=r[s+64];return i}var he=16,ce=64,le=32,De=64;function de(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function fe(){var e,t;for(t=0;t<arguments.length;t++)if("[object Uint8Array]"!==(e=Object.prototype.toString.call(arguments[t])))throw new TypeError("unexpected type "+e+", use Uint8Array")}function pe(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:_,crypto_stream_xor:b,crypto_stream:y,crypto_stream_salsa20_xor:m,crypto_stream_salsa20:C,crypto_onetimeauth:v,crypto_onetimeauth_verify:B,crypto_verify_16:g,crypto_verify_32:E,crypto_secretbox:S,crypto_secretbox_open:I,crypto_scalarmult:$,crypto_scalarmult_base:W,crypto_box_beforenm:q,crypto_box_afternm:j,crypto_box:function(e,t,r,i,n,s){var o=new Uint8Array(32);return q(o,n,s),j(e,t,r,i,o)},crypto_box_open:function(e,t,r,i,n,s){var o=new Uint8Array(32);return q(o,n,s),G(e,t,r,i,o)},crypto_box_keypair:K,crypto_hash:V,crypto_sign:oe,crypto_sign_keypair:re,crypto_sign_open:ae,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:he,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:ce,crypto_sign_PUBLICKEYBYTES:le,crypto_sign_SECRETKEYBYTES:De,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64},e.util||(e.util={},e.util.decodeUTF8=e.util.encodeUTF8=e.util.encodeBase64=e.util.decodeBase64=function(){throw new Error("nacl.util moved into separate package: https://github.com/dchest/tweetnacl-util-js")}),e.randomBytes=function(e){var t=new Uint8Array(e);return r(t,e),t},e.secretbox=function(e,t,r){fe(e,t,r),de(r,t);for(var i=new Uint8Array(32+e.length),n=new Uint8Array(i.length),s=0;s<e.length;s++)i[s+32]=e[s];return S(n,i,i.length,t,r),n.subarray(he)},e.secretbox.open=function(e,t,r){fe(e,t,r),de(r,t);for(var i=new Uint8Array(he+e.length),n=new Uint8Array(i.length),s=0;s<e.length;s++)i[s+he]=e[s];return!(i.length<32)&&0===I(n,i,i.length,t,r)&&n.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=he,e.scalarMult=function(e,t){if(fe(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var r=new Uint8Array(32);return $(r,e,t),r},e.scalarMult.base=function(e){if(fe(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return W(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,r,i,n){var s=e.box.before(i,n);return e.secretbox(t,r,s)},e.box.before=function(e,t){fe(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return q(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,i,n){var s=e.box.before(i,n);return e.secretbox.open(t,r,s)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return K(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(fe(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return W(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(fe(e,t),t.length!==De)throw new Error("bad secret key size");var r=new Uint8Array(ce+e.length);return oe(r,e,e.length,t),r},e.sign.open=function(e,t){if(2!==arguments.length)throw new Error("nacl.sign.open accepts 2 arguments; did you mean to use nacl.sign.detached.verify?");if(fe(e,t),t.length!==le)throw new Error("bad public key size");var r=new Uint8Array(e.length),i=ae(r,e,e.length,t);if(i<0)return null;for(var n=new Uint8Array(i),s=0;s<n.length;s++)n[s]=r[s];return n},e.sign.detached=function(t,r){for(var i=e.sign(t,r),n=new Uint8Array(ce),s=0;s<n.length;s++)n[s]=i[s];return n},e.sign.detached.verify=function(e,t,r){if(fe(e,t,r),t.length!==ce)throw new Error("bad signature size");if(r.length!==le)throw new Error("bad public key size");var i,n=new Uint8Array(ce+e.length),s=new Uint8Array(ce+e.length);for(i=0;i<ce;i++)n[i]=t[i];for(i=0;i<e.length;i++)n[i+ce]=e[i];return ae(s,n,n.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(le),t=new Uint8Array(De);return re(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(fe(e),e.length!==De)throw new Error("bad secret key size");for(var t=new Uint8Array(le),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(fe(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(le),r=new Uint8Array(De),i=0;i<32;i++)r[i]=e[i];return re(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=le,e.sign.secretKeyLength=De,e.sign.seedLength=32,e.sign.signatureLength=ce,e.hash=function(e){fe(e);var t=new Uint8Array(64);return V(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return fe(e,t),0!==e.length&&0!==t.length&&e.length===t.length&&0===p(e,0,t,0,e.length)},e.setPRNG=function(e){r=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;t&&t.getRandomValues?e.setPRNG((function(e,r){var i,n=new Uint8Array(r);for(i=0;i<r;i+=65536)t.getRandomValues(n.subarray(i,i+Math.min(r-i,65536)));for(i=0;i<r;i++)e[i]=n[i];pe(n)})):void 0!==Zr&&(t=f)&&t.randomBytes&&e.setPRNG((function(e,r){var i,n=t.randomBytes(r);for(i=0;i<r;i++)e[i]=n[i];pe(n)}))}()}(zn.exports?zn.exports:self.nacl=self.nacl||{});var Jn=zn.exports.lowlevel.crypto_hash,Zn=0,es=function(){this.S=[new Uint32Array([3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946]),new Uint32Array([1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055]),new Uint32Array([3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504]),new Uint32Array([976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462])],this.P=new Uint32Array([608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731])};function ts(e,t,r){return(e[0][t[r+3]]+e[1][t[r+2]]^e[2][t[r+1]])+e[3][t[r]]}function rs(e,t){var r,i=0;for(r=0;r<4;r++,Zn++)Zn>=t&&(Zn=0),i=i<<8|e[Zn];return i}es.prototype.encipher=function(e,t){void 0===t&&(t=new Uint8Array(e.buffer),0!==e.byteOffset&&(t=t.subarray(e.byteOffset))),e[0]^=this.P[0];for(var r=1;r<16;r+=2)e[1]^=ts(this.S,t,0)^this.P[r],e[0]^=ts(this.S,t,4)^this.P[r+1];var i=e[0];e[0]=e[1]^this.P[17],e[1]=i},es.prototype.decipher=function(e){var t=new Uint8Array(e.buffer);0!==e.byteOffset&&(t=t.subarray(e.byteOffset)),e[0]^=this.P[17];for(var r=16;r>0;r-=2)e[1]^=ts(this.S,t,0)^this.P[r],e[0]^=ts(this.S,t,4)^this.P[r-1];var i=e[0];e[0]=e[1]^this.P[0],e[1]=i},es.prototype.expand0state=function(e,t){var r,i,n=new Uint32Array(2),s=new Uint8Array(n.buffer);for(r=0,Zn=0;r<18;r++)this.P[r]^=rs(e,t);for(Zn=0,r=0;r<18;r+=2)this.encipher(n,s),this.P[r]=n[0],this.P[r+1]=n[1];for(r=0;r<4;r++)for(i=0;i<256;i+=2)this.encipher(n,s),this.S[r][i]=n[0],this.S[r][i+1]=n[1]},es.prototype.expandstate=function(e,t,r,i){var n,s,o=new Uint32Array(2);for(n=0,Zn=0;n<18;n++)this.P[n]^=rs(r,i);for(n=0,Zn=0;n<18;n+=2)o[0]^=rs(e,t),o[1]^=rs(e,t),this.encipher(o),this.P[n]=o[0],this.P[n+1]=o[1];for(n=0;n<4;n++)for(s=0;s<256;s+=2)o[0]^=rs(e,t),o[1]^=rs(e,t),this.encipher(o),this.S[n][s]=o[0],this.S[n][s+1]=o[1];Zn=0},es.prototype.enc=function(e,t){for(var r=0;r<t;r++)this.encipher(e.subarray(2*r))},es.prototype.dec=function(e,t){for(var r=0;r<t;r++)this.decipher(e.subarray(2*r))};var is=8;function ns(e,t,r){var i,n=new es,s=new Uint32Array(is),o=new Uint8Array([79,120,121,99,104,114,111,109,97,116,105,99,66,108,111,119,102,105,115,104,83,119,97,116,68,121,110,97,109,105,116,101]);for(n.expandstate(t,64,e,64),i=0;i<64;i++)n.expand0state(t,64),n.expand0state(e,64);for(i=0;i<is;i++)s[i]=rs(o,o.byteLength);for(i=0;i<64;i++)n.enc(s,s.byteLength/8);for(i=0;i<is;i++)r[4*i+3]=s[i]>>>24,r[4*i+2]=s[i]>>>16,r[4*i+1]=s[i]>>>8,r[4*i+0]=s[i]}var ss,os,us,as=function(e,t,r,i,n,s,o){var u,a,h,c,l,D,d=new Uint8Array(64),f=new Uint8Array(64),p=new Uint8Array(32),g=new Uint8Array(32),E=new Uint8Array(i+4),A=s;if(o<1)return-1;if(0===t||0===i||0===s||s>p.byteLength*p.byteLength||i>1<<20)return-1;for(c=Math.floor((s+p.byteLength-1)/p.byteLength),h=Math.floor((s+c-1)/c),u=0;u<i;u++)E[u]=r[u];for(Jn(d,e,t),D=1;s>0;D++){for(E[i+0]=D>>>24,E[i+1]=D>>>16,E[i+2]=D>>>8,E[i+3]=D,Jn(f,E,i+4),ns(d,f,g),u=p.byteLength;u--;)p[u]=g[u];for(u=1;u<o;u++)for(Jn(f,g,g.byteLength),ns(d,f,g),a=0;a<p.byteLength;a++)p[a]^=g[a];for(h=Math.min(h,s),u=0;u<h&&!((l=u*c+(D-1))>=A);u++)n[l]=p[u];s-=u}return 0},hs={exports:{}};function cs(){return ss||(ss=1,function(e){const t=f;let r;try{r=require("cpu-features")()}catch{}const{bindingAvailable:i,CIPHER_INFO:n,MAC_INFO:s}=Es(),o=(()=>{if("function"==typeof t.sign&&"function"==typeof t.verify){const e="-----BEGIN PRIVATE KEY-----\r\nMC4CAQAwBQYDK2VwBCIEIHKj+sVa9WcD/q2DJUJaf43Kptc8xYuUQA4bOFj9vC8T\r\n-----END PRIVATE KEY-----",r=Buffer.from("a");let i,n;try{i=t.sign(null,r,e),n=t.verify(null,r,e,i)}catch{}return Buffer.isBuffer(i)&&64===i.length&&!0===n}return!1})(),u="function"==typeof t.diffieHellman&&"function"==typeof t.generateKeyPairSync&&"function"==typeof t.createPublicKey,a=["ecdh-sha2-nistp256","ecdh-sha2-nistp384","ecdh-sha2-nistp521","diffie-hellman-group-exchange-sha256","diffie-hellman-group14-sha256","diffie-hellman-group15-sha512","diffie-hellman-group16-sha512","diffie-hellman-group17-sha512","diffie-hellman-group18-sha512"];u&&(a.unshift("curve25519-sha256"),a.unshift("curve25519-sha256@libssh.org"));const h=a.concat(["diffie-hellman-group-exchange-sha1","diffie-hellman-group14-sha1","diffie-hellman-group1-sha1"]),c=["ecdsa-sha2-nistp256","ecdsa-sha2-nistp384","ecdsa-sha2-nistp521","rsa-sha2-512","rsa-sha2-256","ssh-rsa"];o&&c.unshift("ssh-ed25519");const l=c.concat(["ssh-dss"]),D=(()=>{const e=t.getCiphers();return t=>e.includes(n[t].sslName)})();let d=["aes128-gcm@openssh.com","aes256-gcm@openssh.com","aes128-ctr","aes192-ctr","aes256-ctr"];r&&r.flags&&!r.flags.aes?i?d.unshift("chacha20-poly1305@openssh.com"):d.push("chacha20-poly1305@openssh.com"):i&&r&&"x86"===r.arch?d.splice(4,0,"chacha20-poly1305@openssh.com"):d.push("chacha20-poly1305@openssh.com"),d=d.filter(D);const p=d.concat(["aes256-cbc","aes192-cbc","aes128-cbc","blowfish-cbc","3des-cbc","aes128-gcm","aes256-gcm","arcfour256","arcfour128","cast128-cbc","arcfour"].filter(D)),g=(()=>{const e=t.getHashes();return t=>e.includes(s[t].sslName)})(),E=["hmac-sha2-256-etm@openssh.com","hmac-sha2-512-etm@openssh.com","hmac-sha1-etm@openssh.com","hmac-sha2-256","hmac-sha2-512","hmac-sha1"].filter(g),A=E.concat(["hmac-md5","hmac-sha2-256-96","hmac-sha2-512-96","hmac-ripemd160","hmac-sha1-96","hmac-md5-96"].filter(g)),_=["none","zlib@openssh.com","zlib"],F=_.concat([]),m={BAD_DHGEX:1,OLD_EXIT:2,DYN_RPORT_BUG:4,BUG_DHGEX_LARGE:8,IMPLY_RSA_SHA2_SIGALGS:16};e.exports={MESSAGE:{DISCONNECT:1,IGNORE:2,UNIMPLEMENTED:3,DEBUG:4,SERVICE_REQUEST:5,SERVICE_ACCEPT:6,EXT_INFO:7,KEXINIT:20,NEWKEYS:21,KEXDH_INIT:30,KEXDH_REPLY:31,KEXDH_GEX_GROUP:31,KEXDH_GEX_INIT:32,KEXDH_GEX_REPLY:33,KEXDH_GEX_REQUEST:34,KEXECDH_INIT:30,KEXECDH_REPLY:31,USERAUTH_REQUEST:50,USERAUTH_FAILURE:51,USERAUTH_SUCCESS:52,USERAUTH_BANNER:53,USERAUTH_PASSWD_CHANGEREQ:60,USERAUTH_PK_OK:60,USERAUTH_INFO_REQUEST:60,USERAUTH_INFO_RESPONSE:61,GLOBAL_REQUEST:80,REQUEST_SUCCESS:81,REQUEST_FAILURE:82,CHANNEL_OPEN:90,CHANNEL_OPEN_CONFIRMATION:91,CHANNEL_OPEN_FAILURE:92,CHANNEL_WINDOW_ADJUST:93,CHANNEL_DATA:94,CHANNEL_EXTENDED_DATA:95,CHANNEL_EOF:96,CHANNEL_CLOSE:97,CHANNEL_REQUEST:98,CHANNEL_SUCCESS:99,CHANNEL_FAILURE:100},DISCONNECT_REASON:{HOST_NOT_ALLOWED_TO_CONNECT:1,PROTOCOL_ERROR:2,KEY_EXCHANGE_FAILED:3,RESERVED:4,MAC_ERROR:5,COMPRESSION_ERROR:6,SERVICE_NOT_AVAILABLE:7,PROTOCOL_VERSION_NOT_SUPPORTED:8,HOST_KEY_NOT_VERIFIABLE:9,CONNECTION_LOST:10,BY_APPLICATION:11,TOO_MANY_CONNECTIONS:12,AUTH_CANCELED_BY_USER:13,NO_MORE_AUTH_METHODS_AVAILABLE:14,ILLEGAL_USER_NAME:15},DISCONNECT_REASON_STR:void 0,CHANNEL_OPEN_FAILURE:{ADMINISTRATIVELY_PROHIBITED:1,CONNECT_FAILED:2,UNKNOWN_CHANNEL_TYPE:3,RESOURCE_SHORTAGE:4},TERMINAL_MODE:{TTY_OP_END:0,VINTR:1,VQUIT:2,VERASE:3,VKILL:4,VEOF:5,VEOL:6,VEOL2:7,VSTART:8,VSTOP:9,VSUSP:10,VDSUSP:11,VREPRINT:12,VWERASE:13,VLNEXT:14,VFLUSH:15,VSWTCH:16,VSTATUS:17,VDISCARD:18,IGNPAR:30,PARMRK:31,INPCK:32,ISTRIP:33,INLCR:34,IGNCR:35,ICRNL:36,IUCLC:37,IXON:38,IXANY:39,IXOFF:40,IMAXBEL:41,ISIG:50,ICANON:51,XCASE:52,ECHO:53,ECHOE:54,ECHOK:55,ECHONL:56,NOFLSH:57,TOSTOP:58,IEXTEN:59,ECHOCTL:60,ECHOKE:61,PENDIN:62,OPOST:70,OLCUC:71,ONLCR:72,OCRNL:73,ONOCR:74,ONLRET:75,CS7:90,CS8:91,PARENB:92,PARODD:93,TTY_OP_ISPEED:128,TTY_OP_OSPEED:129},CHANNEL_EXTENDED_DATATYPE:{STDERR:1},SIGNALS:["ABRT","ALRM","FPE","HUP","ILL","INT","QUIT","SEGV","TERM","USR1","USR2","KILL","PIPE"].reduce(((e,t)=>({...e,[t]:1})),{}),COMPAT:m,COMPAT_CHECKS:[["Cisco-1.25",m.BAD_DHGEX],[/^Cisco-1[.]/,m.BUG_DHGEX_LARGE],[/^[0-9.]+$/,m.OLD_EXIT],[/^OpenSSH_5[.][0-9]+/,m.DYN_RPORT_BUG],[/^OpenSSH_7[.]4/,m.IMPLY_RSA_SHA2_SIGALGS]],DEFAULT_KEX:a,SUPPORTED_KEX:h,DEFAULT_SERVER_HOST_KEY:c,SUPPORTED_SERVER_HOST_KEY:l,DEFAULT_CIPHER:d,SUPPORTED_CIPHER:p,DEFAULT_MAC:E,SUPPORTED_MAC:A,DEFAULT_COMPRESSION:_,SUPPORTED_COMPRESSION:F,curve25519Supported:u,eddsaSupported:o},e.exports.DISCONNECT_REASON_BY_VALUE=Array.from(Object.entries(e.exports.DISCONNECT_REASON)).reduce(((e,[t,r])=>({...e,[r]:t})),{})}(hs)),hs.exports}function ls(){if(us)return os;us=1;const e=Vn.Ber;let t;const r=Buffer[Symbol.species],i=Object.getPrototypeOf(Uint8Array.prototype).fill;function n(e,t){return 16777216*e[t++]+65536*e[t++]+256*e[t++]+e[t]}function s(e,t,r,i,n){n||(n=0),i>e.length&&(i=e.length);let s=i-r;const o=t.length-n;return s>o&&(s=o),t.set(new Uint8Array(e.buffer,e.byteOffset+r,s),n),s}function o(e,t,i){return void 0===i&&(i=e.length),new r(e.buffer,e.byteOffset+t,i-t)}function u(){let e,t=0;const r={init:(r,i)=>{e=r,t="number"==typeof i?i:0},pos:()=>t,length:()=>e?e.length:0,avail:()=>e&&t<e.length?e.length-t:0,clear:()=>{e=void 0},readUInt32BE:()=>{if(e&&!(t+3>=e.length))return 16777216*e[t++]+65536*e[t++]+256*e[t++]+e[t++]},readUInt64BE:r=>{if(e&&!(t+7>=e.length))switch(r){case"always":return BigInt(`0x${e.hexSlice(t,t+=8)}`);case"maybe":if(e[t]>31)return BigInt(`0x${e.hexSlice(t,t+=8)}`);default:return 72057594037927940*e[t++]+281474976710656*e[t++]+1099511627776*e[t++]+4294967296*e[t++]+16777216*e[t++]+65536*e[t++]+256*e[t++]+e[t++]}},skip:r=>{e&&r>0&&(t+=r)},skipString:()=>{const i=r.readUInt32BE();if(void 0!==i)return t+=i,t<=e.length?i:void 0},readByte:()=>{if(e&&t<e.length)return e[t++]},readBool:()=>{if(e&&t<e.length)return!!e[t++]},readList:()=>{const e=r.readString(!0);if(void 0!==e)return e?e.split(","):[]},readString:(i,n)=>{"number"==typeof i&&(n=i,i=void 0);const u=r.readUInt32BE();if(void 0!==u&&!(e.length-t<u||"number"==typeof n&&u>n))return i?Buffer.isBuffer(i)?s(e,i,t,t+=u):e.utf8Slice(t,t+=u):o(e,t,t+=u)},readRaw:r=>{if(e)return"number"!=typeof r?o(e,t,t+=e.length-t):e.length-t>=r?o(e,t,t+=r):void 0}};return r}function a(e,t,r){const i=new Error(e);return"boolean"==typeof t?(r=t,i.level="protocol"):i.level=t||"protocol",i.fatal=!!r,i}function h(e,t,r){return e[r++]=t>>>24,e[r++]=t>>>16,e[r++]=t>>>8,e[r++]=t,r}const c=u();return os={bufferCopy:s,bufferSlice:o,FastBuffer:r,bufferFill:(e,t,r,n)=>i.call(e,t,r,n),makeError:a,doFatalError:(e,r,i,n)=>{let s;return void 0===t&&({DISCONNECT_REASON:t}=cs()),r instanceof Error?(s=r,n="number"!=typeof i?t.PROTOCOL_ERROR:i):s=a(r,i,!0),"number"!=typeof n&&(n=t.PROTOCOL_ERROR),e.disconnect(n),e._destruct(),e._onError(s),1/0},readUInt32BE:n,writeUInt32BE:h,writeUInt32LE:(e,t,r)=>(e[r++]=t,e[r++]=t>>>8,e[r++]=t>>>16,e[r++]=t>>>24,r),makeBufferParser:u,bufferParser:u(),readString:(e,t,r,i)=>{"number"==typeof r&&(i=r,r=void 0),void 0===t&&(t=0);const u=e.length-t;if(t<0||t>=e.length||u<4)return;const a=n(e,t);if(u<4+a||"number"==typeof i&&a>i)return;const h=(t+=4)+a;return e._pos=h,r?Buffer.isBuffer(r)?s(e,r,t,h):e.utf8Slice(t,h):o(e,t,h)},sigSSHToASN1:(t,r)=>{switch(r){case"ssh-dss":{if(t.length>40)return t;const r=new e.Writer;r.startSequence();let i=t.slice(0,20),n=t.slice(20);if(128&i[0]){const e=Buffer.allocUnsafe(21);e[0]=0,i.copy(e,1),i=e}else 0!==i[0]||128&i[1]||(i=i.slice(1));if(128&n[0]){const e=Buffer.allocUnsafe(21);e[0]=0,n.copy(e,1),n=e}else 0!==n[0]||128&n[1]||(n=n.slice(1));return r.writeBuffer(i,e.Integer),r.writeBuffer(n,e.Integer),r.endSequence(),r.buffer}case"ecdsa-sha2-nistp256":case"ecdsa-sha2-nistp384":case"ecdsa-sha2-nistp521":{c.init(t,0);const r=c.readString(),i=c.readString();if(c.clear(),void 0===r||void 0===i)return;const n=new e.Writer;return n.startSequence(),n.writeBuffer(r,e.Integer),n.writeBuffer(i,e.Integer),n.endSequence(),n.buffer}default:return t}},convertSignature:(t,r)=>{switch(r){case"ssh-dss":{if(t.length<=40)return t;const r=new e.Reader(t);r.readSequence();let i=r.readString(e.Integer,!0),n=r.readString(e.Integer,!0),o=0,u=0;if(i.length<20){const e=Buffer.allocUnsafe(20);e.set(i,1),i=e,i[0]=0}if(n.length<20){const e=Buffer.allocUnsafe(20);e.set(n,1),n=e,n[0]=0}i.length>20&&0===i[0]&&(o=1),n.length>20&&0===n[0]&&(u=1);const a=Buffer.allocUnsafe(i.length-o+(n.length-u));return s(i,a,o,i.length,0),s(n,a,u,n.length,i.length-o),a}case"ecdsa-sha2-nistp256":case"ecdsa-sha2-nistp384":case"ecdsa-sha2-nistp521":{if(0===t[0])return t;const r=new e.Reader(t);r.readSequence();const i=r.readString(e.Integer,!0),n=r.readString(e.Integer,!0);if(null===i||null===n)return;const s=Buffer.allocUnsafe(4+i.length+4+n.length);return h(s,i.length,0),s.set(i,4),h(s,n.length,4+i.length),s.set(n,8+i.length),s}}return t},sendPacket:(e,t,r)=>r||void 0===e._kexinit?(e._cipher.encrypt(t),!0):(void 0===e._queue&&(e._queue=[]),e._queue.push(t),e._debug&&e._debug("Outbound: ... packet queued"),!1)},os}var Ds,ds,fs,ps={exports:{}};function gs(){return Ds||(Ds=1,e=ps,t="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(t=t||__filename),r=function(e){var r,i,n;e=e||{},r||(r=void 0!==e?e:{}),r.ready=new Promise((function(e,t){i=e,n=t}));var s,o={};for(s in r)r.hasOwnProperty(s)&&(o[s]=r[s]);var u,a,h,c,d,f="object"==typeof window,p="function"==typeof importScripts,g="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,E="";g?(E=p?l.dirname(E)+"/":__dirname+"/",u=function(e,t){var r=W(e);return r?t?r:r.toString():(c||(c=D),d||(d=l),e=d.normalize(e),c.readFileSync(e,t?null:"utf8"))},h=function(e){return(e=u(e,!0)).buffer||(e=new Uint8Array(e)),C(e.buffer),e},a=function(e,t,r){var i=W(e);i&&t(i),c||(c=D),d||(d=l),e=d.normalize(e),c.readFile(e,(function(e,i){e?r(e):t(i.buffer)}))},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),r.inspect=function(){return"[Emscripten Module object]"}):(f||p)&&(p?E=self.location.href:"undefined"!=typeof document&&document.currentScript&&(E=document.currentScript.src),t&&(E=t),E=0!==E.indexOf("blob:")?E.substr(0,E.lastIndexOf("/")+1):"",u=function(e){try{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText}catch(n){if(e=W(e)){t=[];for(var r=0;r<e.length;r++){var i=e[r];255<i&&(i&=255),t.push(String.fromCharCode(i))}return t.join("")}throw n}},p&&(h=function(e){try{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}catch(t){if(e=W(e))return e;throw t}}),a=function(e,t,r){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){if(200==i.status||0==i.status&&i.response)t(i.response);else{var n=W(e);n?t(n.buffer):r()}},i.onerror=r,i.send(null)}),r.print||console.log.bind(console);var A,_=r.printErr||console.warn.bind(console);for(s in o)o.hasOwnProperty(s)&&(r[s]=o[s]);o=null,r.wasmBinary&&(A=r.wasmBinary),r.noExitRuntime,"object"!=typeof WebAssembly&&L("no native wasm support detected");var F,m=!1;function C(e,t){e||L("Assertion failed: "+t)}function y(e){var t=r["_"+e];return C(t,"Cannot call unknown function "+e+", make sure it is exported"),t}var b,w,v,B="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function S(){var e=F.buffer;b=e,r.HEAP8=w=new Int8Array(e),r.HEAP16=new Int16Array(e),r.HEAP32=new Int32Array(e),r.HEAPU8=v=new Uint8Array(e),r.HEAPU16=new Uint16Array(e),r.HEAPU32=new Uint32Array(e),r.HEAPF32=new Float32Array(e),r.HEAPF64=new Float64Array(e)}var I,k=[],R=[],T=[];function O(){var e=r.preRun.shift();k.unshift(e)}var N=0,P=null;function L(e){throw r.onAbort&&r.onAbort(e),_(e),m=!0,e=new WebAssembly.RuntimeError("abort("+e+"). Build with -s ASSERTIONS=1 for more info."),n(e),e}r.preloadedImages={},r.preloadedAudios={};var x,U="data:application/octet-stream;base64,";if(!(x="data:application/octet-stream;base64,AGFzbQEAAAABIAZgAX8Bf2ADf39/AGABfwBgAABgAAF/YAZ/f39/f38AAgcBAWEBYQAAAwsKAAEDAQAAAgQFAgQFAXABAQEFBwEBgAKAgAIGCQF/AUGAjMACCwclCQFiAgABYwADAWQACQFlAAgBZgAHAWcABgFoAAUBaQAKAWoBAAqGTQpPAQJ/QYAIKAIAIgEgAEEDakF8cSICaiEAAkAgAkEAIAAgAU0bDQAgAD8AQRB0SwRAIAAQAEUNAQtBgAggADYCACABDwtBhAhBMDYCAEF/C4wFAg5+Cn8gACgCJCEUIAAoAiAhFSAAKAIcIREgACgCGCESIAAoAhQhEyACQRBPBEAgAC0ATEVBGHQhFyAAKAIEIhZBBWytIQ8gACgCCCIYQQVsrSENIAAoAgwiGUEFbK0hCyAAKAIQIhpBBWytIQkgADUCACEIIBqtIRAgGa0hDiAYrSEMIBatIQoDQCASIAEtAAMiEiABLQAEQQh0ciABLQAFQRB0ciABLQAGIhZBGHRyQQJ2Qf///x9xaq0iAyAOfiABLwAAIAEtAAJBEHRyIBNqIBJBGHRBgICAGHFqrSIEIBB+fCARIAEtAAdBCHQgFnIgAS0ACEEQdHIgAS0ACSIRQRh0ckEEdkH///8fcWqtIgUgDH58IAEtAApBCHQgEXIgAS0AC0EQdHIgAS0ADEEYdHJBBnYgFWqtIgYgCn58IBQgF2ogAS8ADSABLQAPQRB0cmqtIgcgCH58IAMgDH4gBCAOfnwgBSAKfnwgBiAIfnwgByAJfnwgAyAKfiAEIAx+fCAFIAh+fCAGIAl+fCAHIAt+fCADIAh+IAQgCn58IAUgCX58IAYgC358IAcgDX58IAMgCX4gBCAIfnwgBSALfnwgBiANfnwgByAPfnwiA0IaiEL/////D4N8IgRCGohC/////w+DfCIFQhqIQv////8Pg3wiBkIaiEL/////D4N8IgdCGoinQQVsIAOnQf///x9xaiITQRp2IASnQf///x9xaiESIAWnQf///x9xIREgBqdB////H3EhFSAHp0H///8fcSEUIBNB////H3EhEyABQRBqIQEgAkEQayICQQ9LDQALCyAAIBQ2AiQgACAVNgIgIAAgETYCHCAAIBI2AhggACATNgIUCwMAAQu2BAEGfwJAIAAoAjgiBARAIABBPGohBQJAIAJBECAEayIDIAIgA0kbIgZFDQAgBkEDcSEHAkAgBkEBa0EDSQRAQQAhAwwBCyAGQXxxIQhBACEDA0AgBSADIARqaiABIANqLQAAOgAAIAUgA0EBciIEIAAoAjhqaiABIARqLQAAOgAAIAUgA0ECciIEIAAoAjhqaiABIARqLQAAOgAAIAUgA0EDciIEIAAoAjhqaiABIARqLQAAOgAAIANBBGohAyAAKAI4IQQgCEEEayIIDQALCyAHRQ0AA0AgBSADIARqaiABIANqLQAAOgAAIANBAWohAyAAKAI4IQQgB0EBayIHDQALCyAAIAQgBmoiAzYCOCADQRBJDQEgACAFQRAQAiAAQQA2AjggAiAGayECIAEgBmohAQsgAkEQTwRAIAAgASACQXBxIgMQAiACQQ9xIQIgASADaiEBCyACRQ0AIAJBA3EhBCAAQTxqIQVBACEDIAJBAWtBA08EQCACQXxxIQcDQCAFIAAoAjggA2pqIAEgA2otAAA6AAAgBSADQQFyIgYgACgCOGpqIAEgBmotAAA6AAAgBSADQQJyIgYgACgCOGpqIAEgBmotAAA6AAAgBSADQQNyIgYgACgCOGpqIAEgBmotAAA6AAAgA0EEaiEDIAdBBGsiBw0ACwsgBARAA0AgBSAAKAI4IANqaiABIANqLQAAOgAAIANBAWohAyAEQQFrIgQNAAsLIAAgACgCOCACajYCOAsLoS0BDH8jAEEQayIMJAACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAEH0AU0EQEGICCgCACIFQRAgAEELakF4cSAAQQtJGyIIQQN2IgJ2IgFBA3EEQCABQX9zQQFxIAJqIgNBA3QiAUG4CGooAgAiBEEIaiEAAkAgBCgCCCICIAFBsAhqIgFGBEBBiAggBUF+IAN3cTYCAAwBCyACIAE2AgwgASACNgIICyAEIANBA3QiAUEDcjYCBCABIARqIgEgASgCBEEBcjYCBAwNCyAIQZAIKAIAIgpNDQEgAQRAAkBBAiACdCIAQQAgAGtyIAEgAnRxIgBBACAAa3FBAWsiACAAQQx2QRBxIgJ2IgFBBXZBCHEiACACciABIAB2IgFBAnZBBHEiAHIgASAAdiIBQQF2QQJxIgByIAEgAHYiAUEBdkEBcSIAciABIAB2aiIDQQN0IgBBuAhqKAIAIgQoAggiASAAQbAIaiIARgRAQYgIIAVBfiADd3EiBTYCAAwBCyABIAA2AgwgACABNgIICyAEQQhqIQAgBCAIQQNyNgIEIAQgCGoiAiADQQN0IgEgCGsiA0EBcjYCBCABIARqIAM2AgAgCgRAIApBA3YiAUEDdEGwCGohB0GcCCgCACEEAn8gBUEBIAF0IgFxRQRAQYgIIAEgBXI2AgAgBwwBCyAHKAIICyEBIAcgBDYCCCABIAQ2AgwgBCAHNgIMIAQgATYCCAtBnAggAjYCAEGQCCADNgIADA0LQYwIKAIAIgZFDQEgBkEAIAZrcUEBayIAIABBDHZBEHEiAnYiAUEFdkEIcSIAIAJyIAEgAHYiAUECdkEEcSIAciABIAB2IgFBAXZBAnEiAHIgASAAdiIBQQF2QQFxIgByIAEgAHZqQQJ0QbgKaigCACIBKAIEQXhxIAhrIQMgASECA0ACQCACKAIQIgBFBEAgAigCFCIARQ0BCyAAKAIEQXhxIAhrIgIgAyACIANJIgIbIQMgACABIAIbIQEgACECDAELCyABIAhqIgkgAU0NAiABKAIYIQsgASABKAIMIgRHBEAgASgCCCIAQZgIKAIASRogACAENgIMIAQgADYCCAwMCyABQRRqIgIoAgAiAEUEQCABKAIQIgBFDQQgAUEQaiECCwNAIAIhByAAIgRBFGoiAigCACIADQAgBEEQaiECIAQoAhAiAA0ACyAHQQA2AgAMCwtBfyEIIABBv39LDQAgAEELaiIAQXhxIQhBjAgoAgAiCUUNAEEAIAhrIQMCQAJAAkACf0EAIAhBgAJJDQAaQR8gCEH///8HSw0AGiAAQQh2IgAgAEGA/j9qQRB2QQhxIgJ0IgAgAEGA4B9qQRB2QQRxIgF0IgAgAEGAgA9qQRB2QQJxIgB0QQ92IAEgAnIgAHJrIgBBAXQgCCAAQRVqdkEBcXJBHGoLIgVBAnRBuApqKAIAIgJFBEBBACEADAELQQAhACAIQQBBGSAFQQF2ayAFQR9GG3QhAQNAAkAgAigCBEF4cSAIayIHIANPDQAgAiEEIAciAw0AQQAhAyACIQAMAwsgACACKAIUIgcgByACIAFBHXZBBHFqKAIQIgJGGyAAIAcbIQAgAUEBdCEBIAINAAsLIAAgBHJFBEBBACEEQQIgBXQiAEEAIABrciAJcSIARQ0DIABBACAAa3FBAWsiACAAQQx2QRBxIgJ2IgFBBXZBCHEiACACciABIAB2IgFBAnZBBHEiAHIgASAAdiIBQQF2QQJxIgByIAEgAHYiAUEBdkEBcSIAciABIAB2akECdEG4CmooAgAhAAsgAEUNAQsDQCAAKAIEQXhxIAhrIgEgA0khAiABIAMgAhshAyAAIAQgAhshBCAAKAIQIgEEfyABBSAAKAIUCyIADQALCyAERQ0AIANBkAgoAgAgCGtPDQAgBCAIaiIGIARNDQEgBCgCGCEFIAQgBCgCDCIBRwRAIAQoAggiAEGYCCgCAEkaIAAgATYCDCABIAA2AggMCgsgBEEUaiICKAIAIgBFBEAgBCgCECIARQ0EIARBEGohAgsDQCACIQcgACIBQRRqIgIoAgAiAA0AIAFBEGohAiABKAIQIgANAAsgB0EANgIADAkLIAhBkAgoAgAiAk0EQEGcCCgCACEDAkAgAiAIayIBQRBPBEBBkAggATYCAEGcCCADIAhqIgA2AgAgACABQQFyNgIEIAIgA2ogATYCACADIAhBA3I2AgQMAQtBnAhBADYCAEGQCEEANgIAIAMgAkEDcjYCBCACIANqIgAgACgCBEEBcjYCBAsgA0EIaiEADAsLIAhBlAgoAgAiBkkEQEGUCCAGIAhrIgE2AgBBoAhBoAgoAgAiAiAIaiIANgIAIAAgAUEBcjYCBCACIAhBA3I2AgQgAkEIaiEADAsLQQAhACAIQS9qIgkCf0HgCygCAARAQegLKAIADAELQewLQn83AgBB5AtCgKCAgICABDcCAEHgCyAMQQxqQXBxQdiq1aoFczYCAEH0C0EANgIAQcQLQQA2AgBBgCALIgFqIgVBACABayIHcSICIAhNDQpBwAsoAgAiBARAQbgLKAIAIgMgAmoiASADTQ0LIAEgBEsNCwtBxAstAABBBHENBQJAAkBBoAgoAgAiAwRAQcgLIQADQCADIAAoAgAiAU8EQCABIAAoAgRqIANLDQMLIAAoAggiAA0ACwtBABABIgFBf0YNBiACIQVB5AsoAgAiA0EBayIAIAFxBEAgAiABayAAIAFqQQAgA2txaiEFCyAFIAhNDQYgBUH+////B0sNBkHACygCACIEBEBBuAsoAgAiAyAFaiIAIANNDQcgACAESw0HCyAFEAEiACABRw0BDAgLIAUgBmsgB3EiBUH+////B0sNBSAFEAEiASAAKAIAIAAoAgRqRg0EIAEhAAsCQCAAQX9GDQAgCEEwaiAFTQ0AQegLKAIAIgEgCSAFa2pBACABa3EiAUH+////B0sEQCAAIQEMCAsgARABQX9HBEAgASAFaiEFIAAhAQwIC0EAIAVrEAEaDAULIAAiAUF/Rw0GDAQLAAtBACEEDAcLQQAhAQwFCyABQX9HDQILQcQLQcQLKAIAQQRyNgIACyACQf7///8HSw0BIAIQASEBQQAQASEAIAFBf0YNASAAQX9GDQEgACABTQ0BIAAgAWsiBSAIQShqTQ0BC0G4C0G4CygCACAFaiIANgIAQbwLKAIAIABJBEBBvAsgADYCAAsCQAJAAkBBoAgoAgAiBwRAQcgLIQADQCABIAAoAgAiAyAAKAIEIgJqRg0CIAAoAggiAA0ACwwCC0GYCCgCACIAQQAgACABTRtFBEBBmAggATYCAAtBACEAQcwLIAU2AgBByAsgATYCAEGoCEF/NgIAQawIQeALKAIANgIAQdQLQQA2AgADQCAAQQN0IgNBuAhqIANBsAhqIgI2AgAgA0G8CGogAjYCACAAQQFqIgBBIEcNAAtBlAggBUEoayIDQXggAWtBB3FBACABQQhqQQdxGyIAayICNgIAQaAIIAAgAWoiADYCACAAIAJBAXI2AgQgASADakEoNgIEQaQIQfALKAIANgIADAILIAAtAAxBCHENACADIAdLDQAgASAHTQ0AIAAgAiAFajYCBEGgCCAHQXggB2tBB3FBACAHQQhqQQdxGyIAaiICNgIAQZQIQZQIKAIAIAVqIgEgAGsiADYCACACIABBAXI2AgQgASAHakEoNgIEQaQIQfALKAIANgIADAELQZgIKAIAIAFLBEBBmAggATYCAAsgASAFaiECQcgLIQACQAJAAkACQAJAAkADQCACIAAoAgBHBEAgACgCCCIADQEMAgsLIAAtAAxBCHFFDQELQcgLIQADQCAHIAAoAgAiAk8EQCACIAAoAgRqIgQgB0sNAwsgACgCCCEADAALAAsgACABNgIAIAAgACgCBCAFajYCBCABQXggAWtBB3FBACABQQhqQQdxG2oiCSAIQQNyNgIEIAJBeCACa0EHcUEAIAJBCGpBB3EbaiIFIAggCWoiBmshAiAFIAdGBEBBoAggBjYCAEGUCEGUCCgCACACaiIANgIAIAYgAEEBcjYCBAwDCyAFQZwIKAIARgRAQZwIIAY2AgBBkAhBkAgoAgAgAmoiADYCACAGIABBAXI2AgQgACAGaiAANgIADAMLIAUoAgQiAEEDcUEBRgRAIABBeHEhBwJAIABB/wFNBEAgBSgCCCIDIABBA3YiAEEDdEGwCGpGGiADIAUoAgwiAUYEQEGICEGICCgCAEF+IAB3cTYCAAwCCyADIAE2AgwgASADNgIIDAELIAUoAhghCAJAIAUgBSgCDCIBRwRAIAUoAggiACABNgIMIAEgADYCCAwBCwJAIAVBFGoiACgCACIDDQAgBUEQaiIAKAIAIgMNAEEAIQEMAQsDQCAAIQQgAyIBQRRqIgAoAgAiAw0AIAFBEGohACABKAIQIgMNAAsgBEEANgIACyAIRQ0AAkAgBSAFKAIcIgNBAnRBuApqIgAoAgBGBEAgACABNgIAIAENAUGMCEGMCCgCAEF+IAN3cTYCAAwCCyAIQRBBFCAIKAIQIAVGG2ogATYCACABRQ0BCyABIAg2AhggBSgCECIABEAgASAANgIQIAAgATYCGAsgBSgCFCIARQ0AIAEgADYCFCAAIAE2AhgLIAUgB2ohBSACIAdqIQILIAUgBSgCBEF+cTYCBCAGIAJBAXI2AgQgAiAGaiACNgIAIAJB/wFNBEAgAkEDdiIAQQN0QbAIaiECAn9BiAgoAgAiAUEBIAB0IgBxRQRAQYgIIAAgAXI2AgAgAgwBCyACKAIICyEAIAIgBjYCCCAAIAY2AgwgBiACNgIMIAYgADYCCAwDC0EfIQAgAkH///8HTQRAIAJBCHYiACAAQYD+P2pBEHZBCHEiA3QiACAAQYDgH2pBEHZBBHEiAXQiACAAQYCAD2pBEHZBAnEiAHRBD3YgASADciAAcmsiAEEBdCACIABBFWp2QQFxckEcaiEACyAGIAA2AhwgBkIANwIQIABBAnRBuApqIQQCQEGMCCgCACIDQQEgAHQiAXFFBEBBjAggASADcjYCACAEIAY2AgAgBiAENgIYDAELIAJBAEEZIABBAXZrIABBH0YbdCEAIAQoAgAhAQNAIAEiAygCBEF4cSACRg0DIABBHXYhASAAQQF0IQAgAyABQQRxaiIEKAIQIgENAAsgBCAGNgIQIAYgAzYCGAsgBiAGNgIMIAYgBjYCCAwCC0GUCCAFQShrIgNBeCABa0EHcUEAIAFBCGpBB3EbIgBrIgI2AgBBoAggACABaiIANgIAIAAgAkEBcjYCBCABIANqQSg2AgRBpAhB8AsoAgA2AgAgByAEQScgBGtBB3FBACAEQSdrQQdxG2pBL2siACAAIAdBEGpJGyICQRs2AgQgAkHQCykCADcCECACQcgLKQIANwIIQdALIAJBCGo2AgBBzAsgBTYCAEHICyABNgIAQdQLQQA2AgAgAkEYaiEAA0AgAEEHNgIEIABBCGohASAAQQRqIQAgASAESQ0ACyACIAdGDQMgAiACKAIEQX5xNgIEIAcgAiAHayIEQQFyNgIEIAIgBDYCACAEQf8BTQRAIARBA3YiAEEDdEGwCGohAgJ/QYgIKAIAIgFBASAAdCIAcUUEQEGICCAAIAFyNgIAIAIMAQsgAigCCAshACACIAc2AgggACAHNgIMIAcgAjYCDCAHIAA2AggMBAtBHyEAIAdCADcCECAEQf///wdNBEAgBEEIdiIAIABBgP4/akEQdkEIcSICdCIAIABBgOAfakEQdkEEcSIBdCIAIABBgIAPakEQdkECcSIAdEEPdiABIAJyIAByayIAQQF0IAQgAEEVanZBAXFyQRxqIQALIAcgADYCHCAAQQJ0QbgKaiEDAkBBjAgoAgAiAkEBIAB0IgFxRQRAQYwIIAEgAnI2AgAgAyAHNgIAIAcgAzYCGAwBCyAEQQBBGSAAQQF2ayAAQR9GG3QhACADKAIAIQEDQCABIgIoAgRBeHEgBEYNBCAAQR12IQEgAEEBdCEAIAIgAUEEcWoiAygCECIBDQALIAMgBzYCECAHIAI2AhgLIAcgBzYCDCAHIAc2AggMAwsgAygCCCIAIAY2AgwgAyAGNgIIIAZBADYCGCAGIAM2AgwgBiAANgIICyAJQQhqIQAMBQsgAigCCCIAIAc2AgwgAiAHNgIIIAdBADYCGCAHIAI2AgwgByAANgIIC0GUCCgCACIAIAhNDQBBlAggACAIayIBNgIAQaAIQaAIKAIAIgIgCGoiADYCACAAIAFBAXI2AgQgAiAIQQNyNgIEIAJBCGohAAwDC0GECEEwNgIAQQAhAAwCCwJAIAVFDQACQCAEKAIcIgJBAnRBuApqIgAoAgAgBEYEQCAAIAE2AgAgAQ0BQYwIIAlBfiACd3EiCTYCAAwCCyAFQRBBFCAFKAIQIARGG2ogATYCACABRQ0BCyABIAU2AhggBCgCECIABEAgASAANgIQIAAgATYCGAsgBCgCFCIARQ0AIAEgADYCFCAAIAE2AhgLAkAgA0EPTQRAIAQgAyAIaiIAQQNyNgIEIAAgBGoiACAAKAIEQQFyNgIEDAELIAQgCEEDcjYCBCAGIANBAXI2AgQgAyAGaiADNgIAIANB/wFNBEAgA0EDdiIAQQN0QbAIaiECAn9BiAgoAgAiAUEBIAB0IgBxRQRAQYgIIAAgAXI2AgAgAgwBCyACKAIICyEAIAIgBjYCCCAAIAY2AgwgBiACNgIMIAYgADYCCAwBC0EfIQAgA0H///8HTQRAIANBCHYiACAAQYD+P2pBEHZBCHEiAnQiACAAQYDgH2pBEHZBBHEiAXQiACAAQYCAD2pBEHZBAnEiAHRBD3YgASACciAAcmsiAEEBdCADIABBFWp2QQFxckEcaiEACyAGIAA2AhwgBkIANwIQIABBAnRBuApqIQICQAJAIAlBASAAdCIBcUUEQEGMCCABIAlyNgIAIAIgBjYCACAGIAI2AhgMAQsgA0EAQRkgAEEBdmsgAEEfRht0IQAgAigCACEIA0AgCCIBKAIEQXhxIANGDQIgAEEddiECIABBAXQhACABIAJBBHFqIgIoAhAiCA0ACyACIAY2AhAgBiABNgIYCyAGIAY2AgwgBiAGNgIIDAELIAEoAggiACAGNgIMIAEgBjYCCCAGQQA2AhggBiABNgIMIAYgADYCCAsgBEEIaiEADAELAkAgC0UNAAJAIAEoAhwiAkECdEG4CmoiACgCACABRgRAIAAgBDYCACAEDQFBjAggBkF+IAJ3cTYCAAwCCyALQRBBFCALKAIQIAFGG2ogBDYCACAERQ0BCyAEIAs2AhggASgCECIABEAgBCAANgIQIAAgBDYCGAsgASgCFCIARQ0AIAQgADYCFCAAIAQ2AhgLAkAgA0EPTQRAIAEgAyAIaiIAQQNyNgIEIAAgAWoiACAAKAIEQQFyNgIEDAELIAEgCEEDcjYCBCAJIANBAXI2AgQgAyAJaiADNgIAIAoEQCAKQQN2IgBBA3RBsAhqIQRBnAgoAgAhAgJ/QQEgAHQiACAFcUUEQEGICCAAIAVyNgIAIAQMAQsgBCgCCAshACAEIAI2AgggACACNgIMIAIgBDYCDCACIAA2AggLQZwIIAk2AgBBkAggAzYCAAsgAUEIaiEACyAMQRBqJAAgAAsQACMAIABrQXBxIgAkACAACwYAIAAkAAsEACMAC4AJAgh/BH4jAEGQAWsiBiQAIAYgBS0AA0EYdEGAgIAYcSAFLwAAIAUtAAJBEHRycjYCACAGIAUoAANBAnZBg/7/H3E2AgQgBiAFKAAGQQR2Qf+B/x9xNgIIIAYgBSgACUEGdkH//8AfcTYCDCAFLwANIQggBS0ADyEJIAZCADcCFCAGQgA3AhwgBkEANgIkIAYgCCAJQRB0QYCAPHFyNgIQIAYgBSgAEDYCKCAGIAUoABQ2AiwgBiAFKAAYNgIwIAUoABwhBSAGQQA6AEwgBkEANgI4IAYgBTYCNCAGIAEgAhAEIAQEQCAGIAMgBBAECyAGKAI4IgEEQCAGQTxqIgIgAWpBAToAACABQQFqQQ9NBEAgASAGakE9aiEEAkBBDyABayIDRQ0AIAMgBGoiAUEBa0EAOgAAIARBADoAACADQQNJDQAgAUECa0EAOgAAIARBADoAASABQQNrQQA6AAAgBEEAOgACIANBB0kNACABQQRrQQA6AAAgBEEAOgADIANBCUkNACAEQQAgBGtBA3EiAWoiBEEANgIAIAQgAyABa0F8cSIBaiIDQQRrQQA2AgAgAUEJSQ0AIARBADYCCCAEQQA2AgQgA0EIa0EANgIAIANBDGtBADYCACABQRlJDQAgBEEANgIYIARBADYCFCAEQQA2AhAgBEEANgIMIANBEGtBADYCACADQRRrQQA2AgAgA0EYa0EANgIAIANBHGtBADYCACABIARBBHFBGHIiAWsiA0EgSQ0AIAEgBGohAQNAIAFCADcDGCABQgA3AxAgAUIANwMIIAFCADcDACABQSBqIQEgA0EgayIDQR9LDQALCwsgBkEBOgBMIAYgAkEQEAILIAY1AjQhECAGNQIwIREgBjUCLCEOIAAgBjUCKCAGKAIkIAYoAiAgBigCHCAGKAIYIgNBGnZqIgJBGnZqIgFBGnZqIgtBgICAYHIgAUH///8fcSINIAJB////H3EiCCAGKAIUIAtBGnZBBWxqIgFB////H3EiCUEFaiIFQRp2IANB////H3EgAUEadmoiA2oiAUEadmoiAkEadmoiBEEadmoiDEEfdSIHIANxIAEgDEEfdkEBayIDQf///x9xIgpxciIBQRp0IAUgCnEgByAJcXJyrXwiDzwAACAAIA9CGIg8AAMgACAPQhCIPAACIAAgD0IIiDwAASAAIA4gByAIcSACIApxciICQRR0IAFBBnZyrXwgD0IgiHwiDjwABCAAIA5CGIg8AAcgACAOQhCIPAAGIAAgDkIIiDwABSAAIBEgByANcSAEIApxciIBQQ50IAJBDHZyrXwgDkIgiHwiDjwACCAAIA5CGIg8AAsgACAOQhCIPAAKIAAgDkIIiDwACSAAIBAgAyAMcSAHIAtxckEIdCABQRJ2cq18IA5CIIh8Ig48AAwgACAOQhiIPAAPIAAgDkIQiDwADiAAIA5CCIg8AA0gBkIANwIwIAZCADcCKCAGQgA3AiAgBkIANwIYIAZCADcCECAGQgA3AgggBkIANwIAIAZBkAFqJAALpwwBB38CQCAARQ0AIABBCGsiAyAAQQRrKAIAIgFBeHEiAGohBQJAIAFBAXENACABQQNxRQ0BIAMgAygCACIBayIDQZgIKAIASQ0BIAAgAWohACADQZwIKAIARwRAIAFB/wFNBEAgAygCCCICIAFBA3YiBEEDdEGwCGpGGiACIAMoAgwiAUYEQEGICEGICCgCAEF+IAR3cTYCAAwDCyACIAE2AgwgASACNgIIDAILIAMoAhghBgJAIAMgAygCDCIBRwRAIAMoAggiAiABNgIMIAEgAjYCCAwBCwJAIANBFGoiAigCACIEDQAgA0EQaiICKAIAIgQNAEEAIQEMAQsDQCACIQcgBCIBQRRqIgIoAgAiBA0AIAFBEGohAiABKAIQIgQNAAsgB0EANgIACyAGRQ0BAkAgAyADKAIcIgJBAnRBuApqIgQoAgBGBEAgBCABNgIAIAENAUGMCEGMCCgCAEF+IAJ3cTYCAAwDCyAGQRBBFCAGKAIQIANGG2ogATYCACABRQ0CCyABIAY2AhggAygCECICBEAgASACNgIQIAIgATYCGAsgAygCFCICRQ0BIAEgAjYCFCACIAE2AhgMAQsgBSgCBCIBQQNxQQNHDQBBkAggADYCACAFIAFBfnE2AgQgAyAAQQFyNgIEIAAgA2ogADYCAA8LIAMgBU8NACAFKAIEIgFBAXFFDQACQCABQQJxRQRAIAVBoAgoAgBGBEBBoAggAzYCAEGUCEGUCCgCACAAaiIANgIAIAMgAEEBcjYCBCADQZwIKAIARw0DQZAIQQA2AgBBnAhBADYCAA8LIAVBnAgoAgBGBEBBnAggAzYCAEGQCEGQCCgCACAAaiIANgIAIAMgAEEBcjYCBCAAIANqIAA2AgAPCyABQXhxIABqIQACQCABQf8BTQRAIAUoAggiAiABQQN2IgRBA3RBsAhqRhogAiAFKAIMIgFGBEBBiAhBiAgoAgBBfiAEd3E2AgAMAgsgAiABNgIMIAEgAjYCCAwBCyAFKAIYIQYCQCAFIAUoAgwiAUcEQCAFKAIIIgJBmAgoAgBJGiACIAE2AgwgASACNgIIDAELAkAgBUEUaiICKAIAIgQNACAFQRBqIgIoAgAiBA0AQQAhAQwBCwNAIAIhByAEIgFBFGoiAigCACIEDQAgAUEQaiECIAEoAhAiBA0ACyAHQQA2AgALIAZFDQACQCAFIAUoAhwiAkECdEG4CmoiBCgCAEYEQCAEIAE2AgAgAQ0BQYwIQYwIKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiABNgIAIAFFDQELIAEgBjYCGCAFKAIQIgIEQCABIAI2AhAgAiABNgIYCyAFKAIUIgJFDQAgASACNgIUIAIgATYCGAsgAyAAQQFyNgIEIAAgA2ogADYCACADQZwIKAIARw0BQZAIIAA2AgAPCyAFIAFBfnE2AgQgAyAAQQFyNgIEIAAgA2ogADYCAAsgAEH/AU0EQCAAQQN2IgFBA3RBsAhqIQACf0GICCgCACICQQEgAXQiAXFFBEBBiAggASACcjYCACAADAELIAAoAggLIQIgACADNgIIIAIgAzYCDCADIAA2AgwgAyACNgIIDwtBHyECIANCADcCECAAQf///wdNBEAgAEEIdiIBIAFBgP4/akEQdkEIcSIBdCICIAJBgOAfakEQdkEEcSICdCIEIARBgIAPakEQdkECcSIEdEEPdiABIAJyIARyayIBQQF0IAAgAUEVanZBAXFyQRxqIQILIAMgAjYCHCACQQJ0QbgKaiEBAkACQAJAQYwIKAIAIgRBASACdCIHcUUEQEGMCCAEIAdyNgIAIAEgAzYCACADIAE2AhgMAQsgAEEAQRkgAkEBdmsgAkEfRht0IQIgASgCACEBA0AgASIEKAIEQXhxIABGDQIgAkEddiEBIAJBAXQhAiAEIAFBBHFqIgdBEGooAgAiAQ0ACyAHIAM2AhAgAyAENgIYCyADIAM2AgwgAyADNgIIDAELIAQoAggiACADNgIMIAQgAzYCCCADQQA2AhggAyAENgIMIAMgADYCCAtBqAhBqAgoAgBBAWsiAEF/IAAbNgIACwsLCQEAQYEICwIGUA==").startsWith(U)){var M=x;x=r.locateFile?r.locateFile(M,E):E+M}function H(){var e=x;try{if(e==x&&A)return new Uint8Array(A);var t=W(e);if(t)return t;if(h)return h(e);throw"both async and sync fetching of the wasm failed"}catch(e){L(e)}}function Q(e){for(;0<e.length;){var t=e.shift();if("function"==typeof t)t(r);else{var i=t.m;"number"==typeof i?void 0===t.l?I.get(i)():I.get(i)(t.l):i(void 0===t.l?null:t.l)}}}var $="function"==typeof atob?atob:function(e){var t="",r=0;e=e.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(r++)),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(r++)),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(r++)),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(r++));i=i<<2|n>>4,n=(15&n)<<4|s>>2;var u=(3&s)<<6|o;t+=String.fromCharCode(i),64!==s&&(t+=String.fromCharCode(n)),64!==o&&(t+=String.fromCharCode(u))}while(r<e.length);return t};function W(e){if(e.startsWith(U)){if(e=e.slice(U.length),"boolean"==typeof g&&g){var t=Buffer.from(e,"base64");t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}else try{var r=$(e),i=new Uint8Array(r.length);for(e=0;e<r.length;++e)i[e]=r.charCodeAt(e);t=i}catch(e){throw Error("Converting base64 string to bytes failed.")}return t}}var K={a:function(e){var t=v.length;if(2147483648<(e>>>=0))return!1;for(var r=1;4>=r;r*=2){var i=t*(1+.2/r);i=Math.min(i,e+100663296),0<(i=Math.max(e,i))%65536&&(i+=65536-i%65536);e:{try{F.grow(Math.min(2147483648,i)-b.byteLength+65535>>>16),S();var n=1;break e}catch(e){}n=void 0}if(n)return!0}return!1}};!function(){function e(e){r.asm=e.exports,F=r.asm.b,S(),I=r.asm.j,R.unshift(r.asm.c),N--,r.monitorRunDependencies&&r.monitorRunDependencies(N),0==N&&P&&(e=P,P=null,e())}function t(t){e(t.instance)}function i(e){return function(){if(!A&&(f||p)){if("function"==typeof fetch&&!x.startsWith("file://"))return fetch(x,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+x+"'";return e.arrayBuffer()})).catch((function(){return H()}));if(a)return new Promise((function(e,t){a(x,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return H()}))}().then((function(e){return WebAssembly.instantiate(e,s)})).then(e,(function(e){_("failed to asynchronously prepare wasm: "+e),L(e)}))}var s={a:K};if(N++,r.monitorRunDependencies&&r.monitorRunDependencies(N),r.instantiateWasm)try{return r.instantiateWasm(s,e)}catch(e){return _("Module.instantiateWasm callback failed with error: "+e),!1}(A||"function"!=typeof WebAssembly.instantiateStreaming||x.startsWith(U)||x.startsWith("file://")||"function"!=typeof fetch?i(t):fetch(x,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,s).then(t,(function(e){return _("wasm streaming compile failed: "+e),_("falling back to ArrayBuffer instantiation"),i(t)}))}))).catch(n)}(),r.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.c).apply(null,arguments)},r._poly1305_auth=function(){return(r._poly1305_auth=r.asm.d).apply(null,arguments)};var q,j=r.stackSave=function(){return(j=r.stackSave=r.asm.e).apply(null,arguments)},G=r.stackRestore=function(){return(G=r.stackRestore=r.asm.f).apply(null,arguments)},Y=r.stackAlloc=function(){return(Y=r.stackAlloc=r.asm.g).apply(null,arguments)};function X(){function e(){if(!q&&(q=!0,r.calledRun=!0,!m)){if(Q(R),i(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),r.postRun)for("function"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;){var e=r.postRun.shift();T.unshift(e)}Q(T)}}if(!(0<N)){if(r.preRun)for("function"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)O();Q(k),0<N||(r.setStatus?(r.setStatus("Running..."),setTimeout((function(){setTimeout((function(){r.setStatus("")}),1),e()}),1)):e())}}if(r._malloc=function(){return(r._malloc=r.asm.h).apply(null,arguments)},r._free=function(){return(r._free=r.asm.i).apply(null,arguments)},r.cwrap=function(e,t,r,i){var n=(r=r||[]).every((function(e){return"number"===e}));return"string"!==t&&n&&!i?y(e):function(){return function(e,t,r,i){var n={string:function(e){var t=0;if(null!=e&&0!==e){var r=1+(e.length<<2),i=t=Y(r),n=v;if(0<r){r=i+r-1;for(var s=0;s<e.length;++s){var o=e.charCodeAt(s);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++s)),127>=o){if(i>=r)break;n[i++]=o}else{if(2047>=o){if(i+1>=r)break;n[i++]=192|o>>6}else{if(65535>=o){if(i+2>=r)break;n[i++]=224|o>>12}else{if(i+3>=r)break;n[i++]=240|o>>18,n[i++]=128|o>>12&63}n[i++]=128|o>>6&63}n[i++]=128|63&o}}n[i]=0}}return t},array:function(e){var t=Y(e.length);return w.set(e,t),t}},s=y(e),o=[];if(e=0,i)for(var u=0;u<i.length;u++){var a=n[r[u]];a?(0===e&&(e=j()),o[u]=a(i[u])):o[u]=i[u]}return r=function(e){if("string"===t)if(e){for(var r=v,i=e+NaN,n=e;r[n]&&!(n>=i);)++n;if(16<n-e&&r.subarray&&B)e=B.decode(r.subarray(e,n));else{for(i="";e<n;){var s=r[e++];if(128&s){var o=63&r[e++];if(192==(224&s))i+=String.fromCharCode((31&s)<<6|o);else{var u=63&r[e++];65536>(s=224==(240&s)?(15&s)<<12|o<<6|u:(7&s)<<18|o<<12|u<<6|63&r[e++])?i+=String.fromCharCode(s):(s-=65536,i+=String.fromCharCode(55296|s>>10,56320|1023&s))}}else i+=String.fromCharCode(s)}e=i}}else e="";else e="boolean"===t?!!e:e;return e}(r=s.apply(null,o)),0!==e&&G(e),r}(e,t,r,arguments)}},P=function e(){q||X(),q||(P=e)},r.run=X,r.preInit)for("function"==typeof r.preInit&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.pop()();return X(),e.ready},e.exports=r),ps.exports;var e,t,r}function Es(){if(fs)return ds;fs=1;const{createCipheriv:e,createDecipheriv:t,createHmac:r,randomFillSync:i,timingSafeEqual:n}=f,{readUInt32BE:s,writeUInt32BE:o}=ls(),u=Buffer[Symbol.species],a=2**32-1,h=Buffer.alloc(0),c=Buffer.alloc(4),l=new Map,D=35e3;let d,p,g,E,A,_,F;try{d=require("./crypto/build/Release/sshcrypto.node"),({AESGCMCipher:p,ChaChaPolyCipher:g,GenericCipher:E,AESGCMDecipher:A,ChaChaPolyDecipher:_,GenericDecipher:F}=d)}catch{}const m=(()=>{function e(e,t,r,i,n,s,o){return{sslName:e,blockLen:t,keyLen:r,ivLen:0!==i||1&o?i:t,authLen:n,discardLen:s,stream:!!(1&o)}}return{"chacha20-poly1305@openssh.com":e("chacha20",8,64,0,16,0,1),"aes128-gcm":e("aes-128-gcm",16,16,12,16,0,1),"aes256-gcm":e("aes-256-gcm",16,32,12,16,0,1),"aes128-gcm@openssh.com":e("aes-128-gcm",16,16,12,16,0,1),"aes256-gcm@openssh.com":e("aes-256-gcm",16,32,12,16,0,1),"aes128-cbc":e("aes-128-cbc",16,16,0,0,0,0),"aes192-cbc":e("aes-192-cbc",16,24,0,0,0,0),"aes256-cbc":e("aes-256-cbc",16,32,0,0,0,0),"rijndael-cbc@lysator.liu.se":e("aes-256-cbc",16,32,0,0,0,0),"3des-cbc":e("des-ede3-cbc",8,24,0,0,0,0),"blowfish-cbc":e("bf-cbc",8,16,0,0,0,0),"idea-cbc":e("idea-cbc",8,16,0,0,0,0),"cast128-cbc":e("cast-cbc",8,16,0,0,0,0),"aes128-ctr":e("aes-128-ctr",16,16,16,0,0,1),"aes192-ctr":e("aes-192-ctr",16,24,16,0,0,1),"aes256-ctr":e("aes-256-ctr",16,32,16,0,0,1),"3des-ctr":e("des-ede3",8,24,8,0,0,1),"blowfish-ctr":e("bf-ecb",8,16,8,0,0,1),"cast128-ctr":e("cast5-ecb",8,16,8,0,0,1),arcfour:e("rc4",8,16,0,0,1536,1),arcfour128:e("rc4",8,16,0,0,1536,1),arcfour256:e("rc4",8,32,0,0,1536,1),arcfour512:e("rc4",8,64,0,0,1536,1)}})(),C=(()=>{function e(e,t,r,i){return{sslName:e,len:t,actualLen:r,isETM:i}}return{"hmac-md5":e("md5",16,16,!1),"hmac-md5-96":e("md5",16,12,!1),"hmac-ripemd160":e("ripemd160",20,20,!1),"hmac-sha1":e("sha1",20,20,!1),"hmac-sha1-etm@openssh.com":e("sha1",20,20,!0),"hmac-sha1-96":e("sha1",20,12,!1),"hmac-sha2-256":e("sha256",32,32,!1),"hmac-sha2-256-etm@openssh.com":e("sha256",32,32,!0),"hmac-sha2-256-96":e("sha256",32,12,!1),"hmac-sha2-512":e("sha512",64,64,!1),"hmac-sha2-512-etm@openssh.com":e("sha512",64,64,!0),"hmac-sha2-512-96":e("sha512",64,12,!1)}})();const y=Buffer.alloc(32),b=Buffer.alloc(16);let w,v,B;class S{constructor(e){const t=e.outbound;this.outSeqno=t.seqno,this._onWrite=t.onWrite,this._encKeyMain=t.cipherKey.slice(0,32),this._encKeyPktLen=t.cipherKey.slice(32),this._dead=!1}free(){this._dead=!0}allocPacket(e){let t=5+e,r=8-(t-4&7);r<4&&(r+=8),t+=r;const n=Buffer.allocUnsafe(t);return o(n,t-4,0),n[4]=r,i(n,5+e,r),n}encrypt(t){if(this._dead)return;b[0]=0,o(b,this.outSeqno,12);const r=e("chacha20",this._encKeyMain,b).update(y),i=e("chacha20",this._encKeyPktLen,b).update(t.slice(0,4));this._onWrite(i),b[0]=1;const n=e("chacha20",this._encKeyMain,b).update(t.slice(4));this._onWrite(n),B(v,i,i.length,n,n.length,r);const s=Buffer.allocUnsafe(16);s.set(new Uint8Array(w.HEAPU8.buffer,v,16),0),this._onWrite(s),this.outSeqno=this.outSeqno+1>>>0}}class I{constructor(e){const t=e.outbound;this.outSeqno=t.seqno,this._onWrite=t.onWrite,this._instance=new g(t.cipherKey),this._dead=!1}free(){this._dead=!0,this._instance.free()}allocPacket(e){let t=5+e,r=8-(t-4&7);r<4&&(r+=8),t+=r;const n=Buffer.allocUnsafe(t+16);return o(n,t-4,0),n[4]=r,i(n,5+e,r),n}encrypt(e){this._dead||(this._instance.encrypt(e,this.outSeqno),this._onWrite(e),this.outSeqno=this.outSeqno+1>>>0)}}class k{constructor(e){const t=e.outbound;this.outSeqno=t.seqno,this._onWrite=t.onWrite,this._encSSLName=t.cipherInfo.sslName,this._encKey=t.cipherKey,this._encIV=t.cipherIV,this._dead=!1}free(){this._dead=!0}allocPacket(e){let t=5+e,r=16-(t-4&15);r<4&&(r+=16),t+=r;const n=Buffer.allocUnsafe(t);return o(n,t-4,0),n[4]=r,i(n,5+e,r),n}encrypt(t){if(this._dead)return;const r=e(this._encSSLName,this._encKey,this._encIV);r.setAutoPadding(!1);const i=t.slice(0,4);r.setAAD(i),this._onWrite(i);const n=r.update(t.slice(4));this._onWrite(n);const s=r.final();s.length&&this._onWrite(s);const o=r.getAuthTag();this._onWrite(o),H(this._encIV),this.outSeqno=this.outSeqno+1>>>0}}class R{constructor(e){const t=e.outbound;this.outSeqno=t.seqno,this._onWrite=t.onWrite,this._instance=new p(t.cipherInfo.sslName,t.cipherKey,t.cipherIV),this._dead=!1}free(){this._dead=!0,this._instance.free()}allocPacket(e){let t=5+e,r=16-(t-4&15);r<4&&(r+=16),t+=r;const n=Buffer.allocUnsafe(t+16);return o(n,t-4,0),n[4]=r,i(n,5+e,r),n}encrypt(e){this._dead||(this._instance.encrypt(e),this._onWrite(e),this.outSeqno=this.outSeqno+1>>>0)}}class T{constructor(t){const r=t.outbound;this.outSeqno=r.seqno,this._onWrite=r.onWrite,this._encBlockLen=r.cipherInfo.blockLen,this._cipherInstance=e(r.cipherInfo.sslName,r.cipherKey,r.cipherIV),this._macSSLName=r.macInfo.sslName,this._macKey=r.macKey,this._macActualLen=r.macInfo.actualLen,this._macETM=r.macInfo.isETM,this._aadLen=this._macETM?4:0,this._dead=!1;const i=r.cipherInfo.discardLen;if(i){let e=l.get(i);void 0===e&&(e=Buffer.alloc(i),l.set(i,e)),this._cipherInstance.update(e)}}free(){this._dead=!0}allocPacket(e){const t=this._encBlockLen;let r=5+e,n=t-(r-this._aadLen&t-1);n<4&&(n+=t),r+=n;const s=Buffer.allocUnsafe(r);return o(s,r-4,0),s[4]=n,i(s,5+e,n),s}encrypt(e){if(this._dead)return;let t;if(this._macETM){const i=new Uint8Array(e.buffer,e.byteOffset,4),n=this._cipherInstance.update(new Uint8Array(e.buffer,e.byteOffset+4,e.length-4));this._onWrite(i),this._onWrite(n),t=r(this._macSSLName,this._macKey),o(c,this.outSeqno,0),t.update(c),t.update(i),t.update(n)}else{const i=this._cipherInstance.update(e);this._onWrite(i),t=r(this._macSSLName,this._macKey),o(c,this.outSeqno,0),t.update(c),t.update(e)}let i=t.digest();i.length>this._macActualLen&&(i=i.slice(0,this._macActualLen)),this._onWrite(i),this.outSeqno=this.outSeqno+1>>>0}}class O{constructor(e){const t=e.outbound;this.outSeqno=t.seqno,this._onWrite=t.onWrite,this._encBlockLen=t.cipherInfo.blockLen,this._macLen=t.macInfo.len,this._macActualLen=t.macInfo.actualLen,this._aadLen=t.macInfo.isETM?4:0,this._instance=new E(t.cipherInfo.sslName,t.cipherKey,t.cipherIV,t.macInfo.sslName,t.macKey,t.macInfo.isETM),this._dead=!1}free(){this._dead=!0,this._instance.free()}allocPacket(e){const t=this._encBlockLen;let r=5+e,n=t-(r-this._aadLen&t-1);n<4&&(n+=t),r+=n;const s=Buffer.allocUnsafe(r+this._macLen);return o(s,r-4,0),s[4]=n,i(s,5+e,n),s}encrypt(e){this._dead||(this._instance.encrypt(e,this.outSeqno),this._macActualLen<this._macLen&&(e=new u(e.buffer,e.byteOffset,e.length-(this._macLen-this._macActualLen))),this._onWrite(e),this.outSeqno=this.outSeqno+1>>>0)}}class N{constructor(e){const t=e.inbound;this.inSeqno=t.seqno,this._onPayload=t.onPayload,this._decKeyMain=t.decipherKey.slice(0,32),this._decKeyPktLen=t.decipherKey.slice(32),this._len=0,this._lenBuf=Buffer.alloc(4),this._lenPos=0,this._packet=null,this._pktLen=0,this._mac=Buffer.allocUnsafe(16),this._calcMac=Buffer.allocUnsafe(16),this._macPos=0}free(){}decrypt(r,i,a){for(;i<a;){if(this._lenPos<4){let e=Math.min(4-this._lenPos,a-i);for(;e--;)this._lenBuf[this._lenPos++]=r[i++];if(this._lenPos<4)return;b[0]=0,o(b,this.inSeqno,12);const n=t("chacha20",this._decKeyPktLen,b).update(this._lenBuf);if(this._len=s(n,0),this._len>D||this._len<8||7&this._len)throw new Error("Bad packet length")}if(this._pktLen<this._len){if(i>=a)return;const e=Math.min(this._len-this._pktLen,a-i);let t;if(t=0!==i||e!==a?new Uint8Array(r.buffer,r.byteOffset+i,e):r,e===this._len?this._packet=t:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(t,this._pktLen)),i+=e,this._pktLen+=e,this._pktLen<this._len||i>=a)return}{const e=Math.min(16-this._macPos,a-i);if(0!==i||e!==a?this._mac.set(new Uint8Array(r.buffer,r.byteOffset+i,e),this._macPos):this._mac.set(r,this._macPos),i+=e,this._macPos+=e,this._macPos<16)return}b[0]=0,o(b,this.inSeqno,12);const h=e("chacha20",this._decKeyMain,b).update(y);if(B(v,this._lenBuf,4,this._packet,this._packet.length,h),this._calcMac.set(new Uint8Array(w.HEAPU8.buffer,v,16),0),!n(this._calcMac,this._mac))throw new Error("Invalid MAC");b[0]=1;const c=t("chacha20",this._decKeyMain,b).update(this._packet),l=new u(c.buffer,c.byteOffset+1,c.length-c[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._len=0,this._lenPos=0,this._packet=null,this._pktLen=0,this._macPos=0;{const e=this._onPayload(l);if(void 0!==e)return!1===e?i:e}}}}class P{constructor(e){const t=e.inbound;this.inSeqno=t.seqno,this._onPayload=t.onPayload,this._instance=new _(t.decipherKey),this._len=0,this._lenBuf=Buffer.alloc(4),this._lenPos=0,this._packet=null,this._pktLen=0,this._mac=Buffer.allocUnsafe(16),this._macPos=0}free(){this._instance.free()}decrypt(e,t,r){for(;t<r;){if(this._lenPos<4){let i=Math.min(4-this._lenPos,r-t);for(;i--;)this._lenBuf[this._lenPos++]=e[t++];if(this._lenPos<4)return;if(this._len=this._instance.decryptLen(this._lenBuf,this.inSeqno),this._len>D||this._len<8||7&this._len)throw new Error("Bad packet length");if(t>=r)return}if(this._pktLen<this._len){const i=Math.min(this._len-this._pktLen,r-t);let n;if(n=0!==t||i!==r?new Uint8Array(e.buffer,e.byteOffset+t,i):e,i===this._len?this._packet=n:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(n,this._pktLen)),t+=i,this._pktLen+=i,this._pktLen<this._len||t>=r)return}{const i=Math.min(16-this._macPos,r-t);if(0!==t||i!==r?this._mac.set(new Uint8Array(e.buffer,e.byteOffset+t,i),this._macPos):this._mac.set(e,this._macPos),t+=i,this._macPos+=i,this._macPos<16)return}this._instance.decrypt(this._packet,this._mac,this.inSeqno);const i=new u(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._len=0,this._lenPos=0,this._packet=null,this._pktLen=0,this._macPos=0;{const e=this._onPayload(i);if(void 0!==e)return!1===e?t:e}}}}class L{constructor(e){const t=e.inbound;this.inSeqno=t.seqno,this._onPayload=t.onPayload,this._decipherInstance=null,this._decipherSSLName=t.decipherInfo.sslName,this._decipherKey=t.decipherKey,this._decipherIV=t.decipherIV,this._len=0,this._lenBytes=0,this._packet=null,this._packetPos=0,this._pktLen=0,this._tag=Buffer.allocUnsafe(16),this._tagPos=0}free(){}decrypt(e,r,i){for(;r<i;){if(this._lenBytes<4){let n=Math.min(4-this._lenBytes,i-r);for(this._lenBytes+=n;n--;)this._len=(this._len<<8)+e[r++];if(this._lenBytes<4)return;if(this._len+20>D||this._len<16||15&this._len)throw new Error("Bad packet length");this._decipherInstance=t(this._decipherSSLName,this._decipherKey,this._decipherIV),this._decipherInstance.setAutoPadding(!1),this._decipherInstance.setAAD(Q(this._len))}if(this._pktLen<this._len){if(r>=i)return;const t=Math.min(this._len-this._pktLen,i-r);let n;if(n=0!==r||t!==i?this._decipherInstance.update(new Uint8Array(e.buffer,e.byteOffset+r,t)):this._decipherInstance.update(e),n.length&&(t===this._len?this._packet=n:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(n,this._packetPos)),this._packetPos+=n.length),r+=t,this._pktLen+=t,this._pktLen<this._len||r>=i)return}{const t=Math.min(16-this._tagPos,i-r);if(0!==r||t!==i?this._tag.set(new Uint8Array(e.buffer,e.byteOffset+r,t),this._tagPos):this._tag.set(e,this._tagPos),r+=t,this._tagPos+=t,this._tagPos<16)return}{this._decipherInstance.setAuthTag(this._tag);const e=this._decipherInstance.final();e.length&&(this._packet?this._packet.set(e,this._packetPos):this._packet=e)}const n=this._packet?new u(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1):h;this.inSeqno=this.inSeqno+1>>>0,H(this._decipherIV),this._len=0,this._lenBytes=0,this._packet=null,this._packetPos=0,this._pktLen=0,this._tagPos=0;{const e=this._onPayload(n);if(void 0!==e)return!1===e?r:e}}}}class x{constructor(e){const t=e.inbound;this.inSeqno=t.seqno,this._onPayload=t.onPayload,this._instance=new A(t.decipherInfo.sslName,t.decipherKey,t.decipherIV),this._len=0,this._lenBytes=0,this._packet=null,this._pktLen=0,this._tag=Buffer.allocUnsafe(16),this._tagPos=0}free(){}decrypt(e,t,r){for(;t<r;){if(this._lenBytes<4){let i=Math.min(4-this._lenBytes,r-t);for(this._lenBytes+=i;i--;)this._len=(this._len<<8)+e[t++];if(this._lenBytes<4)return;if(this._len+20>D||this._len<16||15&this._len)throw new Error(`Bad packet length: ${this._len}`)}if(this._pktLen<this._len){if(t>=r)return;const i=Math.min(this._len-this._pktLen,r-t);let n;if(n=0!==t||i!==r?new Uint8Array(e.buffer,e.byteOffset+t,i):e,i===this._len?this._packet=n:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(n,this._pktLen)),t+=i,this._pktLen+=i,this._pktLen<this._len||t>=r)return}{const i=Math.min(16-this._tagPos,r-t);if(0!==t||i!==r?this._tag.set(new Uint8Array(e.buffer,e.byteOffset+t,i),this._tagPos):this._tag.set(e,this._tagPos),t+=i,this._tagPos+=i,this._tagPos<16)return}this._instance.decrypt(this._packet,this._len,this._tag);const i=new u(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._len=0,this._lenBytes=0,this._packet=null,this._pktLen=0,this._tagPos=0;{const e=this._onPayload(i);if(void 0!==e)return!1===e?t:e}}}}class U{constructor(e){const r=e.inbound;this.inSeqno=r.seqno,this._onPayload=r.onPayload,this._decipherInstance=t(r.decipherInfo.sslName,r.decipherKey,r.decipherIV),this._decipherInstance.setAutoPadding(!1),this._block=Buffer.allocUnsafe(r.macInfo.isETM?4:r.decipherInfo.blockLen),this._blockSize=r.decipherInfo.blockLen,this._blockPos=0,this._len=0,this._packet=null,this._packetPos=0,this._pktLen=0,this._mac=Buffer.allocUnsafe(r.macInfo.actualLen),this._macPos=0,this._macSSLName=r.macInfo.sslName,this._macKey=r.macKey,this._macActualLen=r.macInfo.actualLen,this._macETM=r.macInfo.isETM,this._macInstance=null;const i=r.decipherInfo.discardLen;if(i){let e=l.get(i);void 0===e&&(e=Buffer.alloc(i),l.set(i,e)),this._decipherInstance.update(e)}}free(){}decrypt(e,t,i){for(;t<i;){if(this._blockPos<this._block.length){const n=Math.min(this._block.length-this._blockPos,i-t);if(0!==t||n!==i||n<e.length?this._block.set(new Uint8Array(e.buffer,e.byteOffset+t,n),this._blockPos):this._block.set(e,this._blockPos),t+=n,this._blockPos+=n,this._blockPos<this._block.length)return;let u,a;if(this._macETM?this._len=a=s(this._block,0):(u=this._decipherInstance.update(this._block),this._len=s(u,0),a=4+this._len-this._blockSize),this._len>D||this._len<5||a&this._blockSize-1)throw new Error("Bad packet length");if(this._macInstance=r(this._macSSLName,this._macKey),o(c,this.inSeqno,0),this._macInstance.update(c),this._macETM?this._macInstance.update(this._block):(this._macInstance.update(new Uint8Array(u.buffer,u.byteOffset,4)),this._pktLen=u.length-4,this._packetPos=this._pktLen,this._packet=Buffer.allocUnsafe(this._len),this._packet.set(new Uint8Array(u.buffer,u.byteOffset+4,this._packetPos),0)),t>=i)return}if(this._pktLen<this._len){const r=Math.min(this._len-this._pktLen,i-t);let n;n=0!==t||r!==i?new Uint8Array(e.buffer,e.byteOffset+t,r):e,this._macETM&&this._macInstance.update(n);const s=this._decipherInstance.update(n);if(s.length&&(r===this._len?this._packet=s:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(s,this._packetPos)),this._packetPos+=s.length),t+=r,this._pktLen+=r,this._pktLen<this._len||t>=i)return}{const r=Math.min(this._macActualLen-this._macPos,i-t);if(0!==t||r!==i?this._mac.set(new Uint8Array(e.buffer,e.byteOffset+t,r),this._macPos):this._mac.set(e,this._macPos),t+=r,this._macPos+=r,this._macPos<this._macActualLen)return}this._macETM||this._macInstance.update(this._packet);let n=this._macInstance.digest();if(this._macActualLen<n.length&&(n=new Uint8Array(n.buffer,n.byteOffset,this._macActualLen)),!$(n,this._mac))throw new Error("Invalid MAC");const a=new u(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._blockPos=0,this._len=0,this._packet=null,this._packetPos=0,this._pktLen=0,this._macPos=0,this._macInstance=null;{const e=this._onPayload(a);if(void 0!==e)return!1===e?t:e}}}}class M{constructor(e){const t=e.inbound;this.inSeqno=t.seqno,this._onPayload=t.onPayload,this._instance=new F(t.decipherInfo.sslName,t.decipherKey,t.decipherIV,t.macInfo.sslName,t.macKey,t.macInfo.isETM,t.macInfo.actualLen),this._block=Buffer.allocUnsafe(t.macInfo.isETM||t.decipherInfo.stream?4:t.decipherInfo.blockLen),this._blockPos=0,this._len=0,this._packet=null,this._pktLen=0,this._mac=Buffer.allocUnsafe(t.macInfo.actualLen),this._macPos=0,this._macActualLen=t.macInfo.actualLen,this._macETM=t.macInfo.isETM}free(){this._instance.free()}decrypt(e,t,r){for(;t<r;){if(this._blockPos<this._block.length){const i=Math.min(this._block.length-this._blockPos,r-t);if(0!==t||i!==r||i<e.length?this._block.set(new Uint8Array(e.buffer,e.byteOffset+t,i),this._blockPos):this._block.set(e,this._blockPos),t+=i,this._blockPos+=i,this._blockPos<this._block.length)return;let n;if(this._macETM?this._len=n=s(this._block,0):(this._instance.decryptBlock(this._block),this._len=s(this._block,0),n=4+this._len-this._block.length),this._len>D||this._len<5||n&this._block.length-1)throw new Error("Bad packet length");if(this._macETM||(this._pktLen=this._block.length-4,this._pktLen&&(this._packet=Buffer.allocUnsafe(this._len),this._packet.set(new Uint8Array(this._block.buffer,this._block.byteOffset+4,this._pktLen),0))),t>=r)return}if(this._pktLen<this._len){const i=Math.min(this._len-this._pktLen,r-t);let n;if(n=0!==t||i!==r?new Uint8Array(e.buffer,e.byteOffset+t,i):e,i===this._len?this._packet=n:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(n,this._pktLen)),t+=i,this._pktLen+=i,this._pktLen<this._len||t>=r)return}{const i=Math.min(this._macActualLen-this._macPos,r-t);if(0!==t||i!==r?this._mac.set(new Uint8Array(e.buffer,e.byteOffset+t,i),this._macPos):this._mac.set(e,this._macPos),t+=i,this._macPos+=i,this._macPos<this._macActualLen)return}this._instance.decrypt(this._packet,this.inSeqno,this._block,this._mac);const i=new u(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._blockPos=0,this._len=0,this._packet=null,this._pktLen=0,this._macPos=0,this._macInstance=null;{const e=this._onPayload(i);if(void 0!==e)return!1===e?t:e}}}}function H(e){++e[11]>>>8&&++e[10]>>>8&&++e[9]>>>8&&++e[8]>>>8&&++e[7]>>>8&&++e[6]>>>8&&++e[5]>>>8&&++e[4]}const Q=(()=>{const e=Buffer.alloc(4);return t=>(e[0]=t>>>24,e[1]=t>>>16,e[2]=t>>>8,e[3]=t,e)})();function $(e,t){return e.length!==t.length?(n(e,e),!1):n(e,t)}return ds={CIPHER_INFO:m,MAC_INFO:C,bindingAvailable:!!d,init:new Promise((async(e,t)=>{try{w=await gs()(),v=w._malloc(16),B=w.cwrap("poly1305_auth",null,["number","array","number","array","number","array"])}catch(e){return t(e)}e()})),NullCipher:class{constructor(e,t){this.outSeqno=e,this._onWrite=t,this._dead=!1}free(){this._dead=!0}allocPacket(e){let t=5+e,r=8-(7&t);r<4&&(r+=8),t+=r;const n=Buffer.allocUnsafe(t);return o(n,t-4,0),n[4]=r,i(n,5+e,r),n}encrypt(e){this._dead||(this._onWrite(e),this.outSeqno=this.outSeqno+1>>>0)}},createCipher:function(e){if("object"!=typeof e||null===e)throw new Error("Invalid config");if("object"!=typeof e.outbound||null===e.outbound)throw new Error("Invalid outbound");const t=e.outbound;if("function"!=typeof t.onWrite)throw new Error("Invalid outbound.onWrite");if("object"!=typeof t.cipherInfo||null===t.cipherInfo)throw new Error("Invalid outbound.cipherInfo");if(!Buffer.isBuffer(t.cipherKey)||t.cipherKey.length!==t.cipherInfo.keyLen)throw new Error("Invalid outbound.cipherKey");if(t.cipherInfo.ivLen&&(!Buffer.isBuffer(t.cipherIV)||t.cipherIV.length!==t.cipherInfo.ivLen))throw new Error("Invalid outbound.cipherIV");if("number"!=typeof t.seqno||t.seqno<0||t.seqno>a)throw new Error("Invalid outbound.seqno");const r=!!t.forceNative;switch(t.cipherInfo.sslName){case"aes-128-gcm":case"aes-256-gcm":return p&&!r?new R(e):new k(e);case"chacha20":return g&&!r?new I(e):new S(e);default:if("object"!=typeof t.macInfo||null===t.macInfo)throw new Error("Invalid outbound.macInfo");if(!Buffer.isBuffer(t.macKey)||t.macKey.length!==t.macInfo.len)throw new Error("Invalid outbound.macKey");return E&&!r?new O(e):new T(e)}},NullDecipher:class{constructor(e,t){this.inSeqno=e,this._onPayload=t,this._len=0,this._lenBytes=0,this._packet=null,this._packetPos=0}free(){}decrypt(e,t,r){for(;t<r;){if(this._lenBytes<4){let i=Math.min(4-this._lenBytes,r-t);for(this._lenBytes+=i;i--;)this._len=(this._len<<8)+e[t++];if(this._lenBytes<4)return;if(this._len>D||this._len<8||4+this._len&7)throw new Error("Bad packet length");if(t>=r)return}if(this._packetPos<this._len){const i=Math.min(this._len-this._packetPos,r-t);let n;if(n=0!==t||i!==r?new Uint8Array(e.buffer,e.byteOffset+t,i):e,i===this._len?this._packet=n:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(n,this._packetPos)),t+=i,this._packetPos+=i,this._packetPos<this._len)return}const i=this._packet?new u(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1):h;this.inSeqno=this.inSeqno+1>>>0,this._len=0,this._lenBytes=0,this._packet=null,this._packetPos=0;{const e=this._onPayload(i);if(void 0!==e)return!1===e?t:e}}}},createDecipher:function(e){if("object"!=typeof e||null===e)throw new Error("Invalid config");if("object"!=typeof e.inbound||null===e.inbound)throw new Error("Invalid inbound");const t=e.inbound;if("function"!=typeof t.onPayload)throw new Error("Invalid inbound.onPayload");if("object"!=typeof t.decipherInfo||null===t.decipherInfo)throw new Error("Invalid inbound.decipherInfo");if(!Buffer.isBuffer(t.decipherKey)||t.decipherKey.length!==t.decipherInfo.keyLen)throw new Error("Invalid inbound.decipherKey");if(t.decipherInfo.ivLen&&(!Buffer.isBuffer(t.decipherIV)||t.decipherIV.length!==t.decipherInfo.ivLen))throw new Error("Invalid inbound.decipherIV");if("number"!=typeof t.seqno||t.seqno<0||t.seqno>a)throw new Error("Invalid inbound.seqno");const r=!!t.forceNative;switch(t.decipherInfo.sslName){case"aes-128-gcm":case"aes-256-gcm":return A&&!r?new x(e):new L(e);case"chacha20":return _&&!r?new P(e):new N(e);default:if("object"!=typeof t.macInfo||null===t.macInfo)throw new Error("Invalid inbound.macInfo");if(!Buffer.isBuffer(t.macKey)||t.macKey.length!==t.macInfo.len)throw new Error("Invalid inbound.macKey");return F&&!r?new M(e):new U(e)}}},ds}const{createDecipheriv:As,createECDH:_s,createHash:Fs,createHmac:ms,createSign:Cs,createVerify:ys,getCiphers:bs,sign:ws,verify:vs}=f,Bs=bs(),{Ber:Ss}=Vn,Is=as,{CIPHER_INFO:ks}=Es(),{eddsaSupported:Rs,SUPPORTED_CIPHER:Ts}=cs(),{bufferSlice:Os,makeBufferParser:Ns,readString:Ps,readUInt32BE:Ls,writeUInt32BE:xs}=ls(),Us=Symbol("Hash Algorithm"),Ms=Symbol("Private key PEM"),Hs=Symbol("Public key PEM"),Qs=Symbol("Public key SSH"),$s=Symbol("Decrypted Key"),Ws=Object.create(null);{const TE=Object.keys(ks);for(let OE=0;OE<TE.length;++OE){const NE=ks[TE[OE]].sslName;NE&&!Ws[NE]&&(Ws[NE]=ks[TE[OE]])}}const Ks=Ns();function qs(e,t){let r=(t=t.base64Slice(0,t.length)).replace(/.{64}/g,"$&\n");return 63&t.length&&(r+="\n"),`-----BEGIN ${e} KEY-----\n${r}-----END ${e} KEY-----`}function js(e,t){const r=Buffer.allocUnsafe(e.length+t.length);return r.set(e,0),r.set(t,e.length),r}function Gs(e,t){const r=e.length;let i=e._pos||0;for(let n=0;n<t;++n){const t=r-i;if(i>=r||t<4)return!1;const n=Ls(e,i);if(t<4+n)return!1;i+=4+n}return e._pos=i,!0}function Ys(e,t){const r=new Ss.Writer;return r.startSequence(),r.startSequence(),r.writeOID("1.2.840.113549.1.1.1"),r.writeNull(),r.endSequence(),r.startSequence(Ss.BitString),r.writeByte(0),r.startSequence(),r.writeBuffer(e,Ss.Integer),r.writeBuffer(t,Ss.Integer),r.endSequence(),r.endSequence(),r.endSequence(),qs("PUBLIC",r.buffer)}function Xs(e,t){const r=Buffer.allocUnsafe(15+t.length+4+e.length);xs(r,7,0),r.utf8Write("ssh-rsa",4,7);let i=11;return xs(r,t.length,i),r.set(t,i+=4),xs(r,e.length,i+=t.length),r.set(e,i+4),r}const Vs=(()=>{function e(e){return BigInt(`0x${e.hexSlice(0,e.length)}`)}function t(e){let t=e.toString(16);if(1&t.length)t=`0${t}`;else{const e=t.charCodeAt(0);(56===e||57===e||e>=97&&e<=102)&&(t=`00${t}`)}return Buffer.from(t,"hex")}return function(r,i,n,s,o,u){const a=e(n);return qs("RSA PRIVATE",function(e,t,r,i,n,s,o,u){const a=new Ss.Writer;return a.startSequence(),a.writeInt(0,Ss.Integer),a.writeBuffer(e,Ss.Integer),a.writeBuffer(t,Ss.Integer),a.writeBuffer(r,Ss.Integer),a.writeBuffer(i,Ss.Integer),a.writeBuffer(n,Ss.Integer),a.writeBuffer(s,Ss.Integer),a.writeBuffer(o,Ss.Integer),a.writeBuffer(u,Ss.Integer),a.endSequence(),a.buffer}(r,i,n,o,u,t(a%(e(o)-1n)),t(a%(e(u)-1n)),s))}})();function zs(e,t,r,i){const n=new Ss.Writer;return n.startSequence(),n.startSequence(),n.writeOID("1.2.840.10040.4.1"),n.startSequence(),n.writeBuffer(e,Ss.Integer),n.writeBuffer(t,Ss.Integer),n.writeBuffer(r,Ss.Integer),n.endSequence(),n.endSequence(),n.startSequence(Ss.BitString),n.writeByte(0),n.writeBuffer(i,Ss.Integer),n.endSequence(),n.endSequence(),qs("PUBLIC",n.buffer)}function Js(e,t,r,i){const n=Buffer.allocUnsafe(15+e.length+4+t.length+4+r.length+4+i.length);xs(n,7,0),n.utf8Write("ssh-dss",4,7);let s=11;return xs(n,e.length,s),n.set(e,s+=4),xs(n,t.length,s+=e.length),n.set(t,s+=4),xs(n,r.length,s+=t.length),n.set(r,s+=4),xs(n,i.length,s+=r.length),n.set(i,s+4),n}function Zs(e,t,r,i,n){const s=new Ss.Writer;return s.startSequence(),s.writeInt(0,Ss.Integer),s.writeBuffer(e,Ss.Integer),s.writeBuffer(t,Ss.Integer),s.writeBuffer(r,Ss.Integer),s.writeBuffer(i,Ss.Integer),s.writeBuffer(n,Ss.Integer),s.endSequence(),qs("DSA PRIVATE",s.buffer)}function eo(e){const t=new Ss.Writer;return t.startSequence(),t.startSequence(),t.writeOID("1.3.101.112"),t.endSequence(),t.startSequence(Ss.BitString),t.writeByte(0),t._ensure(e.length),t._buf.set(e,t._offset),t._offset+=e.length,t.endSequence(),t.endSequence(),qs("PUBLIC",t.buffer)}function to(e){const t=Buffer.allocUnsafe(19+e.length);return xs(t,11,0),t.utf8Write("ssh-ed25519",4,11),xs(t,e.length,15),t.set(e,19),t}function ro(e){const t=new Ss.Writer;return t.startSequence(),t.writeInt(0,Ss.Integer),t.startSequence(),t.writeOID("1.3.101.112"),t.endSequence(),t.startSequence(Ss.OctetString),t.writeBuffer(e,Ss.OctetString),t.endSequence(),t.endSequence(),qs("PRIVATE",t.buffer)}function io(e,t){const r=new Ss.Writer;return r.startSequence(),r.startSequence(),r.writeOID("1.2.840.10045.2.1"),r.writeOID(e),r.endSequence(),r.startSequence(Ss.BitString),r.writeByte(0),r._ensure(t.length),r._buf.set(t,r._offset),r._offset+=t.length,r.endSequence(),r.endSequence(),qs("PUBLIC",r.buffer)}function no(e,t){let r;switch(e){case"1.2.840.10045.3.1.7":r="nistp256";break;case"1.3.132.0.34":r="nistp384";break;case"1.3.132.0.35":r="nistp521";break;default:return}const i=Buffer.allocUnsafe(39+t.length);return xs(i,19,0),i.utf8Write(`ecdsa-sha2-${r}`,4,19),xs(i,8,23),i.utf8Write(r,27,8),xs(i,t.length,35),i.set(t,39),i}function so(e,t,r){const i=new Ss.Writer;return i.startSequence(),i.writeInt(1,Ss.Integer),i.writeBuffer(r,Ss.OctetString),i.startSequence(160),i.writeOID(e),i.endSequence(),i.startSequence(161),i.startSequence(Ss.BitString),i.writeByte(0),i._ensure(t.length),i._buf.set(t,i._offset),i._offset+=t.length,i.endSequence(),i.endSequence(),i.endSequence(),qs("EC PRIVATE",i.buffer)}const oo={sign:"function"==typeof ws?function(e,t){const r=this[Ms];if(null===r)return new Error("No private key available");t&&"string"==typeof t||(t=this[Us]);try{return ws(t,e,r)}catch(e){return e}}:function(e,t){const r=this[Ms];if(null===r)return new Error("No private key available");t&&"string"==typeof t||(t=this[Us]);const i=Cs(t);i.update(e);try{return i.sign(r)}catch(e){return e}},verify:"function"==typeof vs?function(e,t,r){const i=this[Hs];if(null===i)return new Error("No public key available");r&&"string"==typeof r||(r=this[Us]);try{return vs(r,e,i,t)}catch(e){return e}}:function(e,t,r){const i=this[Hs];if(null===i)return new Error("No public key available");r&&"string"==typeof r||(r=this[Us]);const n=ys(r);n.update(e);try{return n.verify(i,t)}catch(e){return e}},isPrivateKey:function(){return null!==this[Ms]},getPrivatePEM:function(){return this[Ms]},getPublicPEM:function(){return this[Hs]},getPublicSSH:function(){return this[Qs]},equals:function(e){const t=go(e);return!(t instanceof Error)&&(this.type===t.type&&this[Ms]===t[Ms]&&this[Hs]===t[Hs]&&this[Qs]===t[Qs])}};function uo(e,t,r,i,n,s,o){this.type=e,this.comment=t,this[Ms]=r,this[Hs]=i,this[Qs]=n,this[Us]=s,this[$s]=o}uo.prototype=oo;{const PE=/^-----BEGIN OPENSSH PRIVATE KEY-----(?:\r\n|\n)([\s\S]+)(?:\r\n|\n)-----END OPENSSH PRIVATE KEY-----$/;function LE(e,t,r){const i=[];if(e.length<8)return new Error("Malformed OpenSSH private key");if(Ls(e,0)!==Ls(e,4))return r?new Error("OpenSSH key integrity check failed -- bad passphrase?"):new Error("OpenSSH key integrity check failed");let n,s;for(e._pos=8,n=0;n<t;++n){let t,n,o,u;const a=Ps(e,e._pos,!0);if(void 0===a)return new Error("Malformed OpenSSH private key");switch(a){case"ssh-rsa":{const r=Ps(e,e._pos);if(void 0===r)return new Error("Malformed OpenSSH private key");const i=Ps(e,e._pos);if(void 0===i)return new Error("Malformed OpenSSH private key");const s=Ps(e,e._pos);if(void 0===s)return new Error("Malformed OpenSSH private key");const a=Ps(e,e._pos);if(void 0===a)return new Error("Malformed OpenSSH private key");const h=Ps(e,e._pos);if(void 0===h)return new Error("Malformed OpenSSH private key");const c=Ps(e,e._pos);if(void 0===c)return new Error("Malformed OpenSSH private key");o=Ys(r,i),u=Xs(r,i),n=Vs(r,i,s,a,h,c),t="sha1";break}case"ssh-dss":{const r=Ps(e,e._pos);if(void 0===r)return new Error("Malformed OpenSSH private key");const i=Ps(e,e._pos);if(void 0===i)return new Error("Malformed OpenSSH private key");const s=Ps(e,e._pos);if(void 0===s)return new Error("Malformed OpenSSH private key");const a=Ps(e,e._pos);if(void 0===a)return new Error("Malformed OpenSSH private key");const h=Ps(e,e._pos);if(void 0===h)return new Error("Malformed OpenSSH private key");o=zs(r,i,s,a),u=Js(r,i,s,a),n=Zs(r,i,s,a,h),t="sha1";break}case"ssh-ed25519":{if(!Rs)return new Error(`Unsupported OpenSSH private key type: ${a}`);const r=Ps(e,e._pos);if(void 0===r||32!==r.length)return new Error("Malformed OpenSSH private key");const i=Ps(e,e._pos);if(void 0===i||64!==i.length)return new Error("Malformed OpenSSH private key");o=eo(r),u=to(r),n=ro(Os(i,0,32)),t=null;break}case"ecdsa-sha2-nistp256":t="sha256",s="1.2.840.10045.3.1.7";case"ecdsa-sha2-nistp384":void 0===t&&(t="sha384",s="1.3.132.0.34");case"ecdsa-sha2-nistp521":{if(void 0===t&&(t="sha512",s="1.3.132.0.35"),!Gs(e,1))return new Error("Malformed OpenSSH private key");const r=Ps(e,e._pos);if(void 0===r)return new Error("Malformed OpenSSH private key");const i=Ps(e,e._pos);if(void 0===i)return new Error("Malformed OpenSSH private key");o=io(s,r),u=no(s,r),n=so(s,r,i);break}default:return new Error(`Unsupported OpenSSH private key type: ${a}`)}const h=Ps(e,e._pos,!0);if(void 0===h)return new Error("Malformed OpenSSH private key");i.push(new uo(a,h,n,o,u,t,r))}let o=0;for(n=e._pos;n<e.length;++n)if(e[n]!==++o%255)return new Error("Malformed OpenSSH private key");return i}uo.parse=(e,t)=>{const r=PE.exec(e);if(null===r)return null;let i;const n=Buffer.from(r[1],"base64");if(n.length<31)return new Error("Malformed OpenSSH private key");const s=n.utf8Slice(0,15);if("openssh-key-v1\0"!==s)return new Error(`Unsupported OpenSSH key magic: ${s}`);const o=Ps(n,15,!0);if(void 0===o)return new Error("Malformed OpenSSH private key");if("none"!==o&&-1===Ts.indexOf(o))return new Error(`Unsupported cipher for OpenSSH key: ${o}`);const u=Ps(n,n._pos,!0);if(void 0===u)return new Error("Malformed OpenSSH private key");if("none"!==u){if("none"===o)return new Error("Malformed OpenSSH private key");if("bcrypt"!==u)return new Error(`Unsupported kdf name for OpenSSH key: ${u}`);if(!t)return new Error("Encrypted private OpenSSH key detected, but no passphrase given")}else if("none"!==o)return new Error("Malformed OpenSSH private key");let a,h,c;"none"!==o&&(a=ks[o]);const l=Ps(n,n._pos);if(void 0===l)return new Error("Malformed OpenSSH private key");if(l.length)switch(u){case"none":return new Error("Malformed OpenSSH private key");case"bcrypt":{const e=Ps(l,0);if(void 0===e||l._pos+4>l.length)return new Error("Malformed OpenSSH private key");const r=Ls(l,l._pos),i=Buffer.allocUnsafe(a.keyLen+a.ivLen);if(0!==Is(t,t.length,e,e.length,i,i.length,r))return new Error("Failed to generate information to decrypt key");h=Os(i,0,a.keyLen),c=Os(i,a.keyLen,i.length);break}}else if("none"!==u)return new Error("Malformed OpenSSH private key");if(n._pos+3>=n.length)return new Error("Malformed OpenSSH private key");const D=Ls(n,n._pos);if(n._pos+=4,D>0){for(let e=0;e<D;++e){const e=Ps(n,n._pos);if(void 0===e)return new Error("Malformed OpenSSH private key");if(void 0===Ps(e,0,!0))return new Error("Malformed OpenSSH private key")}let e=Ps(n,n._pos);if(void 0===e)return new Error("Malformed OpenSSH private key");if(void 0!==h){if(e.length<a.blockLen||e.length%a.blockLen!=0)return new Error("Malformed OpenSSH private key");try{const t={authTagLength:a.authLen},r=As(a.sslName,h,c,t);if(r.setAutoPadding(!1),a.authLen>0){if(n.length-n._pos<a.authLen)return new Error("Malformed OpenSSH private key");r.setAuthTag(Os(n,n._pos,n._pos+=a.authLen))}e=js(r.update(e),r.final())}catch(e){return e}}if(n._pos!==n.length)return new Error("Malformed OpenSSH private key");i=LE(e,D,void 0!==h)}else i=[];return i instanceof Error?i:i[0]}}function ao(e,t,r,i,n,s,o){this.type=e,this.comment=t,this[Ms]=r,this[Hs]=i,this[Qs]=n,this[Us]=s,this[$s]=o}ao.prototype=oo;{const xE=/^-----BEGIN (RSA|DSA|EC) PRIVATE KEY-----(?:\r\n|\n)((?:[^:]+:\s*[\S].*(?:\r\n|\n))*)([\s\S]+)(?:\r\n|\n)-----END (RSA|DSA|EC) PRIVATE KEY-----$/;ao.parse=(e,t)=>{const r=xE.exec(e);if(null===r)return null;let i,n,s,o,u,a,h=Buffer.from(r[3],"base64"),c=r[2],l=!1;if(void 0!==c){c=c.split(/\r\n|\n/g);for(let e=0;e<c.length;++e){const r=c[e];let i=r.indexOf(":");if("DEK-Info"===r.slice(0,i)){const e=r.slice(i+2);if(i=e.indexOf(","),-1===i)continue;const n=e.slice(0,i).toLowerCase();if(-1===Bs.indexOf(n))return new Error(`Cipher (${n}) not supported for encrypted OpenSSH private key`);const s=Ws[n];if(!s)return new Error(`Cipher (${n}) not supported for encrypted OpenSSH private key`);const o=Buffer.from(e.slice(i+1),"hex");if(o.length!==s.ivLen)return new Error("Malformed encrypted OpenSSH private key");if(!t)return new Error("Encrypted OpenSSH private key detected, but no passphrase given");const u=Os(o,0,8);let a=Fs("md5").update(t).update(u).digest();for(;a.length<s.keyLen;)a=js(a,Fs("md5").update(a).update(t).update(u).digest());a.length>s.keyLen&&(a=Os(a,0,s.keyLen));try{const e=As(n,a,o);e.setAutoPadding(!1),h=js(e.update(h),e.final()),l=!0}catch(e){return e}}}}let D="Malformed OpenSSH private key";switch(l&&(D+=". Bad passphrase?"),r[1]){case"RSA":i="ssh-rsa",n=qs("RSA PRIVATE",h);try{a=new Ss.Reader(h),a.readSequence(),a.readInt();const e=a.readString(Ss.Integer,!0);if(null===e)return new Error(D);const t=a.readString(Ss.Integer,!0);if(null===t)return new Error(D);s=Ys(e,t),o=Xs(e,t)}catch{return new Error(D)}u="sha1";break;case"DSA":i="ssh-dss",n=qs("DSA PRIVATE",h);try{a=new Ss.Reader(h),a.readSequence(),a.readInt();const e=a.readString(Ss.Integer,!0);if(null===e)return new Error(D);const t=a.readString(Ss.Integer,!0);if(null===t)return new Error(D);const r=a.readString(Ss.Integer,!0);if(null===r)return new Error(D);const i=a.readString(Ss.Integer,!0);if(null===i)return new Error(D);s=zs(e,t,r,i),o=Js(e,t,r,i)}catch{return new Error(D)}u="sha1";break;case"EC":{let e,t,r;try{a=new Ss.Reader(h),a.readSequence(),a.readInt(),t=a.readString(Ss.OctetString,!0),a.readByte();const n=a.readLength();if(null===n)return new Error(D);if(a._offset=n,r=a.readOID(),null===r)return new Error(D);switch(r){case"1.2.840.10045.3.1.7":e="prime256v1",i="ecdsa-sha2-nistp256",u="sha256";break;case"1.3.132.0.34":e="secp384r1",i="ecdsa-sha2-nistp384",u="sha384";break;case"1.3.132.0.35":e="secp521r1",i="ecdsa-sha2-nistp521",u="sha512";break;default:return new Error(`Unsupported private key EC OID: ${r}`)}}catch{return new Error(D)}n=qs("EC PRIVATE",h);const c=function(e,t){const r=_s(e);return r.setPrivateKey(t),r.getPublicKey()}(e,t);s=io(r,c),o=no(r,c);break}}return new ao(i,"",n,s,o,u,l)}}function ho(e,t,r,i,n,s,o){this.type=e,this.comment=t,this[Ms]=r,this[Hs]=i,this[Qs]=n,this[Us]=s,this[$s]=o}ho.prototype=oo;{const UE=Buffer.alloc(0),ME=Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),HE=Buffer.from([0,0,0,0]),QE=Buffer.from([0,0,0,1]),$E=/^PuTTY-User-Key-File-2: (ssh-(?:rsa|dss))\r?\nEncryption: (aes256-cbc|none)\r?\nComment: ([^\r\n]*)\r?\nPublic-Lines: \d+\r?\n([\s\S]+?)\r?\nPrivate-Lines: \d+\r?\n([\s\S]+?)\r?\nPrivate-MAC: ([^\r\n]+)/;ho.parse=(e,t)=>{const r=$E.exec(e);if(null===r)return null;const i=r[2],n="none"!==i;if(n&&!t)return new Error("Encrypted PPK private key detected, but no passphrase given");let s=Buffer.from(r[5],"base64");if(n){const e=ks[i];let r=js(Fs("sha1").update(HE).update(t).digest(),Fs("sha1").update(QE).update(t).digest());r.length>e.keyLen&&(r=Os(r,0,e.keyLen));try{const t=As(e.sslName,r,ME);t.setAutoPadding(!1),s=js(t.update(s),t.final())}catch(e){return e}}const o=r[1],u=r[3],a=Buffer.from(r[4],"base64"),h=r[6],c=o.length,l=i.length,D=Buffer.byteLength(u),d=a.length,f=s.length,p=Buffer.allocUnsafe(4+c+4+l+4+D+4+d+4+f);let g=0;xs(p,c,g),p.utf8Write(o,g+=4,c),xs(p,l,g+=c),p.utf8Write(i,g+=4,l),xs(p,D,g+=l),p.utf8Write(u,g+=4,D),xs(p,d,g+=D),p.set(a,g+=4),xs(p,f,g+=d),p.set(s,g+4),t||(t=UE);if(ms("sha1",Fs("sha1").update("putty-private-key-file-mac-key").update(t).digest()).update(p).digest("hex")!==h)return n?new Error("PPK private key integrity check failed -- bad passphrase?"):new Error("PPK private key integrity check failed");let E,A,_;switch(a._pos=0,Gs(a,1),o){case"ssh-rsa":{const e=Ps(a,a._pos);if(void 0===e)return new Error("Malformed PPK public key");const t=Ps(a,a._pos);if(void 0===t)return new Error("Malformed PPK public key");const r=Ps(s,0);if(void 0===r)return new Error("Malformed PPK private key");const i=Ps(s,s._pos);if(void 0===i)return new Error("Malformed PPK private key");const n=Ps(s,s._pos);if(void 0===n)return new Error("Malformed PPK private key");const o=Ps(s,s._pos);if(void 0===o)return new Error("Malformed PPK private key");E=Ys(t,e),A=Xs(t,e),_=Vs(t,e,r,o,i,n);break}case"ssh-dss":{const e=Ps(a,a._pos);if(void 0===e)return new Error("Malformed PPK public key");const t=Ps(a,a._pos);if(void 0===t)return new Error("Malformed PPK public key");const r=Ps(a,a._pos);if(void 0===r)return new Error("Malformed PPK public key");const i=Ps(a,a._pos);if(void 0===i)return new Error("Malformed PPK public key");const n=Ps(s,0);if(void 0===n)return new Error("Malformed PPK private key");E=zs(e,t,r,i),A=Js(e,t,r,i),_=Zs(e,t,r,i,n);break}}return new ho(o,u,_,E,A,"sha1",n)}}function co(e,t,r,i,n){this.type=e,this.comment=t,this[Ms]=null,this[Hs]=r,this[Qs]=i,this[Us]=n,this[$s]=!1}co.prototype=oo;{let WE;WE=Rs?/^(((?:ssh-(?:rsa|dss|ed25519))|ecdsa-sha2-nistp(?:256|384|521))(?:-cert-v0[01]@openssh.com)?) ([A-Z0-9a-z/+=]+)(?:$|\s+([\S].*)?)$/:/^(((?:ssh-(?:rsa|dss))|ecdsa-sha2-nistp(?:256|384|521))(?:-cert-v0[01]@openssh.com)?) ([A-Z0-9a-z/+=]+)(?:$|\s+([\S].*)?)$/,co.parse=e=>{const t=WE.exec(e);if(null===t)return null;const r=t[1],i=t[2],n=Buffer.from(t[3],"base64"),s=t[4]||"",o=Ps(n,n._pos,!0);return void 0===o||0!==o.indexOf(i)?new Error("Malformed OpenSSH public key"):Do(n,i,s,r)}}function lo(e,t,r,i,n){this.type=e,this.comment=t,this[Ms]=null,this[Hs]=r,this[Qs]=i,this[Us]=n,this[$s]=!1}lo.prototype=oo;{const KE=/^---- BEGIN SSH2 PUBLIC KEY ----(?:\r?\n)((?:.{0,72}\r?\n)+)---- END SSH2 PUBLIC KEY ----$/,qE=/^[A-Z0-9a-z/+=\r\n]+$/,jE=/^([\x21-\x39\x3B-\x7E]{1,64}): ((?:[^\\]*\\\r?\n)*[^\r\n]+)\r?\n/gm,GE=/\\\r?\n/g;lo.parse=e=>{let t=KE.exec(e);if(null===t)return null;const r=t[1];let i=0,n="";for(;t=jE.exec(r);){const e=t[1],r=t[2].replace(GE,"");if(r.length>1024)return jE.lastIndex=0,new Error("Malformed RFC4716 public key");i=jE.lastIndex,"comment"===e.toLowerCase()&&(n=r,n.length>1&&34===n.charCodeAt(0)&&34===n.charCodeAt(n.length-1)&&(n=n.slice(1,-1)))}let s=r.slice(i);if(!qE.test(s))return new Error("Malformed RFC4716 public key");s=Buffer.from(s,"base64");const o=Ps(s,0,!0);if(void 0===o)return new Error("Malformed RFC4716 public key");let u=null,a=null;switch(o){case"ssh-rsa":{const e=Ps(s,s._pos);if(void 0===e)return new Error("Malformed RFC4716 public key");const t=Ps(s,s._pos);if(void 0===t)return new Error("Malformed RFC4716 public key");u=Ys(t,e),a=Xs(t,e);break}case"ssh-dss":{const e=Ps(s,s._pos);if(void 0===e)return new Error("Malformed RFC4716 public key");const t=Ps(s,s._pos);if(void 0===t)return new Error("Malformed RFC4716 public key");const r=Ps(s,s._pos);if(void 0===r)return new Error("Malformed RFC4716 public key");const i=Ps(s,s._pos);if(void 0===i)return new Error("Malformed RFC4716 public key");u=zs(e,t,r,i),a=Js(e,t,r,i);break}default:return new Error("Malformed RFC4716 public key")}return new lo(o,n,u,a,"sha1")}}function Do(e,t,r,i){if(!fo(t))return new Error(`Unsupported OpenSSH public key type: ${t}`);let n,s,o=null,u=null;switch(t){case"ssh-rsa":{const t=Ps(e,e._pos||0);if(void 0===t)return new Error("Malformed OpenSSH public key");const r=Ps(e,e._pos);if(void 0===r)return new Error("Malformed OpenSSH public key");o=Ys(r,t),u=Xs(r,t),n="sha1";break}case"ssh-dss":{const t=Ps(e,e._pos||0);if(void 0===t)return new Error("Malformed OpenSSH public key");const r=Ps(e,e._pos);if(void 0===r)return new Error("Malformed OpenSSH public key");const i=Ps(e,e._pos);if(void 0===i)return new Error("Malformed OpenSSH public key");const s=Ps(e,e._pos);if(void 0===s)return new Error("Malformed OpenSSH public key");o=zs(t,r,i,s),u=Js(t,r,i,s),n="sha1";break}case"ssh-ed25519":{const t=Ps(e,e._pos||0);if(void 0===t||32!==t.length)return new Error("Malformed OpenSSH public key");o=eo(t),u=to(t),n=null;break}case"ecdsa-sha2-nistp256":n="sha256",s="1.2.840.10045.3.1.7";case"ecdsa-sha2-nistp384":void 0===n&&(n="sha384",s="1.3.132.0.34");case"ecdsa-sha2-nistp521":{if(void 0===n&&(n="sha512",s="1.3.132.0.35"),!Gs(e,1))return new Error("Malformed OpenSSH public key");const t=Ps(e,e._pos||0);if(void 0===t)return new Error("Malformed OpenSSH public key");o=io(s,t),u=no(s,t);break}default:return new Error(`Unsupported OpenSSH public key type: ${t}`)}return new co(i,r,o,u,n)}function fo(e){switch(e){case"ssh-rsa":case"ssh-dss":case"ecdsa-sha2-nistp256":case"ecdsa-sha2-nistp384":case"ecdsa-sha2-nistp521":return!0;case"ssh-ed25519":if(Rs)return!0;default:return!1}}function po(e){return!!e&&"boolean"==typeof e[$s]}function go(e,t){if(po(e))return e;let r,i;if(Buffer.isBuffer(e))r=e,e=e.utf8Slice(0,e.length).trim();else{if("string"!=typeof e)return new Error("Key data must be a Buffer or string");e=e.trim()}if(null!=t)if("string"==typeof t)t=Buffer.from(t);else if(!Buffer.isBuffer(t))return new Error("Passphrase must be a string or Buffer when supplied");if(null!==(i=uo.parse(e,t)))return i;if(null!==(i=ao.parse(e,t)))return i;if(null!==(i=ho.parse(e,t)))return i;if(null!==(i=co.parse(e)))return i;if(null!==(i=lo.parse(e)))return i;if(r){Ks.init(r,0);const t=Ks.readString(!0);void 0!==t&&void 0!==(e=Ks.readRaw())&&(i=Do(e,t,"",t),i instanceof Error&&(i=null)),Ks.clear()}return i||new Error("Unsupported key format")}var Eo={isParsedKey:po,isSupportedKeyType:fo,parseDERKey:(e,t)=>Do(e,t,"",t),parseKey:go};const{Socket:Ao}=h,{Duplex:_o}=c,{resolve:Fo}=l,{readFile:mo}=D,{execFile:Co,spawn:yo}=d,{isParsedKey:bo,parseKey:wo}=Eo,{makeBufferParser:vo,readUInt32BE:Bo,writeUInt32BE:So,writeUInt32LE:Io}=ls();function ko(e){let t=!1;return(...r)=>{t||(t=!0,e(...r))}}function Ro(){}const To=Buffer.alloc(0),Oo=vo();let No=class{getIdentities(e){e(new Error("Missing getIdentities() implementation"))}sign(e,t,r,i){"function"==typeof r&&(i=r),i(new Error("Missing sign() implementation"))}},Po=class extends No{constructor(e){super(),this.socketPath=e}getStream(e){e=ko(e);const t=new Ao;function r(){try{t.destroy()}catch{}e(new Error("Failed to connect to agent"))}t.on("connect",(()=>{e(null,t)})),t.on("close",r).on("end",r).on("error",r),t.connect(this.socketPath)}getIdentities(e){e=ko(e),this.getStream(((t,r)=>{function i(t){if(r)try{r.destroy()}catch{}t||(t=new Error("Failed to retrieve identities from agent")),e(t)}if(t)return i(t);const n=new Ho(!0);n.on("error",i),n.pipe(r).pipe(n),r.on("close",i).on("end",i).on("error",i),n.getIdentities(((t,n)=>{if(t)return i(t);try{r.destroy()}catch{}e(null,n)}))}))}sign(e,t,r,i){"function"==typeof r?(i=r,r=void 0):"object"==typeof r&&null!==r||(r=void 0),i=ko(i),this.getStream(((n,s)=>{function o(e){if(s)try{s.destroy()}catch{}e||(e=new Error("Failed to sign data with agent")),i(e)}if(n)return o(n);const u=new Ho(!0);u.on("error",o),u.pipe(s).pipe(u),s.on("close",o).on("end",o).on("error",o),u.sign(e,t,r,((e,t)=>{if(e)return o(e);try{s.destroy()}catch{}i(null,t)}))}))}};const Lo=(()=>{const e=10,t=11,r=12,i=13,n=14,s=15,o=Fo(__dirname,"..","util/pagent.exe"),u={[e]:new Error("Invalid pagent.exe arguments"),[t]:new Error("Pageant is not running"),[r]:new Error("pagent.exe could not create an mmap"),[i]:new Error("pagent.exe could not set mode for stdin"),[n]:new Error("pagent.exe could not set mode for stdout"),[s]:new Error("pagent.exe did not get expected input payload")};function a(e){e.buffer=null,e.proc&&(e.proc.kill(),e.proc=void 0)}class h extends _o{constructor(){super(),this.proc=void 0,this.buffer=null}_read(e){}_write(e,t,r){if(null===this.buffer)this.buffer=e;else{const t=Buffer.allocUnsafe(this.buffer.length+e.length);this.buffer.copy(t,0),e.copy(t,this.buffer.length),this.buffer=t}if(this.buffer.length<4)return r();const i=Bo(this.buffer,0);if(this.buffer.length-4<i)return r();if(e=this.buffer.slice(0,4+i),this.buffer.length>4+i)return r(new Error("Unexpected multiple agent requests"));let n;this.buffer=null;const s=this.proc=yo(o,[e.length]);s.stdout.on("data",(e=>{this.push(e)})),s.on("error",(e=>{n=e,r(n)})),s.on("close",(e=>{if(this.proc=void 0,!n){if(n=u[e])return r(n);r()}})),s.stdin.end(e)}_final(e){a(this),e()}_destroy(e,t){a(this),t()}}return class extends Po{getStream(e){e(null,new h)}}})(),xo=(()=>{const e=/^!<socket >(\d+) s ([A-Z0-9]{8}-[A-Z0-9]{8}-[A-Z0-9]{8}-[A-Z0-9]{8})/;return class extends Po{getStream(t){t=ko(t);let r=this.socketPath,i=!1;mo(r,(function n(s,o){if(s)return i?t(new Error("Invalid cygwin unix socket path")):void Co("cygpath",["-w",r],((e,s,o)=>{if(e||0===s.length)return t(new Error("Invalid cygwin unix socket path"));i=!0,r=s.toString().replace(/[\r\n]/g,""),mo(r,n)}));const u=e.exec(o.toString("ascii"));if(!u)return t(new Error("Malformed cygwin unix socket file"));let a,h=0,c=!1;const l=[];let D,d=Buffer.alloc(12);const f=parseInt(u[1],10),p=u[2].replace(/-/g,""),g=Buffer.allocUnsafe(16);for(let e=0,t=0;t<32;++e,t+=2)g[e]=parseInt(p.substring(t,t+2),16);for(let e=0;e<16;e+=4)Io(g,Bo(g,e),e);function E(){h=0,a="secret",D.write(g)}function A(e){if(h+=e.length,"secret"!==a){if("creds"===a&&(c||l.push(e),12===h)){if(D.removeListener("connect",E),D.removeListener("data",A),D.removeListener("error",_),D.removeListener("end",_),D.removeListener("close",_),c)return t(null,D);c=!0,d=Buffer.concat(l),Io(d,process.pid,0),D.on("error",(()=>{})),D.destroy(),F()}}else 16===h&&(h=0,a="creds",D.write(d))}function _(){t(new Error("Problem negotiating cygwin unix socket security"))}function F(){D=new Ao,D.on("connect",E),D.on("data",A),D.on("error",_),D.on("end",_),D.on("close",_),D.connect(f)}F()}))}}})(),Uo=/^[/\\][/\\]\.[/\\]pipe[/\\].+/;function Mo(e){return"win32"!==process.platform||Uo.test(e)?new Po(e):"pageant"===e?new Lo:new xo(e)}const Ho=(()=>{const e=Symbol("Inbound Request Type"),t=Symbol("Inbound Request Response"),r=Symbol("Inbound Request Context");class i{constructor(i,n){this[e]=i,this[t]=void 0,this[r]=n}hasResponded(){return void 0!==this[t]}getType(){return this[e]}getContext(){return this[r]}}function n(e,r,i){return r[t]=i,function(e){let r;for(;e[a].length;){const i=e[a][0][t];if(void 0===i)break;e[a].shift(),r=e.push(i)}return r}(e)}function s(e){if(e[c]=null,0===e[h]){const t=e[a];if(t&&t.length){e[a]=[];for(const e of t)e.cb(new Error("No reply from server"))}}try{e.end()}catch{}setImmediate((()=>{e[d]||e.emit("end"),e[D]||e.emit("close")}))}function o(){this[D]=!0}function u(){this[d]=!0}const a=Symbol("Requests"),h=Symbol("Agent Protocol Role"),c=Symbol("Agent Protocol Buffer"),l=Symbol("Agent Protocol Current Message Length"),D=Symbol("Agent Protocol Closed"),d=Symbol("Agent Protocol Ended");return class extends _o{constructor(e){super({autoDestroy:!0,emitClose:!1}),this[h]=e?0:1,this[a]=[],this[c]=null,this[l]=-1,this.once("end",u),this.once("close",o)}_read(e){}_write(e,t,r){null===this[c]?this[c]=e:this[c]=function(e,t){const r=Buffer.allocUnsafe(e.length+t.length);return e.copy(r,0),t.copy(r,e.length),r}(this[c],e);let n=this[c],s=n.length,o=0;for(;o<s&&!(s<5)&&(-1===this[l]&&(this[l]=Bo(n,o)),!(s<4+this[l]));){const e=n[o+=4];if(++o,0===this[h]){if(0===this[a].length)return r(new Error("Received unexpected message from server"));const t=this[a].shift();switch(e){case 5:t.cb(new Error("Agent responded with failure"));break;case 12:{if(11!==t.type)return r(new Error("Agent responded with wrong message type"));Oo.init(n,o);const e=Oo.readUInt32BE();if(void 0===e)return Oo.clear(),r(new Error("Malformed agent response"));const i=[];for(let t=0;t<e;++t){let e=Oo.readString();if(void 0===e)return Oo.clear(),r(new Error("Malformed agent response"));const t=Oo.readString(!0);if(void 0===t)return Oo.clear(),r(new Error("Malformed agent response"));e=wo(e),e instanceof Error||(e.comment=e.comment||t,i.push(e))}o=Oo.pos(),Oo.clear(),t.cb(null,i);break}case 14:{if(13!==t.type)return r(new Error("Agent responded with wrong message type"));Oo.init(n,o);let e=Oo.readString();if(o=Oo.pos(),Oo.clear(),void 0===e)return r(new Error("Malformed agent response"));if(Oo.init(e,0),Oo.readString(!0),e=Oo.readString(),Oo.clear(),void 0===e)return r(new Error("Malformed OpenSSH signature format"));t.cb(null,e);break}default:return r(new Error("Agent responded with unsupported message type"))}}else switch(e){case 11:{const t=new i(e);this[a].push(t),this.emit("identities",t);break}case 13:{Oo.init(n,o);let t=Oo.readString();const r=Oo.readString(),s=Oo.readUInt32BE();if(o=Oo.pos(),Oo.clear(),void 0===s){const t=new i(e);return this[a].push(t),this.failureReply(t)}if(t=wo(t),t instanceof Error){const t=new i(e);return this[a].push(t),this.failureReply(t)}const u={hash:void 0};let h;"ssh-rsa"===t.type&&(2&s?(h="rsa-sha2-256",u.hash="sha256"):4&s&&(h="rsa-sha2-512",u.hash="sha512")),void 0===h&&(h=t.type);const c=new i(e,h);this[a].push(c),this.emit("sign",c,t,r,u);break}default:{const t=new i(e);this[a].push(t),this.failureReply(t)}}if(this[l]=-1,o===s){this[c]=null;break}this[c]=n=n.slice(o),s=n.length,o=0}r()}_destroy(e,t){s(this),t()}_final(e){s(this),e()}sign(e,t,r,i){if(0!==this[h])throw new Error("Client-only method called with server role");"function"==typeof r?(i=r,r=void 0):"object"==typeof r&&null!==r||(r=void 0);let n=0;if((e=wo(e))instanceof Error)throw new Error("Invalid public key argument");if("ssh-rsa"===e.type&&r)switch(r.hash){case"sha256":n=2;break;case"sha512":n=4}const s=(e=e.getPublicSSH()).length,o=t.length;let u=0;const c=Buffer.allocUnsafe(9+s+4+o+4);return So(c,c.length-4,u),c[u+=4]=13,So(c,s,++u),e.copy(c,u+=4),So(c,o,u+=s),t.copy(c,u+=4),So(c,n,u+=o),"function"!=typeof i&&(i=Ro),this[a].push({type:13,cb:i}),this.push(c)}getIdentities(e){if(0!==this[h])throw new Error("Client-only method called with server role");let t=0;const r=Buffer.allocUnsafe(5);return So(r,r.length-4,t),r[t+=4]=11,"function"!=typeof e&&(e=Ro),this[a].push({type:11,cb:e}),this.push(r)}failureReply(e){if(1!==this[h])throw new Error("Server-only method called with client role");if(!(e instanceof i))throw new Error("Wrong request argument");if(e.hasResponded())return!0;let t=0;const r=Buffer.allocUnsafe(5);return So(r,r.length-4,t),r[t+=4]=5,n(this,e,r)}getIdentitiesReply(e,t){if(1!==this[h])throw new Error("Server-only method called with client role");if(!(e instanceof i))throw new Error("Wrong request argument");if(e.hasResponded())return!0;if(11!==e.getType())throw new Error("Invalid response to request");if(!Array.isArray(t))throw new Error("Keys argument must be an array");let r=4;const s=[];for(let e=0;e<t.length;++e){const i=t[e];if("object"!=typeof i||null===i)throw new Error(`Invalid key entry: ${i}`);let n,o;if(bo(i))n=i;else if(bo(i.pubKey))n=i.pubKey;else{if("object"!=typeof i.pubKey||null===i.pubKey)continue;if(({pubKey:n,comment:o}=i.pubKey),n=wo(n),n instanceof Error)continue}o=n.comment||o,n=n.getPublicSSH(),r+=4+n.length,o&&"string"==typeof o?o=Buffer.from(o):Buffer.isBuffer(o)||(o=To),r+=4+o.length,s.push({pubKey:n,comment:o})}let o=0;const u=Buffer.allocUnsafe(5+r);So(u,u.length-4,o),u[o+=4]=12,So(u,s.length,++o),o+=4;for(let e=0;e<s.length;++e){const{pubKey:t,comment:r}=s[e];So(u,t.length,o),t.copy(u,o+=4),So(u,r.length,o+=t.length),o+=4,r.length&&(r.copy(u,o),o+=r.length)}return n(this,e,u)}signReply(e,t){if(1!==this[h])throw new Error("Server-only method called with client role");if(!(e instanceof i))throw new Error("Wrong request argument");if(e.hasResponded())return!0;if(13!==e.getType())throw new Error("Invalid response to request");if(!Buffer.isBuffer(t))throw new Error("Signature argument must be a Buffer");if(0===t.length)throw new Error("Signature argument must be non-empty");let r=0;const s=e.getContext(),o=Buffer.byteLength(s),u=Buffer.allocUnsafe(13+o+4+t.length);return So(u,u.length-4,r),u[r+=4]=14,So(u,4+o+4+t.length,++r),So(u,o,r+=4),u.utf8Write(s,r+=4,o),So(u,t.length,r+=o),t.copy(u,r+=4),n(this,e,u)}}})(),Qo=Symbol("Agent"),$o=Symbol("Agent Keys"),Wo=Symbol("Agent Keys Index"),Ko=Symbol("Agent Init Callbacks");function qo(e){return e instanceof No}var jo={AgentContext:class{constructor(e){if("string"==typeof e)e=Mo(e);else if(!qo(e))throw new Error("Invalid agent argument");this[Qo]=e,this[$o]=null,this[Wo]=-1,this[Ko]=null}init(e){if("function"!=typeof e&&(e=Ro),null===this[$o])if(null===this[Ko]){this[Ko]=[e];const t=(...e)=>{process.nextTick((()=>{const t=this[Ko];this[Ko]=null;for(const r of t)r(...e)}))};this[Qo].getIdentities(ko(((e,r)=>{if(e)return t(e);if(!Array.isArray(r))return t(new Error("Agent implementation failed to provide keys"));const i=[];for(let e of r)e=wo(e),e instanceof Error||i.push(e);this[$o]=i,this[Wo]=-1,t()})))}else this[Ko].push(e);else process.nextTick(e)}nextKey(){return!(null===this[$o]||++this[Wo]>=this[$o].length)&&this[$o][this[Wo]]}currentKey(){return null===this[$o]||this[Wo]>=this[$o].length?null:this[$o][this[Wo]]}pos(){return null===this[$o]||this[Wo]>=this[$o].length?-1:this[Wo]}reset(){this[Wo]=-1}sign(...e){this[Qo].sign(...e)}},AgentProtocol:Ho,BaseAgent:No,createAgent:Mo,CygwinAgent:xo,isAgent:qo,OpenSSHAgent:Po,PageantAgent:Lo},Go={};const{kMaxLength:Yo}=g,{createInflate:Xo,constants:{DEFLATE:Vo,INFLATE:zo,Z_DEFAULT_CHUNK:Jo,Z_DEFAULT_COMPRESSION:Zo,Z_DEFAULT_MEMLEVEL:eu,Z_DEFAULT_STRATEGY:tu,Z_DEFAULT_WINDOWBITS:ru,Z_PARTIAL_FLUSH:iu}}=C,nu=Xo()._handle.constructor;function su(){throw new Error("Should not get here")}function ou(e,t,r){const i=this._owner,n=new Error(e);n.errno=t,n.code=r,i._err=n}function uu(e){e._handle&&(e._handle.close(),e._handle=null)}class au{constructor(e){const t=ru,r=Zo,i=eu,n=tu;this._err=void 0,this._writeState=new Uint32Array(2),this._chunkSize=Jo,this._maxOutputLength=Yo,this._outBuffer=Buffer.allocUnsafe(this._chunkSize),this._outOffset=0,this._handle=new nu(e),this._handle._owner=this,this._handle.onerror=ou,this._handle.init(t,r,i,n,this._writeState,su,undefined)}writeSync(e,t){const r=this._handle;if(!r)throw new Error("Invalid Zlib instance");let i,n,s,o=e.length,u=this._chunkSize-this._outOffset,a=0,h=0;const c=this._writeState;let l=this._outBuffer,D=this._outOffset;const d=this._chunkSize;for(;;){if(r.writeSync(iu,e,a,o,l,D,u),this._err)throw this._err;i=c[0],n=c[1];const t=o-n,f=u-i;if(f>0){const e=0===D&&f===l.length?l:l.slice(D,D+f);if(D+=f,s?void 0===s.push?s=[s,e]:s.push(e):s=e,h+=e.byteLength,h>this._maxOutputLength)throw uu(this),new Error(`Output length exceeded maximum of ${this._maxOutputLength}`)}else if(0!==f)throw new Error("have should not go down");if((0===i||D>=d)&&(u=d,D=0,l=Buffer.allocUnsafe(d)),0!==i)break;a+=t,o=n}if(this._outBuffer=l,this._outOffset=D,0===h&&(s=Buffer.alloc(0)),t)return s.totalLen=h,s;if(void 0===s.push)return s;const f=Buffer.allocUnsafe(h);for(let e=0,t=0;e<s.length;++e){const r=s[e];f.set(r,t),t+=r.length}return f}}var hu={PacketReader:class{cleanup(){}read(e){return e}},PacketWriter:class{constructor(e){this.allocStart=5,this.allocStartKEX=5,this._protocol=e}cleanup(){}alloc(e,t){return void 0===this._protocol._kexinit||t?this._protocol._cipher.allocPacket(e):Buffer.allocUnsafe(e)}finalize(e,t){return e}},ZlibPacketReader:class{constructor(){this._zlib=new au(zo)}cleanup(){this._zlib&&uu(this._zlib)}read(e){return this._zlib.writeSync(e,!1)}},ZlibPacketWriter:class{constructor(e){this.allocStart=0,this.allocStartKEX=0,this._protocol=e,this._zlib=new au(Vo)}cleanup(){this._zlib&&uu(this._zlib)}alloc(e,t){return Buffer.allocUnsafe(e)}finalize(e,t){if(void 0===this._protocol._kexinit||t){const t=this._zlib.writeSync(e,!0),r=this._protocol._cipher.allocPacket(t.totalLen);if(void 0===t.push)r.set(t,5);else for(let e=0,i=5;e<t.length;++e){const n=t[e];r.set(n,i),i+=n.length}return r}return e}}};const{bufferSlice:cu,bufferParser:lu,doFatalError:Du,sigSSHToASN1:du,writeUInt32BE:fu}=ls(),{CHANNEL_OPEN_FAILURE:pu,COMPAT:gu,MESSAGE:Eu,TERMINAL_MODE:Au}=cs(),{parseKey:_u}=Eo,Fu=Array.from(Object.entries(Au)).reduce(((e,[t,r])=>({...e,[t]:r})),{});var mu,Cu,yu,bu,wu={[Eu.DISCONNECT]:(e,t)=>{lu.init(t,1);const r=lu.readUInt32BE(),i=lu.readString(!0),n=lu.readString();if(lu.clear(),void 0===n)return Du(e,"Inbound: Malformed DISCONNECT packet");e._debug&&e._debug(`Inbound: Received DISCONNECT (${r}, "${i}")`);const s=e._handlers.DISCONNECT;s&&s(e,r,i)},[Eu.IGNORE]:(e,t)=>{e._debug&&e._debug("Inbound: Received IGNORE")},[Eu.UNIMPLEMENTED]:(e,t)=>{lu.init(t,1);const r=lu.readUInt32BE();if(lu.clear(),void 0===r)return Du(e,"Inbound: Malformed UNIMPLEMENTED packet");e._debug&&e._debug(`Inbound: Received UNIMPLEMENTED (seqno ${r})`)},[Eu.DEBUG]:(e,t)=>{lu.init(t,1);const r=lu.readBool(),i=lu.readString(!0),n=lu.readString();if(lu.clear(),void 0===n)return Du(e,"Inbound: Malformed DEBUG packet");e._debug&&e._debug("Inbound: Received DEBUG");const s=e._handlers.DEBUG;s&&s(e,r,i)},[Eu.SERVICE_REQUEST]:(e,t)=>{lu.init(t,1);const r=lu.readString(!0);if(lu.clear(),void 0===r)return Du(e,"Inbound: Malformed SERVICE_REQUEST packet");e._debug&&e._debug(`Inbound: Received SERVICE_REQUEST (${r})`);const i=e._handlers.SERVICE_REQUEST;i&&i(e,r)},[Eu.SERVICE_ACCEPT]:(e,t)=>{lu.init(t,1);const r=lu.readString(!0);if(lu.clear(),void 0===r)return Du(e,"Inbound: Malformed SERVICE_ACCEPT packet");e._debug&&e._debug(`Inbound: Received SERVICE_ACCEPT (${r})`);const i=e._handlers.SERVICE_ACCEPT;i&&i(e,r)},[Eu.EXT_INFO]:(e,t)=>{lu.init(t,1);const r=lu.readUInt32BE();let i;if(void 0!==r){i=[];for(let e=0;e<r;++e){const e=lu.readString(!0),t=lu.readString();if(void 0===t){i=void 0;break}if("server-sig-algs"!==e);else{const r=t.latin1Slice(0,t.length).split(",");i.push({name:e,algs:r})}}}if(lu.clear(),void 0===i)return Du(e,"Inbound: Malformed EXT_INFO packet");e._debug&&e._debug("Inbound: Received EXT_INFO");const n=e._handlers.EXT_INFO;n&&n(e,i)},[Eu.USERAUTH_REQUEST]:(e,t)=>{lu.init(t,1);const r=lu.readString(!0),i=lu.readString(!0),n=lu.readString(!0);let s,o;switch(n){case"none":s=null;break;case"password":{const e=lu.readBool();if(void 0!==e&&(s=lu.readString(!0),void 0!==s&&e)){const e=lu.readString(!0);s=void 0!==e?{oldPassword:s,newPassword:e}:void 0}break}case"publickey":{const r=lu.readBool();if(void 0!==r){const i=lu.readString(!0);let n=i;const u=lu.readString();let a;switch(i){case"rsa-sha2-256":n="ssh-rsa",a="sha256";break;case"rsa-sha2-512":n="ssh-rsa",a="sha512"}if(r){const r=lu.pos();let o=lu.readString();if(void 0!==o&&(o.length>4+i.length+4&&o.utf8Slice(4,4+i.length)===i&&(o=cu(o,4+i.length+4)),o=du(o,n),o)){const i=e._kex.sessionID,h=Buffer.allocUnsafe(4+i.length+r);fu(h,i.length,0),h.set(i,4),h.set(new Uint8Array(t.buffer,t.byteOffset,r),4+i.length),s={keyAlgo:n,key:u,signature:o,blob:h,hashAlgo:a}}}else s={keyAlgo:n,key:u,hashAlgo:a},o="publickey -- check"}break}case"hostbased":{const r=lu.readString(!0);let i=r;const n=lu.readString(),o=lu.readString(!0),u=lu.readString(!0);let a;switch(r){case"rsa-sha2-256":i="ssh-rsa",a="sha256";break;case"rsa-sha2-512":i="ssh-rsa",a="sha512"}const h=lu.pos();let c=lu.readString();if(void 0!==c&&(c.length>4+r.length+4&&c.utf8Slice(4,4+r.length)===r&&(c=cu(c,4+r.length+4)),c=du(c,i),void 0!==c)){const r=e._kex.sessionID,l=Buffer.allocUnsafe(4+r.length+h);fu(l,r.length,0),l.set(r,4),l.set(new Uint8Array(t.buffer,t.byteOffset,h),4+r.length),s={keyAlgo:i,key:n,signature:c,blob:l,localHostname:o,localUsername:u,hashAlgo:a}}break}case"keyboard-interactive":lu.skipString(),s=lu.readList();break;default:void 0!==n&&(s=lu.readRaw())}if(lu.clear(),void 0===s)return Du(e,"Inbound: Malformed USERAUTH_REQUEST packet");void 0===o&&(o=n),e._authsQueue.push(n),e._debug&&e._debug(`Inbound: Received USERAUTH_REQUEST (${o})`);const u=e._handlers.USERAUTH_REQUEST;u&&u(e,r,i,n,s)},[Eu.USERAUTH_FAILURE]:(e,t)=>{lu.init(t,1);const r=lu.readList(),i=lu.readBool();if(lu.clear(),void 0===i)return Du(e,"Inbound: Malformed USERAUTH_FAILURE packet");e._debug&&e._debug(`Inbound: Received USERAUTH_FAILURE (${r})`),e._authsQueue.shift();const n=e._handlers.USERAUTH_FAILURE;n&&n(e,r,i)},[Eu.USERAUTH_SUCCESS]:(e,t)=>{e._debug&&e._debug("Inbound: Received USERAUTH_SUCCESS"),e._authsQueue.shift();const r=e._handlers.USERAUTH_SUCCESS;r&&r(e)},[Eu.USERAUTH_BANNER]:(e,t)=>{lu.init(t,1);const r=lu.readString(!0),i=lu.readString();if(lu.clear(),void 0===i)return Du(e,"Inbound: Malformed USERAUTH_BANNER packet");e._debug&&e._debug("Inbound: Received USERAUTH_BANNER");const n=e._handlers.USERAUTH_BANNER;n&&n(e,r)},60:(e,t)=>{if(e._authsQueue.length)switch(e._authsQueue[0]){case"password":{lu.init(t,1);const r=lu.readString(!0),i=lu.readString();if(lu.clear(),void 0===i)return Du(e,"Inbound: Malformed USERAUTH_PASSWD_CHANGEREQ packet");e._debug&&e._debug("Inbound: Received USERAUTH_PASSWD_CHANGEREQ");const n=e._handlers.USERAUTH_PASSWD_CHANGEREQ;n&&n(e,r);break}case"publickey":{lu.init(t,1);const r=lu.readString(!0),i=lu.readString();if(lu.clear(),void 0===i)return Du(e,"Inbound: Malformed USERAUTH_PK_OK packet");e._debug&&e._debug("Inbound: Received USERAUTH_PK_OK"),e._authsQueue.shift();const n=e._handlers.USERAUTH_PK_OK;n&&n(e,r,i);break}case"keyboard-interactive":{lu.init(t,1);const r=lu.readString(!0),i=lu.readString(!0);lu.readString();const n=lu.readUInt32BE();let s;if(void 0!==n){let e;for(s=new Array(n),e=0;e<n;++e){const t=lu.readString(!0),r=lu.readBool();if(void 0===r)break;s[e]={prompt:t,echo:r}}e!==n&&(s=void 0)}if(lu.clear(),void 0===s)return Du(e,"Inbound: Malformed USERAUTH_INFO_REQUEST packet");e._debug&&e._debug("Inbound: Received USERAUTH_INFO_REQUEST");const o=e._handlers.USERAUTH_INFO_REQUEST;o&&o(e,r,i,s);break}default:e._debug&&e._debug("Inbound: Received unexpected payload type 60")}else e._debug&&e._debug("Inbound: Received payload type 60 without auth")},61:(e,t)=>{if(!e._authsQueue.length)return void(e._debug&&e._debug("Inbound: Received payload type 61 without auth"));if("keyboard-interactive"!==e._authsQueue[0])return Du(e,"Inbound: Received unexpected payload type 61");lu.init(t,1);const r=lu.readUInt32BE();let i;if(void 0!==r){let e;for(i=new Array(r),e=0;e<r;++e){const t=lu.readString(!0);if(void 0===t)break;i[e]=t}e!==r&&(i=void 0)}if(lu.clear(),void 0===i)return Du(e,"Inbound: Malformed USERAUTH_INFO_RESPONSE packet");e._debug&&e._debug("Inbound: Received USERAUTH_INFO_RESPONSE");const n=e._handlers.USERAUTH_INFO_RESPONSE;n&&n(e,i)},[Eu.GLOBAL_REQUEST]:(e,t)=>{lu.init(t,1);const r=lu.readString(!0),i=lu.readBool();let n;if(void 0!==i)switch(r){case"tcpip-forward":case"cancel-tcpip-forward":{const e=lu.readString(!0),t=lu.readUInt32BE();void 0!==t&&(n={bindAddr:e,bindPort:t});break}case"streamlocal-forward@openssh.com":case"cancel-streamlocal-forward@openssh.com":{const e=lu.readString(!0);void 0!==e&&(n={socketPath:e});break}case"no-more-sessions@openssh.com":n=null;break;case"hostkeys-00@openssh.com":for(n=[];lu.avail()>0;){const e=lu.readString();if(void 0===e){n=void 0;break}const t=_u(e);t instanceof Error||n.push(t)}break;default:n=lu.readRaw()}if(lu.clear(),void 0===n)return Du(e,"Inbound: Malformed GLOBAL_REQUEST packet");e._debug&&e._debug(`Inbound: GLOBAL_REQUEST (${r})`);const s=e._handlers.GLOBAL_REQUEST;s?s(e,r,i,n):e.requestFailure()},[Eu.REQUEST_SUCCESS]:(e,t)=>{const r=t.length>1?cu(t,1):null;e._debug&&e._debug("Inbound: REQUEST_SUCCESS");const i=e._handlers.REQUEST_SUCCESS;i&&i(e,r)},[Eu.REQUEST_FAILURE]:(e,t)=>{e._debug&&e._debug("Inbound: Received REQUEST_FAILURE");const r=e._handlers.REQUEST_FAILURE;r&&r(e)},[Eu.CHANNEL_OPEN]:(e,t)=>{lu.init(t,1);const r=lu.readString(!0),i=lu.readUInt32BE(),n=lu.readUInt32BE(),s=lu.readUInt32BE();let o;switch(r){case"forwarded-tcpip":case"direct-tcpip":{const e=lu.readString(!0),t=lu.readUInt32BE(),u=lu.readString(!0),a=lu.readUInt32BE();void 0!==a&&(o={type:r,sender:i,window:n,packetSize:s,data:{destIP:e,destPort:t,srcIP:u,srcPort:a}});break}case"forwarded-streamlocal@openssh.com":case"direct-streamlocal@openssh.com":{const e=lu.readString(!0);void 0!==e&&(o={type:r,sender:i,window:n,packetSize:s,data:{socketPath:e}});break}case"x11":{const e=lu.readString(!0),t=lu.readUInt32BE();void 0!==t&&(o={type:r,sender:i,window:n,packetSize:s,data:{srcIP:e,srcPort:t}});break}default:o={type:r,sender:i,window:n,packetSize:s,data:{}}}if(lu.clear(),void 0===o)return Du(e,"Inbound: Malformed CHANNEL_OPEN packet");e._debug&&e._debug(`Inbound: CHANNEL_OPEN (s:${i}, ${r})`);const u=e._handlers.CHANNEL_OPEN;u?u(e,o):e.channelOpenFail(o.sender,pu.ADMINISTRATIVELY_PROHIBITED,"","")},[Eu.CHANNEL_OPEN_CONFIRMATION]:(e,t)=>{lu.init(t,1);const r=lu.readUInt32BE(),i=lu.readUInt32BE(),n=lu.readUInt32BE(),s=lu.readUInt32BE(),o=lu.avail()?lu.readRaw():void 0;if(lu.clear(),void 0===s)return Du(e,"Inbound: Malformed CHANNEL_OPEN_CONFIRMATION packet");e._debug&&e._debug(`Inbound: CHANNEL_OPEN_CONFIRMATION (r:${r}, s:${i})`);const u=e._handlers.CHANNEL_OPEN_CONFIRMATION;u&&u(e,{recipient:r,sender:i,window:n,packetSize:s,data:o})},[Eu.CHANNEL_OPEN_FAILURE]:(e,t)=>{lu.init(t,1);const r=lu.readUInt32BE(),i=lu.readUInt32BE(),n=lu.readString(!0),s=lu.readString();if(lu.clear(),void 0===s)return Du(e,"Inbound: Malformed CHANNEL_OPEN_FAILURE packet");e._debug&&e._debug(`Inbound: CHANNEL_OPEN_FAILURE (r:${r})`);const o=e._handlers.CHANNEL_OPEN_FAILURE;o&&o(e,r,i,n)},[Eu.CHANNEL_WINDOW_ADJUST]:(e,t)=>{lu.init(t,1);const r=lu.readUInt32BE(),i=lu.readUInt32BE();if(lu.clear(),void 0===i)return Du(e,"Inbound: Malformed CHANNEL_WINDOW_ADJUST packet");e._debug&&e._debug(`Inbound: CHANNEL_WINDOW_ADJUST (r:${r}, ${i})`);const n=e._handlers.CHANNEL_WINDOW_ADJUST;n&&n(e,r,i)},[Eu.CHANNEL_DATA]:(e,t)=>{lu.init(t,1);const r=lu.readUInt32BE(),i=lu.readString();if(lu.clear(),void 0===i)return Du(e,"Inbound: Malformed CHANNEL_DATA packet");e._debug&&e._debug(`Inbound: CHANNEL_DATA (r:${r}, ${i.length})`);const n=e._handlers.CHANNEL_DATA;n&&n(e,r,i)},[Eu.CHANNEL_EXTENDED_DATA]:(e,t)=>{lu.init(t,1);const r=lu.readUInt32BE(),i=lu.readUInt32BE(),n=lu.readString();if(lu.clear(),void 0===n)return Du(e,"Inbound: Malformed CHANNEL_EXTENDED_DATA packet");e._debug&&e._debug(`Inbound: CHANNEL_EXTENDED_DATA (r:${r}, ${n.length})`);const s=e._handlers.CHANNEL_EXTENDED_DATA;s&&s(e,r,n,i)},[Eu.CHANNEL_EOF]:(e,t)=>{lu.init(t,1);const r=lu.readUInt32BE();if(lu.clear(),void 0===r)return Du(e,"Inbound: Malformed CHANNEL_EOF packet");e._debug&&e._debug(`Inbound: CHANNEL_EOF (r:${r})`);const i=e._handlers.CHANNEL_EOF;i&&i(e,r)},[Eu.CHANNEL_CLOSE]:(e,t)=>{lu.init(t,1);const r=lu.readUInt32BE();if(lu.clear(),void 0===r)return Du(e,"Inbound: Malformed CHANNEL_CLOSE packet");e._debug&&e._debug(`Inbound: CHANNEL_CLOSE (r:${r})`);const i=e._handlers.CHANNEL_CLOSE;i&&i(e,r)},[Eu.CHANNEL_REQUEST]:(e,t)=>{lu.init(t,1);const r=lu.readUInt32BE(),i=lu.readString(!0),n=lu.readBool();let s;if(void 0!==n)switch(i){case"exit-status":s=lu.readUInt32BE(),e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${i}: ${s})`);break;case"exit-signal":{let t,n;if(e._compatFlags&gu.OLD_EXIT){const e=lu.readUInt32BE();switch(e){case 1:t="HUP";break;case 2:t="INT";break;case 3:t="QUIT";break;case 6:t="ABRT";break;case 9:t="KILL";break;case 14:t="ALRM";break;case 15:t="TERM";break;default:void 0!==e&&(t=`UNKNOWN (${e})`)}n=!1}else t=lu.readString(!0),n=lu.readBool(),void 0===n&&(t=void 0);const o=lu.readString(!0);void 0!==lu.skipString()&&(s={signal:t,coreDumped:n,errorMessage:o}),e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${i}: ${t})`);break}case"pty-req":{const t=lu.readString(!0),n=lu.readUInt32BE(),o=lu.readUInt32BE(),u=lu.readUInt32BE(),a=lu.readUInt32BE(),h=lu.readString();if(void 0!==h){lu.init(h,1);let e={};for(;lu.avail();){const t=lu.readByte();if(t===Au.TTY_OP_END)break;const r=Fu[t],i=lu.readUInt32BE();if(void 0===t||void 0===r||void 0===i){e=void 0;break}e[r]=i}void 0!==e&&(s={term:t,cols:n,rows:o,width:u,height:a,modes:e})}e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${i})`);break}case"window-change":{const t=lu.readUInt32BE(),n=lu.readUInt32BE(),o=lu.readUInt32BE(),u=lu.readUInt32BE();void 0!==u&&(s={cols:t,rows:n,width:o,height:u}),e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${i})`);break}case"x11-req":{const t=lu.readBool(),n=lu.readString(!0),o=lu.readString(),u=lu.readUInt32BE();void 0!==u&&(s={single:t,protocol:n,cookie:o,screen:u}),e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${i})`);break}case"env":{const t=lu.readString(!0),n=lu.readString(!0);void 0!==n&&(s={name:t,value:n}),e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${i}: ${t}=${n})`);break}case"shell":case"auth-agent-req@openssh.com":s=null,e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${i})`);break;case"exec":case"subsystem":case"signal":s=lu.readString(!0),e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${i}: ${s})`);break;case"xon-xoff":s=lu.readBool(),e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${i}: ${s})`);break;default:s=lu.avail()?lu.readRaw():null,e._debug&&e._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${i})`)}if(lu.clear(),void 0===s)return Du(e,"Inbound: Malformed CHANNEL_REQUEST packet");const o=e._handlers.CHANNEL_REQUEST;o&&o(e,r,i,n,s)},[Eu.CHANNEL_SUCCESS]:(e,t)=>{lu.init(t,1);const r=lu.readUInt32BE();if(lu.clear(),void 0===r)return Du(e,"Inbound: Malformed CHANNEL_SUCCESS packet");e._debug&&e._debug(`Inbound: CHANNEL_SUCCESS (r:${r})`);const i=e._handlers.CHANNEL_SUCCESS;i&&i(e,r)},[Eu.CHANNEL_FAILURE]:(e,t)=>{lu.init(t,1);const r=lu.readUInt32BE();if(lu.clear(),void 0===r)return Du(e,"Inbound: Malformed CHANNEL_FAILURE packet");e._debug&&e._debug(`Inbound: CHANNEL_FAILURE (r:${r})`);const i=e._handlers.CHANNEL_FAILURE;i&&i(e,r)}};function vu(){if(Cu)return mu;Cu=1;const e=new Array(256);return[Bu().HANDLERS,wu].forEach((t=>{for(let[r,i]of Object.entries(t))r=+r,isFinite(r)&&r>=0&&r<e.length&&(e[r]=i)})),mu=e}function Bu(){if(bu)return yu;bu=1;const{createDiffieHellman:e,createDiffieHellmanGroup:t,createECDH:r,createHash:i,createPublicKey:n,diffieHellman:s,generateKeyPairSync:o,randomFillSync:u}=f,{Ber:a}=Vn,{COMPAT:h,curve25519Supported:c,DEFAULT_KEX:l,DEFAULT_SERVER_HOST_KEY:D,DEFAULT_CIPHER:d,DEFAULT_MAC:p,DEFAULT_COMPRESSION:g,DISCONNECT_REASON:E,MESSAGE:A}=cs(),{CIPHER_INFO:_,createCipher:F,createDecipher:m,MAC_INFO:C}=Es(),{parseDERKey:y}=Eo,{bufferFill:b,bufferParser:w,convertSignature:v,doFatalError:B,FastBuffer:S,sigSSHToASN1:I,writeUInt32BE:k}=ls(),{PacketReader:R,PacketWriter:T,ZlibPacketReader:O,ZlibPacketWriter:N}=hu;let P;const L=Buffer.alloc(0);function x(e){let t;if(e._compatFlags&h.BAD_DHGEX){const r=e._offer.lists.kex;let i=r.array,n=!1;for(let e=0;e<i.length;++e)i[e].includes("group-exchange")&&(n||(n=!0,i=i.slice()),i.splice(e--,1));if(n){let n=17+e._offer.totalSize+1+4;const s=Buffer.from(i.join(","));n-=r.buffer.length-s.length;const o=e._offer.lists.all,u=new Uint8Array(o.buffer,o.byteOffset+4+r.buffer.length,o.length-(4+r.buffer.length));t=Buffer.allocUnsafe(n),k(t,s.length,17),t.set(s,21),t.set(u,21+s.length)}}void 0===t&&(t=Buffer.allocUnsafe(17+e._offer.totalSize+1+4),e._offer.copyAllTo(t,17)),e._debug&&e._debug("Outbound: Sending KEXINIT"),t[0]=A.KEXINIT,u(t,1,16),b(t,0,t.length-5),e._kexinit=t,e._packetRW.write.allocStart=0;{const r=e._packetRW.write.allocStartKEX,i=e._packetRW.write.alloc(t.length,!0);i.set(t,r),e._cipher.encrypt(e._packetRW.write.finalize(i,!0))}}function U(e,t){const r={kex:void 0,serverHostKey:void 0,cs:{cipher:void 0,mac:void 0,compress:void 0,lang:void 0},sc:{cipher:void 0,mac:void 0,compress:void 0,lang:void 0}};if(w.init(t,17),void 0===(r.kex=w.readList())||void 0===(r.serverHostKey=w.readList())||void 0===(r.cs.cipher=w.readList())||void 0===(r.sc.cipher=w.readList())||void 0===(r.cs.mac=w.readList())||void 0===(r.sc.mac=w.readList())||void 0===(r.cs.compress=w.readList())||void 0===(r.sc.compress=w.readList())||void 0===(r.cs.lang=w.readList())||void 0===(r.sc.lang=w.readList()))return w.clear(),B(e,"Received malformed KEXINIT","handshake",E.KEY_EXCHANGE_FAILED);const i=w.pos(),n=i<t.length&&1===t[i];w.clear();const s=e._offer,o=r;let u,a,c,l=s.lists.kex.array;if(e._compatFlags&h.BAD_DHGEX){let e=!1;for(let t=0;t<l.length;++t)-1!==l[t].indexOf("group-exchange")&&(e||(e=!0,l=l.slice()),l.splice(t--,1))}const D=e._debug;let d;if(D&&D("Inbound: Handshake in progress"),D&&D(`Handshake: (local) KEX method: ${l}`),D&&D(`Handshake: (remote) KEX method: ${o.kex}`),e._server?(a=l,u=o.kex,d=-1!==u.indexOf("ext-info-c")):(a=o.kex,u=l,d=-1!==a.indexOf("ext-info-s")),void 0===e._strictMode&&(e._server?e._strictMode=-1!==u.indexOf("kex-strict-c-v00@openssh.com"):e._strictMode=-1!==a.indexOf("kex-strict-s-v00@openssh.com"),e._strictMode&&(D&&D("Handshake: strict KEX mode enabled"),1!==e._decipher.inSeqno)))return D&&D("Handshake: KEXINIT not first packet in strict KEX mode"),B(e,"Handshake failed: KEXINIT not first packet in strict KEX mode","handshake",E.KEY_EXCHANGE_FAILED);for(c=0;c<u.length&&-1===a.indexOf(u[c]);++c);if(c===u.length)return D&&D("Handshake: no matching key exchange algorithm"),B(e,"Handshake failed: no matching key exchange algorithm","handshake",E.KEY_EXCHANGE_FAILED);r.kex=u[c],D&&D(`Handshake: KEX algorithm: ${u[c]}`),!n||o.kex.length&&u[c]===o.kex[0]||(e._skipNextInboundPacket=!0);const f=s.lists.serverHostKey.array;for(D&&D(`Handshake: (local) Host key format: ${f}`),D&&D(`Handshake: (remote) Host key format: ${o.serverHostKey}`),e._server?(a=f,u=o.serverHostKey):(a=o.serverHostKey,u=f),c=0;c<u.length&&-1===a.indexOf(u[c]);++c);if(c===u.length)return D&&D("Handshake: No matching host key format"),B(e,"Handshake failed: no matching host key format","handshake",E.KEY_EXCHANGE_FAILED);r.serverHostKey=u[c],D&&D(`Handshake: Host key format: ${u[c]}`);const p=s.lists.cs.cipher.array;for(D&&D(`Handshake: (local) C->S cipher: ${p}`),D&&D(`Handshake: (remote) C->S cipher: ${o.cs.cipher}`),e._server?(a=p,u=o.cs.cipher):(a=o.cs.cipher,u=p),c=0;c<u.length&&-1===a.indexOf(u[c]);++c);if(c===u.length)return D&&D("Handshake: No matching C->S cipher"),B(e,"Handshake failed: no matching C->S cipher","handshake",E.KEY_EXCHANGE_FAILED);r.cs.cipher=u[c],D&&D(`Handshake: C->S Cipher: ${u[c]}`);const g=s.lists.sc.cipher.array;for(D&&D(`Handshake: (local) S->C cipher: ${g}`),D&&D(`Handshake: (remote) S->C cipher: ${o.sc.cipher}`),e._server?(a=g,u=o.sc.cipher):(a=o.sc.cipher,u=g),c=0;c<u.length&&-1===a.indexOf(u[c]);++c);if(c===u.length)return D&&D("Handshake: No matching S->C cipher"),B(e,"Handshake failed: no matching S->C cipher","handshake",E.KEY_EXCHANGE_FAILED);r.sc.cipher=u[c],D&&D(`Handshake: S->C cipher: ${u[c]}`);const A=s.lists.cs.mac.array;if(D&&D(`Handshake: (local) C->S MAC: ${A}`),D&&D(`Handshake: (remote) C->S MAC: ${o.cs.mac}`),_[r.cs.cipher].authLen>0)r.cs.mac="",D&&D("Handshake: C->S MAC: <implicit>");else{for(e._server?(a=A,u=o.cs.mac):(a=o.cs.mac,u=A),c=0;c<u.length&&-1===a.indexOf(u[c]);++c);if(c===u.length)return D&&D("Handshake: No matching C->S MAC"),B(e,"Handshake failed: no matching C->S MAC","handshake",E.KEY_EXCHANGE_FAILED);r.cs.mac=u[c],D&&D(`Handshake: C->S MAC: ${u[c]}`)}const F=s.lists.sc.mac.array;if(D&&D(`Handshake: (local) S->C MAC: ${F}`),D&&D(`Handshake: (remote) S->C MAC: ${o.sc.mac}`),_[r.sc.cipher].authLen>0)r.sc.mac="",D&&D("Handshake: S->C MAC: <implicit>");else{for(e._server?(a=F,u=o.sc.mac):(a=o.sc.mac,u=F),c=0;c<u.length&&-1===a.indexOf(u[c]);++c);if(c===u.length)return D&&D("Handshake: No matching S->C MAC"),B(e,"Handshake failed: no matching S->C MAC","handshake",E.KEY_EXCHANGE_FAILED);r.sc.mac=u[c],D&&D(`Handshake: S->C MAC: ${u[c]}`)}const m=s.lists.cs.compress.array;for(D&&D(`Handshake: (local) C->S compression: ${m}`),D&&D(`Handshake: (remote) C->S compression: ${o.cs.compress}`),e._server?(a=m,u=o.cs.compress):(a=o.cs.compress,u=m),c=0;c<u.length&&-1===a.indexOf(u[c]);++c);if(c===u.length)return D&&D("Handshake: No matching C->S compression"),B(e,"Handshake failed: no matching C->S compression","handshake",E.KEY_EXCHANGE_FAILED);r.cs.compress=u[c],D&&D(`Handshake: C->S compression: ${u[c]}`);const C=s.lists.sc.compress.array;for(D&&D(`Handshake: (local) S->C compression: ${C}`),D&&D(`Handshake: (remote) S->C compression: ${o.sc.compress}`),e._server?(a=C,u=o.sc.compress):(a=o.sc.compress,u=C),c=0;c<u.length&&-1===a.indexOf(u[c]);++c);if(c===u.length)return D&&D("Handshake: No matching S->C compression"),B(e,"Handshake failed: no matching S->C compression","handshake",E.KEY_EXCHANGE_FAILED);r.sc.compress=u[c],D&&D(`Handshake: S->C compression: ${u[c]}`),r.cs.lang="",r.sc.lang="",e._kex&&(e._kexinit||x(e),e._decipher._onPayload=W.bind(e,{firstPacket:!1})),e._kex=M(r,e,t),e._kex.remoteExtInfoEnabled=d,e._kex.start()}const M=(()=>{function u(e){let t,r=0,i=e.length;for(;0===e[r];)++r,--i;return 128&e[r]?(t=Buffer.allocUnsafe(1+i),t[0]=0,e.copy(t,1,r),e=t):i!==e.length&&(t=Buffer.allocUnsafe(i),e.copy(t,0,r),e=t),e}class l{constructor(e,t,r){this._protocol=t,this.sessionID=t._kex?t._kex.sessionID:void 0,this.negotiated=e,this.remoteExtInfoEnabled=!1,this._step=1,this._public=null,this._dh=null,this._sentNEWKEYS=!1,this._receivedNEWKEYS=!1,this._finished=!1,this._hostVerified=!1,this._kexinit=t._kexinit,this._remoteKexinit=r,this._identRaw=t._identRaw,this._remoteIdentRaw=t._remoteIdentRaw,this._hostKey=void 0,this._dhData=void 0,this._sig=void 0}finish(e){if(this._finished)return!1;this._finished=!0;const t=this._protocol._server,r=this.negotiated,n=this.convertPublicKey(this._dhData);let s=this.computeSecret(this._dhData);if(s instanceof Error)return s.message=`Error while computing DH secret (${this.type}): ${s.message}`,s.level="handshake",B(this._protocol,s,E.KEY_EXCHANGE_FAILED);const o=i(this.hashName);Q(o,t?this._remoteIdentRaw:this._identRaw),Q(o,t?this._identRaw:this._remoteIdentRaw),Q(o,t?this._remoteKexinit:this._kexinit),Q(o,t?this._kexinit:this._remoteKexinit);const u=t?this._hostKey.getPublicSSH():this._hostKey;if(Q(o,u),"groupex"===this.type){const e=this.getDHParams(),t=Buffer.allocUnsafe(4);k(t,this._minBits,0),o.update(t),k(t,this._prefBits,0),o.update(t),k(t,this._maxBits,0),o.update(t),Q(o,e.prime),Q(o,e.generator)}Q(o,t?n:this.getPublicKey());const a=t?this.getPublicKey():n;Q(o,a),Q(o,s);const h=o.digest();if(t){let e;switch(this.negotiated.serverHostKey){case"rsa-sha2-256":e="sha256";break;case"rsa-sha2-512":e="sha512"}this._protocol._debug&&this._protocol._debug("Generating signature ...");let t=this._hostKey.sign(h,e);if(t instanceof Error)return B(this._protocol,`Handshake failed: signature generation failed for ${this._hostKey.type} host key: ${t.message}`,"handshake",E.KEY_EXCHANGE_FAILED);if(t=v(t,this._hostKey.type),!1===t)return B(this._protocol,`Handshake failed: signature conversion failed for ${this._hostKey.type} host key`,"handshake",E.KEY_EXCHANGE_FAILED);const r=this.negotiated.serverHostKey,i=Buffer.byteLength(r),n=4+i+4+t.length;let s=this._protocol._packetRW.write.allocStartKEX;const o=this._protocol._packetRW.write.alloc(5+u.length+4+a.length+4+n,!0);if(o[s]=A.KEXDH_REPLY,k(o,u.length,++s),o.set(u,s+=4),k(o,a.length,s+=u.length),o.set(a,s+=4),k(o,n,s+=a.length),k(o,i,s+=4),o.utf8Write(r,s+=4,i),k(o,t.length,s+=i),o.set(t,s+=4),this._protocol._debug){let e;switch(this.type){case"group":e="KEXDH_REPLY";break;case"groupex":e="KEXDH_GEX_REPLY";break;default:e="KEXECDH_REPLY"}this._protocol._debug(`Outbound: Sending ${e}`)}this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(o,!0))}else{w.init(this._sig,0);const e=w.readString(!0);if(!e)return B(this._protocol,"Malformed packet while reading signature","handshake",E.KEY_EXCHANGE_FAILED);if(e!==r.serverHostKey)return B(this._protocol,`Wrong signature type: ${e}, expected: ${r.serverHostKey}`,"handshake",E.KEY_EXCHANGE_FAILED);let t,i,n=w.readString();if(w.clear(),void 0===n)return B(this._protocol,"Malformed packet while reading signature","handshake",E.KEY_EXCHANGE_FAILED);if(!(n=I(n,e)))return B(this._protocol,"Malformed signature","handshake",E.KEY_EXCHANGE_FAILED);{w.init(this._hostKey,0);const e=w.readString(!0),r=this._hostKey.slice(w.pos());if(w.clear(),t=y(r,e),t instanceof Error)return t.level="handshake",B(this._protocol,t,E.KEY_EXCHANGE_FAILED)}switch(this.negotiated.serverHostKey){case"rsa-sha2-256":i="sha256";break;case"rsa-sha2-512":i="sha512"}this._protocol._debug&&this._protocol._debug("Verifying signature ...");const s=t.verify(h,n,i);if(!0!==s)return s instanceof Error?this._protocol._debug&&this._protocol._debug(`Signature verification failed: ${s.stack}`):this._protocol._debug&&this._protocol._debug("Signature verification failed"),B(this._protocol,"Handshake failed: signature verification failed","handshake",E.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Verified signature")}let c,l;!t&&e||K(this);const D=e=>{if(c)return K(this),c.outbound.seqno=this._protocol._cipher.outSeqno,this._protocol._cipher.free(),this._protocol._cipher=F(c),this._protocol._packetRW.write=l,c=void 0,l=void 0,this._protocol._onHandshakeComplete(r),!1;this.sessionID||(this.sessionID=h);{const e=Buffer.allocUnsafe(4+s.length);k(e,s.length,0),e.set(s,4),s=e}const i=_[r.cs.cipher],n=_[r.sc.cipher],o=$(i.ivLen,this.hashName,s,h,this.sessionID,"A"),u=$(n.ivLen,this.hashName,s,h,this.sessionID,"B"),a=$(i.keyLen,this.hashName,s,h,this.sessionID,"C"),d=$(n.keyLen,this.hashName,s,h,this.sessionID,"D");let f,p,g,E;i.authLen||(f=C[r.cs.mac],p=$(f.len,this.hashName,s,h,this.sessionID,"E")),n.authLen||(g=C[r.sc.mac],E=$(g.len,this.hashName,s,h,this.sessionID,"F"));const A={inbound:{onPayload:this._protocol._onPayload,seqno:this._protocol._decipher.inSeqno,decipherInfo:t?i:n,decipherIV:t?o:u,decipherKey:t?a:d,macInfo:t?f:g,macKey:t?p:E},outbound:{onWrite:this._protocol._onWrite,seqno:this._protocol._cipher.outSeqno,cipherInfo:t?n:i,cipherIV:t?u:o,cipherKey:t?d:a,macInfo:t?g:f,macKey:t?E:p}};this._protocol._decipher.free(),c=A,this._protocol._decipher=m(A);const y={read:void 0,write:void 0};switch(r.cs.compress){case"zlib":t?y.read=new O:y.write=new N(this._protocol);break;case"zlib@openssh.com":if(this._protocol._authenticated){t?y.read=new O:y.write=new N(this._protocol);break}default:t?y.read=new R:y.write=new T(this._protocol)}switch(r.sc.compress){case"zlib":t?y.write=new N(this._protocol):y.read=new O;break;case"zlib@openssh.com":if(this._protocol._authenticated){t?y.write=new N(this._protocol):y.read=new O;break}default:t?y.write=new T(this._protocol):y.read=new R}return this._protocol._packetRW.read.cleanup(),this._protocol._packetRW.write.cleanup(),this._protocol._packetRW.read=y.read,l=y.write,this._public=null,this._dh=null,this._kexinit=this._protocol._kexinit=void 0,this._remoteKexinit=void 0,this._identRaw=void 0,this._remoteIdentRaw=void 0,this._hostKey=void 0,this._dhData=void 0,this._sig=void 0,!e&&D()};return(t||e)&&(this.finish=D),t?void 0:D(e)}start(){if(!this._protocol._server){if(this._protocol._debug){let e;if("group"===this.type)e="KEXDH_INIT";else e="KEXECDH_INIT";this._protocol._debug(`Outbound: Sending ${e}`)}const e=this.getPublicKey();let t=this._protocol._packetRW.write.allocStartKEX;const r=this._protocol._packetRW.write.alloc(5+e.length,!0);r[t]=A.KEXDH_INIT,k(r,e.length,++t),r.set(e,t+=4),this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(r,!0))}}getPublicKey(){this.generateKeys();const e=this._public;if(e)return this.convertPublicKey(e)}convertPublicKey(e){let t,r=0,i=e.length;for(;0===e[r];)++r,--i;return 128&e[r]?(t=Buffer.allocUnsafe(1+i),t[0]=0,e.copy(t,1,r),t):(i!==e.length&&(t=Buffer.allocUnsafe(i),e.copy(t,0,r),e=t),e)}computeSecret(e){this.generateKeys();try{return u(this._dh.computeSecret(e))}catch(e){return e}}parse(e){const t=e[0];switch(this._step){case 1:if(this._protocol._server){if(t!==A.KEXDH_INIT)return B(this._protocol,`Received packet ${t} instead of ${A.KEXDH_INIT}`,"handshake",E.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Received DH Init"),w.init(e,1);const r=w.readString();if(w.clear(),void 0===r)return B(this._protocol,"Received malformed KEX*_INIT","handshake",E.KEY_EXCHANGE_FAILED);this._dhData=r;let i=this._protocol._hostKeys[this.negotiated.serverHostKey];Array.isArray(i)&&(i=i[0]),this._hostKey=i,this.finish()}else{if(t!==A.KEXDH_REPLY)return B(this._protocol,`Received packet ${t} instead of ${A.KEXDH_REPLY}`,"handshake",E.KEY_EXCHANGE_FAILED);let r,i,n;if(this._protocol._debug&&this._protocol._debug("Received DH Reply"),w.init(e,1),void 0===(r=w.readString())||void 0===(i=w.readString())||void 0===(n=w.readString()))return w.clear(),B(this._protocol,"Received malformed KEX*_REPLY","handshake",E.KEY_EXCHANGE_FAILED);w.clear(),w.init(r,0);const s=w.readString(!0);if(w.clear(),void 0===s)return B(this._protocol,"Received malformed host public key","handshake",E.KEY_EXCHANGE_FAILED);if(s!==this.negotiated.serverHostKey)switch(this.negotiated.serverHostKey){case"rsa-sha2-256":case"rsa-sha2-512":if("ssh-rsa"===s)break;default:return B(this._protocol,"Host key does not match negotiated type","handshake",E.KEY_EXCHANGE_FAILED)}this._hostKey=r,this._dhData=i,this._sig=n;let o,u=!1;if(void 0===this._protocol._hostVerifier?(o=!0,this._protocol._debug&&this._protocol._debug("Host accepted by default (no verification)")):o=this._protocol._hostVerifier(r,(e=>{if(!u){if(u=!0,!1===e)return this._protocol._debug&&this._protocol._debug("Host denied (verification failed)"),B(this._protocol,"Host denied (verification failed)","handshake",E.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Host accepted (verified)"),this._hostVerified=!0,this._receivedNEWKEYS?this.finish():K(this)}})),void 0===o)return void++this._step;if(u=!0,!1===o)return this._protocol._debug&&this._protocol._debug("Host denied (verification failed)"),B(this._protocol,"Host denied (verification failed)","handshake",E.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Host accepted (verified)"),this._hostVerified=!0,K(this)}++this._step;break;case 2:return t!==A.NEWKEYS?B(this._protocol,`Received packet ${t} instead of ${A.NEWKEYS}`,"handshake",E.KEY_EXCHANGE_FAILED):(this._protocol._debug&&this._protocol._debug("Inbound: NEWKEYS"),this._receivedNEWKEYS=!0,this._protocol._strictMode&&(this._protocol._decipher.inSeqno=0),++this._step,this.finish(!this._protocol._server&&!this._hostVerified));default:return B(this._protocol,`Received unexpected packet ${t} after NEWKEYS`,"handshake",E.KEY_EXCHANGE_FAILED)}}}class D extends l{constructor(e,...t){super(...t),this.type="25519",this.hashName=e,this._keys=null}generateKeys(){this._keys||(this._keys=o("x25519"))}getPublicKey(){this.generateKeys();return this._keys.publicKey.export({type:"spki",format:"der"}).slice(-32)}convertPublicKey(e){let t,r=0,i=e.length;for(;0===e[r];)++r,--i;return 32===e.length||i!==e.length&&(t=Buffer.allocUnsafe(i),e.copy(t,0,r),e=t),e}computeSecret(e){this.generateKeys();try{const t=new a.Writer;return t.startSequence(),t.startSequence(),t.writeOID("1.3.101.110"),t.endSequence(),t.startSequence(a.BitString),t.writeByte(0),t._ensure(e.length),e.copy(t._buf,t._offset,0,e.length),t._offset+=e.length,t.endSequence(),t.endSequence(),u(s({privateKey:this._keys.privateKey,publicKey:n({key:t.buffer,type:"spki",format:"der"})}))}catch(e){return e}}}class d extends l{constructor(e,t,...r){super(...r),this.type="ecdh",this.curveName=e,this.hashName=t}generateKeys(){this._dh||(this._dh=r(this.curveName),this._public=this._dh.generateKeys())}}class f extends l{constructor(e,...t){super(...t),this.type="groupex",this.hashName=e,this._prime=null,this._generator=null,this._minBits=2048,this._prefBits=function(e){const t=_[e.cs.cipher],r=_[e.sc.cipher],i=8*Math.max(0,"des-ede3-cbc"===t.sslName?14:t.keyLen,t.blockLen,t.ivLen,"des-ede3-cbc"===r.sslName?14:r.keyLen,r.blockLen,r.ivLen);return i<=112?2048:i<=128?3072:i<=192?7680:8192}(this.negotiated),this._protocol._compatFlags&h.BUG_DHGEX_LARGE&&(this._prefBits=Math.min(this._prefBits,4096)),this._maxBits=8192}start(){if(this._protocol._server)return;this._protocol._debug&&this._protocol._debug("Outbound: Sending KEXDH_GEX_REQUEST");let e=this._protocol._packetRW.write.allocStartKEX;const t=this._protocol._packetRW.write.alloc(13,!0);t[e]=A.KEXDH_GEX_REQUEST,k(t,this._minBits,++e),k(t,this._prefBits,e+=4),k(t,this._maxBits,e+=4),this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(t,!0))}generateKeys(){!this._dh&&this._prime&&this._generator&&(this._dh=e(this._prime,this._generator),this._public=this._dh.generateKeys())}setDHParams(e,t){if(!Buffer.isBuffer(e))throw new Error("Invalid prime value");if(!Buffer.isBuffer(t))throw new Error("Invalid generator value");this._prime=e,this._generator=t}getDHParams(){if(this._dh)return{prime:u(this._dh.getPrime()),generator:u(this._dh.getGenerator())}}parse(e){const t=e[0];switch(this._step){case 1:{if(this._protocol._server)return t!==A.KEXDH_GEX_REQUEST?B(this._protocol,`Received packet ${t} instead of `+A.KEXDH_GEX_REQUEST,"handshake",E.KEY_EXCHANGE_FAILED):B(this._protocol,"Group exchange not implemented for server","handshake",E.KEY_EXCHANGE_FAILED);if(t!==A.KEXDH_GEX_GROUP)return B(this._protocol,`Received packet ${t} instead of ${A.KEXDH_GEX_GROUP}`,"handshake",E.KEY_EXCHANGE_FAILED);let r,i;if(this._protocol._debug&&this._protocol._debug("Received DH GEX Group"),w.init(e,1),void 0===(r=w.readString())||void 0===(i=w.readString()))return w.clear(),B(this._protocol,"Received malformed KEXDH_GEX_GROUP","handshake",E.KEY_EXCHANGE_FAILED);w.clear(),this.setDHParams(r,i),this.generateKeys();const n=this.getPublicKey();this._protocol._debug&&this._protocol._debug("Outbound: Sending KEXDH_GEX_INIT");let s=this._protocol._packetRW.write.allocStartKEX;const o=this._protocol._packetRW.write.alloc(5+n.length,!0);o[s]=A.KEXDH_GEX_INIT,k(o,n.length,++s),o.set(n,s+=4),this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(o,!0)),++this._step;break}case 2:if(this._protocol._server)return t!==A.KEXDH_GEX_INIT?B(this._protocol,`Received packet ${t} instead of ${A.KEXDH_GEX_INIT}`,"handshake",E.KEY_EXCHANGE_FAILED):(this._protocol._debug&&this._protocol._debug("Received DH GEX Init"),B(this._protocol,"Group exchange not implemented for server","handshake",E.KEY_EXCHANGE_FAILED));if(t!==A.KEXDH_GEX_REPLY)return B(this._protocol,`Received packet ${t} instead of ${A.KEXDH_GEX_REPLY}`,"handshake",E.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Received DH GEX Reply"),this._step=1,e[0]=A.KEXDH_REPLY,this.parse=l.prototype.parse,this.parse(e)}}}class p extends l{constructor(e,t,...r){super(...r),this.type="group",this.groupName=e,this.hashName=t}start(){if(!this._protocol._server){this._protocol._debug&&this._protocol._debug("Outbound: Sending KEXDH_INIT");const e=this.getPublicKey();let t=this._protocol._packetRW.write.allocStartKEX;const r=this._protocol._packetRW.write.alloc(5+e.length,!0);r[t]=A.KEXDH_INIT,k(r,e.length,++t),r.set(e,t+=4),this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(r,!0))}}generateKeys(){this._dh||(this._dh=t(this.groupName),this._public=this._dh.generateKeys())}getDHParams(){if(this._dh)return{prime:u(this._dh.getPrime()),generator:u(this._dh.getGenerator())}}}return(e,...t)=>{if("object"!=typeof e||null===e)throw new Error("Invalid negotiated argument");const r=e.kex;if("string"==typeof r){switch(t=[e,...t],r){case"curve25519-sha256":case"curve25519-sha256@libssh.org":if(!c)break;return new D("sha256",...t);case"ecdh-sha2-nistp256":return new d("prime256v1","sha256",...t);case"ecdh-sha2-nistp384":return new d("secp384r1","sha384",...t);case"ecdh-sha2-nistp521":return new d("secp521r1","sha512",...t);case"diffie-hellman-group1-sha1":return new p("modp2","sha1",...t);case"diffie-hellman-group14-sha1":return new p("modp14","sha1",...t);case"diffie-hellman-group14-sha256":return new p("modp14","sha256",...t);case"diffie-hellman-group15-sha512":return new p("modp15","sha512",...t);case"diffie-hellman-group16-sha512":return new p("modp16","sha512",...t);case"diffie-hellman-group17-sha512":return new p("modp17","sha512",...t);case"diffie-hellman-group18-sha512":return new p("modp18","sha512",...t);case"diffie-hellman-group-exchange-sha1":return new f("sha1",...t);case"diffie-hellman-group-exchange-sha256":return new f("sha256",...t)}throw new Error(`Unsupported key exchange algorithm: ${r}`)}throw new Error(`Invalid key exchange type: ${r}`)}})(),H=(()=>{const e=["kex","serverHostKey",["cs","cipher"],["sc","cipher"],["cs","mac"],["sc","mac"],["cs","compress"],["sc","compress"],["cs","lang"],["sc","lang"]];return class{constructor(t){if("object"!=typeof t||null===t)throw new TypeError("Argument must be an object");const r={kex:void 0,serverHostKey:void 0,cs:{cipher:void 0,mac:void 0,compress:void 0,lang:void 0},sc:{cipher:void 0,mac:void 0,compress:void 0,lang:void 0},all:void 0};let i=0;for(const n of e){let e,s,o,u;if("string"==typeof n)e=r,s=t[n],o=u=n;else{const i=n[0];e=r[i],u=n[1],s=t[i][u],o=`${i}.${u}`}const a={array:void 0,buffer:void 0};if(Buffer.isBuffer(s))a.array=(""+s).split(","),a.buffer=s,i+=4+s.length;else{if("string"==typeof s&&(s=s.split(",")),!Array.isArray(s))throw new TypeError(`Invalid \`${o}\` type: ${typeof s}`);a.array=s,a.buffer=Buffer.from(s.join(",")),i+=4+a.buffer.length}e[u]=a}const n=Buffer.allocUnsafe(i);r.all=n;let s=0;for(const t of e){let e;e="string"==typeof t?r[t].buffer:r[t[0]][t[1]].buffer,s=k(n,e.length,s),n.set(e,s),s+=e.length}this.totalSize=i,this.lists=r}copyAllTo(e,t){const r=this.lists.all;if("number"!=typeof t)throw new TypeError("Invalid offset value: "+typeof t);if(e.length-t<r.length)throw new Error("Insufficient space to copy list");return e.set(r,t),r.length}}})(),Q=(()=>{const e=Buffer.allocUnsafe(4);return(t,r)=>{k(e,r.length,0),t.update(e),t.update(r)}})();function $(e,t,r,n,s,o){let u;if(e){let a=i(t).update(r).update(n).update(o).update(s).digest();for(;a.length<e;){const e=i(t).update(r).update(n).update(a).digest(),s=Buffer.allocUnsafe(a.length+e.length);s.set(a,0),s.set(e,a.length),a=s}u=a.length===e?a:new S(a.buffer,a.byteOffset,e)}else u=L;return u}function W(e,t){if(0===t.length)return void(this._debug&&this._debug("Inbound: Skipping empty packet payload"));if(this._skipNextInboundPacket)return void(this._skipNextInboundPacket=!1);const r=(t=this._packetRW.read.read(t))[0];if(!this._strictMode)switch(r){case A.IGNORE:case A.UNIMPLEMENTED:case A.DEBUG:return P||(P=vu()),P[r](this,t)}switch(r){case A.DISCONNECT:return P||(P=vu()),P[r](this,t);case A.KEXINIT:return e.firstPacket?(e.firstPacket=!1,U(this,t)):B(this,"Received extra KEXINIT during handshake","handshake",E.KEY_EXCHANGE_FAILED);default:if(r<20||r>49)return B(this,`Received unexpected packet type ${r}`,"handshake",E.KEY_EXCHANGE_FAILED)}return this._kex.parse(t)}function K(e){if(!e._sentNEWKEYS){e._protocol._debug&&e._protocol._debug("Outbound: Sending NEWKEYS");const t=e._protocol._packetRW.write.allocStartKEX,r=e._protocol._packetRW.write.alloc(1,!0);r[t]=A.NEWKEYS,e._protocol._cipher.encrypt(e._protocol._packetRW.write.finalize(r,!0)),e._sentNEWKEYS=!0,e._protocol._strictMode&&(e._protocol._cipher.outSeqno=0)}}return yu={KexInit:H,kexinit:x,onKEXPayload:W,DEFAULT_KEXINIT_CLIENT:new H({kex:l.concat(["ext-info-c","kex-strict-c-v00@openssh.com"]),serverHostKey:D,cs:{cipher:d,mac:p,compress:g,lang:[]},sc:{cipher:d,mac:p,compress:g,lang:[]}}),DEFAULT_KEXINIT_SERVER:new H({kex:l.concat(["kex-strict-s-v00@openssh.com"]),serverHostKey:D,cs:{cipher:d,mac:p,compress:g,lang:[]},sc:{cipher:d,mac:p,compress:g,lang:[]}}),HANDLERS:{[A.KEXINIT]:U}}}var Su="1.15.0";const{inspect:Iu}=m,{bindingAvailable:ku,NullCipher:Ru,NullDecipher:Tu}=Es(),{COMPAT_CHECKS:Ou,DISCONNECT_REASON:Nu,eddsaSupported:Pu,MESSAGE:Lu,SIGNALS:xu,TERMINAL_MODE:Uu}=cs(),{DEFAULT_KEXINIT_CLIENT:Mu,DEFAULT_KEXINIT_SERVER:Hu,KexInit:Qu,kexinit:$u,onKEXPayload:Wu}=Bu(),{parseKey:Ku}=Eo,qu=vu(),{bufferCopy:ju,bufferFill:Gu,bufferSlice:Yu,convertSignature:Xu,sendPacket:Vu,writeUInt32BE:zu}=ls(),{PacketReader:Ju,PacketWriter:Zu,ZlibPacketReader:ea,ZlibPacketWriter:ta}=hu,ra=Su,ia=new Map(Object.values(Nu).map((e=>[e,1]))),na=Buffer.from(`SSH-2.0-ssh2js${ra}`),sa=Buffer.from(`${na}\r\n`),oa=Buffer.from([Lu.GLOBAL_REQUEST,0,0,0,21,107,101,101,112,97,108,105,118,101,64,111,112,101,110,115,115,104,46,99,111,109,1]),ua=Buffer.from([Uu.TTY_OP_END]);function aa(){}const ha=/^SSH-(2\.0|1\.99)-([^ ]+)(?: (.*))?$/;function ca(e,t,r){let i,n;this._buffer?(i=Buffer.allocUnsafe(this._buffer.length+(r-t)),i.set(this._buffer,0),0===t?i.set(e,this._buffer.length):i.set(new Uint8Array(e.buffer,e.byteOffset+t,r-t),this._buffer.length),n=this._buffer.length,t=0):(i=e,n=0);const s=t;let o=t,u=t,a=!1,h=0,c=0;for(;t<i.length;++t){const e=i[t];if(13!==e){if(10===e){if(u>o&&u-o>4&&83===i[o]&&83===i[o+1]&&72===i[o+2]&&45===i[o+3]){const e=i.latin1Slice(s,u+1),a=o===s?e:e.slice(o-s),h=ha.exec(a);if(!h)throw new Error("Invalid identification string");const c={greeting:o===s?"":e.slice(0,o-s),identRaw:a,versions:{protocol:h[1],software:h[2]},comments:h[3]};return this._remoteIdentRaw=Buffer.from(a),this._debug&&this._debug(`Remote ident: ${Iu(a)}`),this._compatFlags=da(c),this._buffer=void 0,this._decipher=new Tu(0,Wu.bind(this,{firstPacket:!0})),this._parse=la,this._onHeader(c),this._destruct?($u(this),t+1-n):r}if(this._server)throw new Error("Greetings from clients not permitted");if(++c>1024)throw new Error("Max greeting lines exceeded");a=!1,o=t+1,h=0}else{if(a)throw new Error("Invalid header: expected newline");if(++h>=8192)throw new Error("Header line too long")}u=t}else a=!0}return this._buffer||(this._buffer=Yu(i,s)),t-n}function la(e,t,r){return this._decipher.decrypt(e,t,r)}function Da(e){if(this._onPacket(),0===e.length)return void(this._debug&&this._debug("Inbound: Skipping empty packet payload"));const t=(e=this._packetRW.read.read(e))[0];t!==Lu.USERAUTH_SUCCESS||this._server||this._authenticated||(this._authenticated=!0,"zlib@openssh.com"===this._kex.negotiated.cs.compress&&(this._packetRW.write=new ta(this)),"zlib@openssh.com"===this._kex.negotiated.sc.compress&&(this._packetRW.read=new ea));const r=qu[t];if(void 0!==r)return r(this,e);this._debug&&this._debug(`Inbound: Unsupported message type: ${t}`)}function da(e){const t=e.versions.software;let r=0;for(const e of Ou)"string"==typeof e[0]?t===e[0]&&(r|=e[1]):e[0].test(t)&&(r|=e[1]);return r}var fa=class{constructor(e){const t=e.onWrite;if("function"!=typeof t)throw new Error("Missing onWrite function");this._onWrite=e=>{t(e)};const r=e.onError;if("function"!=typeof r)throw new Error("Missing onError function");this._onError=e=>{r(e)};const i=e.debug;this._debug="function"==typeof i?e=>{i(e)}:void 0;const n=e.onHeader;this._onHeader="function"==typeof n?(...e)=>{n(...e)}:aa;const s=e.onPacket;this._onPacket="function"==typeof s?()=>{s()}:aa;let o,u=e.onHandshakeComplete;"function"!=typeof u&&(u=aa),this._onHandshakeComplete=(...e)=>{this._debug&&this._debug("Handshake completed"),o=void 0===o;const t=this._queue;if(t){this._queue=void 0,this._debug&&this._debug(`Draining outbound queue (${t.length}) ...`);for(let e=0;e<t.length;++e){const r=t[e];let i=this._packetRW.write.finalize(r);if(i===r){const e=this._cipher.allocPacket(r.length);e.set(r,5),i=e}Vu(this,i)}this._debug&&this._debug("... finished draining outbound queue")}o&&this._server&&this._kex.remoteExtInfoEnabled&&function(e){let t="ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521rsa-sha2-512,rsa-sha2-256,ssh-rsa,ssh-dss";Pu&&(t=`ssh-ed25519,${t}`);const r=Buffer.byteLength(t);let i=e._packetRW.write.allocStart;const n=e._packetRW.write.alloc(28+r);n[i]=Lu.EXT_INFO,zu(n,1,++i),zu(n,15,i+=4),n.utf8Write("server-sig-algs",i+=4,15),zu(n,r,i+=15),n.utf8Write(t,i+=4,r),e._debug&&e._debug("Outbound: Sending EXT_INFO"),Vu(e,e._packetRW.write.finalize(n))}(this),u(...e)},this._queue=void 0;const a=e.messageHandlers;let h;if(this._handlers="object"==typeof a&&null!==a?a:{},this._onPayload=Da.bind(this),this._server=!!e.server,this._banner=void 0,this._server){if("object"!=typeof e.hostKeys||null===e.hostKeys)throw new Error("Missing server host key(s)");this._hostKeys=e.hostKeys,"string"==typeof e.greeting&&e.greeting.length&&(h="\r\n"===e.greeting.slice(-2)?e.greeting:`${e.greeting}\r\n`),"string"==typeof e.banner&&e.banner.length&&(this._banner="\r\n"===e.banner.slice(-2)?e.banner:`${e.banner}\r\n`)}else this._hostKeys=void 0;let c,l=e.offer;if("object"!=typeof l||null===l?l=this._server?Hu:Mu:l.constructor!==Qu&&(this._server?l.kex=l.kex.concat(["kex-strict-s-v00@openssh.com"]):l.kex=l.kex.concat(["ext-info-c","kex-strict-c-v00@openssh.com"]),l=new Qu(l)),this._kex=void 0,this._strictMode=void 0,this._kexinit=void 0,this._offer=l,this._cipher=new Ru(0,this._onWrite),this._decipher=void 0,this._skipNextInboundPacket=!1,this._packetRW={read:new Ju,write:new Zu(this)},this._hostVerifier=this._server||"function"!=typeof e.hostVerifier?void 0:e.hostVerifier,this._parse=ca,this._buffer=void 0,this._authsQueue=[],this._authenticated=!1,this._remoteIdentRaw=void 0,"string"==typeof e.ident)this._identRaw=Buffer.from(`SSH-2.0-${e.ident}`),c=Buffer.allocUnsafe(this._identRaw.length+2),c.set(this._identRaw,0),c[c.length-2]=13,c[c.length-1]=10;else if(Buffer.isBuffer(e.ident)){const t=Buffer.allocUnsafe(8+e.ident.length);t.latin1Write("SSH-2.0-",0,8),t.set(e.ident,8),this._identRaw=t,c=Buffer.allocUnsafe(t.length+2),c.set(t,0),c[c.length-2]=13,c[c.length-1]=10}else this._identRaw=na,c=sa;this._compatFlags=0,this._debug&&(ku?this._debug("Custom crypto binding available"):this._debug("Custom crypto binding not available")),this._debug&&this._debug(`Local ident: ${Iu(this._identRaw.toString())}`),this.start=()=>{this.start=void 0,h&&this._onWrite(h),this._onWrite(c)}}_destruct(e){this._packetRW.read.cleanup(),this._packetRW.write.cleanup(),this._cipher&&this._cipher.free(),this._decipher&&this._decipher.free(),"string"==typeof e&&0!==e.length||(e="fatal error"),this.parse=()=>{throw new Error(`Instance unusable after ${e}`)},this._onWrite=()=>{throw new Error(`Instance unusable after ${e}`)},this._destruct=void 0}cleanup(){this._destruct&&this._destruct()}parse(e,t,r){for(;t<r;)t=this._parse(e,t,r)}disconnect(e){let t=this._packetRW.write.allocStartKEX;const r=this._packetRW.write.alloc(13,!0),i=t+13;ia.has(e)||(e=Nu.PROTOCOL_ERROR),r[t]=Lu.DISCONNECT,zu(r,e,++t),r.fill(0,t+=4,i),this._debug&&this._debug(`Outbound: Sending DISCONNECT (${e})`),Vu(this,this._packetRW.write.finalize(r,!0),!0)}ping(){const e=this._packetRW.write.allocStart,t=this._packetRW.write.alloc(oa.length);t.set(oa,e),this._debug&&this._debug("Outbound: Sending ping (GLOBAL_REQUEST: keepalive@openssh.com)"),Vu(this,this._packetRW.write.finalize(t))}rekey(){void 0===this._kexinit?(this._debug&&this._debug("Outbound: Initiated explicit rekey"),this._queue=[],$u(this)):this._debug&&this._debug("Outbound: Ignoring rekey during handshake")}requestSuccess(e){let t,r=this._packetRW.write.allocStart;Buffer.isBuffer(e)?(t=this._packetRW.write.alloc(1+e.length),t[r]=Lu.REQUEST_SUCCESS,t.set(e,++r)):(t=this._packetRW.write.alloc(1),t[r]=Lu.REQUEST_SUCCESS),this._debug&&this._debug("Outbound: Sending REQUEST_SUCCESS"),Vu(this,this._packetRW.write.finalize(t))}requestFailure(){const e=this._packetRW.write.allocStart,t=this._packetRW.write.alloc(1);t[e]=Lu.REQUEST_FAILURE,this._debug&&this._debug("Outbound: Sending REQUEST_FAILURE"),Vu(this,this._packetRW.write.finalize(t))}channelSuccess(e){let t=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(5);r[t]=Lu.CHANNEL_SUCCESS,zu(r,e,++t),this._debug&&this._debug(`Outbound: Sending CHANNEL_SUCCESS (r:${e})`),Vu(this,this._packetRW.write.finalize(r))}channelFailure(e){let t=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(5);r[t]=Lu.CHANNEL_FAILURE,zu(r,e,++t),this._debug&&this._debug(`Outbound: Sending CHANNEL_FAILURE (r:${e})`),Vu(this,this._packetRW.write.finalize(r))}channelEOF(e){let t=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(5);r[t]=Lu.CHANNEL_EOF,zu(r,e,++t),this._debug&&this._debug(`Outbound: Sending CHANNEL_EOF (r:${e})`),Vu(this,this._packetRW.write.finalize(r))}channelClose(e){let t=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(5);r[t]=Lu.CHANNEL_CLOSE,zu(r,e,++t),this._debug&&this._debug(`Outbound: Sending CHANNEL_CLOSE (r:${e})`),Vu(this,this._packetRW.write.finalize(r))}channelWindowAdjust(e,t){let r=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(9);i[r]=Lu.CHANNEL_WINDOW_ADJUST,zu(i,e,++r),zu(i,t,r+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_WINDOW_ADJUST (r:${e}, ${t})`),Vu(this,this._packetRW.write.finalize(i))}channelData(e,t){const r=Buffer.isBuffer(t),i=r?t.length:Buffer.byteLength(t);let n=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(9+i);s[n]=Lu.CHANNEL_DATA,zu(s,e,++n),zu(s,i,n+=4),r?s.set(t,n+=4):s.utf8Write(t,n+=4,i),this._debug&&this._debug(`Outbound: Sending CHANNEL_DATA (r:${e}, ${i})`),Vu(this,this._packetRW.write.finalize(s))}channelExtData(e,t,r){const i=Buffer.isBuffer(t),n=i?t.length:Buffer.byteLength(t);let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(13+n);o[s]=Lu.CHANNEL_EXTENDED_DATA,zu(o,e,++s),zu(o,r,s+=4),zu(o,n,s+=4),i?o.set(t,s+=4):o.utf8Write(t,s+=4,n),this._debug&&this._debug(`Outbound: Sending CHANNEL_EXTENDED_DATA (r:${e})`),Vu(this,this._packetRW.write.finalize(o))}channelOpenConfirm(e,t,r,i){let n=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(17);s[n]=Lu.CHANNEL_OPEN_CONFIRMATION,zu(s,e,++n),zu(s,t,n+=4),zu(s,r,n+=4),zu(s,i,n+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN_CONFIRMATION (r:${e}, l:${t})`),Vu(this,this._packetRW.write.finalize(s))}channelOpenFail(e,t,r){"string"!=typeof r&&(r="");const i=Buffer.byteLength(r);let n=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(13+i+4);s[n]=Lu.CHANNEL_OPEN_FAILURE,zu(s,e,++n),zu(s,t,n+=4),zu(s,i,n+=4),n+=4,i&&(s.utf8Write(r,n,i),n+=i),zu(s,0,n),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN_FAILURE (r:${e})`),Vu(this,this._packetRW.write.finalize(s))}service(e){if(this._server)throw new Error("Client-only method called in server mode");const t=Buffer.byteLength(e);let r=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(5+t);i[r]=Lu.SERVICE_REQUEST,zu(i,t,++r),i.utf8Write(e,r+=4,t),this._debug&&this._debug(`Outbound: Sending SERVICE_REQUEST (${e})`),Vu(this,this._packetRW.write.finalize(i))}authPassword(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");const i=Buffer.byteLength(e),n=Buffer.byteLength(t),s=r?Buffer.byteLength(r):0;let o=this._packetRW.write.allocStart;const u=this._packetRW.write.alloc(5+i+4+14+4+8+1+4+n+(r?4+s:0));u[o]=Lu.USERAUTH_REQUEST,zu(u,i,++o),u.utf8Write(e,o+=4,i),zu(u,14,o+=i),u.utf8Write("ssh-connection",o+=4,14),zu(u,8,o+=14),u.utf8Write("password",o+=4,8),u[o+=8]=r?1:0,zu(u,n,++o),Buffer.isBuffer(t)?ju(t,u,0,n,o+=4):u.utf8Write(t,o+=4,n),r?(zu(u,s,o+=n),Buffer.isBuffer(r)?ju(r,u,0,s,o+=4):u.utf8Write(r,o+=4,s),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (changed password)")):this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (password)"),this._authsQueue.push("password"),Vu(this,this._packetRW.write.finalize(u))}authPK(e,t,r,i){if(this._server)throw new Error("Client-only method called in server mode");if((t=Ku(t))instanceof Error)throw new Error("Invalid key");const n=t.type;t=t.getPublicSSH(),"function"==typeof r&&(i=r,r=void 0),r||(r=n);const s=Buffer.byteLength(e),o=Buffer.byteLength(r),u=t.length,a=this._kex.sessionID,h=a.length,c=(i?4+h:0)+1+4+s+4+14+4+9+1+4+o+4+u;let l,D;if(i?(l=Buffer.allocUnsafe(c),D=0,zu(l,h,D),l.set(a,D+=4),D+=h):(l=this._packetRW.write.alloc(c),D=this._packetRW.write.allocStart),l[D]=Lu.USERAUTH_REQUEST,zu(l,s,++D),l.utf8Write(e,D+=4,s),zu(l,14,D+=s),l.utf8Write("ssh-connection",D+=4,14),zu(l,9,D+=14),l.utf8Write("publickey",D+=4,9),l[D+=9]=i?1:0,zu(l,o,++D),l.utf8Write(r,D+=4,o),zu(l,u,D+=o),l.set(t,D+=4),!i)return this._authsQueue.push("publickey"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (publickey -- check)"),void Vu(this,this._packetRW.write.finalize(l));i(l,(i=>{if(!1===(i=Xu(i,n)))throw new Error("Error while converting handshake signature");const a=i.length;D=this._packetRW.write.allocStart,l=this._packetRW.write.alloc(5+s+4+14+4+9+1+4+o+4+u+4+4+o+4+a),l[D]=Lu.USERAUTH_REQUEST,zu(l,s,++D),l.utf8Write(e,D+=4,s),zu(l,14,D+=s),l.utf8Write("ssh-connection",D+=4,14),zu(l,9,D+=14),l.utf8Write("publickey",D+=4,9),l[D+=9]=1,zu(l,o,++D),l.utf8Write(r,D+=4,o),zu(l,u,D+=o),l.set(t,D+=4),zu(l,4+o+4+a,D+=u),zu(l,o,D+=4),l.utf8Write(r,D+=4,o),zu(l,a,D+=o),l.set(i,D+=4),this._authsQueue.push("publickey"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (publickey)"),Vu(this,this._packetRW.write.finalize(l))}))}authHostbased(e,t,r,i,n,s){if(this._server)throw new Error("Client-only method called in server mode");if((t=Ku(t))instanceof Error)throw new Error("Invalid key");const o=t.type;t=t.getPublicSSH(),"function"==typeof n&&(s=n,n=void 0),n||(n=o);const u=Buffer.byteLength(e),a=Buffer.byteLength(n),h=t.length,c=this._kex.sessionID,l=c.length,D=Buffer.byteLength(r),d=Buffer.byteLength(i),f=Buffer.allocUnsafe(4+l+1+4+u+4+14+4+9+4+a+4+h+4+D+4+d);let p=0;zu(f,l,p),f.set(c,p+=4),f[p+=l]=Lu.USERAUTH_REQUEST,zu(f,u,++p),f.utf8Write(e,p+=4,u),zu(f,14,p+=u),f.utf8Write("ssh-connection",p+=4,14),zu(f,9,p+=14),f.utf8Write("hostbased",p+=4,9),zu(f,a,p+=9),f.utf8Write(n,p+=4,a),zu(f,h,p+=a),f.set(t,p+=4),zu(f,D,p+=h),f.utf8Write(r,p+=4,D),zu(f,d,p+=D),f.utf8Write(i,p+=4,d),s(f,(e=>{if(!(e=Xu(e,o)))throw new Error("Error while converting handshake signature");const t=e.length,r=f.length-l-4;p=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(r+4+4+a+4+t);ju(f,i,4+l,f.length,p),zu(i,4+a+4+t,p+=r),zu(i,a,p+=4),i.utf8Write(n,p+=4,a),zu(i,t,p+=a),i.set(e,p+=4),this._authsQueue.push("hostbased"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (hostbased)"),Vu(this,this._packetRW.write.finalize(i))}))}authKeyboard(e){if(this._server)throw new Error("Client-only method called in server mode");const t=Buffer.byteLength(e);let r=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(5+t+4+14+4+20+4+4);i[r]=Lu.USERAUTH_REQUEST,zu(i,t,++r),i.utf8Write(e,r+=4,t),zu(i,14,r+=t),i.utf8Write("ssh-connection",r+=4,14),zu(i,20,r+=14),i.utf8Write("keyboard-interactive",r+=4,20),zu(i,0,r+=20),zu(i,0,r+=4),this._authsQueue.push("keyboard-interactive"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (keyboard-interactive)"),Vu(this,this._packetRW.write.finalize(i))}authNone(e){if(this._server)throw new Error("Client-only method called in server mode");const t=Buffer.byteLength(e);let r=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(5+t+4+14+4+4);i[r]=Lu.USERAUTH_REQUEST,zu(i,t,++r),i.utf8Write(e,r+=4,t),zu(i,14,r+=t),i.utf8Write("ssh-connection",r+=4,14),zu(i,4,r+=14),i.utf8Write("none",r+=4,4),this._authsQueue.push("none"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (none)"),Vu(this,this._packetRW.write.finalize(i))}authInfoRes(e){if(this._server)throw new Error("Client-only method called in server mode");let t,r=0;if(e){t=new Array(e.length);for(let i=0;i<e.length;++i){const n=Buffer.byteLength(e[i]);t[i]=n,r+=4+n}}let i=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(5+r);if(n[i]=Lu.USERAUTH_INFO_RESPONSE,e){zu(n,e.length,++i),i+=4;for(let r=0;r<e.length;++r){const s=t[r];zu(n,s,i),i+=4,s&&(n.utf8Write(e[r],i,s),i+=s)}}else zu(n,0,++i);this._debug&&this._debug("Outbound: Sending USERAUTH_INFO_RESPONSE"),Vu(this,this._packetRW.write.finalize(n))}tcpipForward(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");const i=Buffer.byteLength(e);let n=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(23+i+4);s[n]=Lu.GLOBAL_REQUEST,zu(s,13,++n),s.utf8Write("tcpip-forward",n+=4,13),s[n+=13]=void 0===r||!0===r?1:0,zu(s,i,++n),s.utf8Write(e,n+=4,i),zu(s,t,n+=i),this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (tcpip-forward)"),Vu(this,this._packetRW.write.finalize(s))}cancelTcpipForward(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");const i=Buffer.byteLength(e);let n=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(30+i+4);s[n]=Lu.GLOBAL_REQUEST,zu(s,20,++n),s.utf8Write("cancel-tcpip-forward",n+=4,20),s[n+=20]=void 0===r||!0===r?1:0,zu(s,i,++n),s.utf8Write(e,n+=4,i),zu(s,t,n+=i),this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (cancel-tcpip-forward)"),Vu(this,this._packetRW.write.finalize(s))}openssh_streamLocalForward(e,t){if(this._server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let i=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(41+r);n[i]=Lu.GLOBAL_REQUEST,zu(n,31,++i),n.utf8Write("streamlocal-forward@openssh.com",i+=4,31),n[i+=31]=void 0===t||!0===t?1:0,zu(n,r,++i),n.utf8Write(e,i+=4,r),this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (streamlocal-forward@openssh.com)"),Vu(this,this._packetRW.write.finalize(n))}openssh_cancelStreamLocalForward(e,t){if(this._server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let i=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(48+r);n[i]=Lu.GLOBAL_REQUEST,zu(n,38,++i),n.utf8Write("cancel-streamlocal-forward@openssh.com",i+=4,38),n[i+=38]=void 0===t||!0===t?1:0,zu(n,r,++i),n.utf8Write(e,i+=4,r),this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (cancel-streamlocal-forward@openssh.com)"),Vu(this,this._packetRW.write.finalize(n))}directTcpip(e,t,r,i){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(i.srcIP),s=Buffer.byteLength(i.dstIP);let o=this._packetRW.write.allocStart;const u=this._packetRW.write.alloc(33+n+4+4+s+4);u[o]=Lu.CHANNEL_OPEN,zu(u,12,++o),u.utf8Write("direct-tcpip",o+=4,12),zu(u,e,o+=12),zu(u,t,o+=4),zu(u,r,o+=4),zu(u,s,o+=4),u.utf8Write(i.dstIP,o+=4,s),zu(u,i.dstPort,o+=s),zu(u,n,o+=4),u.utf8Write(i.srcIP,o+=4,n),zu(u,i.srcPort,o+=n),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, direct-tcpip)`),Vu(this,this._packetRW.write.finalize(u))}openssh_directStreamLocal(e,t,r,i){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(i.socketPath);let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(51+n+4+4);o[s]=Lu.CHANNEL_OPEN,zu(o,30,++s),o.utf8Write("direct-streamlocal@openssh.com",s+=4,30),zu(o,e,s+=30),zu(o,t,s+=4),zu(o,r,s+=4),zu(o,n,s+=4),o.utf8Write(i.socketPath,s+=4,n),Gu(o,0,s+=n,s+8),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, direct-streamlocal@openssh.com)`),Vu(this,this._packetRW.write.finalize(o))}openssh_noMoreSessions(e){if(this._server)throw new Error("Client-only method called in server mode");let t=this._packetRW.write.allocStart;const r=this._packetRW.write.alloc(34);r[t]=Lu.GLOBAL_REQUEST,zu(r,28,++t),r.utf8Write("no-more-sessions@openssh.com",t+=4,28),r[t+=28]=void 0===e||!0===e?1:0,this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (no-more-sessions@openssh.com)"),Vu(this,this._packetRW.write.finalize(r))}session(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");let i=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(24);n[i]=Lu.CHANNEL_OPEN,zu(n,7,++i),n.utf8Write("session",i+=4,7),zu(n,e,i+=7),zu(n,t,i+=4),zu(n,r,i+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, session)`),Vu(this,this._packetRW.write.finalize(n))}windowChange(e,t,r,i,n){if(this._server)throw new Error("Client-only method called in server mode");let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(39);o[s]=Lu.CHANNEL_REQUEST,zu(o,e,++s),zu(o,13,s+=4),o.utf8Write("window-change",s+=4,13),o[s+=13]=0,zu(o,r,++s),zu(o,t,s+=4),zu(o,n,s+=4),zu(o,i,s+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, window-change)`),Vu(this,this._packetRW.write.finalize(o))}pty(e,t,r,i,n,s,o,u){if(this._server)throw new Error("Client-only method called in server mode");s&&s.length||(s="vt100"),!o||Buffer.isBuffer(o)||Array.isArray(o)||"object"!=typeof o||null===o||(o=function(e){const t=Object.keys(e),r=Buffer.allocUnsafe(5*t.length+1);let i=0;for(let n=0;n<t.length;++n){const s=t[n];if("TTY_OP_END"===s)continue;const o=Uu[s];if(void 0===o)continue;const u=e[s];"number"==typeof u&&isFinite(u)&&(r[i++]=o,r[i++]=u>>>24,r[i++]=u>>>16,r[i++]=u>>>8,r[i++]=u)}return r[i++]=Uu.TTY_OP_END,i<r.length?Yu(r,0,i):r}(o)),o&&o.length||(o=ua);const a=s.length,h=o.length;let c=this._packetRW.write.allocStart;const l=this._packetRW.write.alloc(21+a+4+4+4+4+4+h);if(l[c]=Lu.CHANNEL_REQUEST,zu(l,e,++c),zu(l,7,c+=4),l.utf8Write("pty-req",c+=4,7),l[c+=7]=void 0===u||!0===u?1:0,zu(l,a,++c),l.utf8Write(s,c+=4,a),zu(l,r,c+=a),zu(l,t,c+=4),zu(l,n,c+=4),zu(l,i,c+=4),zu(l,h,c+=4),c+=4,Array.isArray(o))for(let e=0;e<h;++e)l[c++]=o[e];else Buffer.isBuffer(o)&&l.set(o,c);this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, pty-req)`),Vu(this,this._packetRW.write.finalize(l))}shell(e,t){if(this._server)throw new Error("Client-only method called in server mode");let r=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(15);i[r]=Lu.CHANNEL_REQUEST,zu(i,e,++r),zu(i,5,r+=4),i.utf8Write("shell",r+=4,5),i[r+=5]=void 0===t||!0===t?1:0,this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, shell)`),Vu(this,this._packetRW.write.finalize(i))}exec(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");const i=Buffer.isBuffer(t),n=i?t.length:Buffer.byteLength(t);let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(18+n);o[s]=Lu.CHANNEL_REQUEST,zu(o,e,++s),zu(o,4,s+=4),o.utf8Write("exec",s+=4,4),o[s+=4]=void 0===r||!0===r?1:0,zu(o,n,++s),i?o.set(t,s+=4):o.utf8Write(t,s+=4,n),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, exec: ${t})`),Vu(this,this._packetRW.write.finalize(o))}signal(e,t){if(this._server)throw new Error("Client-only method called in server mode");const r=t;if("SIG"===(t=t.toUpperCase()).slice(0,3)&&(t=t.slice(3)),1!==xu[t])throw new Error(`Invalid signal: ${r}`);const i=t.length;let n=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(20+i);s[n]=Lu.CHANNEL_REQUEST,zu(s,e,++n),zu(s,6,n+=4),s.utf8Write("signal",n+=4,6),s[n+=6]=0,zu(s,i,++n),s.utf8Write(t,n+=4,i),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, signal: ${t})`),Vu(this,this._packetRW.write.finalize(s))}env(e,t,r,i){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(t),s=Buffer.isBuffer(r),o=s?r.length:Buffer.byteLength(r);let u=this._packetRW.write.allocStart;const a=this._packetRW.write.alloc(17+n+4+o);a[u]=Lu.CHANNEL_REQUEST,zu(a,e,++u),zu(a,3,u+=4),a.utf8Write("env",u+=4,3),a[u+=3]=void 0===i||!0===i?1:0,zu(a,n,++u),a.utf8Write(t,u+=4,n),zu(a,o,u+=n),s?a.set(r,u+=4):a.utf8Write(r,u+=4,o),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, env: ${t}=${r})`),Vu(this,this._packetRW.write.finalize(a))}x11Forward(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");const i=t.protocol,n=t.cookie,s=Buffer.isBuffer(i),o=s?i.length:Buffer.byteLength(i),u=Buffer.isBuffer(n),a=u?n.length:Buffer.byteLength(n);let h=this._packetRW.write.allocStart;const c=this._packetRW.write.alloc(22+o+4+a+4);c[h]=Lu.CHANNEL_REQUEST,zu(c,e,++h),zu(c,7,h+=4),c.utf8Write("x11-req",h+=4,7),c[h+=7]=void 0===r||!0===r?1:0,c[++h]=t.single?1:0,zu(c,o,++h),s?c.set(i,h+=4):c.utf8Write(i,h+=4,o),zu(c,a,h+=o),u?c.set(n,h+=4):c.latin1Write(n,h+=4,a),zu(c,t.screen||0,h+=a),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, x11-req)`),Vu(this,this._packetRW.write.finalize(c))}subsystem(e,t,r){if(this._server)throw new Error("Client-only method called in server mode");const i=Buffer.byteLength(t);let n=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(23+i);s[n]=Lu.CHANNEL_REQUEST,zu(s,e,++n),zu(s,9,n+=4),s.utf8Write("subsystem",n+=4,9),s[n+=9]=void 0===r||!0===r?1:0,zu(s,i,++n),s.utf8Write(t,n+=4,i),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, subsystem: ${t})`),Vu(this,this._packetRW.write.finalize(s))}openssh_agentForward(e,t){if(this._server)throw new Error("Client-only method called in server mode");let r=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(36);i[r]=Lu.CHANNEL_REQUEST,zu(i,e,++r),zu(i,26,r+=4),i.utf8Write("auth-agent-req@openssh.com",r+=4,26),i[r+=26]=void 0===t||!0===t?1:0,this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, auth-agent-req@openssh.com)`),Vu(this,this._packetRW.write.finalize(i))}openssh_hostKeysProve(e){if(this._server)throw new Error("Client-only method called in server mode");let t=0;const r=[];for(const i of e){const e=i.getPublicSSH();t+=4+e.length,r.push(e)}let i=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(35+t);n[i]=Lu.GLOBAL_REQUEST,zu(n,29,++i),n.utf8Write("hostkeys-prove-00@openssh.com",i+=4,29),n[i+=29]=1,++i;for(const e of r)zu(n,e.length,i),ju(e,n,0,e.length,i+=4),i+=e.length;this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (hostkeys-prove-00@openssh.com)"),Vu(this,this._packetRW.write.finalize(n))}serviceAccept(e){if(!this._server)throw new Error("Server-only method called in client mode");const t=Buffer.byteLength(e);let r=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(5+t);if(i[r]=Lu.SERVICE_ACCEPT,zu(i,t,++r),i.utf8Write(e,r+=4,t),this._debug&&this._debug(`Outbound: Sending SERVICE_ACCEPT (${e})`),Vu(this,this._packetRW.write.finalize(i)),this._server&&this._banner&&"ssh-userauth"===e){const e=this._banner;this._banner=void 0;const t=Buffer.byteLength(e);r=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(5+t+4);i[r]=Lu.USERAUTH_BANNER,zu(i,t,++r),i.utf8Write(e,r+=4,t),zu(i,0,r+=t),this._debug&&this._debug("Outbound: Sending USERAUTH_BANNER"),Vu(this,this._packetRW.write.finalize(i))}}forwardedTcpip(e,t,r,i){if(!this._server)throw new Error("Server-only method called in client mode");const n=Buffer.byteLength(i.boundAddr),s=Buffer.byteLength(i.remoteAddr);let o=this._packetRW.write.allocStart;const u=this._packetRW.write.alloc(36+n+4+4+s+4);u[o]=Lu.CHANNEL_OPEN,zu(u,15,++o),u.utf8Write("forwarded-tcpip",o+=4,15),zu(u,e,o+=15),zu(u,t,o+=4),zu(u,r,o+=4),zu(u,n,o+=4),u.utf8Write(i.boundAddr,o+=4,n),zu(u,i.boundPort,o+=n),zu(u,s,o+=4),u.utf8Write(i.remoteAddr,o+=4,s),zu(u,i.remotePort,o+=s),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, forwarded-tcpip)`),Vu(this,this._packetRW.write.finalize(u))}x11(e,t,r,i){if(!this._server)throw new Error("Server-only method called in client mode");const n=Buffer.byteLength(i.originAddr);let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(24+n+4);o[s]=Lu.CHANNEL_OPEN,zu(o,3,++s),o.utf8Write("x11",s+=4,3),zu(o,e,s+=3),zu(o,t,s+=4),zu(o,r,s+=4),zu(o,n,s+=4),o.utf8Write(i.originAddr,s+=4,n),zu(o,i.originPort,s+=n),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, x11)`),Vu(this,this._packetRW.write.finalize(o))}openssh_authAgent(e,t,r){if(!this._server)throw new Error("Server-only method called in client mode");let i=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(39);n[i]=Lu.CHANNEL_OPEN,zu(n,22,++i),n.utf8Write("auth-agent@openssh.com",i+=4,22),zu(n,e,i+=22),zu(n,t,i+=4),zu(n,r,i+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, auth-agent@openssh.com)`),Vu(this,this._packetRW.write.finalize(n))}openssh_forwardedStreamLocal(e,t,r,i){if(!this._server)throw new Error("Server-only method called in client mode");const n=Buffer.byteLength(i.socketPath);let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(54+n+4);o[s]=Lu.CHANNEL_OPEN,zu(o,33,++s),o.utf8Write("forwarded-streamlocal@openssh.com",s+=4,33),zu(o,e,s+=33),zu(o,t,s+=4),zu(o,r,s+=4),zu(o,n,s+=4),o.utf8Write(i.socketPath,s+=4,n),zu(o,0,s+=n),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, forwarded-streamlocal@openssh.com)`),Vu(this,this._packetRW.write.finalize(o))}exitStatus(e,t){if(!this._server)throw new Error("Server-only method called in client mode");let r=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(25);i[r]=Lu.CHANNEL_REQUEST,zu(i,e,++r),zu(i,11,r+=4),i.utf8Write("exit-status",r+=4,11),i[r+=11]=0,zu(i,t,++r),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, exit-status: ${t})`),Vu(this,this._packetRW.write.finalize(i))}exitSignal(e,t,r,i){if(!this._server)throw new Error("Server-only method called in client mode");const n=t;if("string"!=typeof n||!n)throw new Error(`Invalid signal: ${n}`);let s=t.toUpperCase();if("SIG"===s.slice(0,3)&&(s=s.slice(3)),1!==xu[s])throw new Error(`Invalid signal: ${n}`);const o=Buffer.byteLength(s),u=i?Buffer.byteLength(i):0;let a=this._packetRW.write.allocStart;const h=this._packetRW.write.alloc(25+o+1+4+u+4);h[a]=Lu.CHANNEL_REQUEST,zu(h,e,++a),zu(h,11,a+=4),h.utf8Write("exit-signal",a+=4,11),h[a+=11]=0,zu(h,o,++a),h.utf8Write(s,a+=4,o),h[a+=o]=r?1:0,zu(h,u,++a),a+=4,u&&(h.utf8Write(i,a,u),a+=u),zu(h,0,a),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, exit-signal: ${t})`),Vu(this,this._packetRW.write.finalize(h))}authFailure(e,t){if(!this._server)throw new Error("Server-only method called in client mode");if(0===this._authsQueue.length)throw new Error("No auth in progress");let r;if("boolean"==typeof e&&(t=e,e=void 0),e){r=[];for(let t=0;t<e.length;++t)"none"!==e[t].toLowerCase()&&r.push(e[t]);r=r.join(",")}else r="";const i=r.length;let n=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(5+i+1);s[n]=Lu.USERAUTH_FAILURE,zu(s,i,++n),s.utf8Write(r,n+=4,i),s[n+=i]=!0===t?1:0,this._authsQueue.shift(),this._debug&&this._debug("Outbound: Sending USERAUTH_FAILURE"),Vu(this,this._packetRW.write.finalize(s))}authSuccess(){if(!this._server)throw new Error("Server-only method called in client mode");if(0===this._authsQueue.length)throw new Error("No auth in progress");const e=this._packetRW.write.allocStart,t=this._packetRW.write.alloc(1);t[e]=Lu.USERAUTH_SUCCESS,this._authsQueue.shift(),this._authenticated=!0,this._debug&&this._debug("Outbound: Sending USERAUTH_SUCCESS"),Vu(this,this._packetRW.write.finalize(t)),"zlib@openssh.com"===this._kex.negotiated.cs.compress&&(this._packetRW.read=new ea),"zlib@openssh.com"===this._kex.negotiated.sc.compress&&(this._packetRW.write=new ta(this))}authPKOK(e,t){if(!this._server)throw new Error("Server-only method called in client mode");if(0===this._authsQueue.length||"publickey"!==this._authsQueue[0])throw new Error('"publickey" auth not in progress');const r=Buffer.byteLength(e),i=t.length;let n=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(5+r+4+i);s[n]=Lu.USERAUTH_PK_OK,zu(s,r,++n),s.utf8Write(e,n+=4,r),zu(s,i,n+=r),s.set(t,n+=4),this._authsQueue.shift(),this._debug&&this._debug("Outbound: Sending USERAUTH_PK_OK"),Vu(this,this._packetRW.write.finalize(s))}authPasswdChg(e){if(!this._server)throw new Error("Server-only method called in client mode");const t=Buffer.byteLength(e);let r=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(5+t+4);i[r]=Lu.USERAUTH_PASSWD_CHANGEREQ,zu(i,t,++r),i.utf8Write(e,r+=4,t),zu(i,0,r+=t),this._debug&&this._debug("Outbound: Sending USERAUTH_PASSWD_CHANGEREQ"),Vu(this,this._packetRW.write.finalize(i))}authInfoReq(e,t,r){if(!this._server)throw new Error("Server-only method called in client mode");let i=0;const n=e?Buffer.byteLength(e):0,s=t?Buffer.byteLength(t):0;for(let e=0;e<r.length;++e)i+=4+Buffer.byteLength(r[e].prompt)+1;let o=this._packetRW.write.allocStart;const u=this._packetRW.write.alloc(5+n+4+s+4+4+i);u[o]=Lu.USERAUTH_INFO_REQUEST,zu(u,n,++o),o+=4,e&&(u.utf8Write(e,o,n),o+=n),zu(u,s,o),o+=4,t&&(u.utf8Write(t,o,s),o+=s),zu(u,0,o),zu(u,r.length,o+=4),o+=4;for(let e=0;e<r.length;++e){const t=r[e],i=Buffer.byteLength(t.prompt);zu(u,i,o),o+=4,i&&(u.utf8Write(t.prompt,o,i),o+=i),u[o++]=t.echo?1:0}this._debug&&this._debug("Outbound: Sending USERAUTH_INFO_REQUEST"),Vu(this,this._packetRW.write.finalize(u))}},pa={};const ga=p,{inspect:Ea}=m;function Aa(e){let t="",r=e.length;const i="-"===e[0]?1:0;for(;r>=i+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function _a(e,t){if(ga("string"==typeof t,"`thing` has to be of type string"),Array.isArray(e)){const r=e.length;return ga(r>0,"At least one expected value needs to be specified"),e=e.map((e=>String(e))),r>2?`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]:2===r?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}return`of ${t} ${String(e)}`}pa.ERR_INTERNAL_ASSERTION=class e extends Error{constructor(t){super(),Error.captureStackTrace(this,e);const r="This is caused by either a bug in ssh2 or incorrect usage of ssh2 internals.\nPlease open an issue with this stack trace at https://github.com/mscdex/ssh2/issues\n";this.message=void 0===t?r:`${t}\n${r}`}};const Fa=2**32,ma=(()=>{try{return new Function("return 2n ** 32n")()}catch{}})();pa.ERR_OUT_OF_RANGE=class e extends RangeError{constructor(t,r,i,n){super(),Error.captureStackTrace(this,e),ga(r,'Missing "range" argument');let s,o=n?t:`The value of "${t}" is out of range.`;Number.isInteger(i)&&Math.abs(i)>Fa?s=Aa(String(i)):"bigint"==typeof i?(s=String(i),(i>ma||i<-ma)&&(s=Aa(s)),s+="n"):s=Ea(i),o+=` It must be ${r}. Received ${s}`,this.message=o}};let Ca=class e extends TypeError{constructor(t,r,i){let n,s;if(super(),Error.captureStackTrace(this,e),ga("string"==typeof t,"'name' must be a string"),"string"==typeof r&&r.startsWith("not ")?(n="must not be",r=r.replace(/^not /,"")):n="must be",t.endsWith(" argument"))s=`The ${t} ${n} ${_a(r,"type")}`;else{const e=t.includes(".")?"property":"argument";s=`The "${t}" ${e} ${n} ${_a(r,"type")}`}s+=". Received type "+typeof i,this.message=s}};pa.ERR_INVALID_ARG_TYPE=Ca,pa.validateNumber=function(e,t){if("number"!=typeof e)throw new Ca(t,"number",e)};const ya=n,ba=D,{constants:wa}=ba,{Readable:va,Writable:Ba}=c,{inherits:Sa,isDate:Ia}=m,ka=Buffer[Symbol.species],{bufferCopy:Ra,bufferSlice:Ta,makeBufferParser:Oa,writeUInt32BE:Na}=ls(),Pa=1,La=2,xa=4,Ua=8,Ma=2147483648,Ha=Buffer.alloc(28),Qa={OK:0,EOF:1,NO_SUCH_FILE:2,PERMISSION_DENIED:3,FAILURE:4,BAD_MESSAGE:5,NO_CONNECTION:6,CONNECTION_LOST:7,OP_UNSUPPORTED:8},$a=new Map(Object.values(Qa).map((e=>[e,1]))),Wa={[Qa.OK]:"No error",[Qa.EOF]:"End of file",[Qa.NO_SUCH_FILE]:"No such file or directory",[Qa.PERMISSION_DENIED]:"Permission denied",[Qa.FAILURE]:"Failure",[Qa.BAD_MESSAGE]:"Bad message",[Qa.NO_CONNECTION]:"No connection",[Qa.CONNECTION_LOST]:"Connection lost",[Qa.OP_UNSUPPORTED]:"Operation unsupported"},Ka=1,qa=3,ja=4,Ga=5,Ya=6,Xa=7,Va=8,za=9,Ja=10,Za=11,eh=12,th=13,rh=14,ih=15,nh=16,sh=17,oh=18,uh=19,ah=20,hh=200,ch=2,lh=101,Dh=102,dh=103,fh=104,ph=105,gh=201,Eh={READ:1,WRITE:2,APPEND:4,CREAT:8,TRUNC:16,EXCL:32},Ah=2**32-1,_h=Buffer.from([0,0,0,5,Ka,0,0,0,3]),Fh=Buffer.from([0,0,0,5,ch,0,0,0,3]),mh=/^SSH-2.0-(?:OpenSSH|dropbear)/,Ch=262144,yh=Oa(),bh={readable:!1,writable:!1,push:e=>{},once:()=>{},on:()=>{},emit:()=>{},end:()=>{}};function wh(){}function vh(e,t,r,i,n,s,o,u){const a=e._maxReadLen,h=Math.max(n-a,0);h&&(n=a);const c=t.length;let l=9,D=s;const d=Buffer.allocUnsafe(13+c+8+4);Na(d,d.length-4,0),d[4]=Ga;const f=e._writeReqid=e._writeReqid+1&Ah;Na(d,f,5),Na(d,c,l),d.set(t,l+=4),l+=c;for(let e=7;e>=0;--e)d[l+e]=255&D,D/=256;Na(d,n,l+=8),"function"!=typeof o&&(o=wh);const p=u||{nb:0,position:s,off:i,origOff:i,len:void 0,overflow:void 0,cb:(i,n,s)=>{const u=p.len,a=p.overflow;if(i){if(o._wantEOFError||i.code!==Qa.EOF)return o(i)}else{if(s>u)return o(new Error("Received more data than requested"));if(s===u&&a)return p.nb+=s,p.position+=s,p.off+=s,void vh(e,t,r,p.off,a,p.position,o,p)}s=s||0,n=0===p.origOff&&r.length===p.nb?r:Ta(r,p.origOff,p.origOff+p.nb+s),o(void 0,p.nb+s,n,p.position)},buffer:void 0};p.len=n,p.overflow=h,p.buffer=Ta(r,i,i+n),e._requests[f]=p;const g=xh(e,d);e._debug&&e._debug(`SFTP: Outbound: ${g?"Buffered":"Sending"} READ`)}function Bh(e,t,r,i,n,s){let o,u,a,h,c=64,l=32768;"function"==typeof n?s=n:"object"==typeof n&&null!==n&&("number"==typeof n.concurrency&&n.concurrency>0&&!isNaN(n.concurrency)&&(c=n.concurrency),"number"==typeof n.chunkSize&&n.chunkSize>0&&!isNaN(n.chunkSize)&&(l=n.chunkSize),"number"==typeof n.fileSize&&n.fileSize>0&&!isNaN(n.fileSize)&&(a=n.fileSize),"function"==typeof n.step&&(o=n.step),"string"!=typeof n.mode&&"number"!=typeof n.mode||(u=Th(n.mode)));let D,d,f,p=0,g=0,E=!1,A=l*c;function _(r){if(E)return;E=!0;let i,n=0;D||d?(i=()=>{0==--n&&s(r)},!D||e!==ba&&"open"!==e.outgoing.state||++n,!d||t!==ba&&"open"!==t.outgoing.state||++n,!D||e!==ba&&"open"!==e.outgoing.state||e.close(D,i),!d||t!==ba&&"open"!==t.outgoing.state||t.close(d,i)):s(r)}e.open(r,"r",((n,E)=>{if(n)return _(n);function F(n,a){if(n)return e!==ba?void e.stat(r,((e,t)=>{if(e)return _(n);F(null,t)})):_(n);h=a.size,t.open(i,"w",((r,n)=>{if(r)return _(r);if(d=n,h<=0)return _();for(;A>h;){if(1===c){A=h;break}A-=l,--c}if(f=function(e){try{return Buffer.allocUnsafe(e)}catch(e){return e}}(A),f instanceof Error)return _(f);function a(r,i,n,u,a,c){if(r)return _(r);a=a||0,t.write(d,f,a,i,u,(function(r){if(r)return _(r);if(g+=i,o&&o(g,i,h),i<c)return E(a,u+i,c-i);if(g===h)return void t.close(d,(t=>{if(d=void 0,t)return _(t);e.close(D,(e=>{if(D=void 0,e)return _(e);s()}))}));if(p>=h)return;const n=p+l>h?h-p:l;E(a,p,n),p+=n}))}function E(t,r,i){e.read(D,f,t,i,r,function(e,t,r){return(i,n,s)=>{a(i,n,0,t,e,r)}}(t,r,i))}function F(){let e=0,t=0;for(;p<h&&e<c;){const r=p+l>h?h-p:l;E(t,p,r),t+=r,p+=r,++e}}void 0!==u?t.fchmod(d,u,(function e(r){r?t.chmod(i,u,(t=>e())):F()})):F()}))}D=E,void 0===a?e.fstat(D,F):F(null,{size:a})}))}function Sh(e,t,r,i,n,s,o){const u="function"==typeof o?o:void 0;e.write(t,r,i,n,s,((o,a)=>{if(o)return e.close(t,(()=>{u&&u(o)}));a===n?e.close(t,u):Sh(e,t,r,i+=a,n-=a,s+=a,u)}))}class Ih{constructor(e){this.mode=e&&e.mode,this.uid=e&&e.uid,this.gid=e&&e.gid,this.size=e&&e.size,this.atime=e&&e.atime,this.mtime=e&&e.mtime,this.extended=e&&e.extended}isDirectory(){return(this.mode&wa.S_IFMT)===wa.S_IFDIR}isFile(){return(this.mode&wa.S_IFMT)===wa.S_IFREG}isBlockDevice(){return(this.mode&wa.S_IFMT)===wa.S_IFBLK}isCharacterDevice(){return(this.mode&wa.S_IFMT)===wa.S_IFCHR}isSymbolicLink(){return(this.mode&wa.S_IFMT)===wa.S_IFLNK}isFIFO(){return(this.mode&wa.S_IFMT)===wa.S_IFIFO}isSocket(){return(this.mode&wa.S_IFMT)===wa.S_IFSOCK}}function kh(e){let t=0,r=0;if("object"==typeof e&&null!==e){if("number"==typeof e.size){t|=Pa;const i=e.size;Ha[r++]=i/72057594037927940,Ha[r++]=i/281474976710656,Ha[r++]=i/1099511627776,Ha[r++]=i/4294967296,Ha[r++]=i/16777216,Ha[r++]=i/65536,Ha[r++]=i/256,Ha[r++]=i}if("number"==typeof e.uid&&"number"==typeof e.gid){t|=La;const i=e.uid,n=e.gid;Ha[r++]=i>>>24,Ha[r++]=i>>>16,Ha[r++]=i>>>8,Ha[r++]=i,Ha[r++]=n>>>24,Ha[r++]=n>>>16,Ha[r++]=n>>>8,Ha[r++]=n}if("number"==typeof e.mode||"string"==typeof e.mode){const i=Th(e.mode);t|=xa,Ha[r++]=i>>>24,Ha[r++]=i>>>16,Ha[r++]=i>>>8,Ha[r++]=i}if(("number"==typeof e.atime||Ia(e.atime))&&("number"==typeof e.mtime||Ia(e.mtime))){const i=Rh(e.atime),n=Rh(e.mtime);t|=Ua,Ha[r++]=i>>>24,Ha[r++]=i>>>16,Ha[r++]=i>>>8,Ha[r++]=i,Ha[r++]=n>>>24,Ha[r++]=n>>>16,Ha[r++]=n>>>8,Ha[r++]=n}}return{flags:t,nb:r}}function Rh(e){if("number"==typeof e&&e==e)return e;if(Ia(e))return parseInt(e.getTime()/1e3,10);throw new Error(`Cannot parse time: ${e}`)}function Th(e){if("number"==typeof e&&e==e)return e;if("string"==typeof e)return Th(parseInt(e,8));throw new Error(`Cannot parse mode: ${e}`)}const Oh={r:Eh.READ,"r+":Eh.READ|Eh.WRITE,w:Eh.TRUNC|Eh.CREAT|Eh.WRITE,wx:Eh.TRUNC|Eh.CREAT|Eh.WRITE|Eh.EXCL,xw:Eh.TRUNC|Eh.CREAT|Eh.WRITE|Eh.EXCL,"w+":Eh.TRUNC|Eh.CREAT|Eh.READ|Eh.WRITE,"wx+":Eh.TRUNC|Eh.CREAT|Eh.READ|Eh.WRITE|Eh.EXCL,"xw+":Eh.TRUNC|Eh.CREAT|Eh.READ|Eh.WRITE|Eh.EXCL,a:Eh.APPEND|Eh.CREAT|Eh.WRITE,ax:Eh.APPEND|Eh.CREAT|Eh.WRITE|Eh.EXCL,xa:Eh.APPEND|Eh.CREAT|Eh.WRITE|Eh.EXCL,"a+":Eh.APPEND|Eh.CREAT|Eh.READ|Eh.WRITE,"ax+":Eh.APPEND|Eh.CREAT|Eh.READ|Eh.WRITE|Eh.EXCL,"xa+":Eh.APPEND|Eh.CREAT|Eh.READ|Eh.WRITE|Eh.EXCL};function Nh(e){const t=Oh[e];return void 0!==t?t:null}const Ph=(()=>{const e=Object.keys(Oh);return t=>{for(let r=0;r<e.length;++r){const i=e[r];if(Oh[i]===t)return i}return null}})();function Lh(e){const t=yh.readUInt32BE();if(void 0===t)return;const r=new Ih;if(t&Pa){const t=yh.readUInt64BE(e);if(void 0===t)return;r.size=t}if(t&La){const e=yh.readUInt32BE(),t=yh.readUInt32BE();if(void 0===t)return;r.uid=e,r.gid=t}if(t&xa){const e=yh.readUInt32BE();if(void 0===e)return;r.mode=e}if(t&Ua){const e=yh.readUInt32BE(),t=yh.readUInt32BE();if(void 0===t)return;r.atime=e,r.mtime=t}if(t&Ma){const e=yh.readUInt32BE();if(void 0===e)return;const t={};for(let r=0;r<e;++r){const e=yh.readString(!0),r=yh.readString();if(void 0===r)return;t[e]=r}r.extended=t}return r}function xh(e,t){const r=Uh(e,t);return void 0===r||(e._buffer.push(r),!1)}function Uh(e,t){const r=e.outgoing;if("open"!==r.state)return;if(0===r.window)return e._waitWindow=!0,e._chunkcb=Mh,t;let i;const n=t.length;let s=0;for(;n-s>0&&r.window>0;){const i=Math.min(n-s,r.window,r.packetSize);r.window-=i,0===r.window&&(e._waitWindow=!0,e._chunkcb=Mh),0===s&&i===n?e._protocol.channelData(e.outgoing.id,t):e._protocol.channelData(e.outgoing.id,Ta(t,s,s+i)),s+=i}return n-s>0&&(i=s>0?Ta(t,s,n):t),i}function Mh(){this._chunkcb=void 0;const e=this._buffer;let t=0;for(;t<e.length;){const r=e[t],i=Uh(this,r);if(void 0!==i)return i!==r&&(e[t]=i),void(t>0&&(this._buffer=e.slice(t)));++t}t>0&&(this._buffer=[])}function Hh(e,t,r){const i=new Error(t);return i.level="sftp-protocol",e._debug&&e._debug(`SFTP: Inbound: ${t}`),e.emit("error",i),e.destroy(),Qh(e),!1}function Qh(e){const t=Object.keys(e._requests);if(0===t.length)return;const r=e._requests;e._requests={};const i=new Error("No response from server");for(let e=0;e<t.length;++e){const n=r[t[e]];"function"==typeof n.cb&&n.cb(i)}}const $h={[ch]:(e,t)=>{if(-1!==e._version)return Hh(e,"Duplicate VERSION packet");const r={};yh.init(t,1);let i=yh.readUInt32BE();for(;yh.avail();){const e=yh.readString(!0),t=yh.readString(!0);if(void 0===t){i=void 0;break}r[e]=t}if(yh.clear(),void 0===i)return Hh(e,"Malformed VERSION packet");if(e._debug){const t=Object.keys(r);t.length?e._debug(`SFTP: Inbound: Received VERSION (v${i}, exts:${t})`):e._debug(`SFTP: Inbound: Received VERSION (v${i})`)}if(e._version=i,e._extensions=r,"1"===r["limits@openssh.com"])return function(e,t){let r=9;const i=Buffer.allocUnsafe(31);Na(i,i.length-4,0),i[4]=hh;const n=e._writeReqid=e._writeReqid+1&Ah;Na(i,n,5),Na(i,18,r),i.utf8Write("limits@openssh.com",r+=4,18),e._requests[n]={extended:"limits@openssh.com",cb:t};const s=xh(e,i);if(e._debug){const t=s?"Buffered":"Sending";e._debug(`SFTP: Outbound: ${t} limits@openssh.com`)}}(e,((t,r)=>{t||(r.maxPktLen>0&&(e._maxOutPktLen=r.maxPktLen),r.maxReadLen>0&&(e._maxReadLen=r.maxReadLen),r.maxWriteLen>0&&(e._maxWriteLen=r.maxWriteLen),e.maxOpenHandles=r.maxOpenHandles>0?r.maxOpenHandles:1/0),e.emit("ready")}));e.emit("ready")},[lh]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE(),i=yh.readUInt32BE(),n=yh.readString(!0);if(yh.clear(),e._debug){const t=JSON.stringify(n);e._debug(`SFTP: Inbound: Received STATUS (id:${r}, ${i}, ${t})`)}const s=e._requests[r];if(delete e._requests[r],s&&"function"==typeof s.cb){if(i===Qa.OK)return void s.cb();const e=new Error(n||Wa[i]||"Unknown status");e.code=i,s.cb(e)}},[Dh]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE(),i=yh.readString();if(yh.clear(),void 0===i)return void 0!==r&&delete e._requests[r],Hh(e,"Malformed HANDLE packet");e._debug&&e._debug(`SFTP: Inbound: Received HANDLE (id:${r})`);const n=e._requests[r];delete e._requests[r],n&&"function"==typeof n.cb&&n.cb(void 0,i)},[dh]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE();let i;if(void 0!==r&&(i=e._requests[r],delete e._requests[r]),i&&"function"==typeof i.cb)if(i.buffer){const t=yh.readString(i.buffer);if(yh.clear(),void 0!==t)return e._debug&&e._debug(`SFTP: Inbound: Received DATA (id:${r}, ${t})`),void i.cb(void 0,i.buffer,t)}else{const t=yh.readString();if(yh.clear(),void 0!==t)return e._debug&&e._debug(`SFTP: Inbound: Received DATA (id:${r}, ${t.length})`),void i.cb(void 0,t)}else{const t=yh.skipString();if(yh.clear(),void 0!==t)return void(e._debug&&e._debug(`SFTP: Inbound: Received DATA (id:${r}, ${t})`))}return Hh(e,"Malformed DATA packet")},[fh]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE();let i;void 0!==r&&(i=e._requests[r],delete e._requests[r]);const n=yh.readUInt32BE();if(void 0!==n){let t=[];for(let r=0;r<n;++r){const r=yh.readString(!0),i=yh.readString(!0),n=Lh(e._biOpt);if(void 0===n){t=void 0;break}t.push({filename:r,longname:i,attrs:n})}if(void 0!==t)return e._debug&&e._debug(`SFTP: Inbound: Received NAME (id:${r}, ${t.length})`),yh.clear(),void(i&&"function"==typeof i.cb&&i.cb(void 0,t))}return yh.clear(),Hh(e,"Malformed NAME packet")},[ph]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE();let i;void 0!==r&&(i=e._requests[r],delete e._requests[r]);const n=Lh(e._biOpt);return yh.clear(),void 0!==n?(e._debug&&e._debug(`SFTP: Inbound: Received ATTRS (id:${r})`),void(i&&"function"==typeof i.cb&&i.cb(void 0,n))):Hh(e,"Malformed ATTRS packet")},[gh]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE();if(void 0!==r){const t=e._requests[r];if(!t)return e._debug&&e._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ???)`),void yh.clear();switch(delete e._requests[r],t.extended){case"statvfs@openssh.com":case"fstatvfs@openssh.com":{const i=e._biOpt,n={f_bsize:yh.readUInt64BE(i),f_frsize:yh.readUInt64BE(i),f_blocks:yh.readUInt64BE(i),f_bfree:yh.readUInt64BE(i),f_bavail:yh.readUInt64BE(i),f_files:yh.readUInt64BE(i),f_ffree:yh.readUInt64BE(i),f_favail:yh.readUInt64BE(i),f_sid:yh.readUInt64BE(i),f_flag:yh.readUInt64BE(i),f_namemax:yh.readUInt64BE(i)};if(void 0===n.f_namemax)break;return e._debug&&e._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ${t.extended})`),yh.clear(),void("function"==typeof t.cb&&t.cb(void 0,n))}case"limits@openssh.com":{const i={maxPktLen:yh.readUInt64BE(),maxReadLen:yh.readUInt64BE(),maxWriteLen:yh.readUInt64BE(),maxOpenHandles:yh.readUInt64BE()};if(void 0===i.maxOpenHandles)break;return e._debug&&e._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ${t.extended})`),yh.clear(),void("function"==typeof t.cb&&t.cb(void 0,i))}case"users-groups-by-id@openssh.com":{const i=yh.readUInt32BE();if(void 0===i)break;const n=new Array(i);for(let e=0;e<n.length;++e)n[e]=yh.readString(!0);const s=yh.readUInt32BE();if(void 0===s)break;const o=new Array(s);for(let e=0;e<o.length;++e)o[e]=yh.readString(!0);if(o.length>0&&void 0===o[o.length-1])break;return e._debug&&e._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ${t.extended})`),yh.clear(),void("function"==typeof t.cb&&t.cb(void 0,n,o))}default:return e._debug&&e._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ???)`),yh.clear(),void("function"==typeof t.cb&&t.cb())}}return yh.clear(),Hh(e,"Malformed EXTENDED_REPLY packet")}},Wh={[Ka]:(e,t)=>{if(-1!==e._version)return Hh(e,"Duplicate INIT packet");const r={};yh.init(t,1);let i=yh.readUInt32BE();for(;yh.avail();){const e=yh.readString(!0),t=yh.readString(!0);if(void 0===t){i=void 0;break}r[e]=t}if(yh.clear(),void 0===i)return Hh(e,"Malformed INIT packet");if(e._debug){const t=Object.keys(r);t.length?e._debug(`SFTP: Inbound: Received INIT (v${i}, exts:${t})`):e._debug(`SFTP: Inbound: Received INIT (v${i})`)}xh(e,Fh),e._version=i,e._extensions=r,e.emit("ready")},[qa]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE(),i=yh.readString(!0),n=yh.readUInt32BE(),s=Lh(e._biOpt);if(yh.clear(),void 0===s)return Hh(e,"Malformed OPEN packet");e._debug&&e._debug(`SFTP: Inbound: Received OPEN (id:${r})`),e.emit("OPEN",r,i,n,s)||e.status(r,Qa.OP_UNSUPPORTED)},[ja]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE(),i=yh.readString();if(yh.clear(),void 0===i||i.length>256)return Hh(e,"Malformed CLOSE packet");e._debug&&e._debug(`SFTP: Inbound: Received CLOSE (id:${r})`),e.emit("CLOSE",r,i)||e.status(r,Qa.OP_UNSUPPORTED)},[Ga]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE(),i=yh.readString(),n=yh.readUInt64BE(e._biOpt),s=yh.readUInt32BE();if(yh.clear(),void 0===s||i.length>256)return Hh(e,"Malformed READ packet");e._debug&&e._debug(`SFTP: Inbound: Received READ (id:${r})`),e.emit("READ",r,i,n,s)||e.status(r,Qa.OP_UNSUPPORTED)},[Ya]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE(),i=yh.readString(),n=yh.readUInt64BE(e._biOpt),s=yh.readString();if(yh.clear(),void 0===s||i.length>256)return Hh(e,"Malformed WRITE packet");e._debug&&e._debug(`SFTP: Inbound: Received WRITE (id:${r})`),e.emit("WRITE",r,i,n,s)||e.status(r,Qa.OP_UNSUPPORTED)},[Xa]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE(),i=yh.readString(!0);if(yh.clear(),void 0===i)return Hh(e,"Malformed LSTAT packet");e._debug&&e._debug(`SFTP: Inbound: Received LSTAT (id:${r})`),e.emit("LSTAT",r,i)||e.status(r,Qa.OP_UNSUPPORTED)},[Va]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE(),i=yh.readString();if(yh.clear(),void 0===i||i.length>256)return Hh(e,"Malformed FSTAT packet");e._debug&&e._debug(`SFTP: Inbound: Received FSTAT (id:${r})`),e.emit("FSTAT",r,i)||e.status(r,Qa.OP_UNSUPPORTED)},[za]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE(),i=yh.readString(!0),n=Lh(e._biOpt);if(yh.clear(),void 0===n)return Hh(e,"Malformed SETSTAT packet");e._debug&&e._debug(`SFTP: Inbound: Received SETSTAT (id:${r})`),e.emit("SETSTAT",r,i,n)||e.status(r,Qa.OP_UNSUPPORTED)},[Ja]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE(),i=yh.readString(),n=Lh(e._biOpt);if(yh.clear(),void 0===n||i.length>256)return Hh(e,"Malformed FSETSTAT packet");e._debug&&e._debug(`SFTP: Inbound: Received FSETSTAT (id:${r})`),e.emit("FSETSTAT",r,i,n)||e.status(r,Qa.OP_UNSUPPORTED)},[Za]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE(),i=yh.readString(!0);if(yh.clear(),void 0===i)return Hh(e,"Malformed OPENDIR packet");e._debug&&e._debug(`SFTP: Inbound: Received OPENDIR (id:${r})`),e.emit("OPENDIR",r,i)||e.status(r,Qa.OP_UNSUPPORTED)},[eh]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE(),i=yh.readString();if(yh.clear(),void 0===i||i.length>256)return Hh(e,"Malformed READDIR packet");e._debug&&e._debug(`SFTP: Inbound: Received READDIR (id:${r})`),e.emit("READDIR",r,i)||e.status(r,Qa.OP_UNSUPPORTED)},[th]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE(),i=yh.readString(!0);if(yh.clear(),void 0===i)return Hh(e,"Malformed REMOVE packet");e._debug&&e._debug(`SFTP: Inbound: Received REMOVE (id:${r})`),e.emit("REMOVE",r,i)||e.status(r,Qa.OP_UNSUPPORTED)},[rh]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE(),i=yh.readString(!0),n=Lh(e._biOpt);if(yh.clear(),void 0===n)return Hh(e,"Malformed MKDIR packet");e._debug&&e._debug(`SFTP: Inbound: Received MKDIR (id:${r})`),e.emit("MKDIR",r,i,n)||e.status(r,Qa.OP_UNSUPPORTED)},[ih]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE(),i=yh.readString(!0);if(yh.clear(),void 0===i)return Hh(e,"Malformed RMDIR packet");e._debug&&e._debug(`SFTP: Inbound: Received RMDIR (id:${r})`),e.emit("RMDIR",r,i)||e.status(r,Qa.OP_UNSUPPORTED)},[nh]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE(),i=yh.readString(!0);if(yh.clear(),void 0===i)return Hh(e,"Malformed REALPATH packet");e._debug&&e._debug(`SFTP: Inbound: Received REALPATH (id:${r})`),e.emit("REALPATH",r,i)||e.status(r,Qa.OP_UNSUPPORTED)},[sh]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE(),i=yh.readString(!0);if(yh.clear(),void 0===i)return Hh(e,"Malformed STAT packet");e._debug&&e._debug(`SFTP: Inbound: Received STAT (id:${r})`),e.emit("STAT",r,i)||e.status(r,Qa.OP_UNSUPPORTED)},[oh]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE(),i=yh.readString(!0),n=yh.readString(!0);if(yh.clear(),void 0===n)return Hh(e,"Malformed RENAME packet");e._debug&&e._debug(`SFTP: Inbound: Received RENAME (id:${r})`),e.emit("RENAME",r,i,n)||e.status(r,Qa.OP_UNSUPPORTED)},[uh]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE(),i=yh.readString(!0);if(yh.clear(),void 0===i)return Hh(e,"Malformed READLINK packet");e._debug&&e._debug(`SFTP: Inbound: Received READLINK (id:${r})`),e.emit("READLINK",r,i)||e.status(r,Qa.OP_UNSUPPORTED)},[ah]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE(),i=yh.readString(!0),n=yh.readString(!0);if(yh.clear(),void 0===n)return Hh(e,"Malformed SYMLINK packet");let s;e._debug&&e._debug(`SFTP: Inbound: Received SYMLINK (id:${r})`),s=e._isOpenSSH?e.emit("SYMLINK",r,n,i):e.emit("SYMLINK",r,i,n),s||e.status(r,Qa.OP_UNSUPPORTED)},[hh]:(e,t)=>{yh.init(t,1);const r=yh.readUInt32BE(),i=yh.readString(!0);if(void 0===i)return yh.clear(),Hh(e,"Malformed EXTENDED packet");let n;yh.avail()&&(n=yh.readRaw()),yh.clear(),e._debug&&e._debug(`SFTP: Inbound: Received EXTENDED (id:${r})`),e.emit("EXTENDED",r,i,n)||e.status(r,Qa.OP_UNSUPPORTED)}},{ERR_INVALID_ARG_TYPE:Kh,ERR_OUT_OF_RANGE:qh,validateNumber:jh}=pa;let Gh;const Yh=[];function Xh(e,t){if(!Number.isSafeInteger(e)){if(jh(e,t),!Number.isInteger(e))throw new qh(t,"an integer",e);throw new qh(t,">= 0 and <= 2 ** 53 - 1",e)}if(e<0)throw new qh(t,">= 0 and <= 2 ** 53 - 1",e)}function Vh(e){return e+7&-8}function zh(e,t,r){if(void 0===r)r={};else if("string"==typeof r)r={encoding:r};else{if(null===r||"object"!=typeof r)throw new TypeError('"options" argument must be a string or an object');r=Object.create(r)}if(void 0===r.highWaterMark&&(r.highWaterMark=65536),r.emitClose=!1,r.autoDestroy=!1,va.call(this,r),this.path=t,this.flags=void 0===r.flags?"r":r.flags,this.mode=void 0===r.mode?438:r.mode,this.start=r.start,this.end=r.end,this.autoClose=void 0===r.autoClose||r.autoClose,this.pos=0,this.bytesRead=0,this.isClosed=!1,this.handle=void 0===r.handle?null:r.handle,this.sftp=e,this._opening=!1,void 0!==this.start&&(Xh(this.start,"start"),this.pos=this.start),void 0===this.end)this.end=1/0;else if(this.end!==1/0&&(Xh(this.end,"end"),void 0!==this.start&&this.start>this.end))throw new qh("start",`<= "end" (here: ${this.end})`,this.start);this.on("end",(function(){this.autoClose&&this.destroy()})),Buffer.isBuffer(this.handle)||this.open()}function Jh(e,t,r){if(!e.handle)return i();function i(i){t(i=i||r),e.isClosed=!0,i||e.emit("close")}e.sftp.close(e.handle,i)}function Zh(e,t,r){if(void 0===r)r={};else if("string"==typeof r)r={encoding:r};else{if(null===r||"object"!=typeof r)throw new TypeError('"options" argument must be a string or an object');r=Object.create(r)}r.emitClose=!1,r.autoDestroy=!1,Ba.call(this,r),this.path=t,this.flags=void 0===r.flags?"w":r.flags,this.mode=void 0===r.mode?438:r.mode,this.start=r.start,this.autoClose=void 0===r.autoClose||r.autoClose,this.pos=0,this.bytesWritten=0,this.isClosed=!1,this.handle=void 0===r.handle?null:r.handle,this.sftp=e,this._opening=!1,void 0!==this.start&&(Xh(this.start,"start"),this.pos=this.start),r.encoding&&this.setDefaultEncoding(r.encoding),this.on("finish",(function(){this._writableState.finalCalled||this.autoClose&&this.destroy()})),Buffer.isBuffer(this.handle)||this.open()}Sa(zh,va),zh.prototype.open=function(){this._opening||(this._opening=!0,this.sftp.open(this.path,this.flags,this.mode,((e,t)=>{if(this._opening=!1,e)return this.emit("error",e),void(this.autoClose&&this.destroy());this.handle=t,this.emit("open",t),this.emit("ready"),this.read()})))},zh.prototype._read=function(e){if(!Buffer.isBuffer(this.handle))return this.once("open",(()=>this._read(e)));if(this.destroyed)return;var t;(!Gh||Gh.length-Gh.used<128)&&(t=this.readableHighWaterMark||this._readableState.highWaterMark,Gh=Yh.length>0?Yh.pop():Buffer.allocUnsafe(t),Gh.used=0);const r=Gh;let i=Math.min(Gh.length-Gh.used,e);const n=Gh.used;if(void 0!==this.end&&(i=Math.min(this.end-this.pos+1,i)),i<=0)return this.push(null);this.sftp.read(this.handle,Gh,Gh.used,i,this.pos,((e,t)=>{if(e)return this.emit("error",e),void(this.autoClose&&this.destroy());let s=null;if(n+i===r.used&&r===Gh)r.used=Vh(r.used+t-i);else{const e=n+i&-8,s=Vh(n+t);e-s>=128&&Yh.push(r.slice(s,e))}t>0&&(this.bytesRead+=t,s=r.slice(n,n+t)),this.pos+=t,this.push(s)})),Gh.used=Vh(Gh.used+i)},zh.prototype._destroy=function(e,t){!this._opening||Buffer.isBuffer(this.handle)?(Jh(this,t,e),this.handle=null,this._opening=!1):this.once("open",Jh.bind(null,this,t,e))},zh.prototype.close=function(e){this.destroy(null,e)},Object.defineProperty(zh.prototype,"pending",{get(){return null===this.handle},configurable:!0}),Sa(Zh,Ba),Zh.prototype._final=function(e){this.autoClose&&this.destroy(),e()},Zh.prototype.open=function(){this._opening||(this._opening=!0,this.sftp.open(this.path,this.flags,this.mode,((e,t)=>{if(this._opening=!1,e)return this.emit("error",e),void(this.autoClose&&this.destroy());this.handle=t;const r=e=>{if(e)this.sftp.chmod(this.path,this.mode,(e=>r()));else if("a"!==this.flags[0])this.emit("open",t),this.emit("ready");else{const e=(r,i)=>{r?this.sftp.stat(this.path,((t,i)=>{if(t)return this.destroy(),void this.emit("error",r);e(null,i)})):(this.pos=i.size,this.emit("open",t),this.emit("ready"))};this.sftp.fstat(t,e)}};this.sftp.fchmod(t,this.mode,r)})))},Zh.prototype._write=function(e,t,r){if(!Buffer.isBuffer(e)){const t=new Kh("data","Buffer",e);return this.emit("error",t)}if(!Buffer.isBuffer(this.handle))return this.once("open",(function(){this._write(e,t,r)}));this.sftp.write(this.handle,e,0,e.length,this.pos,((e,t)=>{if(e)return this.autoClose&&this.destroy(),r(e);this.bytesWritten+=t,r()})),this.pos+=e.length},Zh.prototype._writev=function(e,t){if(!Buffer.isBuffer(this.handle))return this.once("open",(function(){this._writev(e,t)}));const r=this.sftp,i=this.handle;let n=e.length;const s=(e,r)=>{if(e)return this.destroy(),t(e);this.bytesWritten+=r,0==--n&&t()};for(let t=0;t<e.length;++t){const n=e[t].chunk;r.write(i,n,0,n.length,this.pos,s),this.pos+=n.length}},"function"!=typeof Ba.prototype.destroy&&(Zh.prototype.destroy=zh.prototype.destroy),Zh.prototype._destroy=zh.prototype._destroy,Zh.prototype.close=function(e){if(e){if(this.isClosed)return void process.nextTick(e);this.on("close",e)}this.autoClose||this.on("finish",this.destroy.bind(this)),this.end()},Zh.prototype.destroySoon=Zh.prototype.end,Object.defineProperty(Zh.prototype,"pending",{get(){return null===this.handle},configurable:!0});var ec={flagsToString:Ph,OPEN_MODE:Eh,SFTP:class extends ya{constructor(e,t,r){super(),"object"==typeof r&&r||(r={});const i=e._protocol._remoteIdentRaw;this.server=!!r.server,this._debug="function"==typeof r.debug?r.debug:void 0,this._isOpenSSH=i&&mh.test(i),this._version=-1,this._extensions={},this._biOpt=r.biOpt,this._pktLenBytes=0,this._pktLen=0,this._pktPos=0,this._pktType=0,this._pktData=void 0,this._writeReqid=-1,this._requests={},this._maxInPktLen=Ch,this._maxOutPktLen=34e3,this._maxReadLen=(this._isOpenSSH?Ch:34e3)-2048,this._maxWriteLen=(this._isOpenSSH?Ch:34e3)-2048,this.maxOpenHandles=void 0,this._client=e,this._protocol=e._protocol,this._callbacks=[],this._hasX11=!1,this._exit={code:void 0,signal:void 0,dump:void 0,desc:void 0},this._waitWindow=!1,this._chunkcb=void 0,this._buffer=[],this.type=t.type,this.subtype=void 0,this.incoming=t.incoming,this.outgoing=t.outgoing,this.stderr=bh,this.readable=!0}push(e){if(null===e){if(Qh(this),!this.readable)return;return this.readable=!1,void this.emit("end")}let t=0;for(;t<e.length;){if(this._pktLenBytes<4){let r=Math.min(4-this._pktLenBytes,e.length-t);for(this._pktLenBytes+=r;r--;)this._pktLen=(this._pktLen<<8)+e[t++];if(this._pktLenBytes<4)return;if(0===this._pktLen)return Hh(this,"Invalid packet length");if(this._pktLen>this._maxInPktLen){const e=this._maxInPktLen;return Hh(this,`Packet length ${this._pktLen} exceeds max length of ${e}`)}if(t>=e.length)return}if(this._pktPos<this._pktLen){const r=Math.min(this._pktLen-this._pktPos,e.length-t);if(0!==t||r!==e.length?r===this._pktLen?this._pkt=new ka(e.buffer,e.byteOffset+t,r):(this._pkt||(this._pkt=Buffer.allocUnsafe(this._pktLen)),this._pkt.set(new Uint8Array(e.buffer,e.byteOffset+t,r),this._pktPos)):r===this._pktLen?this._pkt=e:(this._pkt||(this._pkt=Buffer.allocUnsafe(this._pktLen)),this._pkt.set(e,this._pktPos)),t+=r,this._pktPos+=r,this._pktPos<this._pktLen)return}const r=this._pkt[0],i=this._pkt;this._pktLen=0,this._pktLenBytes=0,this._pkt=void 0,this._pktPos=0;const n=this.server?Wh[r]:$h[r];if(!n)return Hh(this,`Unknown packet type ${r}`);if(-1===this._version)if(this.server){if(r!==Ka)return Hh(this,`Expected INIT packet, got ${r}`)}else if(r!==ch)return Hh(this,`Expected VERSION packet, got ${r}`);if(!1===n(this,i))return}}end(){this.destroy()}destroy(){"open"!==this.outgoing.state&&"eof"!==this.outgoing.state||(this.outgoing.state="closing",this._protocol.channelClose(this.outgoing.id))}_init(){this._init=wh,this.server||xh(this,_h)}createReadStream(e,t){if(this.server)throw new Error("Client-only method called in server mode");return new zh(this,e,t)}createWriteStream(e,t){if(this.server)throw new Error("Client-only method called in server mode");return new Zh(this,e,t)}open(e,t,r,i){if(this.server)throw new Error("Client-only method called in server mode");"function"==typeof r&&(i=r,r=void 0);const n="number"==typeof t?t:Nh(t);if(null===n)throw new Error(`Unknown flags string: ${t}`);let s=0,o=0;"string"!=typeof r&&"number"!=typeof r||(r={mode:r}),"object"==typeof r&&null!==r&&(s=(r=kh(r)).flags,o=r.nb);const u=Buffer.byteLength(e);let a=9;const h=Buffer.allocUnsafe(13+u+4+4+o);Na(h,h.length-4,0),h[4]=qa;const c=this._writeReqid=this._writeReqid+1&Ah;Na(h,c,5),Na(h,u,a),h.utf8Write(e,a+=4,u),Na(h,n,a+=u),Na(h,s,a+=4),o&&(a+=4,o===Ha.length?h.set(Ha,a):Ra(Ha,h,0,o,a),a+=o),this._requests[c]={cb:i};const l=xh(this,h);this._debug&&this._debug(`SFTP: Outbound: ${l?"Buffered":"Sending"} OPEN`)}close(e,t){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");const r=e.length;let i=9;const n=Buffer.allocUnsafe(13+r);Na(n,n.length-4,0),n[4]=ja;const s=this._writeReqid=this._writeReqid+1&Ah;Na(n,s,5),Na(n,r,i),n.set(e,i+=4),this._requests[s]={cb:t};const o=xh(this,n);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} CLOSE`)}read(e,t,r,i,n,s){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");if(!Buffer.isBuffer(t))throw new Error("buffer is not a Buffer");if(r>=t.length)throw new Error("offset is out of bounds");if(r+i>t.length)throw new Error("length extends beyond buffer");if(null===n)throw new Error("null position currently unsupported");vh(this,e,t,r,i,n,s)}readData(e,t,r,i,n,s){this.read(e,t,r,i,n,s)}write(e,t,r,i,n,s){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");if(!Buffer.isBuffer(t))throw new Error("buffer is not a Buffer");if(r>t.length)throw new Error("offset is out of bounds");if(r+i>t.length)throw new Error("length extends beyond buffer");if(null===n)throw new Error("null position currently unsupported");if(!i)return void(s&&process.nextTick(s,void 0,0));const o=this._maxWriteLen,u=Math.max(i-o,0),a=n;u&&(i=o);const h=e.length;let c=9;const l=Buffer.allocUnsafe(13+h+8+4+i);Na(l,l.length-4,0),l[4]=Ya;const D=this._writeReqid=this._writeReqid+1&Ah;Na(l,D,5),Na(l,h,c),l.set(e,c+=4),c+=h;for(let e=7;e>=0;--e)l[c+e]=255&n,n/=256;Na(l,i,c+=8),Ra(t,l,r,r+i,c+=4),this._requests[D]={cb:n=>{n?"function"==typeof s&&s(n):u?this.write(e,t,r+i,u,a+i,s):"function"==typeof s&&s(void 0,r+i)}};const d=xh(this,l);if(this._debug){const e=d?"Sent":"Buffered";this._debug(`SFTP: Outbound: ${e} WRITE (id:${D})`)}}writeData(e,t,r,i,n,s){this.write(e,t,r,i,n,s)}fastGet(e,t,r,i){if(this.server)throw new Error("Client-only method called in server mode");Bh(this,ba,e,t,r,i)}fastPut(e,t,r,i){if(this.server)throw new Error("Client-only method called in server mode");Bh(ba,this,e,t,r,i)}readFile(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");let i;if("function"==typeof r?i=r:"function"==typeof t&&(i=t,t=void 0),"string"==typeof t)t={encoding:t,flag:"r"};else if(t){if("object"!=typeof t)throw new TypeError("Bad arguments")}else t={encoding:null,flag:"r"};const n=t.encoding;if(n&&!Buffer.isEncoding(n))throw new Error(`Unknown encoding: ${n}`);let s,o,u,a,h=0,c=0;const l=t.flag||"r",D=()=>{0===s?(o=Buffer.allocUnsafe(8192),this.read(a,o,0,8192,c,d)):this.read(a,o,h,s-h,c,d)},d=(e,t)=>{let r;if(e){if(r=e.code===Qa.EOF,!r)return this.close(a,(()=>i&&i(e)))}else r=!1;if(r||0===s&&0===t)return f();c+=t,h+=t,0!==s?h===s?f():D():(u.push(Ta(o,0,t)),D())};d._wantEOFError=!0;const f=()=>{this.close(a,(e=>(0===s?o=Buffer.concat(u,h):h<s&&(o=Ta(o,0,h)),n&&(o=o.toString(n)),i&&i(e,o))))};this.open(e,l,438,((t,r)=>{if(t)return i&&i(t);a=r;const n=(t,r)=>{if(t)this.stat(e,((e,r)=>{if(e)return this.close(a,(()=>{i&&i(t)}));n(null,r)}));else{if(s=r.size||0,0===s)return u=[],D();o=Buffer.allocUnsafe(s),D()}};this.fstat(a,n)}))}writeFile(e,t,r,i){if(this.server)throw new Error("Client-only method called in server mode");let n;if("function"==typeof i?n=i:"function"==typeof r&&(n=r,r=void 0),"string"==typeof r)r={encoding:r,mode:438,flag:"w"};else if(r){if("object"!=typeof r)throw new TypeError("Bad arguments")}else r={encoding:"utf8",mode:438,flag:"w"};if(r.encoding&&!Buffer.isEncoding(r.encoding))throw new Error(`Unknown encoding: ${r.encoding}`);const s=r.flag||"w";this.open(e,s,r.mode,((i,o)=>{if(i)n&&n(i);else{const i=Buffer.isBuffer(t)?t:Buffer.from(""+t,r.encoding||"utf8"),u=/a/.test(s)?null:0;if(null===u){const t=(r,s)=>{r?this.stat(e,((e,i)=>{if(e)return this.close(o,(()=>{n&&n(r)}));t(null,i)})):Sh(this,o,i,0,i.length,s.size,n)};return void this.fstat(o,t)}Sh(this,o,i,0,i.length,u,n)}}))}appendFile(e,t,r,i){if(this.server)throw new Error("Client-only method called in server mode");let n;if("function"==typeof i?n=i:"function"==typeof r&&(n=r,r=void 0),"string"==typeof r)r={encoding:r,mode:438,flag:"a"};else if(r){if("object"!=typeof r)throw new TypeError("Bad arguments")}else r={encoding:"utf8",mode:438,flag:"a"};r.flag||(r=Object.assign({flag:"a"},r)),this.writeFile(e,t,r,n)}exists(e,t){if(this.server)throw new Error("Client-only method called in server mode");this.stat(e,(e=>{t&&t(!e)}))}unlink(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let i=9;const n=Buffer.allocUnsafe(13+r);Na(n,n.length-4,0),n[4]=th;const s=this._writeReqid=this._writeReqid+1&Ah;Na(n,s,5),Na(n,r,i),n.utf8Write(e,i+=4,r),this._requests[s]={cb:t};const o=xh(this,n);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} REMOVE`)}rename(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");const i=Buffer.byteLength(e),n=Buffer.byteLength(t);let s=9;const o=Buffer.allocUnsafe(13+i+4+n);Na(o,o.length-4,0),o[4]=oh;const u=this._writeReqid=this._writeReqid+1&Ah;Na(o,u,5),Na(o,i,s),o.utf8Write(e,s+=4,i),Na(o,n,s+=i),o.utf8Write(t,s+=4,n),this._requests[u]={cb:r};const a=xh(this,o);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} RENAME`)}mkdir(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");let i=0,n=0;"function"==typeof t&&(r=t,t=void 0),"object"==typeof t&&null!==t&&(i=(t=kh(t)).flags,n=t.nb);const s=Buffer.byteLength(e);let o=9;const u=Buffer.allocUnsafe(13+s+4+n);Na(u,u.length-4,0),u[4]=rh;const a=this._writeReqid=this._writeReqid+1&Ah;Na(u,a,5),Na(u,s,o),u.utf8Write(e,o+=4,s),Na(u,i,o+=s),n&&(o+=4,n===Ha.length?u.set(Ha,o):Ra(Ha,u,0,n,o),o+=n),this._requests[a]={cb:r};const h=xh(this,u);this._debug&&this._debug(`SFTP: Outbound: ${h?"Buffered":"Sending"} MKDIR`)}rmdir(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let i=9;const n=Buffer.allocUnsafe(13+r);Na(n,n.length-4,0),n[4]=ih;const s=this._writeReqid=this._writeReqid+1&Ah;Na(n,s,5),Na(n,r,i),n.utf8Write(e,i+=4,r),this._requests[s]={cb:t};const o=xh(this,n);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} RMDIR`)}readdir(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");"function"==typeof t&&(r=t,t={}),"object"==typeof t&&null!==t||(t={});const i=!t||!t.full;if(!Buffer.isBuffer(e)&&"string"!=typeof e)throw new Error("missing directory handle or path");if("string"==typeof e){const i=[];let n=0;const s=(e,o)=>{if(e)return r(e);this.readdir(o,t,((e,t)=>{const u=e&&e.code===Qa.EOF;if(e&&!u)return this.close(o,(()=>r(e)));if(u)return this.close(o,(e=>{if(e)return r(e);r(void 0,i)}));for(let e=0;e<t.length;++e,++n)i[n]=t[e];s(void 0,o)}))};return this.opendir(e,s)}const n=e.length;let s=9;const o=Buffer.allocUnsafe(13+n);Na(o,o.length-4,0),o[4]=eh;const u=this._writeReqid=this._writeReqid+1&Ah;Na(o,u,5),Na(o,n,s),o.set(e,s+=4),this._requests[u]={cb:i?(e,t)=>{if("function"==typeof r){if(e)return r(e);for(let e=t.length-1;e>=0;--e)"."!==t[e].filename&&".."!==t[e].filename||t.splice(e,1);r(void 0,t)}}:r};const a=xh(this,o);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} READDIR`)}fstat(e,t){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");const r=e.length;let i=9;const n=Buffer.allocUnsafe(13+r);Na(n,n.length-4,0),n[4]=Va;const s=this._writeReqid=this._writeReqid+1&Ah;Na(n,s,5),Na(n,r,i),n.set(e,i+=4),this._requests[s]={cb:t};const o=xh(this,n);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} FSTAT`)}stat(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let i=9;const n=Buffer.allocUnsafe(13+r);Na(n,n.length-4,0),n[4]=sh;const s=this._writeReqid=this._writeReqid+1&Ah;Na(n,s,5),Na(n,r,i),n.utf8Write(e,i+=4,r),this._requests[s]={cb:t};const o=xh(this,n);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} STAT`)}lstat(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let i=9;const n=Buffer.allocUnsafe(13+r);Na(n,n.length-4,0),n[4]=Xa;const s=this._writeReqid=this._writeReqid+1&Ah;Na(n,s,5),Na(n,r,i),n.utf8Write(e,i+=4,r),this._requests[s]={cb:t};const o=xh(this,n);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} LSTAT`)}opendir(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let i=9;const n=Buffer.allocUnsafe(13+r);Na(n,n.length-4,0),n[4]=Za;const s=this._writeReqid=this._writeReqid+1&Ah;Na(n,s,5),Na(n,r,i),n.utf8Write(e,i+=4,r),this._requests[s]={cb:t};const o=xh(this,n);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} OPENDIR`)}setstat(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");let i=0,n=0;"object"==typeof t&&null!==t?(i=(t=kh(t)).flags,n=t.nb):"function"==typeof t&&(r=t);const s=Buffer.byteLength(e);let o=9;const u=Buffer.allocUnsafe(13+s+4+n);Na(u,u.length-4,0),u[4]=za;const a=this._writeReqid=this._writeReqid+1&Ah;Na(u,a,5),Na(u,s,o),u.utf8Write(e,o+=4,s),Na(u,i,o+=s),n&&(o+=4,n===Ha.length?u.set(Ha,o):Ra(Ha,u,0,n,o),o+=n),this._requests[a]={cb:r};const h=xh(this,u);this._debug&&this._debug(`SFTP: Outbound: ${h?"Buffered":"Sending"} SETSTAT`)}fsetstat(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");let i=0,n=0;"object"==typeof t&&null!==t?(i=(t=kh(t)).flags,n=t.nb):"function"==typeof t&&(r=t);const s=e.length;let o=9;const u=Buffer.allocUnsafe(13+s+4+n);Na(u,u.length-4,0),u[4]=Ja;const a=this._writeReqid=this._writeReqid+1&Ah;Na(u,a,5),Na(u,s,o),u.set(e,o+=4),Na(u,i,o+=s),n&&(o+=4,n===Ha.length?u.set(Ha,o):Ra(Ha,u,0,n,o),o+=n),this._requests[a]={cb:r};const h=xh(this,u);this._debug&&this._debug(`SFTP: Outbound: ${h?"Buffered":"Sending"} FSETSTAT`)}futimes(e,t,r,i){return this.fsetstat(e,{atime:Rh(t),mtime:Rh(r)},i)}utimes(e,t,r,i){return this.setstat(e,{atime:Rh(t),mtime:Rh(r)},i)}fchown(e,t,r,i){return this.fsetstat(e,{uid:t,gid:r},i)}chown(e,t,r,i){return this.setstat(e,{uid:t,gid:r},i)}fchmod(e,t,r){return this.fsetstat(e,{mode:t},r)}chmod(e,t,r){return this.setstat(e,{mode:t},r)}readlink(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let i=9;const n=Buffer.allocUnsafe(13+r);Na(n,n.length-4,0),n[4]=uh;const s=this._writeReqid=this._writeReqid+1&Ah;Na(n,s,5),Na(n,r,i),n.utf8Write(e,i+=4,r),this._requests[s]={cb:(e,r)=>{if("function"==typeof t)return e?t(e):r&&r.length?void t(void 0,r[0].filename):t(new Error("Response missing link info"))}};const o=xh(this,n);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} READLINK`)}symlink(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");const i=Buffer.byteLength(t),n=Buffer.byteLength(e);let s=9;const o=Buffer.allocUnsafe(13+i+4+n);Na(o,o.length-4,0),o[4]=ah;const u=this._writeReqid=this._writeReqid+1&Ah;Na(o,u,5),this._isOpenSSH?(Na(o,n,s),o.utf8Write(e,s+=4,n),Na(o,i,s+=n),o.utf8Write(t,s+=4,i)):(Na(o,i,s),o.utf8Write(t,s+=4,i),Na(o,n,s+=i),o.utf8Write(e,s+=4,n)),this._requests[u]={cb:r};const a=xh(this,o);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} SYMLINK`)}realpath(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let i=9;const n=Buffer.allocUnsafe(13+r);Na(n,n.length-4,0),n[4]=nh;const s=this._writeReqid=this._writeReqid+1&Ah;Na(n,s,5),Na(n,r,i),n.utf8Write(e,i+=4,r),this._requests[s]={cb:(e,r)=>{if("function"==typeof t)return e?t(e):r&&r.length?void t(void 0,r[0].filename):t(new Error("Response missing path info"))}};const o=xh(this,n);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} REALPATH`)}ext_openssh_rename(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");const i=this._extensions["posix-rename@openssh.com"];if(!i||"1"!==i)throw new Error("Server does not support this extended request");const n=Buffer.byteLength(e),s=Buffer.byteLength(t);let o=9;const u=Buffer.allocUnsafe(41+n+4+s);Na(u,u.length-4,0),u[4]=hh;const a=this._writeReqid=this._writeReqid+1&Ah;Na(u,a,5),Na(u,24,o),u.utf8Write("posix-rename@openssh.com",o+=4,24),Na(u,n,o+=24),u.utf8Write(e,o+=4,n),Na(u,s,o+=n),u.utf8Write(t,o+=4,s),this._requests[a]={cb:r};const h=xh(this,u);if(this._debug){const e=h?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} posix-rename@openssh.com`)}}ext_openssh_statvfs(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=this._extensions["statvfs@openssh.com"];if(!r||"2"!==r)throw new Error("Server does not support this extended request");const i=Buffer.byteLength(e);let n=9;const s=Buffer.allocUnsafe(36+i);Na(s,s.length-4,0),s[4]=hh;const o=this._writeReqid=this._writeReqid+1&Ah;Na(s,o,5),Na(s,19,n),s.utf8Write("statvfs@openssh.com",n+=4,19),Na(s,i,n+=19),s.utf8Write(e,n+=4,i),this._requests[o]={extended:"statvfs@openssh.com",cb:t};const u=xh(this,s);if(this._debug){const e=u?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} statvfs@openssh.com`)}}ext_openssh_fstatvfs(e,t){if(this.server)throw new Error("Client-only method called in server mode");const r=this._extensions["fstatvfs@openssh.com"];if(!r||"2"!==r)throw new Error("Server does not support this extended request");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");const i=e.length;let n=9;const s=Buffer.allocUnsafe(37+i);Na(s,s.length-4,0),s[4]=hh;const o=this._writeReqid=this._writeReqid+1&Ah;Na(s,o,5),Na(s,20,n),s.utf8Write("fstatvfs@openssh.com",n+=4,20),Na(s,i,n+=20),s.set(e,n+=4),this._requests[o]={extended:"fstatvfs@openssh.com",cb:t};const u=xh(this,s);if(this._debug){const e=u?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} fstatvfs@openssh.com`)}}ext_openssh_hardlink(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["hardlink@openssh.com"])throw new Error("Server does not support this extended request");const i=Buffer.byteLength(e),n=Buffer.byteLength(t);let s=9;const o=Buffer.allocUnsafe(37+i+4+n);Na(o,o.length-4,0),o[4]=hh;const u=this._writeReqid=this._writeReqid+1&Ah;Na(o,u,5),Na(o,20,s),o.utf8Write("hardlink@openssh.com",s+=4,20),Na(o,i,s+=20),o.utf8Write(e,s+=4,i),Na(o,n,s+=i),o.utf8Write(t,s+=4,n),this._requests[u]={cb:r};const a=xh(this,o);if(this._debug){const e=a?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} hardlink@openssh.com`)}}ext_openssh_fsync(e,t){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["fsync@openssh.com"])throw new Error("Server does not support this extended request");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");const r=e.length;let i=9;const n=Buffer.allocUnsafe(34+r);Na(n,n.length-4,0),n[4]=hh;const s=this._writeReqid=this._writeReqid+1&Ah;Na(n,s,5),Na(n,17,i),n.utf8Write("fsync@openssh.com",i+=4,17),Na(n,r,i+=17),n.set(e,i+=4),this._requests[s]={cb:t};const o=xh(this,n);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} fsync@openssh.com`)}ext_openssh_lsetstat(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["lsetstat@openssh.com"])throw new Error("Server does not support this extended request");let i=0,n=0;"object"==typeof t&&null!==t?(i=(t=kh(t)).flags,n=t.nb):"function"==typeof t&&(r=t);const s=Buffer.byteLength(e);let o=9;const u=Buffer.allocUnsafe(37+s+4+n);Na(u,u.length-4,0),u[4]=hh;const a=this._writeReqid=this._writeReqid+1&Ah;Na(u,a,5),Na(u,20,o),u.utf8Write("lsetstat@openssh.com",o+=4,20),Na(u,s,o+=20),u.utf8Write(e,o+=4,s),Na(u,i,o+=s),n&&(o+=4,n===Ha.length?u.set(Ha,o):Ra(Ha,u,0,n,o),o+=n),this._requests[a]={cb:r};const h=xh(this,u);if(this._debug){const e=h?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} lsetstat@openssh.com`)}}ext_openssh_expandPath(e,t){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["expand-path@openssh.com"])throw new Error("Server does not support this extended request");const r=Buffer.byteLength(e);let i=9;const n=Buffer.allocUnsafe(40+r);Na(n,n.length-4,0),n[4]=hh;const s=this._writeReqid=this._writeReqid+1&Ah;Na(n,s,5),Na(n,23,i),n.utf8Write("expand-path@openssh.com",i+=4,23),Na(n,r,i+=20),n.utf8Write(e,i+=4,r),this._requests[s]={cb:(e,r)=>{if("function"==typeof t)return e?t(e):r&&r.length?void t(void 0,r[0].filename):t(new Error("Response missing expanded path"))}};const o=xh(this,n);if(this._debug){const e=o?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} expand-path@openssh.com`)}}ext_copy_data(e,t,r,i,n,s){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["copy-data"])throw new Error("Server does not support this extended request");if(!Buffer.isBuffer(e))throw new Error("Source handle is not a Buffer");if(!Buffer.isBuffer(i))throw new Error("Destination handle is not a Buffer");let o=0;const u=Buffer.allocUnsafe(26+e.length+8+8+4+i.length+8);Na(u,u.length-4,o),o+=4,u[o]=hh,++o;const a=this._writeReqid=this._writeReqid+1&Ah;Na(u,a,o),o+=4,Na(u,9,o),o+=4,u.utf8Write("copy-data",o,9),o+=9,Na(u,e.length,o),o+=4,u.set(e,o),o+=e.length;for(let e=7;e>=0;--e)u[o+e]=255&t,t/=256;o+=8;for(let e=7;e>=0;--e)u[o+e]=255&r,r/=256;o+=8,Na(u,i.length,o),o+=4,u.set(i,o),o+=i.length;for(let e=7;e>=0;--e)u[o+e]=255&n,n/=256;this._requests[a]={cb:s};const h=xh(this,u);if(this._debug){const e=h?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} copy-data`)}}ext_home_dir(e,t){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["home-directory"])throw new Error("Server does not support this extended request");if("string"!=typeof e)throw new TypeError("username is not a string");let r=0;const i=Buffer.byteLength(e),n=Buffer.allocUnsafe(31+i);Na(n,n.length-4,r),r+=4,n[r]=hh,++r;const s=this._writeReqid=this._writeReqid+1&Ah;Na(n,s,r),r+=4,Na(n,14,r),r+=4,n.utf8Write("home-directory",r,14),r+=14,Na(n,i,r),r+=4,n.utf8Write(e,r,i),r+=i,this._requests[s]={cb:(e,r)=>{if("function"==typeof t)return e?t(e):r&&r.length?void t(void 0,r[0].filename):t(new Error("Response missing home directory"))}};const o=xh(this,n);if(this._debug){const e=o?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} home-directory`)}}ext_users_groups(e,t,r){if(this.server)throw new Error("Client-only method called in server mode");if("1"!==this._extensions["users-groups-by-id@openssh.com"])throw new Error("Server does not support this extended request");if(!Array.isArray(e))throw new TypeError("uids is not an array");for(const t of e)if(!Number.isInteger(t)||t<0||t>2**32-1)throw new Error("uid values must all be 32-bit unsigned integers");if(!Array.isArray(t))throw new TypeError("gids is not an array");for(const e of t)if(!Number.isInteger(e)||e<0||e>2**32-1)throw new Error("gid values must all be 32-bit unsigned integers");let i=0;const n=Buffer.allocUnsafe(47+4*e.length+4+4*t.length);Na(n,n.length-4,i),i+=4,n[i]=hh,++i;const s=this._writeReqid=this._writeReqid+1&Ah;Na(n,s,i),i+=4,Na(n,30,i),i+=4,n.utf8Write("users-groups-by-id@openssh.com",i,30),i+=30,Na(n,4*e.length,i),i+=4;for(const t of e)Na(n,t,i),i+=4;Na(n,4*t.length,i),i+=4;for(const e of t)Na(n,e,i),i+=4;this._requests[s]={extended:"users-groups-by-id@openssh.com",cb:r};const o=xh(this,n);if(this._debug){const e=o?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${e} users-groups-by-id@openssh.com`)}}handle(e,t){if(!this.server)throw new Error("Server-only method called in client mode");if(!Buffer.isBuffer(t))throw new Error("handle is not a Buffer");const r=t.length;if(r>256)throw new Error("handle too large (> 256 bytes)");let i=9;const n=Buffer.allocUnsafe(13+r);Na(n,n.length-4,0),n[4]=Dh,Na(n,e,5),Na(n,r,i),r&&n.set(t,i+=4);const s=xh(this,n);this._debug&&this._debug(`SFTP: Outbound: ${s?"Buffered":"Sending"} HANDLE`)}status(e,t,r){if(!this.server)throw new Error("Server-only method called in client mode");if(!$a.has(t))throw new Error(`Bad status code: ${t}`);r||(r="");const i=Buffer.byteLength(r);let n=9;const s=Buffer.allocUnsafe(17+i+4);Na(s,s.length-4,0),s[4]=lh,Na(s,e,5),Na(s,t,n),Na(s,i,n+=4),n+=4,i&&(s.utf8Write(r,n,i),n+=i),Na(s,0,n);const o=xh(this,s);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} STATUS`)}data(e,t,r){if(!this.server)throw new Error("Server-only method called in client mode");const i=Buffer.isBuffer(t);if(!i&&"string"!=typeof t)throw new Error("data is not a Buffer or string");let n;i||r||(r=void 0,n=!0);const s=i?t.length:Buffer.byteLength(t,r);let o=9;const u=Buffer.allocUnsafe(13+s);Na(u,u.length-4,0),u[4]=dh,Na(u,e,5),Na(u,s,o),s&&(i?u.set(t,o+=4):n?u.utf8Write(t,o+=4,s):u.write(t,o+=4,s,r));const a=xh(this,u);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} DATA`)}name(e,t){if(!this.server)throw new Error("Server-only method called in client mode");if(!Array.isArray(t)){if("object"!=typeof t||null===t)throw new Error("names is not an object or array");t=[t]}const r=t.length;let i,n=0;const s=[];for(let e=0;e<r;++e){const r=t[e],o=r&&r.filename&&"string"==typeof r.filename?r.filename:"";n+=4+Buffer.byteLength(o);const u=r&&r.longname&&"string"==typeof r.longname?r.longname:"";if(n+=4+Buffer.byteLength(u),"object"==typeof r.attrs&&null!==r.attrs){if(i=kh(r.attrs),n+=4+i.nb,i.nb){let e;i.nb===Ha.length?e=new Uint8Array(Ha):(e=new Uint8Array(i.nb),Ra(Ha,e,0,i.nb,0)),i.bytes=e}s.push(i)}else n+=4,s.push(null)}let o=9;const u=Buffer.allocUnsafe(13+n);Na(u,u.length-4,0),u[4]=fh,Na(u,e,5),Na(u,r,o),o+=4;for(let e=0;e<r;++e){const r=t[e];{const e=r&&r.filename&&"string"==typeof r.filename?r.filename:"",t=Buffer.byteLength(e);Na(u,t,o),o+=4,t&&(u.utf8Write(e,o,t),o+=t)}{const e=r&&r.longname&&"string"==typeof r.longname?r.longname:"",t=Buffer.byteLength(e);Na(u,t,o),o+=4,t&&(u.utf8Write(e,o,t),o+=t)}const i=s[e];i?(Na(u,i.flags,o),o+=4,i.flags&&i.bytes&&(u.set(i.bytes,o),o+=i.nb)):(Na(u,0,o),o+=4)}const a=xh(this,u);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} NAME`)}attrs(e,t){if(!this.server)throw new Error("Server-only method called in client mode");if("object"!=typeof t||null===t)throw new Error("attrs is not an object");const r=(t=kh(t)).flags,i=t.nb;let n=9;const s=Buffer.allocUnsafe(13+i);Na(s,s.length-4,0),s[4]=ph,Na(s,e,5),Na(s,r,n),i&&(n+=4,i===Ha.length?s.set(Ha,n):Ra(Ha,s,0,i,n),n+=i);const o=xh(this,s);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} ATTRS`)}},Stats:Ih,STATUS_CODE:Qa,stringToFlags:Nh};const{Duplex:tc,Readable:rc,Writable:ic}=c,{CHANNEL_EXTENDED_DATATYPE:{STDERR:nc}}=cs(),{bufferSlice:sc}=ls(),oc=2097152,uc=1048576;class ac extends rc{constructor(e,t){super(t),this._channel=e}_read(e){this._channel._waitChanDrain&&(this._channel._waitChanDrain=!1,this._channel.incoming.window<=uc&&Dc(this._channel))}}class hc extends ic{constructor(e){super({highWaterMark:oc}),this._channel=e}_write(e,t,r){const i=this._channel,n=i._client._protocol,s=i.outgoing,o=s.packetSize,u=s.id;let a=s.window;const h=e.length;let c=0;if("open"===s.state){for(;h-c>0&&a>0;){let t=h-c;t>a&&(t=a),t>o&&(t=o),0===c&&t===h?n.channelExtData(u,e,nc):n.channelExtData(u,sc(e,c,c+t),nc),c+=t,a-=t}if(s.window=a,h-c>0)return 0===a&&(i._waitWindow=!0),i._chunkErr=c>0?sc(e,c,h):e,void(i._chunkcbErr=r);r()}}}function cc(){this.eof(),!this.server&&this.allowHalfOpen||this.close(),this.writable=!1}function lc(){this.readable=!1}function Dc(e){if("closed"===e.outgoing.state)return;const t=oc-e.incoming.window;t<=0||(e.incoming.window+=t,e._client._protocol.channelWindowAdjust(e.outgoing.id,t))}var dc={Channel:class extends tc{constructor(e,t,r){const i={highWaterMark:oc,allowHalfOpen:!r||r&&!1!==r.allowHalfOpen,emitClose:!1};super(i),this.allowHalfOpen=i.allowHalfOpen;const n=!(!r||!r.server);this.server=n,this.type=t.type,this.subtype=void 0,this.incoming=t.incoming,this.outgoing=t.outgoing,this._callbacks=[],this._client=e,this._hasX11=!1,this._exit={code:void 0,signal:void 0,dump:void 0,desc:void 0},this.stdin=this.stdout=this,this.stderr=n?new hc(this):new ac(this,i),this._waitWindow=!1,this._waitChanDrain=!1,this._chunk=void 0,this._chunkcb=void 0,this._chunkErr=void 0,this._chunkcbErr=void 0,this.on("finish",cc).on("prefinish",cc),this.on("end",lc).on("close",lc)}_read(e){this._waitChanDrain&&(this._waitChanDrain=!1,this.incoming.window<=uc&&Dc(this))}_write(e,t,r){const i=this._client._protocol,n=this.outgoing,s=n.packetSize,o=n.id;let u=n.window;const a=e.length;let h=0;if("open"===n.state){for(;a-h>0&&u>0;){let t=a-h;t>u&&(t=u),t>s&&(t=s),0===h&&t===a?i.channelData(o,e):i.channelData(o,sc(e,h,h+t)),h+=t,u-=t}if(n.window=u,a-h>0)return 0===u&&(this._waitWindow=!0),this._chunk=h>0?sc(e,h,a):e,void(this._chunkcb=r);r()}}eof(){"open"===this.outgoing.state&&(this.outgoing.state="eof",this._client._protocol.channelEOF(this.outgoing.id))}close(){"open"!==this.outgoing.state&&"eof"!==this.outgoing.state||(this.outgoing.state="closing",this._client._protocol.channelClose(this.outgoing.id))}destroy(){return this.end(),this.close(),this}setWindow(e,t,r,i){if(this.server)throw new Error("Client-only method called in server mode");"session"!==this.type||"shell"!==this.subtype&&"exec"!==this.subtype||!this.writable||"open"!==this.outgoing.state||this._client._protocol.windowChange(this.outgoing.id,e,t,r,i)}signal(e){if(this.server)throw new Error("Client-only method called in server mode");"session"===this.type&&this.writable&&"open"===this.outgoing.state&&this._client._protocol.signal(this.outgoing.id,e)}exit(e,t,r){if(!this.server)throw new Error("Server-only method called in client mode");"session"===this.type&&this.writable&&"open"===this.outgoing.state&&("number"==typeof e?this._client._protocol.exitStatus(this.outgoing.id,e):this._client._protocol.exitSignal(this.outgoing.id,e,t,r))}},MAX_WINDOW:oc,PACKET_SIZE:32768,windowAdjust:Dc,WINDOW_THRESHOLD:uc};const{SFTP:fc}=ec,pc=2**32-1;function gc(e,t,r,i){if(e._chanMgr.remove(t),"function"!=typeof i)return;let n;r instanceof Error?n=r:"object"==typeof r&&null!==r?(n=new Error(`(SSH) Channel open failure: ${r.description}`),n.reason=r.reason):(n=new Error("(SSH) Channel open failure: server closed channel unexpectedly"),n.reason=""),i(n)}function Ec(e,t,r,i,n){if("function"==typeof r)return void gc(e,t,i,r);if("object"!=typeof r||null===r)return;if(r.incoming&&"closed"===r.incoming.state)return;if(e._chanMgr.remove(t),r.server&&"Session"===r.constructor.name)return;r.incoming.state="closed",r.readable&&r.push(null),r.server?r.stderr.writable&&r.stderr.end():r.stderr.readable&&r.stderr.push(null),r.constructor===fc||"open"!==r.outgoing.state&&"eof"!==r.outgoing.state||n||r.close(),"closing"===r.outgoing.state&&(r.outgoing.state="closed");const s=r._readableState,o=r._writableState;!o||o.ending||o.finished||n||r.end();const u=r._callbacks;r._callbacks=[];for(let e=0;e<u.length;++e)u[e](!0);if(r.server)!r.readable||r.destroyed||s&&s.endEmitted?r.emit("close"):r.once("end",(()=>r.emit("close")));else{let e;switch(r.type){case"direct-streamlocal@openssh.com":case"direct-tcpip":e=()=>r.emit("close");break;default:{const t=r._exit;e=()=>{null===t.code?r.emit("close",t.code,t.signal,t.dump,t.desc):r.emit("close",t.code)}}}!r.readable||r.destroyed||s&&s.endEmitted?e():r.once("end",e);const t=r.stderr._readableState;!r.stderr.readable||r.stderr.destroyed||t&&t.endEmitted?r.stderr.emit("close"):r.stderr.once("end",(()=>r.stderr.emit("close")))}}const Ac=(()=>{const e=Object.prototype.toString;return t=>"[object RegExp]"===e.call(t)})();var _c={ChannelManager:class{constructor(e){this._client=e,this._channels={},this._cur=-1,this._count=0}add(e){let t;if(this._cur<pc)t=++this._cur;else if(0===this._count)this._cur=0,t=0;else{const e=this._channels;for(let r=0;r<pc;++r)if(void 0===e[r]){t=r;break}}return void 0===t?-1:(this._channels[t]=e||!0,++this._count,t)}update(e,t){if("number"!=typeof e||e<0||e>=pc||!isFinite(e))throw new Error(`Invalid channel id: ${e}`);t&&this._channels[e]&&(this._channels[e]=t)}get(e){if("number"!=typeof e||e<0||e>=pc||!isFinite(e))throw new Error(`Invalid channel id: ${e}`);return this._channels[e]}remove(e){if("number"!=typeof e||e<0||e>=pc||!isFinite(e))throw new Error(`Invalid channel id: ${e}`);this._channels[e]&&(delete this._channels[e],this._count&&--this._count)}cleanup(e){const t=this._channels;this._channels={},this._cur=-1,this._count=0;const r=Object.keys(t),i=this._client;for(let n=0;n<r.length;++n){const s=+r[n],o=t[s];Ec(i,s,o._channel||o,e,!0)}}},generateAlgorithmList:function(e,t,r){if(Array.isArray(e)&&e.length>0){for(let t=0;t<e.length;++t)if(-1===r.indexOf(e[t]))throw new Error(`Unsupported algorithm: ${e[t]}`);return e}if("object"==typeof e&&null!==e){const i=Object.keys(e);let n=t;for(let s=0;s<i.length;++s){const o=i[s];let u=e[o];switch(o){case"append":if(Array.isArray(u)||(u=[u]),Array.isArray(u))for(let e=0;e<u.length;++e){const i=u[e];if("string"==typeof i){if(!i||-1!==n.indexOf(i))continue;if(-1===r.indexOf(i))throw new Error(`Unsupported algorithm: ${i}`);n===t&&(n=n.slice()),n.push(i)}else if(Ac(i))for(let e=0;e<r.length;++e){const s=r[e];if(i.test(s)){if(-1!==n.indexOf(s))continue;n===t&&(n=n.slice()),n.push(s)}}}break;case"prepend":if(Array.isArray(u)||(u=[u]),Array.isArray(u))for(let e=u.length;e>=0;--e){const i=u[e];if("string"==typeof i){if(!i||-1!==n.indexOf(i))continue;if(-1===r.indexOf(i))throw new Error(`Unsupported algorithm: ${i}`);n===t&&(n=n.slice()),n.unshift(i)}else if(Ac(i))for(let e=r.length;e>=0;--e){const s=r[e];if(i.test(s)){if(-1!==n.indexOf(s))continue;n===t&&(n=n.slice()),n.unshift(s)}}}break;case"remove":if(Array.isArray(u)||(u=[u]),Array.isArray(u))for(let e=0;e<u.length;++e){const r=u[e];if("string"==typeof r){if(!r)continue;const e=n.indexOf(r);if(-1===e)continue;n===t&&(n=n.slice()),n.splice(e,1)}else if(Ac(r))for(let e=0;e<n.length;++e)r.test(n[e])&&(n===t&&(n=n.slice()),n.splice(e,1),--e)}}}return n}return t},onChannelOpenFailure:gc,onCHANNEL_CLOSE:Ec,isWritable:e=>e&&e.writable&&e._readableState&&!1===e._readableState.ended};const{createHash:Fc,getHashes:mc,randomFillSync:Cc}=f,{Socket:yc}=h,{lookup:bc}=F,wc=n,vc=mc(),{COMPAT:Bc,CHANNEL_EXTENDED_DATATYPE:{STDERR:Sc},CHANNEL_OPEN_FAILURE:Ic,DEFAULT_CIPHER:kc,DEFAULT_COMPRESSION:Rc,DEFAULT_KEX:Tc,DEFAULT_MAC:Oc,DEFAULT_SERVER_HOST_KEY:Nc,DISCONNECT_REASON:Pc,DISCONNECT_REASON_BY_VALUE:Lc,SUPPORTED_CIPHER:xc,SUPPORTED_COMPRESSION:Uc,SUPPORTED_KEX:Mc,SUPPORTED_MAC:Hc,SUPPORTED_SERVER_HOST_KEY:Qc}=cs(),{init:$c}=Es(),Wc=fa,{parseKey:Kc}=Eo,{SFTP:qc}=ec,{bufferCopy:jc,makeBufferParser:Gc,makeError:Yc,readUInt32BE:Xc,sigSSHToASN1:Vc,writeUInt32BE:zc}=ls(),{AgentContext:Jc,createAgent:Zc,isAgent:el}=jo,{Channel:tl,MAX_WINDOW:rl,PACKET_SIZE:il,windowAdjust:nl,WINDOW_THRESHOLD:sl}=dc,{ChannelManager:ol,generateAlgorithmList:ul,isWritable:al,onChannelOpenFailure:hl,onCHANNEL_CLOSE:cl}=_c,ll=Gc(),Dl=Gc(),dl=/^OpenSSH_(?:(?![0-4])\d)|(?:\d{2,})/,fl=e=>{};function pl(e,t,r,i){const n=rl,s=il;"function"==typeof r&&(i=r,r={});const o=(e,t)=>{i(e,t)};o.type=t;const u=e._chanMgr.add(o);if(-1!==u)switch(t){case"session":case"sftp":e._protocol.session(u,n,s);break;case"direct-tcpip":e._protocol.directTcpip(u,n,s,r);break;case"direct-streamlocal@openssh.com":e._protocol.openssh_directStreamLocal(u,n,s,r);break;default:throw new Error(`Unsupported channel type: ${t}`)}else i(new Error("No free channels available"))}function gl(e,t,r){const i={single:!1,protocol:"MIT-MAGIC-COOKIE-1",cookie:void 0,screen:0};"function"==typeof t?r=t:"object"==typeof t&&null!==t&&("boolean"==typeof t.single&&(i.single=t.single),"number"==typeof t.screen&&(i.screen=t.screen),"string"==typeof t.protocol&&(i.protocol=t.protocol),"string"==typeof t.cookie?i.cookie=t.cookie:Buffer.isBuffer(t.cookie)&&(i.cookie=t.cookie.hexSlice(0,t.cookie.length))),void 0===i.cookie&&(i.cookie=ml());const n="function"==typeof r;"open"===e.outgoing.state?(n&&e._callbacks.push((t=>{t?r(!0!==t?t:new Error("Unable to request X11")):(e._hasX11=!0,++e._client._acceptX11,e.once("close",(()=>{e._client._acceptX11&&--e._client._acceptX11})),r())})),e._client._protocol.x11Forward(e.outgoing.id,i,n)):n&&r(new Error("Channel is not open"))}function El(e,t,r){let i=24,n=80,s=640,o=480,u="vt100",a=null;"function"==typeof t?r=t:"object"==typeof t&&null!==t&&("number"==typeof t.rows&&(i=t.rows),"number"==typeof t.cols&&(n=t.cols),"number"==typeof t.width&&(s=t.width),"number"==typeof t.height&&(o=t.height),"string"==typeof t.term&&(u=t.term),"object"==typeof t.modes&&(a=t.modes));const h="function"==typeof r;"open"===e.outgoing.state?(h&&e._callbacks.push((e=>{e?r(!0!==e?e:new Error("Unable to request a pseudo-terminal")):r()})),e._client._protocol.pty(e.outgoing.id,i,n,o,s,u,a,h)):h&&r(new Error("Channel is not open"))}function Al(e,t){const r="function"==typeof t;"open"===e.outgoing.state?e._client._agentFwdEnabled?r&&t(!1):(e._client._agentFwdEnabled=!0,e._callbacks.push((i=>{if(i)return e._client._agentFwdEnabled=!1,void(r&&t(!0!==i?i:new Error("Unable to request agent forwarding")));r&&t()})),e._client._protocol.openssh_agentForward(e.outgoing.id,!0)):r&&t(new Error("Channel is not open"))}function _l(e,t){if("open"!==e.outgoing.state)return;const r=Object.keys(t||{});for(let i=0;i<r.length;++i){const n=r[i],s=t[n];e._client._protocol.env(e.outgoing.id,n,s,!1)}}function Fl(e,t,r){"open"===e.outgoing.state?(e._callbacks.push((i=>{i?r(!0!==i?i:new Error(`Unable to start subsystem: ${t}`)):(e.subtype="subsystem",r(void 0,e))})),e._client._protocol.subsystem(e.outgoing.id,t,!0)):r(new Error("Channel is not open"))}const ml=(()=>{const e=Buffer.allocUnsafe(16);return()=>(Cc(e,0,16),e.hexSlice(0,16))})();function Cl(e){if(!Array.isArray(e))throw new Error("authList must be an array");let t=0;return(r,i,n)=>t!==e.length&&e[t++]}function yl(e,t,r){if("ssh-rsa"===t.type){if(e._protocol._compatFlags&Bc.IMPLY_RSA_SHA2_SIGALGS&&(r=Array.isArray(r)?["rsa-sha2-256","rsa-sha2-512",...r]:["rsa-sha2-256","rsa-sha2-512"]),Array.isArray(r)){if(-1!==r.indexOf("rsa-sha2-256"))return[["rsa-sha2-256","sha256"]];if(-1!==r.indexOf("rsa-sha2-512"))return[["rsa-sha2-512","sha512"]];if(-1===r.indexOf("ssh-rsa"))return[]}return[["ssh-rsa","sha1"]]}}var bl=class extends wc{constructor(){super(),this.config={host:void 0,port:void 0,localAddress:void 0,localPort:void 0,forceIPv4:void 0,forceIPv6:void 0,keepaliveCountMax:void 0,keepaliveInterval:void 0,readyTimeout:void 0,ident:void 0,username:void 0,password:void 0,privateKey:void 0,tryKeyboard:void 0,agent:void 0,allowAgentFwd:void 0,authHandler:void 0,hostHashAlgo:void 0,hostHashCb:void 0,strictVendor:void 0,debug:void 0},this._agent=void 0,this._readyTimeout=void 0,this._chanMgr=void 0,this._callbacks=void 0,this._forwarding=void 0,this._forwardingUnix=void 0,this._acceptX11=void 0,this._agentFwdEnabled=void 0,this._remoteVer=void 0,this._protocol=void 0,this._sock=void 0,this._resetKA=void 0}connect(e){if(this._sock&&al(this._sock))return this.once("close",(()=>{this.connect(e)})),this.end(),this;this.config.host=e.hostname||e.host||"localhost",this.config.port=e.port||22,this.config.localAddress="string"==typeof e.localAddress?e.localAddress:void 0,this.config.localPort="string"==typeof e.localPort||"number"==typeof e.localPort?e.localPort:void 0,this.config.forceIPv4=e.forceIPv4||!1,this.config.forceIPv6=e.forceIPv6||!1,this.config.keepaliveCountMax="number"==typeof e.keepaliveCountMax&&e.keepaliveCountMax>=0?e.keepaliveCountMax:3,this.config.keepaliveInterval="number"==typeof e.keepaliveInterval&&e.keepaliveInterval>0?e.keepaliveInterval:0,this.config.readyTimeout="number"==typeof e.readyTimeout&&e.readyTimeout>=0?e.readyTimeout:2e4,this.config.ident="string"==typeof e.ident||Buffer.isBuffer(e.ident)?e.ident:void 0;const t={kex:void 0,serverHostKey:void 0,cs:{cipher:void 0,mac:void 0,compress:void 0,lang:[]},sc:void 0};let r=!0;if("object"==typeof e.algorithms&&null!==e.algorithms&&(t.kex=ul(e.algorithms.kex,Tc,Mc),t.kex!==Tc&&(r=!1),t.serverHostKey=ul(e.algorithms.serverHostKey,Nc,Qc),t.serverHostKey!==Nc&&(r=!1),t.cs.cipher=ul(e.algorithms.cipher,kc,xc),t.cs.cipher!==kc&&(r=!1),t.cs.mac=ul(e.algorithms.hmac,Oc,Hc),t.cs.mac!==Oc&&(r=!1),t.cs.compress=ul(e.algorithms.compress,Rc,Uc),t.cs.compress!==Rc&&(r=!1),r||(t.sc=t.cs)),"string"==typeof e.username)this.config.username=e.username;else{if("string"!=typeof e.user)throw new Error("Invalid username");this.config.username=e.user}this.config.password="string"==typeof e.password?e.password:void 0,this.config.privateKey="string"==typeof e.privateKey||Buffer.isBuffer(e.privateKey)?e.privateKey:void 0,this.config.localHostname="string"==typeof e.localHostname?e.localHostname:void 0,this.config.localUsername="string"==typeof e.localUsername?e.localUsername:void 0,this.config.tryKeyboard=!0===e.tryKeyboard,"string"==typeof e.agent&&e.agent.length?this.config.agent=Zc(e.agent):el(e.agent)?this.config.agent=e.agent:this.config.agent=void 0,this.config.allowAgentFwd=!0===e.agentForward&&void 0!==this.config.agent;let i=this.config.authHandler="function"==typeof e.authHandler||Array.isArray(e.authHandler)?e.authHandler:void 0;this.config.strictVendor="boolean"!=typeof e.strictVendor||e.strictVendor;const n=this.config.debug="function"==typeof e.debug?e.debug:void 0;if(!0===e.agentForward&&!this.config.allowAgentFwd)throw new Error("You must set a valid agent path to allow agent forwarding");let s,o,u=this._callbacks=[];if(this._chanMgr=new ol(this),this._forwarding={},this._forwardingUnix={},this._acceptX11=0,this._agentFwdEnabled=!1,this._agent=this.config.agent?this.config.agent:void 0,this._remoteVer=void 0,this.config.privateKey){if(s=Kc(this.config.privateKey,e.passphrase),s instanceof Error)throw new Error(`Cannot parse privateKey: ${s.message}`);if(Array.isArray(s)&&(s=s[0]),null===s.getPrivatePEM())throw new Error("privateKey value does not contain a (valid) private key")}if("function"==typeof e.hostVerifier){const t=e.hostVerifier;let r;-1!==vc.indexOf(e.hostHash)&&(r=Fc(e.hostHash)),o=(e,i)=>{r&&(r.update(e),e=r.digest("hex"));const n=t(e,i);void 0!==n&&i(n)}}const a=this._sock=e.sock||new yc;let h=!1,c=!1;this._protocol&&this._protocol.cleanup();const l=n?(e,t,r)=>{n(`Debug output from server: ${JSON.stringify(r)}`)}:void 0;let D;const d=this._protocol=new Wc({ident:this.config.ident,offer:r?void 0:t,onWrite:e=>{al(a)&&a.write(e)},onError:e=>{"handshake"===e.level&&clearTimeout(this._readyTimeout),d._destruct||a.removeAllListeners("data"),this.emit("error",e);try{a.end()}catch{}},onHeader:e=>{c=!0,this._remoteVer=e.versions.software,e.greeting&&this.emit("greeting",e.greeting)},onHandshakeComplete:e=>{this.emit("handshake",e),h||(h=!0,d.service("ssh-userauth"))},debug:n,hostVerifier:o,messageHandlers:{DEBUG:l,DISCONNECT:(e,t,r)=>{if(t!==Pc.BY_APPLICATION){r||void 0===(r=Lc[t])&&(r=`Unexpected disconnection reason: ${t}`);const e=new Error(r);e.code=t,this.emit("error",e)}a.end()},SERVICE_ACCEPT:(e,t)=>{"ssh-userauth"===t&&k()},EXT_INFO:(e,t)=>{if(void 0===D){for(const e of t)if("server-sig-algs"===e.name)return void(D=e.algs);D=null}},USERAUTH_BANNER:(e,t)=>{this.emit("banner",t)},USERAUTH_SUCCESS:e=>{_(),clearTimeout(this._readyTimeout),this.emit("ready")},USERAUTH_FAILURE:(e,t,r)=>{if(C.keyAlgos){const e=C.keyAlgos[0][0];if(n&&n(`Client: ${C.type} (${e}) auth failed`),C.keyAlgos.shift(),C.keyAlgos.length){const[e,t]=C.keyAlgos[0];switch(C.type){case"agent":return void d.authPK(C.username,C.agentCtx.currentKey(),e);case"publickey":return void d.authPK(C.username,C.key,e);case"hostbased":return void d.authHostbased(C.username,C.key,C.localHostname,C.localUsername,e,((e,r)=>{const i=C.key.sign(e,t);if(i instanceof Error)return i.message=`Error while signing with key: ${i.message}`,i.level="client-authentication",this.emit("error",i),k();r(i)}))}}else C.keyAlgos=void 0}if("agent"===C.type){const e=C.agentCtx.pos();return n&&n(`Client: Agent key #${e+1} failed`),R()}n&&n(`Client: ${C.type} auth failed`),b=r,w=t,k()},USERAUTH_PASSWD_CHANGEREQ:(e,t)=>{"password"===C.type&&this.emit("change password",t,(e=>{d.authPassword(this.config.username,this.config.password,e)}))},USERAUTH_PK_OK:e=>{let t,r;if(C.keyAlgos&&([t,r]=C.keyAlgos[0]),"agent"===C.type){const e=C.agentCtx.currentKey();d.authPK(C.username,e,t,((t,i)=>{const n={hash:r};C.agentCtx.sign(e,t,n,((e,t)=>{if(!e)return i(t);e.level="agent",this.emit("error",e),R()}))}))}else"publickey"===C.type&&d.authPK(C.username,C.key,t,((e,t)=>{const i=C.key.sign(e,r);if(i instanceof Error)return i.message=`Error signing data with key: ${i.message}`,i.level="client-authentication",this.emit("error",i),k();t(i)}))},USERAUTH_INFO_REQUEST:(e,t,r,i)=>{if("keyboard-interactive"===C.type){if(0===(Array.isArray(i)?i.length:0))return n&&n("Client: Sending automatic USERAUTH_INFO_RESPONSE"),void d.authInfoRes();C.prompt(t,r,"",i,(e=>{d.authInfoRes(e)}))}},REQUEST_SUCCESS:(e,t)=>{u.length&&u.shift()(!1,t)},REQUEST_FAILURE:e=>{u.length&&u.shift()(!0)},GLOBAL_REQUEST:(e,t,r,i)=>{if("hostkeys-00@openssh.com"===t)!function(e,t,r){if(!e._sock||!al(e._sock))return;"function"!=typeof r&&(r=fl);if(!Array.isArray(t))throw new TypeError("Invalid keys argument type");const i=[];for(const e of t){const t=Kc(e);if(t instanceof Error)throw t;i.push(t)}if(!e.config.strictVendor||e.config.strictVendor&&dl.test(e._remoteVer))return e._callbacks.push(((t,n)=>{if(t)return void r(!0!==t?t:new Error("Server failed to prove supplied keys"));const s=[];let o=0;for(ll.init(n,0);ll.avail()&&o!==i.length;){const t=i[o++],r=t.getPublicSSH(),n=ll.readString();Dl.init(n,0);const u=Dl.readString(!0);let a,h=Dl.readString();if(u!==t.type){if("ssh-rsa"!==t.type)continue;switch(u){case"rsa-sha2-256":a="sha256";break;case"rsa-sha2-512":a="sha512";break;default:continue}}const c=e._protocol._kex.sessionID,l=Buffer.allocUnsafe(37+c.length+4+r.length);let D=0;zc(l,29,D),l.utf8Write("hostkeys-prove-00@openssh.com",D+=4,29),zc(l,c.length,D+=29),jc(c,l,0,c.length,D+=4),zc(l,r.length,D+=c.length),jc(r,l,0,r.length,D+=4),(h=Vc(h,u))&&!0===t.verify(l,h,a)&&s.push(t)}Dl.clear(),ll.clear(),r(null,s)})),void e._protocol.openssh_hostKeysProve(i);process.nextTick(r,new Error("strictVendor enabled and server is not OpenSSH or compatible version"))}(this,i,((e,t)=>{e||this.emit("hostkeys",t)})),r&&d.requestSuccess();else r&&d.requestFailure()},CHANNEL_OPEN:(e,t)=>{!function(e,t){let r,i=-1;const n=()=>{const r={type:t.type,incoming:{id:i,window:rl,packetSize:il,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}},n=new tl(e,r);return e._chanMgr.update(i,n),e._protocol.channelOpenConfirm(t.sender,i,rl,il),n},s=()=>{void 0===r&&(r=-1===i?Ic.RESOURCE_SHORTAGE:Ic.CONNECT_FAILED),-1!==i&&e._chanMgr.remove(i),e._protocol.channelOpenFail(t.sender,r,"")},o=()=>(i=e._chanMgr.add(),-1===i&&(r=Ic.RESOURCE_SHORTAGE,e.config.debug&&e.config.debug("Client: Automatic rejection of incoming channel open: no channels available")),-1!==i),u=t.data;switch(t.type){case"forwarded-tcpip":{const t=e._forwarding[`${u.destIP}:${u.destPort}`];if(void 0!==t&&o())return 0===u.destPort&&(u.destPort=t),void e.emit("tcp connection",u,n,s);break}case"forwarded-streamlocal@openssh.com":if(void 0!==e._forwardingUnix[u.socketPath]&&o())return void e.emit("unix connection",u,n,s);break;case"auth-agent@openssh.com":if(e._agentFwdEnabled&&"function"==typeof e._agent.getStream&&o())return void e._agent.getStream(((e,t)=>{if(e)return s();const r=n();r.pipe(t).pipe(r)}));break;case"x11":if(0!==e._acceptX11&&o())return void e.emit("x11",u,n,s);break;default:r=Ic.UNKNOWN_CHANNEL_TYPE,e.config.debug&&e.config.debug(`Client: Automatic rejection of unsupported incoming channel open type: ${t.type}`)}void 0===r&&(r=Ic.ADMINISTRATIVELY_PROHIBITED,e.config.debug&&e.config.debug("Client: Automatic rejection of unexpected incoming channel open for: "+t.type));s()}(this,t)},CHANNEL_OPEN_CONFIRMATION:(e,t)=>{const r=this._chanMgr.get(t.recipient);if("function"!=typeof r)return;const i="sftp"===r.type,s={type:i?"session":r.type,incoming:{id:t.recipient,window:rl,packetSize:il,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}},o=i?new qc(this,s,{debug:n}):new tl(this,s);this._chanMgr.update(t.recipient,o),r(void 0,o)},CHANNEL_OPEN_FAILURE:(e,t,r,i)=>{const n=this._chanMgr.get(t);if("function"!=typeof n)return;hl(this,t,{reason:r,description:i},n)},CHANNEL_DATA:(e,t,r)=>{const i=this._chanMgr.get(t);"object"==typeof i&&null!==i&&0!==i.incoming.window&&(i.incoming.window-=r.length,!1!==i.push(r)?i.incoming.window<=sl&&nl(i):i._waitChanDrain=!0)},CHANNEL_EXTENDED_DATA:(e,t,r,i)=>{if(i!==Sc)return;const n=this._chanMgr.get(t);"object"==typeof n&&null!==n&&0!==n.incoming.window&&(n.incoming.window-=r.length,n.stderr.push(r)?n.incoming.window<=sl&&nl(n):n._waitChanDrain=!0)},CHANNEL_WINDOW_ADJUST:(e,t,r)=>{const i=this._chanMgr.get(t);"object"==typeof i&&null!==i&&(i.outgoing.window+=r,i._waitWindow&&(i._waitWindow=!1,i._chunk?i._write(i._chunk,null,i._chunkcb):i._chunkcb?i._chunkcb():i._chunkErr?i.stderr._write(i._chunkErr,null,i._chunkcbErr):i._chunkcbErr&&i._chunkcbErr()))},CHANNEL_SUCCESS:(e,t)=>{const r=this._chanMgr.get(t);"object"==typeof r&&null!==r&&(this._resetKA(),r._callbacks.length&&r._callbacks.shift()(!1))},CHANNEL_FAILURE:(e,t)=>{const r=this._chanMgr.get(t);"object"==typeof r&&null!==r&&(this._resetKA(),r._callbacks.length&&r._callbacks.shift()(!0))},CHANNEL_REQUEST:(e,t,r,i,n)=>{const s=this._chanMgr.get(t);if("object"!=typeof s||null===s)return;const o=s._exit;if(void 0===o.code){switch(r){case"exit-status":return void s.emit("exit",o.code=n);case"exit-signal":return void s.emit("exit",o.code=null,o.signal=`SIG${n.signal}`,o.dump=n.coreDumped,o.desc=n.errorMessage)}i&&e.channelFailure(s.outgoing.id)}},CHANNEL_EOF:(e,t)=>{const r=this._chanMgr.get(t);"object"==typeof r&&null!==r&&"open"===r.incoming.state&&(r.incoming.state="eof",r.readable&&r.push(null),r.stderr.readable&&r.stderr.push(null))},CHANNEL_CLOSE:(e,t)=>{cl(this,t,this._chanMgr.get(t))}}});a.pause();const f=this.config.keepaliveInterval,p=this.config.keepaliveCountMax;let g,E=0;const A=()=>{if(++E>p){if(clearInterval(g),a.readable){const e=new Error("Keepalive timeout");e.level="client-timeout",this.emit("error",e),a.destroy()}}else al(a)?(u.push(_),d.ping()):clearInterval(g)};function _(){f>0&&(E=0,clearInterval(g),al(a)&&(g=setInterval(A,f)))}this._resetKA=_;const F=(()=>{let e=!1;return()=>{if(!e&&(e=!0,y&&!c)){const e=Yc("Connection lost before handshake","protocol",!0);this.emit("error",e)}}})(),m=(()=>{let e=!1;return()=>{e||(e=!0,y=!0,n&&n("Socket connected"),this.emit("connect"),$c.then((()=>{d.start(),a.on("data",(e=>{try{d.parse(e,0,e.length)}catch(e){this.emit("error",e);try{al(a)&&a.end()}catch{}}})),a.stderr&&"function"==typeof a.stderr.resume&&a.stderr.resume(),a.resume()})).catch((e=>{this.emit("error",e);try{al(a)&&a.end()}catch{}})))}})();let C,y=!1;a.on("connect",m).on("timeout",(()=>{this.emit("timeout")})).on("error",(e=>{n&&n(`Socket error: ${e.message}`),clearTimeout(this._readyTimeout),e.level="client-socket",this.emit("error",e)})).on("end",(()=>{n&&n("Socket ended"),F(),d.cleanup(),clearTimeout(this._readyTimeout),clearInterval(g),this.emit("end")})).on("close",(()=>{n&&n("Socket closed"),F(),d.cleanup(),clearTimeout(this._readyTimeout),clearInterval(g),this.emit("close");const e=u;u=this._callbacks=[];const t=new Error("No response from server");for(let r=0;r<e.length;++r)e[r](t);this._chanMgr.cleanup(t)}));let b=null,w=null;const v=["none"];void 0!==this.config.password&&v.push("password"),void 0!==s&&v.push("publickey"),void 0!==this._agent&&v.push("agent"),this.config.tryKeyboard&&v.push("keyboard-interactive"),void 0!==s&&void 0!==this.config.localHostname&&void 0!==this.config.localUsername&&v.push("hostbased"),Array.isArray(i)?i=Cl(i):"function"!=typeof i&&(i=Cl(v));let B=!1;const S=e=>{if(!B){if(B=!0,!1===e){const e=new Error("All configured authentication methods failed");return e.level="client-authentication",this.emit("error",e),void this.end()}if("string"==typeof e){const t=e;if(-1===v.indexOf(t))return I(`Authentication method not allowed: ${t}`);const r=this.config.username;switch(t){case"password":e={type:t,username:r,password:this.config.password};break;case"publickey":e={type:t,username:r,key:s};break;case"hostbased":e={type:t,username:r,key:s,localHostname:this.config.localHostname,localUsername:this.config.localUsername};break;case"agent":e={type:t,username:r,agentCtx:new Jc(this._agent)};break;case"keyboard-interactive":e={type:t,username:r,prompt:(...e)=>this.emit("keyboard-interactive",...e)};break;case"none":e={type:t,username:r};break;default:return I(`Skipping unsupported authentication method: ${e}`)}}else{if("object"!=typeof e||null===e)return I(`Skipping invalid authentication attempt: ${e}`);{const t=e.username;if("string"!=typeof t)return I(`Skipping invalid authentication attempt: ${e}`);const r=e.type;switch(r){case"password":{const{password:i}=e;if("string"!=typeof i&&!Buffer.isBuffer(i))return I("Skipping invalid password auth attempt");e={type:r,username:t,password:i};break}case"publickey":{const i=Kc(e.key,e.passphrase);if(i instanceof Error)return I("Skipping invalid key auth attempt");if(!i.isPrivateKey())return I("Skipping non-private key");e={type:r,username:t,key:i};break}case"hostbased":{const{localHostname:i,localUsername:n}=e,s=Kc(e.key,e.passphrase);if(s instanceof Error||"string"!=typeof i||"string"!=typeof n)return I("Skipping invalid hostbased auth attempt");if(!s.isPrivateKey())return I("Skipping non-private key");e={type:r,username:t,key:s,localHostname:i,localUsername:n};break}case"agent":{let i=e.agent;if("string"==typeof i&&i.length)i=Zc(i);else if(!el(i))return I(`Skipping invalid agent: ${e.agent}`);e={type:r,username:t,agentCtx:new Jc(i)};break}case"keyboard-interactive":{const{prompt:i}=e;if("function"!=typeof i)return I("Skipping invalid keyboard-interactive auth attempt");e={type:r,username:t,prompt:i};break}case"none":e={type:r,username:t};break;default:return I(`Skipping unsupported authentication method: ${e}`)}}}C=e;try{const e=C.username;switch(C.type){case"password":d.authPassword(e,C.password);break;case"publickey":{let t;if(C.keyAlgos=yl(this,C.key,D),C.keyAlgos){if(!C.keyAlgos.length)return I("Skipping key authentication (no mutual hash algorithm)");t=C.keyAlgos[0][0]}d.authPK(e,C.key,t);break}case"hostbased":{let t,r;if(C.keyAlgos=yl(this,C.key,D),C.keyAlgos){if(!C.keyAlgos.length)return I("Skipping hostbased authentication (no mutual hash algorithm)");[t,r]=C.keyAlgos[0]}d.authHostbased(e,C.key,C.localHostname,C.localUsername,t,((e,t)=>{const i=C.key.sign(e,r);if(i instanceof Error)return i.message=`Error while signing with key: ${i.message}`,i.level="client-authentication",this.emit("error",i),k();t(i)}));break}case"agent":C.agentCtx.init((e=>{if(e)return e.level="agent",this.emit("error",e),k();R()}));break;case"keyboard-interactive":d.authKeyboard(e);break;case"none":d.authNone(e)}}finally{B=!1}}};function I(e){n&&n(e),process.nextTick(k)}function k(){B=!1;const e=i(w,b,S);B||void 0===e||S(e)}const R=()=>{if("agent"===C.type){const e=C.agentCtx.nextKey();if(!1===e)n&&n("Agent: No more keys left to try"),n&&n("Client: agent auth failed"),k();else{const t=C.agentCtx.pos();let r;if(C.keyAlgos=yl(this,e,D),C.keyAlgos){if(!C.keyAlgos.length)return n&&n(`Agent: Skipping key #${t+1} (no mutual hash algorithm)`),void R();r=C.keyAlgos[0][0]}n&&n(`Agent: Trying key #${t+1}`),d.authPK(C.username,e,r)}}},T=()=>{this.config.readyTimeout>0&&(this._readyTimeout=setTimeout((()=>{const e=new Error("Timed out while waiting for handshake");e.level="client-timeout",this.emit("error",e),a.destroy()}),this.config.readyTimeout))};if(e.sock)T(),"boolean"==typeof a.connecting&&a.connecting||m();else{let t=this.config.host;const r=this.config.forceIPv4,i=this.config.forceIPv6;n&&n(`Client: Trying ${t} on port ${this.config.port} ...`);const s=()=>{T(),a.connect({host:t,port:this.config.port,localAddress:this.config.localAddress,localPort:this.config.localPort}),a.setMaxListeners(0),a.setTimeout("number"==typeof e.timeout?e.timeout:0)};!r&&!i||r&&i?s():bc(t,r?4:6,((e,i,n)=>{if(e){const i=new Error(`Error while looking up ${r?"IPv4":"IPv6"} address for '${t}': ${e}`);return clearTimeout(this._readyTimeout),i.level="client-dns",this.emit("error",i),void this.emit("close")}t=i,s()}))}return this}end(){return this._sock&&al(this._sock)&&(this._protocol.disconnect(Pc.BY_APPLICATION),this._sock.end()),this}destroy(){return this._sock&&al(this._sock)&&this._sock.destroy(),this}exec(e,t,r){if(!this._sock||!al(this._sock))throw new Error("Not connected");"function"==typeof t&&(r=t,t={});return pl(this,"session",{allowHalfOpen:!1!==t.allowHalfOpen},((i,n)=>{if(i)return void r(i);const s=[];function o(e){if(e)return n.close(),void r(e);s.length&&s.shift()()}(!0===this.config.allowAgentFwd||t&&!0===t.agentForward&&void 0!==this._agent)&&s.push((()=>Al(n,o))),"object"==typeof t&&null!==t&&("object"==typeof t.env&&null!==t.env&&_l(n,t.env),("object"==typeof t.pty&&null!==t.pty||!0===t.pty)&&s.push((()=>El(n,t.pty,o))),("object"==typeof t.x11&&null!==t.x11||"number"===t.x11||!0===t.x11)&&s.push((()=>gl(n,t.x11,o)))),s.push((()=>function(e,t,r,i){if("open"!==e.outgoing.state)return void i(new Error("Channel is not open"));e._callbacks.push((t=>{t?i(!0!==t?t:new Error("Unable to exec")):(e.subtype="exec",e.allowHalfOpen=!1!==r.allowHalfOpen,i(void 0,e))})),e._client._protocol.exec(e.outgoing.id,t,!0)}(n,e,t,r))),s.shift()()})),this}shell(e,t,r){if(!this._sock||!al(this._sock))throw new Error("Not connected");return"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),!e||void 0===e.x11&&void 0===e.env||(t=e,e=void 0),pl(this,"session",((i,n)=>{if(i)return void r(i);const s=[];function o(e){if(e)return n.close(),void r(e);s.length&&s.shift()()}(!0===this.config.allowAgentFwd||t&&!0===t.agentForward&&void 0!==this._agent)&&s.push((()=>Al(n,o))),!1!==e&&s.push((()=>El(n,e,o))),"object"==typeof t&&null!==t&&("object"==typeof t.env&&null!==t.env&&_l(n,t.env),("object"==typeof t.x11&&null!==t.x11||"number"===t.x11||!0===t.x11)&&s.push((()=>gl(n,t.x11,o)))),s.push((()=>function(e,t){if("open"!==e.outgoing.state)return void t(new Error("Channel is not open"));e._callbacks.push((r=>{r?t(!0!==r?r:new Error("Unable to open shell")):(e.subtype="shell",t(void 0,e))})),e._client._protocol.shell(e.outgoing.id,!0)}(n,r))),s.shift()()})),this}subsys(e,t){if(!this._sock||!al(this._sock))throw new Error("Not connected");return pl(this,"session",((r,i)=>{r?t(r):Fl(i,e,((e,r)=>{e?t(e):t(void 0,r)}))})),this}forwardIn(e,t,r){if(!this._sock||!al(this._sock))throw new Error("Not connected");const i="function"==typeof r;return i&&this._callbacks.push(((i,n)=>{if(i)return void r(!0!==i?i:new Error(`Unable to bind to ${e}:${t}`));let s=t;0===t&&n&&n.length>=4&&(s=Xc(n,0),this._protocol._compatFlags&Bc.DYN_RPORT_BUG||(t=s)),this._forwarding[`${e}:${t}`]=s,r(void 0,s)})),this._protocol.tcpipForward(e,t,i),this}unforwardIn(e,t,r){if(!this._sock||!al(this._sock))throw new Error("Not connected");const i="function"==typeof r;return i&&this._callbacks.push((i=>{i?r(!0!==i?i:new Error(`Unable to unbind from ${e}:${t}`)):(delete this._forwarding[`${e}:${t}`],r())})),this._protocol.cancelTcpipForward(e,t,i),this}forwardOut(e,t,r,i,n){if(!this._sock||!al(this._sock))throw new Error("Not connected");return"function"!=typeof n&&(n=fl),pl(this,"direct-tcpip",{srcIP:e,srcPort:t,dstIP:r,dstPort:i},n),this}openssh_noMoreSessions(e){if(!this._sock||!al(this._sock))throw new Error("Not connected");const t="function"==typeof e;return!this.config.strictVendor||this.config.strictVendor&&dl.test(this._remoteVer)?(t&&this._callbacks.push((t=>{t?e(!0!==t?t:new Error("Unable to disable future sessions")):e()})),this._protocol.openssh_noMoreSessions(t),this):t?(process.nextTick(e,new Error("strictVendor enabled and server is not OpenSSH or compatible version")),this):this}openssh_forwardInStreamLocal(e,t){if(!this._sock||!al(this._sock))throw new Error("Not connected");const r="function"==typeof t;return!this.config.strictVendor||this.config.strictVendor&&dl.test(this._remoteVer)?(r&&this._callbacks.push((r=>{r?t(!0!==r?r:new Error(`Unable to bind to ${e}`)):(this._forwardingUnix[e]=!0,t())})),this._protocol.openssh_streamLocalForward(e,r),this):r?(process.nextTick(t,new Error("strictVendor enabled and server is not OpenSSH or compatible version")),this):this}openssh_unforwardInStreamLocal(e,t){if(!this._sock||!al(this._sock))throw new Error("Not connected");const r="function"==typeof t;return!this.config.strictVendor||this.config.strictVendor&&dl.test(this._remoteVer)?(r&&this._callbacks.push((r=>{r?t(!0!==r?r:new Error(`Unable to unbind from ${e}`)):(delete this._forwardingUnix[e],t())})),this._protocol.openssh_cancelStreamLocalForward(e,r),this):r?(process.nextTick(t,new Error("strictVendor enabled and server is not OpenSSH or compatible version")),this):this}openssh_forwardOutStreamLocal(e,t){if(!this._sock||!al(this._sock))throw new Error("Not connected");return"function"!=typeof t&&(t=fl),!this.config.strictVendor||this.config.strictVendor&&dl.test(this._remoteVer)?(pl(this,"direct-streamlocal@openssh.com",{socketPath:e},t),this):(process.nextTick(t,new Error("strictVendor enabled and server is not OpenSSH or compatible version")),this)}sftp(e){if(!this._sock||!al(this._sock))throw new Error("Not connected");return pl(this,"sftp",((t,r)=>{t?e(t):Fl(r,"sftp",((t,i)=>{function n(){r.removeListener("ready",s),r.removeListener("error",o),r.removeListener("exit",u),r.removeListener("close",u)}function s(){n(),e(void 0,r)}function o(t){n(),e(t)}function u(t,r){let i;n(),i="number"==typeof t?`Received exit code ${t} while establishing SFTP session`:void 0!==r?`Received signal ${r} while establishing SFTP session`:"Received unexpected SFTP session termination";const s=new Error(i);s.code=t,s.signal=r,e(s)}t?e(t):(r.on("ready",s).on("error",o).on("exit",u).on("close",u),r._init())}))})),this}setNoDelay(e){return this._sock&&"function"==typeof this._sock.setNoDelay&&this._sock.setNoDelay(e),this}};!function(e){const{Agent:t}=E,{Agent:r}=A,{connect:i}=_;let n;for(const i of[t,r]){class r extends i{constructor(e,t){super(t),this._connectCfg=e,this._defaultSrcIP=t&&t.srcIP||"localhost"}createConnection(e,t){const r=e&&e.localAddress||this._defaultSrcIP,s=e&&e.localPort||0,u=e.host,a=e.port;void 0===n&&(n=bl);const h=new n;let c=!1;h.on("ready",(()=>{h.forwardOut(r,s,u,a,((r,n)=>{if(c=!0,r)return h.end(),t(r);n.once("close",(()=>h.end())),t(null,o(n,i,e))}))})).on("error",t).on("close",(()=>{c||t(new Error("Unexpected connection close"))})).connect(this._connectCfg)}}e[i===t?"SSHTTPAgent":"SSHTTPSAgent"]=r}function s(){}function o(e,r,n){if(r===t)return e.setKeepAlive=s,e.setNoDelay=s,e.setTimeout=s,e.ref=s,e.unref=s,e.destroySoon=e.destroy,e;n.socket=e;const o=i(n),u=(()=>{let t=!1;return()=>{t||(t=!0,e.isPaused()&&e.resume())}})();return o.on("end",u).on("close",u),o}}(Go);var wl={exports:{}};const{Server:vl}=h,Bl=n,{listenerCount:Sl}=Bl,{CHANNEL_OPEN_FAILURE:Il,DEFAULT_CIPHER:kl,DEFAULT_COMPRESSION:Rl,DEFAULT_KEX:Tl,DEFAULT_MAC:Ol,DEFAULT_SERVER_HOST_KEY:Nl,DISCONNECT_REASON:Pl,DISCONNECT_REASON_BY_VALUE:Ll,SUPPORTED_CIPHER:xl,SUPPORTED_COMPRESSION:Ul,SUPPORTED_KEX:Ml,SUPPORTED_MAC:Hl,SUPPORTED_SERVER_HOST_KEY:Ql}=cs(),{init:$l}=Es(),{KexInit:Wl}=Bu(),{parseKey:Kl}=Eo,ql=fa,{SFTP:jl}=ec,{writeUInt32BE:Gl}=ls(),{Channel:Yl,MAX_WINDOW:Xl,PACKET_SIZE:Vl,windowAdjust:zl,WINDOW_THRESHOLD:Jl}=dc,{ChannelManager:Zl,generateAlgorithmList:eD,isWritable:tD,onChannelOpenFailure:rD,onCHANNEL_CLOSE:iD}=_c;class nD extends Bl{constructor(e,t,r,i,n){super(),this.username=this.user=t,this.service=r,this.method=i,this._initialResponse=!1,this._finalResponse=!1,this._multistep=!1,this._cbfinal=(e,t,r)=>{this._finalResponse||(this._finalResponse=!0,n(this,e,t,r))},this._protocol=e}accept(){this._cleanup&&this._cleanup(),this._initialResponse=!0,this._cbfinal(!0)}reject(e,t){this._cleanup&&this._cleanup(),this._initialResponse=!0,this._cbfinal(!1,e,t)}}class sD extends nD{constructor(e,t,r,i,n,s){super(e,t,r,i,s),this._multistep=!0,this._cb=void 0,this._onInfoResponse=e=>{const t=this._cb;t&&(this._cb=void 0,t(e))},this.submethods=n,this.on("abort",(()=>{this._cb&&this._cb(new Error("Authentication request aborted"))}))}prompt(e,t,r,i){Array.isArray(e)||(e=[e]),"function"==typeof t?(i=t,t=r=void 0):"function"==typeof r?(i=r,r=void 0):"function"!=typeof i&&(i=void 0);for(let t=0;t<e.length;++t)"string"==typeof e[t]&&(e[t]={prompt:e[t],echo:!0});this._cb=i,this._initialResponse=!0,this._protocol.authInfoReq(t,r,e)}}class oD extends nD{constructor(e,t,r,i,n,s){super(e,t,r,i,s),this.key={algo:n.keyAlgo,data:n.key},this.hashAlgo=n.hashAlgo,this.signature=n.signature,this.blob=n.blob}accept(){this.signature?nD.prototype.accept.call(this):(this._initialResponse=!0,this._protocol.authPKOK(this.key.algo,this.key.data))}}class uD extends nD{constructor(e,t,r,i,n,s){super(e,t,r,i,s),this.key={algo:n.keyAlgo,data:n.key},this.hashAlgo=n.hashAlgo,this.signature=n.signature,this.blob=n.blob,this.localHostname=n.localHostname,this.localUsername=n.localUsername}}class aD extends nD{constructor(e,t,r,i,n,s){super(e,t,r,i,s),this.password=n,this._changeCb=void 0}requestChange(e,t){if(this._changeCb)throw new Error("Change request already in progress");if("string"!=typeof e)throw new Error("prompt argument must be a string");if("function"!=typeof t)throw new Error("Callback argument must be a function");this._changeCb=t,this._protocol.authPasswdChg(e)}}class hD extends Bl{constructor(e,t,r){super(),this.type="session",this.subtype=void 0,this.server=!0,this._ending=!1,this._channel=void 0,this._chanInfo={type:"session",incoming:{id:r,window:Xl,packetSize:Vl,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}}}}class cD extends Bl{constructor(e,t){if(super(),"object"!=typeof e||null===e)throw new Error("Missing configuration object");const r=Object.create(null),i=[],n=e.hostKeys;if(!Array.isArray(n))throw new Error("hostKeys must be an array");const s="object"==typeof e.algorithms&&null!==e.algorithms?e.algorithms:{},o=eD(s.serverHostKey,Nl,Ql);for(let e=0;e<n.length;++e){let t;if(t=Buffer.isBuffer(n[e])||"string"==typeof n[e]?Kl(n[e]):Kl(n[e].key,n[e].passphrase),t instanceof Error)throw new Error(`Cannot parse privateKey: ${t.message}`);if(Array.isArray(t)&&(t=t[0]),null===t.getPrivatePEM())throw new Error("privateKey value contains an invalid private key");if(!i.includes(t.type))if("ssh-rsa"===t.type){let e=o.indexOf("ssh-rsa");const n=o.indexOf("rsa-sha2-256"),s=o.indexOf("rsa-sha2-512");-1===e&&(e=1/0),[e,n,s].sort(dD).forEach((o=>{if(-1===o)return;let u;switch(o){case e:u="ssh-rsa";break;case n:u="rsa-sha2-256";break;case s:u="rsa-sha2-512";break;default:return}r[u]=t,i.push(u)}))}else r[t.type]=t,i.push(t.type)}const u={kex:eD(s.kex,Tl,Ml).concat(["kex-strict-s-v00@openssh.com"]),serverHostKey:i,cs:{cipher:eD(s.cipher,kl,xl),mac:eD(s.hmac,Ol,Hl),compress:eD(s.compress,Rl,Ul),lang:[]},sc:void 0};u.sc=u.cs,"function"==typeof t&&this.on("connection",t);const a="function"==typeof e.debug?e.debug:void 0,h=e.ident?Buffer.from(e.ident):void 0,c=new Wl(u);this._srv=new vl((t=>{if(this._connections>=this.maxConnections)return void t.destroy();let i;if(++this._connections,t.once("close",(()=>{--this._connections})),a){const e=`[${process.hrtime().join(".")}] `;i=t=>{a(`${e}${t}`)}}new lD(t,r,h,c,i,this,e)})).on("error",(e=>{this.emit("error",e)})).on("listening",(()=>{this.emit("listening")})).on("close",(()=>{this.emit("close")})),this._connections=0,this.maxConnections=1/0}injectSocket(e){this._srv.emit("connection",e)}listen(...e){return this._srv.listen(...e),this}address(){return this._srv.address()}getConnections(e){return this._srv.getConnections(e),this}close(e){return this._srv.close(e),this}ref(){return this._srv.ref(),this}unref(){return this._srv.unref(),this}}cD.KEEPALIVE_CLIENT_INTERVAL=15e3,cD.KEEPALIVE_CLIENT_COUNT_MAX=3;let lD=class extends Bl{constructor(e,t,r,i,n,s,o){super();let u,a,h,c=0,l=!1,D=[];const d=[];function f(e){}this._sock=e,this._chanMgr=new Zl(this),this._debug=n,this.noMoreSessions=!1,this.authenticated=!1,this.on("error",f);const p=n?(e,t,r)=>{n(`Debug output from client: ${JSON.stringify(r)}`)}:void 0,g="number"==typeof o.keepaliveInterval&&isFinite(o.keepaliveInterval)&&o.keepaliveInterval>0?o.keepaliveInterval:"number"==typeof cD.KEEPALIVE_CLIENT_INTERVAL&&isFinite(cD.KEEPALIVE_CLIENT_INTERVAL)&&cD.KEEPALIVE_CLIENT_INTERVAL>0?cD.KEEPALIVE_CLIENT_INTERVAL:-1,E="number"==typeof o.keepaliveCountMax&&isFinite(o.keepaliveCountMax)&&o.keepaliveCountMax>=0?o.keepaliveCountMax:"number"==typeof cD.KEEPALIVE_CLIENT_COUNT_MAX&&isFinite(cD.KEEPALIVE_CLIENT_COUNT_MAX)&&cD.KEEPALIVE_CLIENT_COUNT_MAX>=0?cD.KEEPALIVE_CLIENT_COUNT_MAX:-1;let A=0;-1!==g&&-1!==E&&(this.once("ready",(()=>{const e=()=>{clearInterval(a)};this.on("close",e).on("end",e),a=setInterval((()=>{if(++A>E){clearInterval(a);const e=new Error("Keepalive timeout");e.level="client-timeout",this.emit("error",e),this.end()}else _.ping()}),g)})),h=()=>{a&&a.refresh(),A=0});const _=this._protocol=new ql({server:!0,hostKeys:t,ident:r,offer:i,onPacket:h,greeting:o.greeting,banner:o.banner,onWrite:t=>{tD(e)&&e.write(t)},onError:t=>{_._destruct||e.removeAllListeners("data"),this.emit("error",t);try{e.end()}catch{}},onHeader:t=>{this.removeListener("error",f);const r={ip:e.remoteAddress,family:e.remoteFamily,port:e.remotePort,header:t};if(!s.emit("connection",this,r))return _.disconnect(Pl.BY_APPLICATION),void e.end();t.greeting&&this.emit("greeting",t.greeting)},onHandshakeComplete:e=>{++c>1&&this.emit("rekey"),this.emit("handshake",e)},debug:n,messageHandlers:{DEBUG:p,DISCONNECT:(t,r,i)=>{if(r!==Pl.BY_APPLICATION){i||void 0===(i=Ll[r])&&(i=`Unexpected disconnection reason: ${r}`);const e=new Error(i);e.code=r,this.emit("error",e)}e.end()},CHANNEL_OPEN:(e,t)=>{if("session"===t.type&&this.noMoreSessions||!this.authenticated){const e=Il.ADMINISTRATIVELY_PROHIBITED;return _.channelOpenFail(t.sender,e)}let r,i,s=-1,o=!1;const u=()=>{o||(o=!0,void 0===r&&(r=-1===s?Il.RESOURCE_SHORTAGE:Il.CONNECT_FAILED),-1!==s&&this._chanMgr.remove(s),_.channelOpenFail(t.sender,r,""))},a=()=>(s=this._chanMgr.add(),-1===s&&(r=Il.RESOURCE_SHORTAGE,n&&n("Automatic rejection of incoming channel open: no channels available")),-1!==s),h=t.data;switch(t.type){case"session":if(Sl(this,"session")&&a())return i=()=>{if(o)return;o=!0;const e=new hD(this,t,s);return this._chanMgr.update(s,e),_.channelOpenConfirm(t.sender,s,Xl,Vl),e},void this.emit("session",i,u);break;case"direct-tcpip":if(Sl(this,"tcpip")&&a())return i=()=>{if(o)return;o=!0;const e={type:void 0,incoming:{id:s,window:Xl,packetSize:Vl,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}},r=new Yl(this,e,{server:!0});return this._chanMgr.update(s,r),_.channelOpenConfirm(t.sender,s,Xl,Vl),r},void this.emit("tcpip",i,u,h);break;case"direct-streamlocal@openssh.com":if(Sl(this,"openssh.streamlocal")&&a())return i=()=>{if(o)return;o=!0;const e={type:void 0,incoming:{id:s,window:Xl,packetSize:Vl,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}},r=new Yl(this,e,{server:!0});return this._chanMgr.update(s,r),_.channelOpenConfirm(t.sender,s,Xl,Vl),r},void this.emit("openssh.streamlocal",i,u,h);break;default:r=Il.UNKNOWN_CHANNEL_TYPE,n&&n(`Automatic rejection of unsupported incoming channel open type: ${t.type}`)}void 0===r&&(r=Il.ADMINISTRATIVELY_PROHIBITED,n&&n(`Automatic rejection of unexpected incoming channel open for: ${t.type}`)),u()},CHANNEL_OPEN_CONFIRMATION:(e,t)=>{const r=this._chanMgr.get(t.recipient);if("function"!=typeof r)return;const i={type:r.type,incoming:{id:t.recipient,window:Xl,packetSize:Vl,state:"open"},outgoing:{id:t.sender,window:t.window,packetSize:t.packetSize,state:"open"}},n=new Yl(this,i,{server:!0});this._chanMgr.update(t.recipient,n),r(void 0,n)},CHANNEL_OPEN_FAILURE:(e,t,r,i)=>{const n=this._chanMgr.get(t);if("function"!=typeof n)return;rD(this,t,{reason:r,description:i},n)},CHANNEL_DATA:(e,t,r)=>{let i=this._chanMgr.get(t);"object"==typeof i&&null!==i&&(i.constructor!==hD||(i=i._channel,i))&&0!==i.incoming.window&&(i.incoming.window-=r.length,!1!==i.push(r)?i.incoming.window<=Jl&&zl(i):i._waitChanDrain=!0)},CHANNEL_EXTENDED_DATA:(e,t,r,i)=>{},CHANNEL_WINDOW_ADJUST:(e,t,r)=>{let i=this._chanMgr.get(t);"object"==typeof i&&null!==i&&(i.constructor!==hD||(i=i._channel,i))&&(i.outgoing.window+=r,i._waitWindow&&(i._waitWindow=!1,i._chunk?i._write(i._chunk,null,i._chunkcb):i._chunkcb?i._chunkcb():i._chunkErr?i.stderr._write(i._chunkErr,null,i._chunkcbErr):i._chunkcbErr&&i._chunkcbErr()))},CHANNEL_SUCCESS:(e,t)=>{let r=this._chanMgr.get(t);"object"==typeof r&&null!==r&&(r.constructor!==hD||(r=r._channel,r))&&r._callbacks.length&&r._callbacks.shift()(!1)},CHANNEL_FAILURE:(e,t)=>{let r=this._chanMgr.get(t);"object"==typeof r&&null!==r&&(r.constructor!==hD||(r=r._channel,r))&&r._callbacks.length&&r._callbacks.shift()(!0)},CHANNEL_REQUEST:(e,t,r,i,s)=>{const o=this._chanMgr.get(t);if("object"!=typeof o||null===o)return;let u,a,h=!1;if(o.constructor===hD)if(i&&("shell"!==r&&"exec"!==r&&"subsystem"!==r&&(u=()=>{h||o._ending||o._channel||(h=!0,_.channelSuccess(o._chanInfo.outgoing.id))}),a=()=>{h||o._ending||o._channel||(h=!0,_.channelFailure(o._chanInfo.outgoing.id))}),o._ending)a&&a();else{switch(r){case"env":if(Sl(o,"env"))return void o.emit("env",u,a,{key:s.name,val:s.value});break;case"pty-req":if(Sl(o,"pty"))return void o.emit("pty",u,a,s);break;case"window-change":Sl(o,"window-change")?o.emit("window-change",u,a,s):a&&a();break;case"x11-req":if(Sl(o,"x11"))return void o.emit("x11",u,a,s);break;case"signal":if(Sl(o,"signal"))return void o.emit("signal",u,a,{name:s});break;case"auth-agent-req@openssh.com":if(Sl(o,"auth-agent"))return void o.emit("auth-agent",u,a);break;case"shell":if(Sl(o,"shell"))return u=()=>{if(h||o._ending||o._channel)return;h=!0,i&&_.channelSuccess(o._chanInfo.outgoing.id);const e=new Yl(this,o._chanInfo,{server:!0});return e.subtype=o.subtype=r,o._channel=e,e},void o.emit("shell",u,a);break;case"exec":if(Sl(o,"exec"))return u=()=>{if(h||o._ending||o._channel)return;h=!0,i&&_.channelSuccess(o._chanInfo.outgoing.id);const e=new Yl(this,o._chanInfo,{server:!0});return e.subtype=o.subtype=r,o._channel=e,e},void o.emit("exec",u,a,{command:s});break;case"subsystem":{let e="sftp"===s;if(u=()=>{if(h||o._ending||o._channel)return;let t;return h=!0,i&&_.channelSuccess(o._chanInfo.outgoing.id),e?t=new jl(this,o._chanInfo,{server:!0,debug:n}):(t=new Yl(this,o._chanInfo,{server:!0}),t.subtype=o.subtype=`${r}:${s}`),o._channel=t,t},"sftp"===s){if(Sl(o,"sftp"))return void o.emit("sftp",u,a);e=!1}if(Sl(o,"subsystem"))return void o.emit("subsystem",u,a,{name:s});break}}n&&n(`Automatic rejection of incoming channel request: ${r}`),a&&a()}else i&&_.channelFailure(o.outgoing.id)},CHANNEL_EOF:(e,t)=>{let r=this._chanMgr.get(t);"object"==typeof r&&null!==r&&(r.constructor!==hD||(r._ending||(r._ending=!0,r.emit("eof"),r.emit("end")),r=r._channel,r))&&"open"===r.incoming.state&&(r.incoming.state="eof",r.readable&&r.push(null))},CHANNEL_CLOSE:(e,t)=>{let r=this._chanMgr.get(t);"object"==typeof r&&null!==r&&(r.constructor!==hD||(r._ending=!0,r.emit("close"),r=r._channel,r))&&iD(this,t,r)},SERVICE_REQUEST:(t,r)=>{if(0===c||l||this.authenticated||"ssh-userauth"!==r)return _.disconnect(Pl.SERVICE_NOT_AVAILABLE),void e.end();l=!0,_.serviceAccept(r)},USERAUTH_REQUEST:(t,r,i,n,s)=>{if(0===c||this.authenticated||u&&(u.username!==r||u.service!==i)||"password"!==n&&"publickey"!==n&&"hostbased"!==n&&"keyboard-interactive"!==n&&"none"!==n||10===D.length)return _.disconnect(Pl.PROTOCOL_ERROR),void e.end();if("ssh-connection"!==i)return _.disconnect(Pl.SERVICE_NOT_AVAILABLE),void e.end();let o;switch(n){case"keyboard-interactive":o=new sD(_,r,i,n,s,F);break;case"publickey":o=new oD(_,r,i,n,s,F);break;case"hostbased":o=new uD(_,r,i,n,s,F);break;case"password":if(u&&u instanceof aD&&u._changeCb){const e=u._changeCb;return u._changeCb=void 0,void e(s.newPassword)}o=new aD(_,r,i,n,s,F);break;case"none":o=new nD(_,r,i,n,F)}if(u){if(!u._initialResponse)return D.push(o);u._multistep&&!u._finalResponse&&(u._cleanup&&u._cleanup(),u.emit("abort"))}u=o,Sl(this,"authentication")?this.emit("authentication",u):u.reject()},USERAUTH_INFO_RESPONSE:(e,t)=>{u&&u instanceof sD&&u._onInfoResponse(t)},GLOBAL_REQUEST:(e,t,r,i)=>{const n={type:null,buf:null};function s(e,t){n.type=e,n.buf=t,function(){for(;d.length>0&&d[0].type;){const e=d.shift();"SUCCESS"===e.type&&_.requestSuccess(e.buf),"FAILURE"===e.type&&_.requestFailure()}}()}if(r&&d.push(n),("tcpip-forward"===t||"cancel-tcpip-forward"===t||"no-more-sessions@openssh.com"===t||"streamlocal-forward@openssh.com"===t||"cancel-streamlocal-forward@openssh.com"===t)&&Sl(this,"request")&&this.authenticated){let e,n;if(r){let r=!1;e=e=>{if(r)return;let n;r=!0,"tcpip-forward"===t&&0===i.bindPort&&"number"==typeof e&&(n=Buffer.allocUnsafe(4),Gl(n,e,0)),s("SUCCESS",n)},n=()=>{r||(r=!0,s("FAILURE"))}}if("no-more-sessions@openssh.com"===t)return this.noMoreSessions=!0,void(e&&e());this.emit("request",e,n,t,i)}else r&&s("FAILURE")}}});e.pause(),$l.then((()=>{_.start(),e.on("data",(t=>{try{_.parse(t,0,t.length)}catch(t){this.emit("error",t);try{tD(e)&&e.end()}catch{}}})),e.resume()})).catch((t=>{this.emit("error",t);try{tD(e)&&e.end()}catch{}})),e.on("error",(e=>{e.level="socket",this.emit("error",e)})).once("end",(()=>{n&&n("Socket ended"),_.cleanup(),this.emit("end")})).once("close",(()=>{n&&n("Socket closed"),_.cleanup(),this.emit("close");const e=new Error("No response from server");this._chanMgr.cleanup(e)}));const F=(e,t,r,i)=>{u!==e||this.authenticated||(t?(u=void 0,this.authenticated=!0,_.authSuccess(),D=[],this.emit("ready")):(_.authFailure(r,i),D.length&&(u=D.pop(),Sl(this,"authentication")?this.emit("authentication",u):u.reject())))}}end(){return this._sock&&tD(this._sock)&&(this._protocol.disconnect(Pl.BY_APPLICATION),this._sock.end()),this}x11(e,t,r){return DD(this,"x11",{originAddr:e,originPort:t},r),this}forwardOut(e,t,r,i,n){return DD(this,"forwarded-tcpip",{boundAddr:e,boundPort:t,remoteAddr:r,remotePort:i},n),this}openssh_forwardOutStreamLocal(e,t){return DD(this,"forwarded-streamlocal@openssh.com",{socketPath:e},t),this}rekey(e){let t;try{this._protocol.rekey()}catch(e){t=e}"function"==typeof e&&(t?process.nextTick(e,t):this.once("rekey",e))}setNoDelay(e){return this._sock&&"function"==typeof this._sock.setNoDelay&&this._sock.setNoDelay(e),this}};function DD(e,t,r,i){const n=Xl,s=Vl;"function"==typeof r&&(i=r,r={});const o=(e,t)=>{i(e,t)};o.type=t;const u=e._chanMgr.add(o);if(-1!==u)switch(t){case"forwarded-tcpip":e._protocol.forwardedTcpip(u,n,s,r);break;case"x11":e._protocol.x11(u,n,s,r);break;case"forwarded-streamlocal@openssh.com":e._protocol.openssh_forwardedStreamLocal(u,n,s,r);break;default:throw new Error(`Unsupported channel type: ${t}`)}else i(new Error("No free channels available"))}function dD(e,t){return e-t}wl.exports=cD,wl.exports.IncomingClient=lD;var fD=wl.exports;const{createCipheriv:pD,generateKeyPair:gD,generateKeyPairSync:ED,getCurves:AD,randomBytes:_D}=f,{Ber:FD}=Vn,mD=as,{CIPHER_INFO:CD}=Es(),yD=AD(),bD=new Map(Object.entries(CD));function wD(e,t){if("string"!=typeof e)throw new TypeError("Key type must be a string");const r={type:"spki",format:"der"},i={type:"pkcs8",format:"der"};switch(e.toLowerCase()){case"rsa":{if("object"!=typeof t||null===t)throw new TypeError("Missing options object for RSA key");const e=t.bits;if(!Number.isInteger(e))throw new TypeError("RSA bits must be an integer");if(e<=0||e>16384)throw new RangeError("RSA bits must be non-zero and <= 16384");return["rsa",{modulusLength:e,publicKeyEncoding:r,privateKeyEncoding:i}]}case"ecdsa":{if("object"!=typeof t||null===t)throw new TypeError("Missing options object for ECDSA key");if(!Number.isInteger(t.bits))throw new TypeError("ECDSA bits must be an integer");let e;switch(t.bits){case 256:e="prime256v1";break;case 384:e="secp384r1";break;case 521:e="secp521r1";break;default:throw new Error("ECDSA bits must be 256, 384, or 521")}if(!yD.includes(e))throw new Error("Unsupported ECDSA bits value");return["ec",{namedCurve:e,publicKeyEncoding:r,privateKeyEncoding:i}]}case"ed25519":return["ed25519",{publicKeyEncoding:r,privateKeyEncoding:i}];default:throw new Error(`Unsupported key type: ${e}`)}}function vD(e,t,r,i){let n,s="new",o="";if("object"==typeof i&&null!==i&&("string"==typeof i.comment&&i.comment&&(o=i.comment),"string"==typeof i.format&&i.format&&(s=i.format),i.passphrase)){let e;if("string"==typeof i.passphrase)e=Buffer.from(i.passphrase);else{if(!Buffer.isBuffer(i.passphrase))throw new Error("Invalid passphrase");e=i.passphrase}if(void 0===i.cipher)throw new Error("Missing cipher name");const t=bD.get(i.cipher);if(void 0===t)throw new Error("Invalid cipher name");if("new"===s){let r=16;if(void 0!==i.rounds){if(!Number.isInteger(i.rounds))throw new TypeError("rounds must be an integer");i.rounds>0&&(r=i.rounds)}const s=Buffer.allocUnsafe(t.keyLen+t.ivLen),o=_D(16);if(0!==mD(e,e.length,o,o.length,s,s.length,r))return new Error("Failed to generate information to encrypt key");const u=Buffer.allocUnsafe(4+o.length+4);{let e=0;u.writeUInt32BE(o.length,e+=0),u.set(o,e+=4),u.writeUInt32BE(r,e+=o.length)}n={cipher:t,cipherName:i.cipher,kdfName:"bcrypt",kdfOptions:u,key:s.slice(0,t.keyLen),iv:s.slice(t.keyLen)}}}if("new"===s){let i,s="-----BEGIN OPENSSH PRIVATE KEY-----\n";const u=Buffer.from(n?n.cipherName:"none"),a=Buffer.from(n?n.kdfName:"none"),h=n?n.kdfOptions:Buffer.alloc(0),c=n?n.cipher.blockLen:8,l=function(e,t,r){switch(e){case"rsa":{let e=new FD.Reader(r);if(e.readSequence(),0!==e.readInt())throw new Error("Unsupported version in RSA private key");if(e.readSequence(),"1.2.840.113549.1.1.1"!==e.readOID())throw new Error("Bad RSA private OID");if(e.readByte()!==FD.Null)throw new Error("Malformed RSA private key (expected null)");if(0!==e.readByte())throw new Error("Malformed RSA private key (expected zero-length null)");if(e=new FD.Reader(e.readString(FD.OctetString,!0)),e.readSequence(),0!==e.readInt())throw new Error("Unsupported version in RSA private key");const t=e.readString(FD.Integer,!0),i=e.readString(FD.Integer,!0),n=e.readString(FD.Integer,!0),s=e.readString(FD.Integer,!0),o=e.readString(FD.Integer,!0);e.readString(FD.Integer,!0),e.readString(FD.Integer,!0);const u=e.readString(FD.Integer,!0),a=Buffer.from("ssh-rsa"),h=Buffer.allocUnsafe(4+a.length+4+t.length+4+i.length+4+n.length+4+u.length+4+s.length+4+o.length);let c=0;h.writeUInt32BE(a.length,c+=0),h.set(a,c+=4),h.writeUInt32BE(t.length,c+=a.length),h.set(t,c+=4),h.writeUInt32BE(i.length,c+=t.length),h.set(i,c+=4),h.writeUInt32BE(n.length,c+=i.length),h.set(n,c+=4),h.writeUInt32BE(u.length,c+=n.length),h.set(u,c+=4),h.writeUInt32BE(s.length,c+=u.length),h.set(s,c+=4),h.writeUInt32BE(o.length,c+=s.length),h.set(o,c+=4);const l=Buffer.allocUnsafe(4+a.length+4+i.length+4+t.length);return c=0,l.writeUInt32BE(a.length,c+=0),l.set(a,c+=4),l.writeUInt32BE(i.length,c+=a.length),l.set(i,c+=4),l.writeUInt32BE(t.length,c+=i.length),l.set(t,c+=4),{sshName:a.toString(),priv:h,pub:l}}case"ec":{let e=new FD.Reader(t);if(e.readSequence(),e.readSequence(),"1.2.840.10045.2.1"!==e.readOID())throw new Error("Bad ECDSA public OID");e.readOID();let i,n=e.readString(FD.BitString,!0);{let e=0;for(;e<n.length&&0===n[e];++e);e>0&&(n=n.slice(e))}if(e=new FD.Reader(r),e.readSequence(),0!==e.readInt())throw new Error("Unsupported version in ECDSA private key");if(e.readSequence(),"1.2.840.10045.2.1"!==e.readOID())throw new Error("Bad ECDSA private OID");switch(e.readOID()){case"1.2.840.10045.3.1.7":i="nistp256";break;case"1.3.132.0.34":i="nistp384";break;case"1.3.132.0.35":i="nistp521";break;default:throw new Error("Unsupported curve in ECDSA private key")}if(e=new FD.Reader(e.readString(FD.OctetString,!0)),e.readSequence(),1!==e.readInt())throw new Error("Unsupported version in ECDSA private key");const s=Buffer.concat([Buffer.from([0]),e.readString(FD.OctetString,!0)]),o=Buffer.from(`ecdsa-sha2-${i}`);i=Buffer.from(i);const u=Buffer.allocUnsafe(4+o.length+4+i.length+4+n.length+4+s.length);let a=0;u.writeUInt32BE(o.length,a+=0),u.set(o,a+=4),u.writeUInt32BE(i.length,a+=o.length),u.set(i,a+=4),u.writeUInt32BE(n.length,a+=i.length),u.set(n,a+=4),u.writeUInt32BE(s.length,a+=n.length),u.set(s,a+=4);const h=Buffer.allocUnsafe(4+o.length+4+i.length+4+n.length);return a=0,h.writeUInt32BE(o.length,a+=0),h.set(o,a+=4),h.writeUInt32BE(i.length,a+=o.length),h.set(i,a+=4),h.writeUInt32BE(n.length,a+=i.length),h.set(n,a+=4),{sshName:o.toString(),priv:u,pub:h}}case"ed25519":{let e=new FD.Reader(t);if(e.readSequence(),e.readSequence(),"1.3.101.112"!==e.readOID())throw new Error("Bad ED25519 public OID");let i=e.readString(FD.BitString,!0);{let e=0;for(;e<i.length&&0===i[e];++e);e>0&&(i=i.slice(e))}if(e=new FD.Reader(r),e.readSequence(),0!==e.readInt())throw new Error("Unsupported version in ED25519 private key");if(e.readSequence(),"1.3.101.112"!==e.readOID())throw new Error("Bad ED25519 private OID");e=new FD.Reader(e.readString(FD.OctetString,!0));const n=e.readString(FD.OctetString,!0),s=Buffer.from("ssh-ed25519"),o=Buffer.allocUnsafe(4+s.length+4+i.length+4+(n.length+i.length));let u=0;o.writeUInt32BE(s.length,u+=0),o.set(s,u+=4),o.writeUInt32BE(i.length,u+=s.length),o.set(i,u+=4),o.writeUInt32BE(n.length+i.length,u+=i.length),o.set(n,u+=4),o.set(i,u+=n.length);const a=Buffer.allocUnsafe(4+s.length+4+i.length);return u=0,a.writeUInt32BE(s.length,u+=0),a.set(s,u+=4),a.writeUInt32BE(i.length,u+=s.length),a.set(i,u+=4),{sshName:s.toString(),priv:o,pub:a}}}}(e,t,r),D=_D(4),d=Buffer.from(o),f=8+l.priv.length+4+d.length;let p=[];for(let e=1;(f+p.length)%c;++e)p.push(255&e);p=Buffer.from(p);let g,E=Buffer.allocUnsafe(f+p.length);{let e=0;E.set(D,e+=0),E.set(D,e+=4),E.set(l.priv,e+=4),E.writeUInt32BE(d.length,e+=l.priv.length),E.set(d,e+=4),E.set(p,e+=d.length)}if(n){const e={authTagLength:n.cipher.authLen},t=pD(n.cipher.sslName,n.key,n.iv,e);t.setAutoPadding(!1),E=Buffer.concat([t.update(E),t.final()]),g=n.cipher.authLen>0?t.getAuthTag():Buffer.alloc(0),n.key.fill(0),n.iv.fill(0)}else g=Buffer.alloc(0);const A=Buffer.from("openssh-key-v1\0"),_=Buffer.allocUnsafe(A.length+4+u.length+4+a.length+4+h.length+4+4+l.pub.length+4+E.length+g.length);{let e=0;_.set(A,e+=0),_.writeUInt32BE(u.length,e+=A.length),_.set(u,e+=4),_.writeUInt32BE(a.length,e+=u.length),_.set(a,e+=4),_.writeUInt32BE(h.length,e+=a.length),_.set(h,e+=4),_.writeUInt32BE(1,e+=h.length),_.writeUInt32BE(l.pub.length,e+=4),_.set(l.pub,e+=4),_.writeUInt32BE(E.length,e+=l.pub.length),_.set(E,e+=4),_.set(g,e+=E.length)}{const e=_.base64Slice(0,_.length);let t=e.replace(/.{64}/g,"$&\n");63&e.length&&(t+="\n"),s+=t}{const e=l.pub.base64Slice(0,l.pub.length);i=`${l.sshName} ${e}${o?` ${o}`:""}`}return s+="-----END OPENSSH PRIVATE KEY-----\n",{private:s,public:i}}throw new Error("Invalid output key format")}function BD(){}var SD={generateKeyPair:(e,t,r)=>{"function"==typeof t&&(r=t,t=void 0),"function"!=typeof r&&(r=BD);const i=wD(e,t);gD(...i,((e,n,s)=>{if(e)return r(e);let o;try{o=vD(i[0],n,s,t)}catch(e){return r(e)}r(null,o)}))},generateKeyPairSync:(e,t)=>{const r=wD(e,t),{publicKey:i,privateKey:n}=ED(...r);return vD(r[0],i,n,t)}};const{AgentProtocol:ID,BaseAgent:kD,createAgent:RD,CygwinAgent:TD,OpenSSHAgent:OD,PageantAgent:ND}=jo,{SSHTTPAgent:PD,SSHTTPSAgent:LD}=Go,{parseKey:xD}=Eo,{flagsToString:UD,OPEN_MODE:MD,STATUS_CODE:HD,stringToFlags:QD}=ec;var $D,WD,KD,qD,jD,GD,YD={AgentProtocol:ID,BaseAgent:kD,createAgent:RD,Client:bl,CygwinAgent:TD,HTTPAgent:PD,HTTPSAgent:LD,OpenSSHAgent:OD,PageantAgent:ND,Server:fD,utils:{parseKey:xD,...SD,sftp:{flagsToString:UD,OPEN_MODE:MD,STATUS_CODE:HD,stringToFlags:QD}}},XD={exports:{}};function VD(){return WD?$D:(WD=1,$D=c)}function zD(){if(qD)return KD;function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function t(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?e(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}qD=1;var s=g.Buffer,o=m.inspect,u=o&&o.custom||"inspect";function a(e,t,r){s.prototype.copy.call(e,t,r)}return KD=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return i(e,[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t=s.allocUnsafe(e>>>0),r=this.head,i=0;r;)a(r.data,t,i),i+=r.data.length,r=r.next;return t}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,i=t.data;for(e-=i.length;t=t.next;){var n=t.data,s=e>n.length?n.length:e;if(s===n.length?i+=n:i+=n.slice(0,e),0===(e-=s)){s===n.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=n.slice(s));break}++r}return this.length-=r,i}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),r=this.head,i=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var n=r.data,o=e>n.length?n.length:e;if(n.copy(t,t.length-e,0,o),0===(e-=o)){o===n.length?(++i,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=n.slice(o));break}++i}return this.length-=i,t}},{key:u,value:function(e,r){return o(this,t(t({},r),{},{depth:0,customInspect:!1}))}}]),e}()}function JD(){if(GD)return jD;function e(e,i){r(e,i),t(e)}function t(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function r(e,t){e.emit("error",t)}return GD=1,jD={destroy:function(i,n){var s=this,o=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return o||u?(n?n(i):i&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(r,this,i)):process.nextTick(r,this,i)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(i||null,(function(r){!n&&r?s._writableState?s._writableState.errorEmitted?process.nextTick(t,s):(s._writableState.errorEmitted=!0,process.nextTick(e,s,r)):process.nextTick(e,s,r):n?(process.nextTick(t,s),n(r)):process.nextTick(t,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,i=e._writableState;r&&r.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}},jD}var ZD,ed,td,rd={};function id(){if(ZD)return rd;ZD=1;const e={};function t(t,r,i){i||(i=Error);class n extends i{constructor(e,t,i){super(function(e,t,i){return"string"==typeof r?r:r(e,t,i)}(e,t,i))}}n.prototype.name=i.name,n.prototype.code=t,e[t]=n}function r(e,t){if(Array.isArray(e)){const r=e.length;return e=e.map((e=>String(e))),r>2?`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]:2===r?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}return`of ${t} ${String(e)}`}return t("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),t("ERR_INVALID_ARG_TYPE",(function(e,t,i){let n;var s;let o;if("string"==typeof t&&(s="not ",t.substr(0,s.length)===s)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))o=`The ${e} ${n} ${r(t,"type")}`;else{const i=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";o=`The "${e}" ${i} ${n} ${r(t,"type")}`}return o+=". Received type "+typeof i,o}),TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),rd.codes=e,rd}function nd(){if(td)return ed;td=1;var e=id().codes.ERR_INVALID_OPT_VALUE;return ed={getHighWaterMark:function(t,r,i,n){var s=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(r,n,i);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new e(n?i:"highWaterMark",s);return Math.floor(s)}return t.objectMode?16:16384}}}var sd,od={exports:{}},ud={exports:{}};try{var ad=require("util");if("function"!=typeof ad.inherits)throw"";od.exports=ad.inherits}catch(YE){od.exports=(sd||(sd=1,"function"==typeof Object.create?ud.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:ud.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}),ud.exports)}var hd,cd,ld,Dd,dd,fd,pd=od.exports;function gd(){if(Dd)return ld;function e(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var i=e.entry;e.entry=null;for(;i;){var n=i.callback;t.pendingcb--,n(r),i=i.next}t.corkedRequestsFree.next=e}(t,e)}}var t;Dd=1,ld=y,y.WritableState=C;var r={deprecate:cd?hd:(cd=1,hd=m.deprecate)},i=VD(),n=g.Buffer,s=(void 0!==w?w:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var o,u=JD(),a=nd().getHighWaterMark,h=id().codes,c=h.ERR_INVALID_ARG_TYPE,l=h.ERR_METHOD_NOT_IMPLEMENTED,D=h.ERR_MULTIPLE_CALLBACK,d=h.ERR_STREAM_CANNOT_PIPE,f=h.ERR_STREAM_DESTROYED,p=h.ERR_STREAM_NULL_VALUES,E=h.ERR_STREAM_WRITE_AFTER_END,A=h.ERR_UNKNOWN_ENCODING,_=u.errorOrDestroy;function F(){}function C(r,i,n){t=t||Ed(),r=r||{},"boolean"!=typeof n&&(n=i instanceof t),this.objectMode=!!r.objectMode,n&&(this.objectMode=this.objectMode||!!r.writableObjectMode),this.highWaterMark=a(this,r,"writableHighWaterMark",n),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===r.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if("function"!=typeof n)throw new D;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,n){--t.pendingcb,r?(process.nextTick(n,i),process.nextTick(k,e,t),e._writableState.errorEmitted=!0,_(e,i)):(n(i),e._writableState.errorEmitted=!0,_(e,i),k(e,t))}(e,r,i,t,n);else{var s=S(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||B(e,r),i?process.nextTick(v,e,r,s,n):v(e,r,s,n)}}(i,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==r.emitClose,this.autoDestroy=!!r.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}function y(e){var r=this instanceof(t=t||Ed());if(!r&&!o.call(y,this))return new y(e);this._writableState=new C(e,this,r),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),i.call(this)}function b(e,t,r,i,n,s,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new f("write")):r?e._writev(n,t.onwrite):e._write(n,s,t.onwrite),t.sync=!1}function v(e,t,r,i){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),k(e,t)}function B(t,r){r.bufferProcessing=!0;var i=r.bufferedRequest;if(t._writev&&i&&i.next){var n=r.bufferedRequestCount,s=new Array(n),o=r.corkedRequestsFree;o.entry=i;for(var u=0,a=!0;i;)s[u]=i,i.isBuf||(a=!1),i=i.next,u+=1;s.allBuffers=a,b(t,r,!0,r.length,s,"",o.finish),r.pendingcb++,r.lastBufferedRequest=null,o.next?(r.corkedRequestsFree=o.next,o.next=null):r.corkedRequestsFree=new e(r),r.bufferedRequestCount=0}else{for(;i;){var h=i.chunk,c=i.encoding,l=i.callback;if(b(t,r,!1,r.objectMode?1:h.length,h,c,l),i=i.next,r.bufferedRequestCount--,r.writing)break}null===i&&(r.lastBufferedRequest=null)}r.bufferedRequest=i,r.bufferProcessing=!1}function S(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function I(e,t){e._final((function(r){t.pendingcb--,r&&_(e,r),t.prefinished=!0,e.emit("prefinish"),k(e,t)}))}function k(e,t){var r=S(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(I,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}return pd(y,i),C.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(C.prototype,"buffer",{get:r.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(e){return!!o.call(this,e)||this===y&&(e&&e._writableState instanceof C)}})):o=function(e){return e instanceof this},y.prototype.pipe=function(){_(this,new d)},y.prototype.write=function(e,t,r){var i,o=this._writableState,u=!1,a=!o.objectMode&&(i=e,n.isBuffer(i)||i instanceof s);return a&&!n.isBuffer(e)&&(e=function(e){return n.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof r&&(r=F),o.ending?function(e,t){var r=new E;_(e,r),process.nextTick(t,r)}(this,r):(a||function(e,t,r,i){var n;return null===r?n=new p:"string"==typeof r||t.objectMode||(n=new c("chunk",["string","Buffer"],r)),!n||(_(e,n),process.nextTick(i,n),!1)}(this,o,e,r))&&(o.pendingcb++,u=function(e,t,r,i,s,o){if(!r){var u=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=n.from(t,r));return t}(t,i,s);i!==u&&(r=!0,s="buffer",i=u)}var a=t.objectMode?1:i.length;t.length+=a;var h=t.length<t.highWaterMark;h||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:s,isBuf:r,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,a,i,s,o);return h}(this,o,a,e,t,r)),u},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||B(this,e))},y.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new A(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(y.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(e,t,r){r(new l("_write()"))},y.prototype._writev=null,y.prototype.end=function(e,t,r){var i=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,r){t.ending=!0,k(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,i,r),this},Object.defineProperty(y.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),y.prototype.destroy=u.destroy,y.prototype._undestroy=u.undestroy,y.prototype._destroy=function(e,t){t(e)},ld}function Ed(){if(fd)return dd;fd=1;var e=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};dd=o;var t=Wd(),r=gd();pd(o,t);for(var i=e(r.prototype),n=0;n<i.length;n++){var s=i[n];o.prototype[s]||(o.prototype[s]=r.prototype[s])}function o(e){if(!(this instanceof o))return new o(e);t.call(this,e),r.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||process.nextTick(a,this)}function a(e){e.end()}return Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),dd}var Ad,_d,Fd,md,Cd,yd,bd,wd,vd,Bd,Sd,Id,kd,Rd,Td,Od,Nd,Pd,Ld,xd={},Ud={exports:{}};function Md(){if(_d)return xd;_d=1;var e=(Ad||(Ad=1,function(e,t){var r=g,i=r.Buffer;function n(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(n(r,t),t.Buffer=s),s.prototype=Object.create(i.prototype),n(i,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}}(Ud,Ud.exports)),Ud.exports).Buffer,t=e.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(r){var i;switch(this.encoding=function(r){var i=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(r);if("string"!=typeof i&&(e.isEncoding===t||!t(r)))throw new Error("Unknown encoding: "+r);return i||r}(r),this.encoding){case"utf16le":this.text=s,this.end=o,i=4;break;case"utf8":this.fillLast=n,i=4;break;case"base64":this.text=u,this.end=a,i=3;break;default:return this.write=h,void(this.end=c)}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(i)}function i(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function n(e){var t=this.lastTotal-this.lastNeed,r=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function s(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function o(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function u(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function a(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function c(e){return e&&e.length?this.write(e):""}return xd.StringDecoder=r,r.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},r.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},r.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var s=i(t[n]);if(s>=0)return s>0&&(e.lastNeed=s-1),s;if(--n<r||-2===s)return 0;if(s=i(t[n]),s>=0)return s>0&&(e.lastNeed=s-2),s;if(--n<r||-2===s)return 0;if(s=i(t[n]),s>=0)return s>0&&(2===s?s=0:e.lastNeed=s-3),s;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},r.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length},xd}function Hd(){if(md)return Fd;md=1;var e=id().codes.ERR_STREAM_PREMATURE_CLOSE;function t(){}return Fd=function r(i,n,s){if("function"==typeof n)return r(i,null,n);n||(n={}),s=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];e.apply(this,i)}}}(s||t);var o=n.readable||!1!==n.readable&&i.readable,u=n.writable||!1!==n.writable&&i.writable,a=function(){i.writable||c()},h=i._writableState&&i._writableState.finished,c=function(){u=!1,h=!0,o||s.call(i)},l=i._readableState&&i._readableState.endEmitted,D=function(){o=!1,l=!0,u||s.call(i)},d=function(e){s.call(i,e)},f=function(){var t;return o&&!l?(i._readableState&&i._readableState.ended||(t=new e),s.call(i,t)):u&&!h?(i._writableState&&i._writableState.ended||(t=new e),s.call(i,t)):void 0},p=function(){i.req.on("finish",c)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(i)?u&&!i._writableState&&(i.on("end",a),i.on("close",a)):(i.on("complete",c),i.on("abort",f),i.req?p():i.on("request",p)),i.on("end",D),i.on("finish",c),!1!==n.error&&i.on("error",d),i.on("close",f),function(){i.removeListener("complete",c),i.removeListener("abort",f),i.removeListener("request",p),i.req&&i.req.removeListener("finish",c),i.removeListener("end",a),i.removeListener("close",a),i.removeListener("finish",c),i.removeListener("end",D),i.removeListener("error",d),i.removeListener("close",f)}},Fd}function Qd(){if(yd)return Cd;var e;function t(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}yd=1;var r=Hd(),i=Symbol("lastResolve"),n=Symbol("lastReject"),s=Symbol("error"),o=Symbol("ended"),u=Symbol("lastPromise"),a=Symbol("handlePromise"),h=Symbol("stream");function c(e,t){return{value:e,done:t}}function l(e){var t=e[i];if(null!==t){var r=e[h].read();null!==r&&(e[u]=null,e[i]=null,e[n]=null,t(c(r,!1)))}}function D(e){process.nextTick(l,e)}var d=Object.getPrototypeOf((function(){})),f=Object.setPrototypeOf((e={get stream(){return this[h]},next:function(){var e=this,t=this[s];if(null!==t)return Promise.reject(t);if(this[o])return Promise.resolve(c(void 0,!0));if(this[h].destroyed)return new Promise((function(t,r){process.nextTick((function(){e[s]?r(e[s]):t(c(void 0,!0))}))}));var r,i=this[u];if(i)r=new Promise(function(e,t){return function(r,i){e.then((function(){t[o]?r(c(void 0,!0)):t[a](r,i)}),i)}}(i,this));else{var n=this[h].read();if(null!==n)return Promise.resolve(c(n,!1));r=new Promise(this[a])}return this[u]=r,r}},t(e,Symbol.asyncIterator,(function(){return this})),t(e,"return",(function(){var e=this;return new Promise((function(t,r){e[h].destroy(null,(function(e){e?r(e):t(c(void 0,!0))}))}))})),e),d);return Cd=function(e){var l,d=Object.create(f,(t(l={},h,{value:e,writable:!0}),t(l,i,{value:null,writable:!0}),t(l,n,{value:null,writable:!0}),t(l,s,{value:null,writable:!0}),t(l,o,{value:e._readableState.endEmitted,writable:!0}),t(l,a,{value:function(e,t){var r=d[h].read();r?(d[u]=null,d[i]=null,d[n]=null,e(c(r,!1))):(d[i]=e,d[n]=t)},writable:!0}),l));return d[u]=null,r(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=d[n];return null!==t&&(d[u]=null,d[i]=null,d[n]=null,t(e)),void(d[s]=e)}var r=d[i];null!==r&&(d[u]=null,d[i]=null,d[n]=null,r(c(void 0,!0))),d[o]=!0})),e.on("readable",D.bind(null,d)),d},Cd}function $d(){if(wd)return bd;function e(e,t,r,i,n,s,o){try{var u=e[s](o),a=u.value}catch(e){return void r(e)}u.done?t(a):Promise.resolve(a).then(i,n)}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function r(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}wd=1;var i=id().codes.ERR_INVALID_ARG_TYPE;return bd=function(n,s,o){var u;if(s&&"function"==typeof s.next)u=s;else if(s&&s[Symbol.asyncIterator])u=s[Symbol.asyncIterator]();else{if(!s||!s[Symbol.iterator])throw new i("iterable",["Iterable"],s);u=s[Symbol.iterator]()}var a=new n(function(e){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?t(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({objectMode:!0},o)),h=!1;function c(){return l.apply(this,arguments)}function l(){var t;return t=function*(){try{var e=yield u.next(),t=e.value;e.done?a.push(null):a.push(yield t)?c():h=!1}catch(e){a.destroy(e)}},l=function(){var r=this,i=arguments;return new Promise((function(n,s){var o=t.apply(r,i);function u(t){e(o,n,s,u,a,"next",t)}function a(t){e(o,n,s,u,a,"throw",t)}u(void 0)}))},l.apply(this,arguments)}return a._read=function(){h||(h=!0,c())},a},bd}function Wd(){if(Bd)return vd;var e;Bd=1,vd=b,b.ReadableState=y,n.EventEmitter;var t=function(e,t){return e.listeners(t).length},r=VD(),i=g.Buffer,s=(void 0!==w?w:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var o,u=m;o=u&&u.debuglog?u.debuglog("stream"):function(){};var a,h,c,l=zD(),D=JD(),d=nd().getHighWaterMark,f=id().codes,p=f.ERR_INVALID_ARG_TYPE,E=f.ERR_STREAM_PUSH_AFTER_EOF,A=f.ERR_METHOD_NOT_IMPLEMENTED,_=f.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;pd(b,r);var F=D.errorOrDestroy,C=["error","close","destroy","pause","resume"];function y(t,r,i){e=e||Ed(),t=t||{},"boolean"!=typeof i&&(i=r instanceof e),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=d(this,t,"readableHighWaterMark",i),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(a||(a=Md().StringDecoder),this.decoder=new a(t.encoding),this.encoding=t.encoding)}function b(t){if(e=e||Ed(),!(this instanceof b))return new b(t);var i=this instanceof e;this._readableState=new y(t,this,i),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),r.call(this)}function v(e,t,r,n,u){o("readableAddChunk",t);var a,h=e._readableState;if(null===t)h.reading=!1,function(e,t){if(o("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?k(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,R(e)))}(e,h);else if(u||(a=function(e,t){var r;n=t,i.isBuffer(n)||n instanceof s||"string"==typeof t||void 0===t||e.objectMode||(r=new p("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(h,t)),a)F(e,a);else if(h.objectMode||t&&t.length>0)if("string"==typeof t||h.objectMode||Object.getPrototypeOf(t)===i.prototype||(t=function(e){return i.from(e)}(t)),n)h.endEmitted?F(e,new _):B(e,h,t,!0);else if(h.ended)F(e,new E);else{if(h.destroyed)return!1;h.reading=!1,h.decoder&&!r?(t=h.decoder.write(t),h.objectMode||0!==t.length?B(e,h,t,!1):T(e,h)):B(e,h,t,!1)}else n||(h.reading=!1,T(e,h));return!h.ended&&(h.length<h.highWaterMark||0===h.length)}function B(e,t,r,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&k(e)),T(e,t)}Object.defineProperty(b.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=D.destroy,b.prototype._undestroy=D.undestroy,b.prototype._destroy=function(e,t){t(e)},b.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=i.from(e,t),t=""),r=!0),v(this,e,t,!1,r)},b.prototype.unshift=function(e){return v(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){a||(a=Md().StringDecoder);var t=new a(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var S=1073741824;function I(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=S?e=S:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function k(e){var t=e._readableState;o("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(o("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(R,e))}function R(e){var t=e._readableState;o("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,x(e)}function T(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(O,e,t))}function O(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(o("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function N(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function P(e){o("readable nexttick read 0"),e.read(0)}function L(e,t){o("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),x(e),t.flowing&&!t.reading&&e.read(0)}function x(e){var t=e._readableState;for(o("flow",t.flowing);t.flowing&&null!==e.read(););}function U(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function M(e){var t=e._readableState;o("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(H,t,e))}function H(e,t){if(o("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function Q(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}return b.prototype.read=function(e){o("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return o("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?M(this):k(this),null;if(0===(e=I(e,t))&&t.ended)return 0===t.length&&M(this),null;var i,n=t.needReadable;return o("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&o("length less than watermark",n=!0),t.ended||t.reading?o("reading or ended",n=!1):n&&(o("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=I(r,t))),null===(i=e>0?U(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&M(this)),null!==i&&this.emit("data",i),i},b.prototype._read=function(e){F(this,new A("_read()"))},b.prototype.pipe=function(e,r){var i=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,o("pipe count=%d opts=%j",n.pipesCount,r);var s=(!r||!1!==r.end)&&e!==process.stdout&&e!==process.stderr?a:p;function u(t,r){o("onunpipe"),t===i&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,o("cleanup"),e.removeListener("close",d),e.removeListener("finish",f),e.removeListener("drain",h),e.removeListener("error",D),e.removeListener("unpipe",u),i.removeListener("end",a),i.removeListener("end",p),i.removeListener("data",l),c=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||h())}function a(){o("onend"),e.end()}n.endEmitted?process.nextTick(s):i.once("end",s),e.on("unpipe",u);var h=function(e){return function(){var r=e._readableState;o("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,0===r.awaitDrain&&t(e,"data")&&(r.flowing=!0,x(e))}}(i);e.on("drain",h);var c=!1;function l(t){o("ondata");var r=e.write(t);o("dest.write",r),!1===r&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==Q(n.pipes,e))&&!c&&(o("false write response, pause",n.awaitDrain),n.awaitDrain++),i.pause())}function D(r){o("onerror",r),p(),e.removeListener("error",D),0===t(e,"error")&&F(e,r)}function d(){e.removeListener("finish",f),p()}function f(){o("onfinish"),e.removeListener("close",d),p()}function p(){o("unpipe"),i.unpipe(e)}return i.on("data",l),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",D),e.once("close",d),e.once("finish",f),e.emit("pipe",i),n.flowing||(o("pipe resume"),i.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<n;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=Q(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},b.prototype.on=function(e,t){var i=r.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,o("on readable",n.length,n.reading),n.length?k(this):n.reading||process.nextTick(P,this))),i},b.prototype.addListener=b.prototype.on,b.prototype.removeListener=function(e,t){var i=r.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(N,this),i},b.prototype.removeAllListeners=function(e){var t=r.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(N,this),t},b.prototype.resume=function(){var e=this._readableState;return e.flowing||(o("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(L,e,t))}(this,e)),e.paused=!1,this},b.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},b.prototype.wrap=function(e){var t=this,r=this._readableState,i=!1;for(var n in e.on("end",(function(){if(o("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(n){(o("wrapped data"),r.decoder&&(n=r.decoder.write(n)),r.objectMode&&null==n)||(r.objectMode||n&&n.length)&&(t.push(n)||(i=!0,e.pause()))})),e)void 0===this[n]&&"function"==typeof e[n]&&(this[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n));for(var s=0;s<C.length;s++)e.on(C[s],this.emit.bind(this,C[s]));return this._read=function(t){o("wrapped _read",t),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(b.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=Qd()),h(this)}),Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(b.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(b.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),b._fromList=U,Object.defineProperty(b.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(b.from=function(e,t){return void 0===c&&(c=$d()),c(b,e,t)}),vd}function Kd(){if(Id)return Sd;Id=1,Sd=u;var e=id().codes,t=e.ERR_METHOD_NOT_IMPLEMENTED,r=e.ERR_MULTIPLE_CALLBACK,i=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,n=e.ERR_TRANSFORM_WITH_LENGTH_0,s=Ed();function o(e,t){var i=this._transformState;i.transforming=!1;var n=i.writecb;if(null===n)return this.emit("error",new r);i.writechunk=null,i.writecb=null,null!=t&&this.push(t),n(e);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);s.call(this,e),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,r){h(e,t,r)}))}function h(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new n;if(e._transformState.transforming)throw new i;return e.push(null)}return pd(u,s),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},u.prototype._transform=function(e,r,i){i(new t("_transform()"))},u.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){s.prototype._destroy.call(this,e,(function(e){t(e)}))},Sd}function qd(){if(Od)return Td;var e;Od=1;var t=id().codes,r=t.ERR_MISSING_ARGS,i=t.ERR_STREAM_DESTROYED;function n(e){if(e)throw e}function s(e){e()}function o(e,t){return e.pipe(t)}return Td=function(){for(var t=arguments.length,u=new Array(t),a=0;a<t;a++)u[a]=arguments[a];var h,c=function(e){return e.length?"function"!=typeof e[e.length-1]?n:e.pop():n}(u);if(Array.isArray(u[0])&&(u=u[0]),u.length<2)throw new r("streams");var l=u.map((function(t,r){var n=r<u.length-1;return function(t,r,n,s){s=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(s);var o=!1;t.on("close",(function(){o=!0})),void 0===e&&(e=Hd()),e(t,{readable:r,writable:n},(function(e){if(e)return s(e);o=!0,s()}));var u=!1;return function(e){if(!o&&!u)return u=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new i("pipe"))}}(t,n,r>0,(function(e){h||(h=e),e&&l.forEach(s),n||(l.forEach(s),c(h))}))}));return u.reduce(o)},Td}Nd=XD,Pd=XD.exports,Ld=c,"disable"===process.env.READABLE_STREAM&&Ld?(Nd.exports=Ld.Readable,Object.assign(Nd.exports,Ld),Nd.exports.Stream=Ld):((Pd=Nd.exports=Wd()).Stream=Ld||Pd,Pd.Readable=Pd,Pd.Writable=gd(),Pd.Duplex=Ed(),Pd.Transform=Kd(),Pd.PassThrough=function(){if(Rd)return kd;Rd=1,kd=t;var e=Kd();function t(r){if(!(this instanceof t))return new t(r);e.call(this,r)}return pd(t,e),t.prototype._transform=function(e,t,r){r(null,e)},kd}(),Pd.finished=Hd(),Pd.pipeline=qd());var jd=XD.exports,Gd=Object.prototype.toString,Yd="undefined"!=typeof Buffer&&"function"==typeof Buffer.alloc&&"function"==typeof Buffer.allocUnsafe&&"function"==typeof Buffer.from;var Xd,Vd=function(e,t,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return i=e,"ArrayBuffer"===Gd.call(i).slice(8,-1)?function(e,t,r){t>>>=0;var i=e.byteLength-t;if(i<0)throw new RangeError("'offset' is out of bounds");if(void 0===r)r=i;else if((r>>>=0)>i)throw new RangeError("'length' is out of bounds");return Yd?Buffer.from(e.slice(t,t+r)):new Buffer(new Uint8Array(e.slice(t,t+r)))}(e,t,r):"string"==typeof e?function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!Buffer.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');return Yd?Buffer.from(e,t):new Buffer(e,t)}(e,t):Yd?Buffer.from(e):new Buffer(e);var i},zd={};var Jd=jd.Writable,Zd=pd,ef=Vd;if("undefined"==typeof Uint8Array)var tf=(Xd||(Xd=1,function(e){var t,r,i,n=void 0,s=(t=Object.prototype.toString,r=Object.prototype.hasOwnProperty,{Class:function(e){return t.call(e).replace(/^\[object *|\]$/g,"")},HasProperty:function(e,t){return t in e},HasOwnProperty:function(e,t){return r.call(e,t)},IsCallable:function(e){return"function"==typeof e},ToInt32:function(e){return 0|e},ToUint32:function(e){return e>>>0}}),o=Math.LN2,u=Math.abs,a=Math.floor,h=Math.log,c=Math.min,l=Math.pow,D=Math.round;function d(e){if(f&&i){var t,r=f(e);for(t=0;t<r.length;t+=1)i(e,r[t],{value:e[r[t]],writable:!1,enumerable:!1,configurable:!1})}}i=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()?Object.defineProperty:function(e,t,r){if(!e===Object(e))throw new TypeError("Object.defineProperty called on non-object");return s.HasProperty(r,"get")&&Object.prototype.__defineGetter__&&Object.prototype.__defineGetter__.call(e,t,r.get),s.HasProperty(r,"set")&&Object.prototype.__defineSetter__&&Object.prototype.__defineSetter__.call(e,t,r.set),s.HasProperty(r,"value")&&(e[t]=r.value),e};var f=Object.getOwnPropertyNames||function(e){if(e!==Object(e))throw new TypeError("Object.getOwnPropertyNames called on non-object");var t,r=[];for(t in e)s.HasOwnProperty(e,t)&&r.push(t);return r};function p(e,t){var r=32-t;return e<<r>>r}function g(e,t){var r=32-t;return e<<r>>>r}function E(e){return[255&e]}function A(e){return p(e[0],8)}function _(e){return[255&e]}function F(e){return g(e[0],8)}function m(e){return[(e=D(Number(e)))<0?0:e>255?255:255&e]}function C(e){return[e>>8&255,255&e]}function y(e){return p(e[0]<<8|e[1],16)}function b(e){return[e>>8&255,255&e]}function w(e){return g(e[0]<<8|e[1],16)}function v(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}function B(e){return p(e[0]<<24|e[1]<<16|e[2]<<8|e[3],32)}function S(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}function I(e){return g(e[0]<<24|e[1]<<16|e[2]<<8|e[3],32)}function k(e,t,r){var i,n,s,D,d,f,p,g=(1<<t-1)-1;function E(e){var t=a(e),r=e-t;return r<.5?t:r>.5||t%2?t+1:t}for(e!=e?(n=(1<<t)-1,s=l(2,r-1),i=0):e===1/0||e===-1/0?(n=(1<<t)-1,s=0,i=e<0?1:0):0===e?(n=0,s=0,i=1/e==-1/0?1:0):(i=e<0,(e=u(e))>=l(2,1-g)?(n=c(a(h(e)/o),1023),(s=E(e/l(2,n)*l(2,r)))/l(2,r)>=2&&(n+=1,s=1),n>g?(n=(1<<t)-1,s=0):(n+=g,s-=l(2,r))):(n=0,s=E(e/l(2,1-g-r)))),d=[],D=r;D;D-=1)d.push(s%2?1:0),s=a(s/2);for(D=t;D;D-=1)d.push(n%2?1:0),n=a(n/2);for(d.push(i?1:0),d.reverse(),f=d.join(""),p=[];f.length;)p.push(parseInt(f.substring(0,8),2)),f=f.substring(8);return p}function R(e,t,r){var i,n,s,o,u,a,h,c,D=[];for(i=e.length;i;i-=1)for(s=e[i-1],n=8;n;n-=1)D.push(s%2?1:0),s>>=1;return D.reverse(),o=D.join(""),u=(1<<t-1)-1,a=parseInt(o.substring(0,1),2)?-1:1,h=parseInt(o.substring(1,1+t),2),c=parseInt(o.substring(1+t),2),h===(1<<t)-1?0!==c?NaN:a*(1/0):h>0?a*l(2,h-u)*(1+c/l(2,r)):0!==c?a*l(2,-(u-1))*(c/l(2,r)):a<0?-0:0}function T(e){return R(e,11,52)}function O(e){return k(e,11,52)}function N(e){return R(e,8,23)}function P(e){return k(e,8,23)}!function(){var t=function(e){if((e=s.ToInt32(e))<0)throw new RangeError("ArrayBuffer size is not a small enough positive integer");var t;for(this.byteLength=e,this._bytes=[],this._bytes.length=e,t=0;t<this.byteLength;t+=1)this._bytes[t]=0;d(this)};e.ArrayBuffer=e.ArrayBuffer||t;var r=function(){};function o(e,o,u){var a;return a=function(e,r,n){var o,u,h,c;if(arguments.length&&"number"!=typeof arguments[0])if("object"==typeof arguments[0]&&arguments[0].constructor===a)for(o=arguments[0],this.length=o.length,this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new t(this.byteLength),this.byteOffset=0,h=0;h<this.length;h+=1)this._setter(h,o._getter(h));else if("object"!=typeof arguments[0]||arguments[0]instanceof t||"ArrayBuffer"===s.Class(arguments[0])){if("object"!=typeof arguments[0]||!(arguments[0]instanceof t||"ArrayBuffer"===s.Class(arguments[0])))throw new TypeError("Unexpected argument type(s)");if(this.buffer=e,this.byteOffset=s.ToUint32(r),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");if(arguments.length<3){if(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT)throw new RangeError("length of buffer minus byteOffset not a multiple of the element size");this.length=this.byteLength/this.BYTES_PER_ELEMENT}else this.length=s.ToUint32(n),this.byteLength=this.length*this.BYTES_PER_ELEMENT;if(this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer")}else for(u=arguments[0],this.length=s.ToUint32(u.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new t(this.byteLength),this.byteOffset=0,h=0;h<this.length;h+=1)c=u[h],this._setter(h,Number(c));else{if(this.length=s.ToInt32(arguments[0]),n<0)throw new RangeError("ArrayBufferView size is not a small enough positive integer");this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new t(this.byteLength),this.byteOffset=0}this.constructor=a,d(this),function(e){if(i){if(e.length>1e5)throw new RangeError("Array too large for polyfill");var t;for(t=0;t<e.length;t+=1)r(t)}function r(t){i(e,t,{get:function(){return e._getter(t)},set:function(r){e._setter(t,r)},enumerable:!0,configurable:!1})}}(this)},a.prototype=new r,a.prototype.BYTES_PER_ELEMENT=e,a.prototype._pack=o,a.prototype._unpack=u,a.BYTES_PER_ELEMENT=e,a.prototype._getter=function(e){if(arguments.length<1)throw new SyntaxError("Not enough arguments");if((e=s.ToUint32(e))>=this.length)return n;var t,r,i=[];for(t=0,r=this.byteOffset+e*this.BYTES_PER_ELEMENT;t<this.BYTES_PER_ELEMENT;t+=1,r+=1)i.push(this.buffer._bytes[r]);return this._unpack(i)},a.prototype.get=a.prototype._getter,a.prototype._setter=function(e,t){if(arguments.length<2)throw new SyntaxError("Not enough arguments");if((e=s.ToUint32(e))>=this.length)return n;var r,i,o=this._pack(t);for(r=0,i=this.byteOffset+e*this.BYTES_PER_ELEMENT;r<this.BYTES_PER_ELEMENT;r+=1,i+=1)this.buffer._bytes[i]=o[r]},a.prototype.set=function(e,t){if(arguments.length<1)throw new SyntaxError("Not enough arguments");var r,i,n,o,u,a,h,c,l,D;if("object"==typeof arguments[0]&&arguments[0].constructor===this.constructor){if(r=arguments[0],(n=s.ToUint32(arguments[1]))+r.length>this.length)throw new RangeError("Offset plus length of array is out of range");if(c=this.byteOffset+n*this.BYTES_PER_ELEMENT,l=r.length*this.BYTES_PER_ELEMENT,r.buffer===this.buffer){for(D=[],u=0,a=r.byteOffset;u<l;u+=1,a+=1)D[u]=r.buffer._bytes[a];for(u=0,h=c;u<l;u+=1,h+=1)this.buffer._bytes[h]=D[u]}else for(u=0,a=r.byteOffset,h=c;u<l;u+=1,a+=1,h+=1)this.buffer._bytes[h]=r.buffer._bytes[a]}else{if("object"!=typeof arguments[0]||void 0===arguments[0].length)throw new TypeError("Unexpected argument type(s)");if(i=arguments[0],o=s.ToUint32(i.length),(n=s.ToUint32(arguments[1]))+o>this.length)throw new RangeError("Offset plus length of array is out of range");for(u=0;u<o;u+=1)a=i[u],this._setter(n+u,Number(a))}},a.prototype.subarray=function(e,t){function r(e,t,r){return e<t?t:e>r?r:e}e=s.ToInt32(e),t=s.ToInt32(t),arguments.length<1&&(e=0),arguments.length<2&&(t=this.length),e<0&&(e=this.length+e),t<0&&(t=this.length+t),e=r(e,0,this.length);var i=(t=r(t,0,this.length))-e;return i<0&&(i=0),new this.constructor(this.buffer,this.byteOffset+e*this.BYTES_PER_ELEMENT,i)},a}var u=o(1,E,A),a=o(1,_,F),h=o(1,m,F),c=o(2,C,y),l=o(2,b,w),D=o(4,v,B),f=o(4,S,I),p=o(4,P,N),g=o(8,O,T);e.Int8Array=e.Int8Array||u,e.Uint8Array=e.Uint8Array||a,e.Uint8ClampedArray=e.Uint8ClampedArray||h,e.Int16Array=e.Int16Array||c,e.Uint16Array=e.Uint16Array||l,e.Int32Array=e.Int32Array||D,e.Uint32Array=e.Uint32Array||f,e.Float32Array=e.Float32Array||p,e.Float64Array=e.Float64Array||g}(),function(){function t(e,t){return s.IsCallable(e.get)?e.get(t):e[t]}var r,i=(r=new e.Uint16Array([4660]),18===t(new e.Uint8Array(r.buffer),0)),n=function(t,r,i){if(0===arguments.length)t=new e.ArrayBuffer(0);else if(!(t instanceof e.ArrayBuffer||"ArrayBuffer"===s.Class(t)))throw new TypeError("TypeError");if(this.buffer=t||new e.ArrayBuffer(0),this.byteOffset=s.ToUint32(r),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteLength=arguments.length<3?this.buffer.byteLength-this.byteOffset:s.ToUint32(i),this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer");d(this)};function o(r){return function(n,o){if((n=s.ToUint32(n))+r.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");n+=this.byteOffset;var u,a=new e.Uint8Array(this.buffer,n,r.BYTES_PER_ELEMENT),h=[];for(u=0;u<r.BYTES_PER_ELEMENT;u+=1)h.push(t(a,u));return Boolean(o)===Boolean(i)&&h.reverse(),t(new r(new e.Uint8Array(h).buffer),0)}}function u(r){return function(n,o,u){if((n=s.ToUint32(n))+r.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");var a,h=new r([o]),c=new e.Uint8Array(h.buffer),l=[];for(a=0;a<r.BYTES_PER_ELEMENT;a+=1)l.push(t(c,a));Boolean(u)===Boolean(i)&&l.reverse(),new e.Uint8Array(this.buffer,n,r.BYTES_PER_ELEMENT).set(l)}}n.prototype.getUint8=o(e.Uint8Array),n.prototype.getInt8=o(e.Int8Array),n.prototype.getUint16=o(e.Uint16Array),n.prototype.getInt16=o(e.Int16Array),n.prototype.getUint32=o(e.Uint32Array),n.prototype.getInt32=o(e.Int32Array),n.prototype.getFloat32=o(e.Float32Array),n.prototype.getFloat64=o(e.Float64Array),n.prototype.setUint8=u(e.Uint8Array),n.prototype.setInt8=u(e.Int8Array),n.prototype.setUint16=u(e.Uint16Array),n.prototype.setInt16=u(e.Int16Array),n.prototype.setUint32=u(e.Uint32Array),n.prototype.setInt32=u(e.Int32Array),n.prototype.setFloat32=u(e.Float32Array),n.prototype.setFloat64=u(e.Float64Array),e.DataView=e.DataView||n}()}(zd)),zd).Uint8Array;else tf=Uint8Array;function rf(e,t){if(!(this instanceof rf))return new rf(e,t);"function"==typeof e&&(t=e,e={}),e||(e={});var r=e.encoding,i=!1;r?"u8"!==(r=String(r).toLowerCase())&&"uint8"!==r||(r="uint8array"):i=!0,Jd.call(this,{objectMode:!0}),this.encoding=r,this.shouldInferEncoding=i,t&&this.on("finish",(function(){t(this.getBody())})),this.body=[]}var nf=rf;function sf(e){return"string"==typeof e||(t=e,/Array\]$/.test(Object.prototype.toString.call(t)))||e&&"function"==typeof e.subarray;var t}function of(e,t){for(const r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}Zd(rf,Jd),rf.prototype._write=function(e,t,r){this.body.push(e),r()},rf.prototype.inferEncoding=function(e){var t=void 0===e?this.body[0]:e;return Buffer.isBuffer(t)?"buffer":"undefined"!=typeof Uint8Array&&t instanceof Uint8Array?"uint8array":Array.isArray(t)?"array":"string"==typeof t?"string":"[object Object]"===Object.prototype.toString.call(t)?"object":"buffer"},rf.prototype.getBody=function(){return this.encoding||0!==this.body.length?(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),"array"===this.encoding?function(e){for(var t=[],r=0;r<e.length;r++)t.push.apply(t,e[r]);return t}(this.body):"string"===this.encoding?function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];"string"==typeof i||Buffer.isBuffer(i)?t.push(i):sf(i)?t.push(ef(i)):t.push(ef(String(i)))}t=Buffer.isBuffer(e[0])?(t=Buffer.concat(t)).toString("utf8"):t.join("");return t}(this.body):"buffer"===this.encoding?function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];Buffer.isBuffer(i)?t.push(i):sf(i)?t.push(ef(i)):t.push(ef(String(i)))}return Buffer.concat(t)}(this.body):"uint8array"===this.encoding?function(e){for(var t=0,r=0;r<e.length;r++)"string"==typeof e[r]&&(e[r]=ef(e[r])),t+=e[r].length;for(var i=new tf(t),n=(r=0,0);r<e.length;r++)for(var s=e[r],o=0;o<s.length;o++)i[n++]=s[o];return i}(this.body):this.body):[]};var uf=function(e,t,r){if(!e||"string"==typeof e)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"==typeof t&&(r=t,t=void 0),null!=t&&(r.code=t);try{return of(e,r)}catch(t){r.message=e.message,r.stack=e.stack;const i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(e)),of(new i,r)}},af={};function hf(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var cf=hf;hf.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts},hf.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},hf.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),r=this._timeouts.shift()}var i=this,n=setTimeout((function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout((function(){i._operationTimeoutCb(i._attempts)}),i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)}),r);return this._options.unref&&n.unref(),!0},hf.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){r._operationTimeoutCb()}),r._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},hf.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},hf.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},hf.prototype.start=hf.prototype.try,hf.prototype.errors=function(){return this._errors},hf.prototype.attempts=function(){return this._attempts},hf.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,i=0;i<this._errors.length;i++){var n=this._errors[i],s=n.message,o=(e[s]||0)+1;e[s]=o,o>=r&&(t=n,r=o)}return t},function(e){var t=cf;e.operation=function(r){var i=e.timeouts(r);return new t(i,{forever:r&&r.forever,unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},e.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var i=[],n=0;n<t.retries;n++)i.push(this.createTimeout(n,t));return e&&e.forever&&!i.length&&i.push(this.createTimeout(n,t)),i.sort((function(e,t){return e-t})),i},e.createTimeout=function(e,t){var r=t.randomize?Math.random()+1:1,i=Math.round(r*t.minTimeout*Math.pow(t.factor,e));return i=Math.min(i,t.maxTimeout)},e.wrap=function(t,r,i){if(r instanceof Array&&(i=r,r=null),!i)for(var n in i=[],t)"function"==typeof t[n]&&i.push(n);for(var s=0;s<i.length;s++){var o=i[s],u=t[o];t[o]=function(i){var n=e.operation(r),s=Array.prototype.slice.call(arguments,1),o=s.pop();s.push((function(e){n.retry(e)||(e&&(arguments[0]=n.mainError()),o.apply(this,arguments))})),n.attempt((function(){i.apply(t,s)}))}.bind(t,u),t[o].options=r}}}(af);var lf=uf,Df=af,df=Object.prototype.hasOwnProperty;function ff(e){return e&&"EPROMISERETRY"===e.code&&df.call(e,"retried")}var pf=function(e,t){var r,i;return"object"==typeof e&&"function"==typeof t&&(r=t,t=e,e=r),i=Df.operation(t),new Promise((function(t,r){i.attempt((function(n){Promise.resolve().then((function(){return e((function(e){throw ff(e)&&(e=e.retried),lf(new Error("Retrying"),"EPROMISERETRY",{retried:e})}),n)})).then(t,(function(e){ff(e)&&(e=e.retried,i.retry(e||new Error))||r(e)}))}))}))};var gf={errorCode:{generic:"ERR_GENERIC_CLIENT",connect:"ERR_NOT_CONNECTED",badPath:"ERR_BAD_PATH",permission:"EACCES",notexist:"ENOENT",notdir:"ENOTDIR",badAuth:"ERR_BAD_AUTH"},targetType:{writeFile:1,readFile:2,writeDir:3,readDir:4,readObj:5,writeObj:6}};const{statSync:Ef,constants:Af,accessSync:_f}=e,{dirname:Ff}=r,{errorCode:mf}=gf;function Cf(e){return!!(e.errorHandled||e.endHandled||e.closeHandled)}function yf(e,t,r){return function(i){if(Cf(e))return void e.debugMsg(`${t} errorListener - ignoring handled error ${i.message}`);e.debugMsg(`${t} errorListener - handling error ${i.message}`),e.errorHandled=!0;const n=new Error(`${t}: ${i.message}`);if(n.code=i.code,!r)throw n;r(n)}}function bf(e,t,r){return function(){if(e.sftp=void 0,e.endCalled||Cf(e))return void e.debugMsg(`${t} endListener - ignoring handled end event`);e.endHandled=!0,e.debugMsg(`${t} endListener - handling unexpected end event`);const i=new Error(`${t}: Unexpected end event`);if(i.code=mf.ERR_GENERIC_CLIENT,!r)throw i;r(i)}}function wf(e,t,r){return function(){if(e.sftp=void 0,e.endCalled||Cf(e))return void e.debugMsg(`${t} closeListener - ignoring handled close event`);e.closeHandled=!0,e.debugMsg(`${t} closeListener - handling unexpected close event`);const i=new Error(`${t}: Unexpected close event`);if(i.code=mf.ERR_GENERIC_CLIENT,!r)throw i;r(i)}}function vf(e){const t=Ef(e,{throwIfNoEntry:!1});if(t){if(t.isDirectory())return"d";if(t.isFile())return"-";{const t=new Error(`Bad path: ${e}: target must be a file or directory`);throw t.code=mf.badPath,t}}return!1}function Bf(e,t="r"){const r=Af.F_OK|"w"===t?Af.W_OK:Af.R_OK;try{_f(e,r);return{status:!0,type:vf(e),details:"access OK",code:0}}catch(t){switch(t.errno){case-2:return{status:!1,type:null,details:"not exist",code:-2};case-13:return{status:!1,type:vf(e),details:"permission denied",code:-13};case-20:return{status:!1,type:null,details:"parent not a directory"};default:return{status:!1,type:null,details:t.message}}}}var Sf={globalListener:function(e,t,r){return"error"===t?t=>{e.errorHandled?e.debugMsg(`Global error event: Ignoring handled error ${t.message}`):(e.debugMsg(`Global error event: ${t.message}`),e.errorHandled=!0,r?.error&&r.error(t))}:"end"===t?()=>{e.endCalled||e.endHandled?e.debugMsg("Global end event: Ignoring handled end event"):(e.debugMsg("Global end event: Handling end event"),e.endHandled=!0,r?.end&&r.end())}:()=>{e.endCalled||e.closeHandled?e.debugMsg("Global close event: Ignoring handled close event"):(e.debugMsg("Global close event: Handling close event"),e.closeHandled=!0,e.sftp=void 0,r?.close&&r.close())}},errorListener:yf,endListener:bf,closeListener:wf,addTempListeners:function(e,t,r){const i={end:bf(e,t,r),close:wf(e,t,r),error:yf(e,t,r)};return e.on("end",i.end),e.on("close",i.close),e.on("error",i.error),e._resetEventFlags(),i},removeTempListeners:function(e,t,r){try{e.removeListener("end",t.end),e.removeListener("close",t.close),e.removeListener("error",t.error)}catch(e){throw new Error(`${r}: Error removing temp listeners: ${e.message}`)}},haveLocalAccess:Bf,haveLocalCreate:function(e){const{status:t,details:r,type:i}=Bf(e,"w");if(!t){if("permission denied"===r)return{status:t,details:r,type:i};const n=Ff(e),s=Bf(n,"w");return s.status?"d"!==s.type?{status:!1,details:`${n}: not a directory`,type:null}:{status:!0,details:"access OK",type:null,code:0}:{status:s.status,details:`${n}: ${s.details}`,type:null}}return{status:t,details:r,type:i}},normalizeRemotePath:async function(e,t){try{if(t.startsWith("..")){return`${await e.realPath("..")}/${t.slice(3)}`}if(t.startsWith(".")){return`${await e.realPath(".")}/${t.slice(2)}`}return t}catch(e){throw new Error(`normalizeRemotePath: ${e.message}`)}},localExists:vf,haveConnection:function(e,t,r){if(!e.sftp){const e=new Error(`${t}: No SFTP connection available`);if(e.code=mf.connect,r)return r(e),!1;throw e}return!0},sleep:function(e){return new Promise(((t,r)=>{try{Number.isNaN(Number.parseInt(e))||e<0?r("Argument must be a number >= 0"):setTimeout((()=>{t(!0)}),e)}catch(e){r(e)}}))},partition:function(e,t){let r=[];if(t<1)throw new Error("Partition size must be greater than zero");for(let i=0;i<e.length;i+=t)r[r.length]=e.slice(i,i+t);return r}};const{Client:If}=YD,kf=e,Rf=nf,Tf=pf,{join:Of,parse:Nf}=r,{globalListener:Pf,addTempListeners:Lf,removeTempListeners:xf,haveConnection:Uf,normalizeRemotePath:Mf,localExists:Hf,haveLocalAccess:Qf,haveLocalCreate:$f,partition:Wf}=Sf,{errorCode:Kf}=gf;var qf=class{constructor(e="sftp",t={error:e=>console.error(`Global error listener: ${e.message}`),end:()=>console.log("Global end listener: end event raised"),close:()=>console.log("Global close listener: close event raised")}){this.version="11.0.0",this.client=new If,this.sftp=void 0,this.clientName=e,this.endCalled=!1,this.errorHandled=!1,this.closeHandled=!1,this.endHandled=!1,this.remotePlatform="unix",this.debug=void 0,this.promiseLimit=10,this.eventCallbacks=t,this.client.on("close",Pf(this,"close",this.eventCallbacks)),this.client.on("end",Pf(this,"end",this.eventCallbacks)),this.client.on("error",Pf(this,"error",this.eventCallbacks))}debugMsg(e,t){this.debug&&(t?this.debug(`CLIENT[${this.clientName}]: ${e} ${JSON.stringify(t,null," ")}`):this.debug(`CLIENT[${this.clientName}]: ${e}`))}fmtError(e,t="sftp",r,i){let n="",s="";const o=i?` after ${i} ${i>1?"attempts":"attempt"}`:"";if(void 0===e)n=`${t}: Undefined error - probably a bug!`,s=Kf.generic;else if("string"==typeof e)n=`${t}: ${e}${o}`,s=r||Kf.generic;else if(e.custom)n=`${t}->${e.message}${o}`,s=e.code;else{switch(e.code){case"ENOTFOUND":n=`${t}: Address lookup failed for host${o}`;break;case"ECONNREFUSED":n=`${t}: Remote host refused connection${o}`;break;case"ECONNRESET":n=`${t}: Remote host has reset the connection: ${e.message}${o}`;break;default:n=`${t}: ${e.message}${o}`}s=e.code||Kf.generic}const u=new Error(n);return u.code=s,u.custom=!0,this.debugMsg(`${u.message} (${u.code})`),u}on(e,t){this.client.prependListener(e,t)}removeListener(e,t){this.client.removeListener(e,t)}_resetEventFlags(){this.closeHandled=!1,this.endHandled=!1,this.errorHandled=!1}getConnection(e){let t,r;return new Promise(((i,n)=>{r=Lf(this,"getConnection",n),t=()=>{i(!0)},this.on("ready",t);try{this.client.connect(e)}catch(e){n(e)}})).finally((()=>{this.removeListener("ready",t),xf(this,r,"getConnection")}))}getSftpChannel(){return new Promise(((e,t)=>{this.client.sftp(((r,i)=>{r?t(this.fmtError(r,"getSftpChannel",r.code)):(this.sftp=i,e(i))}))}))}async connect(e){let t;try{if(t=Lf(this,"connect"),e.debug&&(this.debug=e.debug,this.debugMsg("connect: Debugging turned on"),this.debugMsg(`ssh2-sftp-client Version: ${this.version} `,process.versions)),this.promiseLimit=e.promiseLimit??10,this.sftp)throw this.fmtError("An existing SFTP connection is already defined","connect",Kf.connect);const r={retries:e.retries??1,factor:e.retry_factor??2,minTimeout:e.retry_minTimeout??25e3};await Tf(r,(async(t,r)=>{try{this.debugMsg(`connect: Connect attempt ${r}`),await this.getConnection(e)}catch(e){switch(e.code){case"ENOTFOUND":case"ECONNREFUSED":case"ERR_SOCKET_BAD_PORT":throw e;case void 0:if(e.message.endsWith("All configured authentication methods failed")||e.message.startsWith("Cannot parse privateKey"))throw e;t(e);break;default:t(e)}}}));const i=await this.getSftpChannel();return this.endCalled=!1,i}catch(e){throw this.end(),e.custom?e:this.fmtError(e,"connect")}finally{xf(this,t,"connect")}}realPath(e,t=!0){let r;return new Promise(((i,n)=>{t&&(r=Lf(this,"realPath",n)),this.sftp.realpath(e,((t,r)=>{t&&(2===t.code?i(""):n(this.fmtError(`${t.message} ${e}`,"realPath",t.code))),i(r)}))})).finally((()=>{t&&xf(this,r,"realPath")}))}cwd(){return this.realPath(".")}_xstat(e,t,r=!0){let i;return new Promise(((n,s)=>{const o=(e,r)=>{if(e)2===e.code||4===e.code?s(this.fmtError(`No such file: ${t}`,"_xstat",Kf.notexist)):s(this.fmtError(`${e.message} ${t}`,"_xstat",e.code));else{const e={mode:r.mode,uid:r.uid,gid:r.gid,size:r.size,accessTime:1e3*r.atime,modifyTime:1e3*r.mtime,isDirectory:r.isDirectory(),isFile:r.isFile(),isBlockDevice:r.isBlockDevice(),isCharacterDevice:r.isCharacterDevice(),isSymbolicLink:r.isSymbolicLink(),isFIFO:r.isFIFO(),isSocket:r.isSocket()};n(e)}};r&&(i=Lf(this,"_xstat",s)),"stat"===e?this.sftp.stat(t,o):this.sftp.lstat(t,o)})).finally((()=>{r&&xf(this,i,"_xstat")}))}async stat(e){try{return Uf(this,"stat"),await this._xstat("stat",e)}catch(e){throw e.custom?e:this.fmtError(e,"stat",e.code)}}async lstat(e){try{return Uf(this,"lstat"),await this._xstat("lstat",e)}catch(e){throw e.custom?e:this.fmtError(e,"lstat",e.code)}}async exists(e){try{if("."===e)return"d";const t=await this.lstat(e);return t.isDirectory?"d":t.isSymbolicLink?"l":!!t.isFile&&"-"}catch(e){if(e.code===Kf.notexist)return!1;throw e.custom?e:this.fmtError(e.message,"exists",e.code)}}list(e,t,r=!0){let i;return new Promise(((n,s)=>{r&&(i=Lf(this,"list",s)),Uf(this,"list",s)&&this.sftp.readdir(e,((r,i)=>{if(r)s(this.fmtError(`${r.message} ${e}`,"list",r.code));else{const e=/-/gi,r=i.map((t=>({type:t.longname.slice(0,1),name:t.filename,size:t.attrs.size,modifyTime:1e3*t.attrs.mtime,accessTime:1e3*t.attrs.atime,rights:{user:t.longname.slice(1,4).replaceAll(e,""),group:t.longname.slice(4,7).replaceAll(e,""),other:t.longname.slice(7,10).replaceAll(e,"")},owner:t.attrs.uid,group:t.attrs.gid,longname:t.longname})));n(t?r.filter((e=>t(e))):r)}}))})).finally((()=>{r&&xf(this,i,"list")}))}get(e,t,r,i=!0){let n,s,o;return new Promise(((u,a)=>{if(i&&(n=Lf(this,"get",a)),Uf(this,"get",a)){if(r={readStreamOptions:{...r?.readStreamOptions,autoClose:!0},writeStreamOptions:{...r?.writeStreamOptions,autoClose:!0},pipeOptions:{...r?.pipeOptions,end:!0}},s=this.sftp.createReadStream(e,r.readStreamOptions),s.once("error",(r=>{t&&"string"==typeof t&&o&&!o.destroyed&&o.destroy(),a(this.fmtError(`${r.message} ${e}`,"get",r.code))})),void 0===t)this.debugMsg("get resolving with buffer of data"),o=Rf((e=>{u(e)}));else if("string"==typeof t){this.debugMsg(`get called with file path destination ${t}`);const e=$f(t);e.status?o=kf.createWriteStream(t,r.writeStreamOptions):a(this.fmtError(`Bad path: ${t}: ${e.details}`,"get",e.code))}else this.debugMsg("get called with stream destination"),o=t;o.once("error",(e=>{a(this.fmtError(`${e.message} ${"string"==typeof t?t:"<stream>"}`,"get",e.code))})),s.once("end",(()=>{"string"==typeof t?u(t):void 0!==t&&u(o)})),s.pipe(o,r.pipeOptions)}})).finally((()=>{s&&!s.destroyed&&s.destroy(),i&&xf(this,n,"get")}))}_fastGet(e,t,r,i=!0){let n;return new Promise(((s,o)=>{i&&(n=Lf(this,"_fastGet",o)),Uf(this,"_fastGet",o)&&this.sftp.fastGet(e,t,r,(r=>{r&&o(this.fmtError(`${r.message} Remote: ${e} Local: ${t}`)),s(`${e} was successfully download to ${t}!`)}))})).finally((()=>{i&&xf(this,n,"_fastGet")}))}async fastGet(e,t,r){try{const i=await this.exists(e);if("-"!==i){const t=`${i?"Not a regular file":"No such file "} ${e}`;throw this.fmtError(t,"fastGet",Kf.badPath)}const n=$f(t);if(!n.status)throw this.fmtError(`Bad path: ${t}: ${n.details}`,"fastGet",Kf.badPath);return await this._fastGet(e,t,r)}catch(e){throw this.fmtError(e,"fastGet")}}_fastPut(e,t,r,i=!0){let n;return new Promise(((s,o)=>{i&&(n=Lf(this,"_fastPut",o)),Uf(this,"_fastPut",o)&&this.sftp.fastPut(e,t,r,(r=>{r&&o(this.fmtError(`${r.message} Local: ${e} Remote: ${t}`,"fastPut",r.code)),s(`${e} was successfully uploaded to ${t}!`)}))})).finally((()=>{i&&xf(this,n,"_fastPut")}))}async fastPut(e,t,r){try{const i=Qf(e);if(!i.status)throw this.fmtError(`Bad path: ${e}: ${i.details}`,"fastPut",i.code);if(i.status&&"d"===Hf(e))throw this.fmtError(`Bad path: ${e} not a regular file`,"fastgPut",Kf.badPath);return await this._fastPut(e,t,r)}catch(e){throw e.custom?e:this.fmtError(e.message,"fastPut",e.code)}}_put(e,t,r,i=!0){let n,s,o;return new Promise(((u,a)=>{i&&(n=Lf(this,"_put",a)),r={readStreamOptions:{...r?.readStreamOptions,autoClose:!0},writeStreamOptions:{...r?.writeStreamOptions,autoClose:!0},pipeOptions:{...r?.pipeOptions,end:!0}},Uf(this,"_put",a)&&(s=this.sftp.createWriteStream(t,r.writeStreamOptions),s.once("error",(r=>{"string"==typeof e&&o&&!o.destroyed&&o.destroy(),a(this.fmtError(`Write stream error: ${r.message} ${t}`,"_put",r.code))})),s.once("close",(()=>{u(`Uploaded data stream to ${t}`)})),e instanceof Buffer?(this.debugMsg("put source is a buffer"),s.end(e)):("string"==typeof e?(this.debugMsg("put source is string path"),o=kf.createReadStream(e,r.readStreamOptions)):(this.debugMsg("put source is a stream"),o=e),o.once("error",(t=>{a(this.fmtError(`Read stream error: ${t.message} ${"string"==typeof e?e:"<stream>"}`,"_put",t.code))})),o.pipe(s,r.pipeOptions)))})).finally((()=>{s&&!s.destroyed&&s.destroy(),i&&xf(this,n,"_put")}))}async put(e,t,r){try{if("string"==typeof e){const t=Qf(e);if(!t.status)throw this.fmtError(`Bad path: ${e} ${t.details}`,"put",t.code)}return await this._put(e,t,r)}catch(e){throw e.custom?e:this.fmtError(`Re-thrown: ${e.message}`,"put",e.code)}}_append(e,t,r,i=!0){let n;return new Promise(((s,o)=>{if(i&&(n=Lf(this,"_append",o)),Uf(this,"_append",o)){r.flags="a";const i=this.sftp.createWriteStream(t,r);i.on("error",(e=>{o(this.fmtError(`${e.message} ${t}`,"append",e.code))})),i.on("close",(()=>{s(`Appended data to ${t}`)})),e instanceof Buffer?(i.write(e),i.end()):e.pipe(i)}})).finally((()=>{i&&xf(this,n,"_append")}))}async append(e,t,r={}){try{if("string"==typeof e)throw this.fmtError("Cannot append one file to another","append",Kf.badPath);const i=await this.exists(t);if(i&&"d"===i)throw this.fmtError(`Bad path: ${t}: cannot append to a directory`,"append",Kf.badPath);return await this._append(e,t,r)}catch(e){throw e.custom?e:this.fmtError(e.message,"append",e.code)}}_doMkdir(e,t=!0){let r;return new Promise(((i,n)=>{t&&(r=Lf(this,"_doMkdir",n)),this.sftp.mkdir(e,(t=>{t?4===t.code?n(this.fmtError(`Bad path: ${e} permission denied`,"_doMkdir",Kf.badPath)):2===t.code?n(this.fmtError(`Bad path: ${e} parent not a directory or not exist`,"_doMkdir",Kf.badPath)):n(this.fmtError(`${t.message} ${e}`,"_doMkdir",t.code)):i(`${e} directory created`)}))})).finally((()=>{t&&xf(this,r,"_doMkdir")}))}async _mkdir(e,t){try{const r=await Mf(this,e),i=await this.exists(r);if(i&&"d"!==i)throw this.fmtError(`Bad path: ${r} already exists as a file`,"_mkdir",Kf.badPath);if(i)return`${r} already exists`;if(!t)return await this._doMkdir(r);const n=Nf(r).dir;if(n){const e=await this.exists(n);if(e){if("d"!==e)throw this.fmtError(`Bad path: ${n} not a directory`,"_mkdir",Kf.badPath)}else await this._mkdir(n,!0)}return await this._doMkdir(r)}catch(t){throw t.custom?t:this.fmtError(`${t.message} ${e}`,"_mkdir",t.code)}}async mkdir(e,t=!1){try{return Uf(this,"mkdir"),await this._mkdir(e,t)}catch(e){throw this.fmtError(`${e.message}`,"mkdir",e.code)}}async rmdir(e,t=!1){const r=e=>{let t;return new Promise(((r,i)=>{t=Lf(this,"_rmdir",i),this.sftp.rmdir(e,(t=>{t&&i(this.fmtError(`${t.message} ${e}`,"rmdir",t.code)),r("Successfully removed directory")}))})).finally((()=>{xf(this,t,"_rmdir")}))},i=(e,t)=>{let r;return new Promise(((i,n)=>{r=Lf(this,"_delFiles",n);const s=[];for(const r of t)s.push(this.delete(`${e}/${r.name}`,!0,!1));i(s)})).then((e=>Promise.all(e))).finally((()=>{xf(this,r,"_delFiles")}))};try{const n=await Mf(this,e),s=await this.exists(n);if(!s)throw this.fmtError(`Bad Path: ${e}: No such directory`,"rmdir",Kf.badPath);if("d"!==s)throw this.fmtError(`Bad Path: ${e}: Not a directory`,"rmdir",Kf.badPath);if(!t)return await r(n);const o=await this.list(n);if(!o.length)return await r(n);const u=o.filter((e=>"d"!==e.type)),a=o.filter((e=>"d"===e.type));await i(n,u);for(const e of a)await this.rmdir(`${n}/${e.name}`,!0);return await r(n),"Successfully removed directory"}catch(t){throw t.custom?t:this.fmtError(`${t.message} ${e}`,"rmdir",t.code)}}delete(e,t=!1,r=!0){let i;return new Promise(((n,s)=>{r&&(i=Lf(this,"delete",s)),this.sftp.unlink(e,(r=>{r&&(t&&2===r.code?n(`Successfully deleted ${e}`):s(this.fmtError(`${r.message} ${e}`,"delete",r.code))),n(`Successfully deleted ${e}`)}))})).finally((()=>{r&&xf(this,i,"delete")}))}rename(e,t,r=!0){let i;return new Promise(((n,s)=>{r&&(i=Lf(this,"rename",s)),Uf(this,"rename",s)&&this.sftp.rename(e,t,(r=>{r&&s(this.fmtError(`${r.message} From: ${e} To: ${t}`,"_rename",r.code)),n(`Successfully renamed ${e} to ${t}`)}))})).finally((()=>{r&&xf(this,i,"rename")}))}posixRename(e,t,r=!0){let i;return new Promise(((n,s)=>{r&&(i=Lf(this,"posixRename",s)),Uf(this,"posixRename",s)&&this.sftp.ext_openssh_rename(e,t,(r=>{r&&s(this.fmtError(`${r.message} From: ${e} To: ${t}`,"_posixRename",r.code)),n(`Successful POSIX rename ${e} to ${t}`)}))})).finally((()=>{xf(this,i,"posixRename")}))}chmod(e,t,r=!0){let i;return new Promise(((n,s)=>{r&&(i=Lf(this,"chmod",s)),Uf(this,"chmod",s)&&this.sftp.chmod(e,t,(t=>{t&&s(this.fmtError(`${t.message} ${e}`,"_chmod",t.code)),n("Successfully change file mode")}))})).finally((()=>{r&&xf(this,i,"chmod")}))}async uploadDir(e,t,r){const i=async e=>{const t=await Mf(this,e),r=await this.exists(t);if(r&&"d"!==r)throw this.fmtError(`Bad path ${t} Not a directory`,"getRemoteStatus",Kf.badPath);return{remoteDir:t,remoteStatus:r}},n=e=>{const t=Hf(e);if(!t)throw this.fmtError(`Bad path: ${e} not exist`,"getLocalStatus",Kf.badPath);if("d"!==t)throw this.fmtError(`Bad path: ${e}: not a directory`,"getLocalStatus",Kf.badPath);return t},s=async(e,t,r,i)=>{let n=Lf(this,"uploadFiles");try{const n=[];for(const i of r){const r=Of(e,i.name),s=`${t}/${i.name}`;n.push([r,s])}const s=Wf(n,this.promiseLimit),o=i?this._fastPut.bind(this):this._put.bind(this),u=[];for(const e of s){const t=[];for(const[r,i]of e)t.push(o(r,i,null,!1)),this.client.emit("upload",{source:r,destination:i});const r=await Promise.all(t);for(const e of r)u.push(e)}return u}catch(r){throw this.fmtError(`${r.message} ${e} to ${t}`,"uploadFiles",r.code)}finally{xf(this,n,s)}};try{Uf(this,"uploadDir");const{remoteDir:o,remoteStatus:u}=await i(t);n(e),u||await this._mkdir(o,!0);let a=kf.readdirSync(e,{encoding:"utf8",withFileTypes:!0});r?.filter&&(a=a.filter((t=>r.filter(Of(e,t.name),t.isDirectory()))));const h=a.filter((e=>e.isDirectory())),c=a.filter((e=>!e.isDirectory()));await s(e,o,c,r?.useFastput);for(const t of h){const i=Of(e,t.name),n=`${o}/${t.name}`;await this.uploadDir(i,n,r)}return`${e} uploaded to ${t}`}catch(t){throw t.custom?t:this.fmtError(`${t.message} ${e}`,"uploadDir",t.code)}}async downloadDir(e,t,r={filter:null,useFastget:!1}){const i=async(e,t)=>{try{const r=await this.list(e);return t?r.filter((r=>t(`${e}/${r.name}`,"d"===r.type))):r}catch(e){throw e.custom?e:this.fmtError(e.message,"_getDownloadList",e.code)}},n=e=>{try{const r=$f(e);if(!r.status&&"permission denied"===r.details)throw this.fmtError(`Bad path: ${e}: ${r.details}`,"prepareDestination",r.code);if(r.status&&!r.type)kf.mkdirSync(e,{recursive:!0});else if(r.status&&"d"!==r.type)throw this.fmtError(`Bad path: ${t}: not a directory`,"_prepareDestination",Kf.badPath)}catch(e){throw e.custom?e:this.fmtError(e.message,"_prepareDestination",e.code)}},s=async(r,i,n,s)=>{let o=Lf(this,"downloadFIles");try{const e=[];for(const t of n){const n=`${r}/${t.name}`,s=Of(i,t.name);e.push([n,s])}const t=Wf(e,this.promiseLimit),o=s?this._fastGet.bind(this):this.get.bind(this),u=[];for(const e of t){const t=[];for(const[r,i]of e)t.push(o(r,i,null,!1)),this.client.emit("download",{source:r,destination:i});const r=await Promise.all(t);for(const e of r)u.push(e)}return u}catch(r){throw this.fmtError(`${r.message} ${e} to ${t}`,"downloadFiles",r.code)}finally{xf(this,o,"downloadFiles")}};try{Uf(this,"downloadDir");const o=await i(e,r.filter);n(t);const u=o.filter((e=>"d"!==e.type));u.length&&await s(e,t,u,r.useFastget);const a=o.filter((e=>"d"===e.type));for(const i of a){const n=`${e}/${i.name}`,s=Of(t,i.name);await this.downloadDir(n,s,r)}return`${e} downloaded to ${t}`}catch(t){throw t.custom?t:this.fmtError(`${t.message}: ${e}`,"downloadDir",t.code)}}createReadStream(e,t){let r;try{r=Lf(this,"createReadStream"),Uf(this,"createReadStream");return this.sftp.createReadStream(e,t)}catch(e){throw e.custom?e:this.fmtError(e.message,"createReadStream",e.code)}finally{xf(this,r,"createReadStreame")}}createWriteStream(e,t){let r;try{r=Lf(this,"createWriteStream"),Uf(this,"createWriteStream");return this.sftp.createWriteStream(e,t)}catch(e){throw e.custom?e:this.fmtError(e.message,"createWriteStream",e.code)}finally{xf(this,r,"createWriteStream")}}_rcopy(e,t){return new Promise(((r,i)=>{const n=this.sftp.createWriteStream(t),s=this.sftp.createReadStream(e);n.on("error",(e=>{i(this.fmtError(`${e.message} ${t}`,"_rcopy"))})),s.on("error",(t=>{i(this.fmtError(`${t.message} ${e}`,"_rcopy"))})),n.on("close",(()=>{r(`${e} copied to ${t}`)})),s.pipe(n)}))}async rcopy(e,t){let r;try{r=Lf(this,"rcopy"),Uf(this,"rcopy");const i=await Mf(this,e),n=await this.exists(i);if(!n)throw this.fmtError(`Source does not exist ${i}`,"rcopy",Kf.badPath);if("-"!==n)throw this.fmtError(`Source not a file ${i}`,"rcopy",Kf.badPath);const s=await Mf(this,t);if(await this.exists(s))throw this.fmtError(`Destination already exists ${s}`,"rcopy",Kf.badPath);return this._rcopy(i,s)}catch(e){throw e.custom?e:this.fmtError(e,"rcopy")}finally{xf(this,r,"rcopy")}}end(){let e,t;return new Promise(((r,i)=>{t=Lf(this,"end",i),this.endCalled=!0,e=()=>{this.sftp=void 0,this.debugMsg("end: Connection closed"),r(!0)},this.on("close",e),this.sftp?(this.debugMsg("end: Ending SFTP connection"),this.client.end()):(this.debugMsg("end: Called when no connection active"),r(!0))})).finally((()=>{xf(this,t,"end"),this.removeListener("close",e)}))}},jf=v(qf),Gf={},Yf={},Xf={},Vf={};Object.defineProperty(Vf,"__esModule",{value:!0}),Vf.positiveIntermediate=Vf.positiveCompletion=Vf.isMultiline=Vf.isSingleLine=Vf.parseControlResponse=void 0;function zf(e){return/^\d\d\d(?:$| )/.test(e)}function Jf(e){return/^\d\d\d-/.test(e)}function Zf(e){return""!==e.trim()}Vf.parseControlResponse=function(e){const t=e.split(/\r?\n/).filter(Zf),r=[];let i,n=0;for(let e=0;e<t.length;e++){const s=t[e];if(i)i.test(s)&&(i=void 0,r.push(t.slice(n,e+1).join("\n")));else if(Jf(s)){const t=s.substr(0,3);i=new RegExp(`^${t}(?:$| )`),n=e}else zf(s)&&r.push(s)}return{messages:r,rest:i?t.slice(n).join("\n")+"\n":""}},Vf.isSingleLine=zf,Vf.isMultiline=Jf,Vf.positiveCompletion=function(e){return e>=200&&e<300},Vf.positiveIntermediate=function(e){return e>=300&&e<400},Object.defineProperty(Xf,"__esModule",{value:!0}),Xf.FTPContext=Xf.FTPError=void 0;const ep=h,tp=Vf;class rp extends Error{constructor(e){super(e.message),this.name=this.constructor.name,this.code=e.code}}function ip(){}Xf.FTPError=rp;Xf.FTPContext=class{constructor(e=0,t="utf8"){this.timeout=e,this.verbose=!1,this.ipFamily=void 0,this.tlsOptions={},this._partialResponse="",this._encoding=t,this._socket=this.socket=this._newSocket(),this._dataSocket=void 0}close(){const e=this._task?"User closed client during task":"User closed client",t=new Error(e);this.closeWithError(t)}closeWithError(e){this._closingError||(this._closingError=e,this._closeControlSocket(),this._closeSocket(this._dataSocket),this._passToHandler(e),this._stopTrackingTask())}get closed(){return void 0===this.socket.remoteAddress||void 0!==this._closingError}reset(){this.socket=this._newSocket()}get socket(){return this._socket}set socket(e){if(this.dataSocket=void 0,this.tlsOptions={},this._partialResponse="",this._socket){e.localPort===this._socket.localPort?this._removeSocketListeners(this.socket):this._closeControlSocket()}e&&(this._closingError=void 0,e.setTimeout(0),e.setEncoding(this._encoding),e.setKeepAlive(!0),e.on("data",(e=>this._onControlSocketData(e))),e.on("end",(()=>this.closeWithError(new Error("Server sent FIN packet unexpectedly, closing connection.")))),e.on("close",(e=>{e||this.closeWithError(new Error("Server closed connection unexpectedly."))})),this._setupDefaultErrorHandlers(e,"control socket")),this._socket=e}get dataSocket(){return this._dataSocket}set dataSocket(e){this._closeSocket(this._dataSocket),e&&(e.setTimeout(0),this._setupDefaultErrorHandlers(e,"data socket")),this._dataSocket=e}get encoding(){return this._encoding}set encoding(e){this._encoding=e,this.socket&&this.socket.setEncoding(e)}send(e){const t=e.startsWith("PASS")?"> PASS ###":`> ${e}`;this.log(t),this._socket.write(e+"\r\n",this.encoding)}request(e){return this.handle(e,((e,t)=>{e instanceof Error?t.reject(e):t.resolve(e)}))}handle(e,t){if(this._task){const e=new Error("User launched a task while another one is still running. Forgot to use 'await' or '.then()'?");e.stack+=`\nRunning task launched at: ${this._task.stack}`,this.closeWithError(e)}return new Promise(((r,i)=>{if(this._task={stack:(new Error).stack||"Unknown call stack",responseHandler:t,resolver:{resolve:e=>{this._stopTrackingTask(),r(e)},reject:e=>{this._stopTrackingTask(),i(e)}}},this._closingError){const e=new Error(`Client is closed because ${this._closingError.message}`);return e.stack+=`\nClosing reason: ${this._closingError.stack}`,e.code=void 0!==this._closingError.code?this._closingError.code:"0",void this._passToHandler(e)}this.socket.setTimeout(this.timeout),e&&this.send(e)}))}log(e){this.verbose&&console.log(e)}get hasTLS(){return"encrypted"in this._socket}_stopTrackingTask(){this.socket.setTimeout(0),this._task=void 0}_onControlSocketData(e){this.log(`< ${e}`);const t=this._partialResponse+e,r=(0,tp.parseControlResponse)(t);this._partialResponse=r.rest;for(const e of r.messages){const t=parseInt(e.substr(0,3),10),r={code:t,message:e},i=t>=400?new rp(r):void 0;this._passToHandler(i||r)}}_passToHandler(e){this._task&&this._task.responseHandler(e,this._task.resolver)}_setupDefaultErrorHandlers(e,t){e.once("error",(e=>{e.message+=` (${t})`,this.closeWithError(e)})),e.once("close",(e=>{e&&this.closeWithError(new Error(`Socket closed due to transmission error (${t})`))})),e.once("timeout",(()=>{e.destroy(),this.closeWithError(new Error(`Timeout (${t})`))}))}_closeControlSocket(){this._removeSocketListeners(this._socket),this._socket.on("error",ip),this.send("QUIT"),this._closeSocket(this._socket)}_closeSocket(e){e&&(this._removeSocketListeners(e),e.on("error",ip),e.destroy())}_removeSocketListeners(e){e.removeAllListeners(),e.removeAllListeners("timeout"),e.removeAllListeners("data"),e.removeAllListeners("end"),e.removeAllListeners("error"),e.removeAllListeners("close"),e.removeAllListeners("connect")}_newSocket(){return new ep.Socket}};var np,sp={},op={},up={};Object.defineProperty(up,"__esModule",{value:!0}),up.FileInfo=up.FileType=void 0,function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=3]="SymbolicLink"}(np||(up.FileType=np={}));class ap{constructor(e){this.name=e,this.type=np.Unknown,this.size=0,this.rawModifiedAt="",this.modifiedAt=void 0,this.permissions=void 0,this.hardLinkCount=void 0,this.link=void 0,this.group=void 0,this.user=void 0,this.uniqueID=void 0,this.name=e}get isDirectory(){return this.type===np.Directory}get isSymbolicLink(){return this.type===np.SymbolicLink}get isFile(){return this.type===np.File}get date(){return this.rawModifiedAt}set date(e){this.rawModifiedAt=e}}up.FileInfo=ap,ap.UnixPermission={Read:4,Write:2,Execute:1},Object.defineProperty(op,"__esModule",{value:!0}),op.transformList=op.parseLine=op.testLine=void 0;const hp=up,cp=new RegExp("(\\S+)\\s+(\\S+)\\s+(?:(<DIR>)|([0-9]+))\\s+(\\S.*)");op.testLine=function(e){return/^\d{2}/.test(e)&&cp.test(e)},op.parseLine=function(e){const t=e.match(cp);if(null===t)return;const r=t[5];if("."===r||".."===r)return;const i=new hp.FileInfo(r);return"<DIR>"===t[3]?(i.type=hp.FileType.Directory,i.size=0):(i.type=hp.FileType.File,i.size=parseInt(t[4],10)),i.rawModifiedAt=t[1]+" "+t[2],i},op.transformList=function(e){return e};var lp={};Object.defineProperty(lp,"__esModule",{value:!0}),lp.transformList=lp.parseLine=lp.testLine=void 0;const Dp=up,dp=new RegExp("([bcdelfmpSs-])(((r|-)(w|-)([xsStTL-]))((r|-)(w|-)([xsStTL-]))((r|-)(w|-)([xsStTL-]?)))\\+?\\s*(\\d+)\\s+(?:(\\S+(?:\\s\\S+)*?)\\s+)?(?:(\\S+(?:\\s\\S+)*)\\s+)?(\\d+(?:,\\s*\\d+)?)\\s+((?:\\d+[-/]\\d+[-/]\\d+)|(?:\\S{3}\\s+\\d{1,2})|(?:\\d{1,2}\\s+\\S{3})|(?:\\d{1,2}月\\s+\\d{1,2}日))\\s+((?:\\d+(?::\\d+)?)|(?:\\d{4}年))\\s(.*)");function fp(e,t,r){let i=0;"-"!==e&&(i+=Dp.FileInfo.UnixPermission.Read),"-"!==t&&(i+=Dp.FileInfo.UnixPermission.Write);const n=r.charAt(0);return"-"!==n&&n.toUpperCase()!==n&&(i+=Dp.FileInfo.UnixPermission.Execute),i}lp.testLine=function(e){return dp.test(e)},lp.parseLine=function(e){const t=e.match(dp);if(null===t)return;const r=t[21];if("."===r||".."===r)return;const i=new Dp.FileInfo(r);switch(i.size=parseInt(t[18],10),i.user=t[16],i.group=t[17],i.hardLinkCount=parseInt(t[15],10),i.rawModifiedAt=t[19]+" "+t[20],i.permissions={user:fp(t[4],t[5],t[6]),group:fp(t[8],t[9],t[10]),world:fp(t[12],t[13],t[14])},t[1].charAt(0)){case"d":i.type=Dp.FileType.Directory;break;case"e":case"l":i.type=Dp.FileType.SymbolicLink;break;case"b":case"c":case"f":case"-":i.type=Dp.FileType.File;break;default:i.type=Dp.FileType.Unknown}if(i.isSymbolicLink){const e=r.indexOf(" -> ");-1!==e&&(i.name=r.substring(0,e),i.link=r.substring(e+4))}return i},lp.transformList=function(e){return e};var pp={};Object.defineProperty(pp,"__esModule",{value:!0}),pp.parseMLSxDate=pp.transformList=pp.parseLine=pp.testLine=void 0;const gp=up;function Ep(e,t){t.size=parseInt(e,10)}const Ap={size:Ep,sizd:Ep,unique:(e,t)=>{t.uniqueID=e},modify:(e,t)=>{t.modifiedAt=Fp(e),t.rawModifiedAt=t.modifiedAt.toISOString()},type:(e,t)=>{if(e.startsWith("OS.unix=slink"))return t.type=gp.FileType.SymbolicLink,t.link=e.substr(e.indexOf(":")+1),1;switch(e){case"file":t.type=gp.FileType.File;break;case"dir":t.type=gp.FileType.Directory;break;case"OS.unix=symlink":t.type=gp.FileType.SymbolicLink;break;case"cdir":case"pdir":return 2;default:t.type=gp.FileType.Unknown}return 1},"unix.mode":(e,t)=>{const r=e.substr(-3);t.permissions={user:parseInt(r[0],10),group:parseInt(r[1],10),world:parseInt(r[2],10)}},"unix.ownername":(e,t)=>{t.user=e},"unix.owner":(e,t)=>{void 0===t.user&&(t.user=e)},get"unix.uid"(){return this["unix.owner"]},"unix.groupname":(e,t)=>{t.group=e},"unix.group":(e,t)=>{void 0===t.group&&(t.group=e)},get"unix.gid"(){return this["unix.group"]}};function _p(e,t){const r=e.indexOf(t);return[e.substr(0,r),e.substr(r+t.length)]}function Fp(e){return new Date(Date.UTC(+e.slice(0,4),+e.slice(4,6)-1,+e.slice(6,8),+e.slice(8,10),+e.slice(10,12),+e.slice(12,14),+e.slice(15,18)))}pp.testLine=function(e){return/^\S+=\S+;/.test(e)||e.startsWith(" ")},pp.parseLine=function(e){const[t,r]=_p(e," ");if(""===r||"."===r||".."===r)return;const i=new gp.FileInfo(r),n=t.split(";");for(const e of n){const[t,r]=_p(e,"=");if(!r)continue;const n=Ap[t.toLowerCase()];if(!n)continue;if(2===n(r,i))return}return i},pp.transformList=function(e){const t=new Map;for(const r of e)r.isSymbolicLink||void 0===r.uniqueID||t.set(r.uniqueID,r);const r=[];for(const i of e){if(i.isSymbolicLink&&void 0!==i.uniqueID&&void 0===i.link){const e=t.get(i.uniqueID);void 0!==e&&(i.link=e.name)}!i.name.includes("/")&&r.push(i)}return r},pp.parseMLSxDate=Fp;var mp=w&&w.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),Cp=w&&w.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),yp=w&&w.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&mp(t,e,r);return Cp(t,e),t};Object.defineProperty(sp,"__esModule",{value:!0}),sp.parseList=void 0;const bp=[yp(op),yp(lp),yp(pp)];function wp(e){return""!==e.trim()}function vp(e){return!e.startsWith("total")}const Bp=/\r?\n/;sp.parseList=function(e){const t=e.split(Bp).filter(wp).filter(vp);if(0===t.length)return[];const r=function(e,t){return t.find((t=>!0===t.testLine(e)))}(t[t.length-1],bp);if(!r)throw new Error("This library only supports MLSD, Unix- or DOS-style directory listing. Your FTP server seems to be using another format. You can see the transmitted listing when setting `client.ftp.verbose = true`. You can then provide a custom parser to `client.parseList`, see the documentation for details.");const i=t.map(r.parseLine).filter((e=>void 0!==e));return r.transformList(i)};var Sp={};Object.defineProperty(Sp,"__esModule",{value:!0}),Sp.ProgressTracker=void 0;function Ip(){}Sp.ProgressTracker=class{constructor(){this.bytesOverall=0,this.intervalMs=500,this.onStop=Ip,this.onHandle=Ip}reportTo(e=Ip){this.onHandle=e}start(e,t,r){let i=0;this.onStop=function(e,t){const r=setInterval(t,e),i=e=>{clearInterval(r),e&&t(),t=Ip};return t(),i}(this.intervalMs,(()=>{const n=e.bytesRead+e.bytesWritten;this.bytesOverall+=n-i,i=n,this.onHandle({name:t,type:r,bytes:n,bytesOverall:this.bytesOverall})}))}stop(){this.onStop(!1)}updateAndStop(){this.onStop(!0)}};var kp={};Object.defineProperty(kp,"__esModule",{value:!0}),kp.StringWriter=void 0;const Rp=c;class Tp extends Rp.Writable{constructor(){super(...arguments),this.buf=Buffer.alloc(0)}_write(e,t,r){e instanceof Buffer?(this.buf=Buffer.concat([this.buf,e]),r(null)):r(new Error("StringWriter expects chunks of type 'Buffer'."))}getText(e){return this.buf.toString(e)}}kp.StringWriter=Tp;var Op={};Object.defineProperty(Op,"__esModule",{value:!0}),Op.ipIsPrivateV4Address=Op.upgradeSocket=Op.describeAddress=Op.describeTLS=void 0;const Np=_;Op.describeTLS=function(e){if(e instanceof Np.TLSSocket){const t=e.getProtocol();return t||"Server socket or disconnected client socket"}return"No encryption"},Op.describeAddress=function(e){return"IPv6"===e.remoteFamily?`[${e.remoteAddress}]:${e.remotePort}`:`${e.remoteAddress}:${e.remotePort}`},Op.upgradeSocket=function(e,t){return new Promise(((r,i)=>{const n=Object.assign({},t,{socket:e}),s=(0,Np.connect)(n,(()=>{!1!==n.rejectUnauthorized&&!s.authorized?i(s.authorizationError):(s.removeAllListeners("error"),r(s))})).once("error",(e=>{i(e)}))}))},Op.ipIsPrivateV4Address=function(e=""){e.startsWith("::ffff:")&&(e=e.substr(7));const t=e.split(".").map((e=>parseInt(e,10)));return 10===t[0]||172===t[0]&&t[1]>=16&&t[1]<=31||192===t[0]&&168===t[1]||"127.0.0.1"===e};var Pp={};Object.defineProperty(Pp,"__esModule",{value:!0}),Pp.downloadTo=Pp.uploadFrom=Pp.connectForPassiveTransfer=Pp.parsePasvResponse=Pp.enterPassiveModeIPv4=Pp.parseEpsvResponse=Pp.enterPassiveModeIPv6=void 0;const Lp=Op,xp=c,Up=_,Mp=Vf;function Hp(e){const t=e.match(/[|!]{3}(.+)[|!]/);if(null===t||void 0===t[1])throw new Error(`Can't parse response to 'EPSV': ${e}`);const r=parseInt(t[1],10);if(Number.isNaN(r))throw new Error(`Can't parse response to 'EPSV', port is not a number: ${e}`);return r}function Qp(e){const t=e.match(/([-\d]+,[-\d]+,[-\d]+,[-\d]+),([-\d]+),([-\d]+)/);if(null===t||4!==t.length)throw new Error(`Can't parse response to 'PASV': ${e}`);return{host:t[1].replace(/,/g,"."),port:256*(255&parseInt(t[2],10))+(255&parseInt(t[3],10))}}function $p(e,t,r){return new Promise(((i,n)=>{let s=r._newSocket();const o=function(e){e.message="Can't open data connection in passive mode: "+e.message,n(e)},u=function(){s.destroy(),n(new Error(`Timeout when trying to open data connection to ${e}:${t}`))};s.setTimeout(r.timeout),s.on("error",o),s.on("timeout",u),s.connect({port:t,host:e,family:r.ipFamily},(()=>{r.socket instanceof Up.TLSSocket&&(s=(0,Up.connect)(Object.assign({},r.tlsOptions,{socket:s,session:r.socket.getSession()}))),s.removeListener("error",o),s.removeListener("timeout",u),r.dataSocket=s,i()}))}))}Pp.enterPassiveModeIPv6=async function(e){const t=await e.request("EPSV"),r=Hp(t.message);if(!r)throw new Error("Can't parse EPSV response: "+t.message);const i=e.socket.remoteAddress;if(void 0===i)throw new Error("Control socket is disconnected, can't get remote address.");return await $p(i,r,e),t},Pp.parseEpsvResponse=Hp,Pp.enterPassiveModeIPv4=async function(e){const t=await e.request("PASV"),r=Qp(t.message);if(!r)throw new Error("Can't parse PASV response: "+t.message);const i=e.socket.remoteAddress;return(0,Lp.ipIsPrivateV4Address)(r.host)&&i&&!(0,Lp.ipIsPrivateV4Address)(i)&&(r.host=i),await $p(r.host,r.port,e),t},Pp.parsePasvResponse=Qp,Pp.connectForPassiveTransfer=$p;class Wp{constructor(e,t){this.ftp=e,this.progress=t,this.response=void 0,this.dataTransferDone=!1}onDataStart(e,t){if(void 0===this.ftp.dataSocket)throw new Error("Data transfer should start but there is no data connection.");this.ftp.socket.setTimeout(0),this.ftp.dataSocket.setTimeout(this.ftp.timeout),this.progress.start(this.ftp.dataSocket,e,t)}onDataDone(e){this.progress.updateAndStop(),this.ftp.socket.setTimeout(this.ftp.timeout),this.ftp.dataSocket&&this.ftp.dataSocket.setTimeout(0),this.dataTransferDone=!0,this.tryResolve(e)}onControlDone(e,t){this.response=t,this.tryResolve(e)}onError(e,t){this.progress.updateAndStop(),this.ftp.socket.setTimeout(this.ftp.timeout),this.ftp.dataSocket=void 0,e.reject(t)}onUnexpectedRequest(e){const t=new Error(`Unexpected FTP response is requesting an answer: ${e.message}`);this.ftp.closeWithError(t)}tryResolve(e){this.dataTransferDone&&void 0!==this.response&&(this.ftp.dataSocket=void 0,e.resolve(this.response))}}Pp.uploadFrom=function(e,t){const r=new Wp(t.ftp,t.tracker),i=`${t.command} ${t.remotePath}`;return t.ftp.handle(i,((i,n)=>{if(i instanceof Error)r.onError(n,i);else if(150===i.code||125===i.code){const i=t.ftp.dataSocket;if(!i)return void r.onError(n,new Error("Upload should begin but no data connection is available."));!function(e,t,r,i){!0===e?i():t.once(r,(()=>i()))}(!("getCipher"in i)||void 0!==i.getCipher(),i,"secureConnect",(()=>{t.ftp.log(`Uploading to ${(0,Lp.describeAddress)(i)} (${(0,Lp.describeTLS)(i)})`),r.onDataStart(t.remotePath,t.type),(0,xp.pipeline)(e,i,(e=>{e?r.onError(n,e):r.onDataDone(n)}))}))}else(0,Mp.positiveCompletion)(i.code)?r.onControlDone(n,i):(0,Mp.positiveIntermediate)(i.code)&&r.onUnexpectedRequest(i)}))},Pp.downloadTo=function(e,t){if(!t.ftp.dataSocket)throw new Error("Download will be initiated but no data connection is available.");const r=new Wp(t.ftp,t.tracker);return t.ftp.handle(t.command,((i,n)=>{if(i instanceof Error)r.onError(n,i);else if(150===i.code||125===i.code){const i=t.ftp.dataSocket;if(!i)return void r.onError(n,new Error("Download should begin but no data connection is available."));t.ftp.log(`Downloading from ${(0,Lp.describeAddress)(i)} (${(0,Lp.describeTLS)(i)})`),r.onDataStart(t.remotePath,t.type),(0,xp.pipeline)(i,e,(e=>{e?r.onError(n,e):r.onDataDone(n)}))}else 350===i.code?t.ftp.send("RETR "+t.remotePath):(0,Mp.positiveCompletion)(i.code)?r.onControlDone(n,i):(0,Mp.positiveIntermediate)(i.code)&&r.onUnexpectedRequest(i)}))},Object.defineProperty(Yf,"__esModule",{value:!0}),Yf.Client=void 0;const Kp=D,qp=l,jp=_,Gp=m,Yp=Xf,Xp=sp,Vp=Sp,zp=kp,Jp=pp,Zp=Op,eg=Pp,tg=Vf,rg=(0,Gp.promisify)(Kp.readdir),ig=(0,Gp.promisify)(Kp.mkdir),ng=(0,Gp.promisify)(Kp.stat),sg=(0,Gp.promisify)(Kp.open),og=(0,Gp.promisify)(Kp.close),ug=(0,Gp.promisify)(Kp.unlink);async function ag(e){try{return await e()}catch(e){return}}Yf.Client=class{constructor(e=3e4){this.availableListCommands=["LIST -a","LIST"],this.ftp=new Yp.FTPContext(e),this.prepareTransfer=this._enterFirstCompatibleMode([eg.enterPassiveModeIPv6,eg.enterPassiveModeIPv4]),this.parseList=Xp.parseList,this._progressTracker=new Vp.ProgressTracker}close(){this.ftp.close(),this._progressTracker.stop()}get closed(){return this.ftp.closed}connect(e="localhost",t=21){return this.ftp.reset(),this.ftp.socket.connect({host:e,port:t,family:this.ftp.ipFamily},(()=>this.ftp.log(`Connected to ${(0,Zp.describeAddress)(this.ftp.socket)} (${(0,Zp.describeTLS)(this.ftp.socket)})`))),this._handleConnectResponse()}connectImplicitTLS(e="localhost",t=21,r={}){return this.ftp.reset(),this.ftp.socket=(0,jp.connect)(t,e,r,(()=>this.ftp.log(`Connected to ${(0,Zp.describeAddress)(this.ftp.socket)} (${(0,Zp.describeTLS)(this.ftp.socket)})`))),this.ftp.tlsOptions=r,this._handleConnectResponse()}_handleConnectResponse(){return this.ftp.handle(void 0,((e,t)=>{e instanceof Error?t.reject(e):(0,tg.positiveCompletion)(e.code)?t.resolve(e):t.reject(new Yp.FTPError(e))}))}send(e,t=!1){return t?(this.ftp.log("Deprecated call using send(command, flag) with boolean flag to ignore errors. Use sendIgnoringError(command)."),this.sendIgnoringError(e)):this.ftp.request(e)}sendIgnoringError(e){return this.ftp.handle(e,((e,t)=>{e instanceof Yp.FTPError?t.resolve({code:e.code,message:e.message}):e instanceof Error?t.reject(e):t.resolve(e)}))}async useTLS(e={},t="AUTH TLS"){const r=await this.send(t);return this.ftp.socket=await(0,Zp.upgradeSocket)(this.ftp.socket,e),this.ftp.tlsOptions=e,this.ftp.log(`Control socket is using: ${(0,Zp.describeTLS)(this.ftp.socket)}`),r}login(e="anonymous",t="guest"){return this.ftp.log(`Login security: ${(0,Zp.describeTLS)(this.ftp.socket)}`),this.ftp.handle("USER "+e,((e,r)=>{e instanceof Error?r.reject(e):(0,tg.positiveCompletion)(e.code)?r.resolve(e):331===e.code?this.ftp.send("PASS "+t):r.reject(new Yp.FTPError(e))}))}async useDefaultSettings(){const e=(await this.features()).has("MLST");this.availableListCommands=e?["MLSD","LIST -a","LIST"]:["LIST -a","LIST"],await this.send("TYPE I"),await this.sendIgnoringError("STRU F"),await this.sendIgnoringError("OPTS UTF8 ON"),e&&await this.sendIgnoringError("OPTS MLST type;size;modify;unique;unix.mode;unix.owner;unix.group;unix.ownername;unix.groupname;"),this.ftp.hasTLS&&(await this.sendIgnoringError("PBSZ 0"),await this.sendIgnoringError("PROT P"))}async access(e={}){var t,r;const i=!0===e.secure;let n;if(n="implicit"===e.secure?await this.connectImplicitTLS(e.host,e.port,e.secureOptions):await this.connect(e.host,e.port),i){const i=null!==(t=e.secureOptions)&&void 0!==t?t:{};i.host=null!==(r=i.host)&&void 0!==r?r:e.host,await this.useTLS(i)}return await this.sendIgnoringError("OPTS UTF8 ON"),await this.login(e.user,e.password),await this.useDefaultSettings(),n}async pwd(){const e=await this.send("PWD"),t=e.message.match(/"(.+)"/);if(null===t||void 0===t[1])throw new Error(`Can't parse response to command 'PWD': ${e.message}`);return t[1]}async features(){const e=await this.sendIgnoringError("FEAT"),t=new Map;return e.code<400&&(0,tg.isMultiline)(e.message)&&e.message.split("\n").slice(1,-1).forEach((e=>{const r=e.trim().split(" ");t.set(r[0],r[1]||"")})),t}async cd(e){const t=await this.protectWhitespace(e);return this.send("CWD "+t)}async cdup(){return this.send("CDUP")}async lastMod(e){const t=await this.protectWhitespace(e),r=(await this.send(`MDTM ${t}`)).message.slice(4);return(0,Jp.parseMLSxDate)(r)}async size(e){const t=`SIZE ${await this.protectWhitespace(e)}`,r=await this.send(t),i=parseInt(r.message.slice(4),10);if(Number.isNaN(i))throw new Error(`Can't parse response to command '${t}' as a numerical value: ${r.message}`);return i}async rename(e,t){const r=await this.protectWhitespace(e),i=await this.protectWhitespace(t);return await this.send("RNFR "+r),this.send("RNTO "+i)}async remove(e,t=!1){const r=await this.protectWhitespace(e);return t?this.sendIgnoringError(`DELE ${r}`):this.send(`DELE ${r}`)}trackProgress(e){this._progressTracker.bytesOverall=0,this._progressTracker.reportTo(e)}async uploadFrom(e,t,r={}){return this._uploadWithCommand(e,t,"STOR",r)}async appendFrom(e,t,r={}){return this._uploadWithCommand(e,t,"APPE",r)}async _uploadWithCommand(e,t,r,i){return"string"==typeof e?this._uploadLocalFile(e,t,r,i):this._uploadFromStream(e,t,r)}async _uploadLocalFile(e,t,r,i){const n=await sg(e,"r"),s=(0,Kp.createReadStream)("",{fd:n,start:i.localStart,end:i.localEndInclusive,autoClose:!1});try{return await this._uploadFromStream(s,t,r)}finally{await ag((()=>og(n)))}}async _uploadFromStream(e,t,r){const i=e=>this.ftp.closeWithError(e);e.once("error",i);try{const i=await this.protectWhitespace(t);return await this.prepareTransfer(this.ftp),await(0,eg.uploadFrom)(e,{ftp:this.ftp,tracker:this._progressTracker,command:r,remotePath:i,type:"upload"})}finally{e.removeListener("error",i)}}async downloadTo(e,t,r=0){return"string"==typeof e?this._downloadToFile(e,t,r):this._downloadToStream(e,t,r)}async _downloadToFile(e,t,r){const i=r>0,n=i?"r+":"w",s=await sg(e,n),o=(0,Kp.createWriteStream)("",{fd:s,start:r,autoClose:!1});try{return await this._downloadToStream(o,t,r)}catch(t){const r=await ag((()=>ng(e))),n=r&&r.size>0;throw!i&&!n&&await ag((()=>ug(e))),t}finally{await ag((()=>og(s)))}}async _downloadToStream(e,t,r){const i=e=>this.ftp.closeWithError(e);e.once("error",i);try{const i=await this.protectWhitespace(t);return await this.prepareTransfer(this.ftp),await(0,eg.downloadTo)(e,{ftp:this.ftp,tracker:this._progressTracker,command:r>0?`REST ${r}`:`RETR ${i}`,remotePath:i,type:"download"})}finally{e.removeListener("error",i),e.end()}}async list(e=""){const t=await this.protectWhitespace(e);let r;for(const e of this.availableListCommands){const i=""===t?e:`${e} ${t}`;await this.prepareTransfer(this.ftp);try{const t=await this._requestListWithCommand(i);return this.availableListCommands=[e],t}catch(e){if(!(e instanceof Yp.FTPError))throw e;r=e}}throw r}async _requestListWithCommand(e){const t=new zp.StringWriter;await(0,eg.downloadTo)(t,{ftp:this.ftp,tracker:this._progressTracker,command:e,remotePath:"",type:"list"});const r=t.getText(this.ftp.encoding);return this.ftp.log(r),this.parseList(r)}async removeDir(e){return this._exitAtCurrentDirectory((async()=>{await this.cd(e);const t=await this.pwd();await this.clearWorkingDir();"/"===t||(await this.cdup(),await this.removeEmptyDir(t))}))}async clearWorkingDir(){for(const e of await this.list())e.isDirectory?(await this.cd(e.name),await this.clearWorkingDir(),await this.cdup(),await this.removeEmptyDir(e.name)):await this.remove(e.name)}async uploadFromDir(e,t){return this._exitAtCurrentDirectory((async()=>(t&&await this.ensureDir(t),await this._uploadToWorkingDir(e))))}async _uploadToWorkingDir(e){const t=await rg(e);for(const r of t){const t=(0,qp.join)(e,r),i=await ng(t);i.isFile()?await this.uploadFrom(t,r):i.isDirectory()&&(await this._openDir(r),await this._uploadToWorkingDir(t),await this.cdup())}}async downloadToDir(e,t){return this._exitAtCurrentDirectory((async()=>(t&&await this.cd(t),await this._downloadFromWorkingDir(e))))}async _downloadFromWorkingDir(e){await async function(e){try{await ng(e)}catch(t){await ig(e,{recursive:!0})}}(e);for(const t of await this.list()){const r=(0,qp.join)(e,t.name);t.isDirectory?(await this.cd(t.name),await this._downloadFromWorkingDir(r),await this.cdup()):t.isFile&&await this.downloadTo(r,t.name)}}async ensureDir(e){e.startsWith("/")&&await this.cd("/");const t=e.split("/").filter((e=>""!==e));for(const e of t)await this._openDir(e)}async _openDir(e){await this.sendIgnoringError("MKD "+e),await this.cd(e)}async removeEmptyDir(e){const t=await this.protectWhitespace(e);return this.send(`RMD ${t}`)}async protectWhitespace(e){if(!e.startsWith(" "))return e;const t=await this.pwd();return(t.endsWith("/")?t:t+"/")+e}async _exitAtCurrentDirectory(e){const t=await this.pwd();try{return await e()}finally{this.closed||await ag((()=>this.cd(t)))}}_enterFirstCompatibleMode(e){return async t=>{let r;t.log("Trying to find optimal transfer strategy...");for(const i of e)try{const e=await i(t);return t.log("Optimal transfer strategy found."),this.prepareTransfer=i,e}catch(e){r=e}throw new Error(`None of the available transfer strategies work. Last error response was '${r}'.`)}}async upload(e,t,r={}){return this.ftp.log("Warning: upload() has been deprecated, use uploadFrom()."),this.uploadFrom(e,t,r)}async append(e,t,r={}){return this.ftp.log("Warning: append() has been deprecated, use appendFrom()."),this.appendFrom(e,t,r)}async download(e,t,r=0){return this.ftp.log("Warning: download() has been deprecated, use downloadTo()."),this.downloadTo(e,t,r)}async uploadDir(e,t){return this.ftp.log("Warning: uploadDir() has been deprecated, use uploadFromDir()."),this.uploadFromDir(e,t)}async downloadDir(e){return this.ftp.log("Warning: downloadDir() has been deprecated, use downloadToDir()."),this.downloadToDir(e)}};var hg={};Object.defineProperty(hg,"__esModule",{value:!0}),function(e){var t=w&&w.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),r=w&&w.__exportStar||function(e,r){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(r,i)||t(r,e,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.enterPassiveModeIPv6=e.enterPassiveModeIPv4=void 0,r(Yf,e),r(Xf,e),r(up,e),r(sp,e),r(hg,e);var i=Pp;Object.defineProperty(e,"enterPassiveModeIPv4",{enumerable:!0,get:function(){return i.enterPassiveModeIPv4}}),Object.defineProperty(e,"enterPassiveModeIPv6",{enumerable:!0,get:function(){return i.enterPassiveModeIPv6}})}(Gf);class cg{config;sftp=null;constructor(e){this.config=e}async connect(){try{this.sftp||(this.sftp=new jf,await this.sftp.connect(this.config))}catch(e){throw new Error(`sftp 连接失败: ${e.message}`)}}async disconnect(){this.sftp&&(await this.sftp.end(),this.sftp=null)}async ensureRemoteDirectoryExists(e){const t=e.substring(0,e.lastIndexOf("/"));if(this.sftp||await this.connect(),!this.sftp)throw new Error("SFTP client not connected");await this.sftp.exists(t)||(vn.warning(`${t} does not exist`),await this.sftp.mkdir(t,!0))}async uploadFile(e,t){vn.info(`${e} 开始上传`);try{if(!this.sftp)throw new Error("SFTP client not connected");await this.ensureRemoteDirectoryExists(t),"string"==typeof e?await this.sftp.fastPut(e,t):await this.sftp.put(e,t),vn.success(`${e} 上传成功`)}catch(r){throw vn.error(`${e} to ${t} 上传失败`),r}}async list(e){if(!this.sftp)throw new Error("SFTP client not connected");return await this.sftp.list(e)}async uploadMultipleFiles(e){try{await this.connect();for(const t of e)await this.uploadFile(t.filePath,t.remotePath)}catch(e){console.error("Error during file upload:",e)}finally{await this.disconnect()}}}class lg{config;client=null;constructor(e){this.config=e}async connect(){try{this.client||(this.client=new Gf.Client,await this.client.access({...this.config,secure:!1}))}catch(e){throw new Error(`FTP 连接失败: ${e.message}`)}}async disconnect(){this.client&&(await this.client.close(),this.client=null)}async ensureRemoteDirectoryExists(e){const t=e.substring(0,e.lastIndexOf("/"));if(this.client||await this.connect(),!this.client)throw new Error("FTP client not connected");await this.client.cd(t).then((()=>!0)).catch((()=>!1))||(vn.warning(`${t} does not exist`),await this.client.ensureDir(t))}async uploadFile(e,t){vn.info(`${e} 开始上传`);try{if(!this.client)throw new Error("FTP client not connected");await this.ensureRemoteDirectoryExists(t),await this.client.uploadFrom(e,t),vn.success(`${e} 上传成功`)}catch(r){throw vn.error(`${e} to ${t} 上传失败`),r}}async list(e){if(!this.client)throw new Error("FTP client not connected");return await this.client.list(e)}async uploadMultipleFiles(e){try{await this.connect();for(const t of e)await this.uploadFile(t.filePath,t.remotePath)}catch(e){console.error("Error during file upload:",e)}finally{await this.disconnect()}}}function Dg(t){const i=e.readdirSync(t),n=[];for(let s=0;s<i.length;s++){const o=r.resolve(t,i[s]),u=e.lstatSync(o);u.isDirectory()?n.push(...Dg(o)):u.isFile()&&n.push(o)}return n}const dg=function({onlyFirst:e=!1}={}){const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}();function fg(e){if("string"!=typeof e)throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(dg,"")}const pg=new Intl.Segmenter,gg=/^\p{Default_Ignorable_Code_Point}$/u;function Eg(e,t={}){if("string"!=typeof e||0===e.length)return 0;const{ambiguousIsNarrow:r=!0,countAnsiEscapeCodes:i=!1}=t;if(i||(e=fg(e)),0===e.length)return 0;let n=0;const s={ambiguousAsWide:!r};for(const{segment:t}of pg.segment(e)){const e=t.codePointAt(0);e<=31||e>=127&&e<=159||(e>=8203&&e<=8207||65279===e||e>=768&&e<=879||e>=6832&&e<=6911||e>=7616&&e<=7679||e>=8400&&e<=8447||e>=65056&&e<=65071||e>=55296&&e<=57343||e>=65024&&e<=65039||gg.test(t)||(/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g.test(t)?n+=2:n+=Fn(e,s)))}return n}const Ag=function({onlyFirst:e=!1}={}){const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}();var _g=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g;const Fg=new Intl.Segmenter,mg=/^\p{Default_Ignorable_Code_Point}$/u;function Cg(e,t={}){if("string"!=typeof e||0===e.length)return 0;const{ambiguousIsNarrow:r=!0,countAnsiEscapeCodes:i=!1}=t;if(i||(e=function(e){if("string"!=typeof e)throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(Ag,"")}(e)),0===e.length)return 0;let n=0;const s={ambiguousAsWide:!r};for(const{segment:t}of Fg.segment(e)){const e=t.codePointAt(0);e<=31||e>=127&&e<=159||(e>=8203&&e<=8207||65279===e||e>=768&&e<=879||e>=6832&&e<=6911||e>=7616&&e<=7679||e>=8400&&e<=8447||e>=65056&&e<=65071||e>=55296&&e<=57343||e>=65024&&e<=65039||mg.test(t)||(_g().test(t)?n+=2:n+=Fn(e,s)))}return n}function yg(e){let t=0;for(const r of e.split("\n"))t=Math.max(t,Cg(r));return t}var bg={exports:{}};const wg={single:{topLeft:"┌",top:"─",topRight:"┐",right:"│",bottomRight:"┘",bottom:"─",bottomLeft:"└",left:"│"},double:{topLeft:"╔",top:"═",topRight:"╗",right:"║",bottomRight:"╝",bottom:"═",bottomLeft:"╚",left:"║"},round:{topLeft:"╭",top:"─",topRight:"╮",right:"│",bottomRight:"╯",bottom:"─",bottomLeft:"╰",left:"│"},bold:{topLeft:"┏",top:"━",topRight:"┓",right:"┃",bottomRight:"┛",bottom:"━",bottomLeft:"┗",left:"┃"},singleDouble:{topLeft:"╓",top:"─",topRight:"╖",right:"║",bottomRight:"╜",bottom:"─",bottomLeft:"╙",left:"║"},doubleSingle:{topLeft:"╒",top:"═",topRight:"╕",right:"│",bottomRight:"╛",bottom:"═",bottomLeft:"╘",left:"│"},classic:{topLeft:"+",top:"-",topRight:"+",right:"|",bottomRight:"+",bottom:"-",bottomLeft:"+",left:"|"},arrow:{topLeft:"↘",top:"↓",topRight:"↙",right:"←",bottomRight:"↖",bottom:"↑",bottomLeft:"↗",left:"→"}};bg.exports=wg,bg.exports.default=wg;var vg=v(bg.exports);const Bg=/[\p{Lu}]/u,Sg=/[\p{Ll}]/u,Ig=/^[\p{Lu}](?![\p{Lu}])/gu,kg=/([\p{Alpha}\p{N}_]|$)/u,Rg=/[_.\- ]+/,Tg=new RegExp("^"+Rg.source),Og=new RegExp(Rg.source+kg.source,"gu"),Ng=new RegExp("\\d+"+kg.source,"gu");function Pg(e,t){if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");if(t={pascalCase:!1,preserveConsecutiveUppercase:!1,...t},0===(e=Array.isArray(e)?e.map((e=>e.trim())).filter((e=>e.length)).join("-"):e.trim()).length)return"";const r=!1===t.locale?e=>e.toLowerCase():e=>e.toLocaleLowerCase(t.locale),i=!1===t.locale?e=>e.toUpperCase():e=>e.toLocaleUpperCase(t.locale);if(1===e.length)return Rg.test(e)?"":t.pascalCase?i(e):r(e);return e!==r(e)&&(e=((e,t,r,i)=>{let n=!1,s=!1,o=!1,u=!1;for(let a=0;a<e.length;a++){const h=e[a];u=!(a>2)||"-"===e[a-3],n&&Bg.test(h)?(e=e.slice(0,a)+"-"+e.slice(a),n=!1,o=s,s=!0,a++):s&&o&&Sg.test(h)&&(!u||i)?(e=e.slice(0,a-1)+"-"+e.slice(a-1),o=s,s=!1,n=!0):(n=t(h)===h&&r(h)!==h,o=s,s=r(h)===h&&t(h)!==h)}return e})(e,r,i,t.preserveConsecutiveUppercase)),e=e.replace(Tg,""),e=t.preserveConsecutiveUppercase?((e,t)=>(Ig.lastIndex=0,e.replaceAll(Ig,(e=>t(e)))))(e,r):r(e),t.pascalCase&&(e=i(e.charAt(0))+e.slice(1)),((e,t)=>(Og.lastIndex=0,Ng.lastIndex=0,e.replaceAll(Ng,((r,i,n)=>["_","-"].includes(e.charAt(n+r.length))?r:t(r))).replaceAll(Og,((e,r)=>t(r)))))(e,i)}var Lg={exports:{}};const xg=({onlyFirst:e=!1}={})=>{const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")};var Ug={exports:{}};const Mg=e=>!Number.isNaN(e)&&(e>=4352&&(e<=4447||9001===e||9002===e||11904<=e&&e<=12871&&12351!==e||12880<=e&&e<=19903||19968<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65131||65281<=e&&e<=65376||65504<=e&&e<=65510||110592<=e&&e<=110593||127488<=e&&e<=127569||131072<=e&&e<=262141));Ug.exports=Mg,Ug.exports.default=Mg;var Hg=Ug.exports;const Qg=e=>"string"==typeof e?e.replace(xg(),""):e,$g=Hg,Wg=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g},Kg=e=>{if("string"!=typeof e||0===e.length)return 0;if(0===(e=Qg(e)).length)return 0;e=e.replace(Wg(),"  ");let t=0;for(let r=0;r<e.length;r++){const i=e.codePointAt(r);i<=31||i>=127&&i<=159||(i>=768&&i<=879||(i>65535&&r++,t+=$g(i)?2:1))}return t};Lg.exports=Kg,Lg.exports.default=Kg;const qg=Lg.exports;function jg(e,t){if(!e)return e;const r=(t=t||{}).align||"center";if("left"===r)return e;const i=t.split||"\n",n=t.pad||" ",s="right"!==r?Gg:Yg;let o,u=!1;Array.isArray(e)||(u=!0,e=String(e).split(i));let a=0;return e=e.map((function(e){return e=String(e),o=qg(e),a=Math.max(o,a),{str:e,width:o}})).map((function(e){return new Array(s(a,e.width)+1).join(n)+e.str})),u?e.join(i):e}function Gg(e,t){return Math.floor((e-t)/2)}function Yg(e,t){return e-t}jg.left=function(e){return jg(e,{align:"left"})},jg.center=function(e){return jg(e,{align:"center"})},jg.right=function(e){return jg(e,{align:"right"})};var Xg=v(jg);const Vg=(e=0)=>t=>`[${t+e}m`,zg=(e=0)=>t=>`[${38+e};5;${t}m`,Jg=(e=0)=>(t,r,i)=>`[${38+e};2;${t};${r};${i}m`,Zg={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(Zg.modifier);Object.keys(Zg.color),Object.keys(Zg.bgColor);const eE=function(){const e=new Map;for(const[t,r]of Object.entries(Zg)){for(const[t,i]of Object.entries(r))Zg[t]={open:`[${i[0]}m`,close:`[${i[1]}m`},r[t]=Zg[t],e.set(i[0],i[1]);Object.defineProperty(Zg,t,{value:r,enumerable:!1})}return Object.defineProperty(Zg,"codes",{value:e,enumerable:!1}),Zg.color.close="[39m",Zg.bgColor.close="[49m",Zg.color.ansi=Vg(),Zg.color.ansi256=zg(),Zg.color.ansi16m=Jg(),Zg.bgColor.ansi=Vg(10),Zg.bgColor.ansi256=zg(10),Zg.bgColor.ansi16m=Jg(10),Object.defineProperties(Zg,{rgbToAnsi256:{value:(e,t,r)=>e===t&&t===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5),enumerable:!1},hexToRgb:{value:e=>{const t=/[a-f\d]{6}|[a-f\d]{3}/i.exec(e.toString(16));if(!t)return[0,0,0];let[r]=t;3===r.length&&(r=[...r].map((e=>e+e)).join(""));const i=Number.parseInt(r,16);return[i>>16&255,i>>8&255,255&i]},enumerable:!1},hexToAnsi256:{value:e=>Zg.rgbToAnsi256(...Zg.hexToRgb(e)),enumerable:!1},ansi256ToAnsi:{value:e=>{if(e<8)return 30+e;if(e<16)return e-8+90;let t,r,i;if(e>=232)t=(10*(e-232)+8)/255,r=t,i=t;else{const n=(e-=16)%36;t=Math.floor(e/36)/5,r=Math.floor(n/6)/5,i=n%6/5}const n=2*Math.max(t,r,i);if(0===n)return 30;let s=30+(Math.round(i)<<2|Math.round(r)<<1|Math.round(t));return 2===n&&(s+=60),s},enumerable:!1},rgbToAnsi:{value:(e,t,r)=>Zg.ansi256ToAnsi(Zg.rgbToAnsi256(e,t,r)),enumerable:!1},hexToAnsi:{value:e=>Zg.ansi256ToAnsi(Zg.hexToAnsi256(e)),enumerable:!1}}),Zg}(),tE=new Set(["",""]),rE="]8;;",iE=e=>`${tE.values().next().value}[${e}m`,nE=e=>`${tE.values().next().value}${rE}${e}`,sE=(e,t,r)=>{const i=[...t];let n=!1,s=!1,o=Eg(fg(e.at(-1)));for(const[t,u]of i.entries()){const a=Eg(u);if(o+a<=r?e[e.length-1]+=u:(e.push(u),o=0),tE.has(u)){n=!0;s=i.slice(t+1,t+1+4).join("")===rE}n?s?""===u&&(n=!1,s=!1):"m"===u&&(n=!1):(o+=a,o===r&&t<i.length-1&&(e.push(""),o=0))}!o&&e.at(-1).length>0&&e.length>1&&(e[e.length-2]+=e.pop())},oE=(e,t,r={})=>{if(!1!==r.trim&&""===e.trim())return"";let i,n,s="";const o=(e=>e.split(" ").map((e=>Eg(e))))(e);let u=[""];for(const[i,n]of e.split(" ").entries()){!1!==r.trim&&(u[u.length-1]=u.at(-1).trimStart());let e=Eg(u.at(-1));if(0!==i&&(e>=t&&(!1===r.wordWrap||!1===r.trim)&&(u.push(""),e=0),(e>0||!1===r.trim)&&(u[u.length-1]+=" ",e++)),r.hard&&o[i]>t){const r=t-e,s=1+Math.floor((o[i]-r-1)/t);Math.floor((o[i]-1)/t)<s&&u.push(""),sE(u,n,t)}else{if(e+o[i]>t&&e>0&&o[i]>0){if(!1===r.wordWrap&&e<t){sE(u,n,t);continue}u.push("")}e+o[i]>t&&!1===r.wordWrap?sE(u,n,t):u[u.length-1]+=n}}!1!==r.trim&&(u=u.map((e=>(e=>{const t=e.split(" ");let r=t.length;for(;r>0&&!(Eg(t[r-1])>0);)r--;return r===t.length?e:t.slice(0,r).join(" ")+t.slice(r).join("")})(e))));const a=u.join("\n"),h=[...a];let c=0;for(const[e,t]of h.entries()){if(s+=t,tE.has(t)){const{groups:e}=new RegExp(`(?:\\[(?<code>\\d+)m|\\${rE}(?<uri>.*))`).exec(a.slice(c))||{groups:{}};if(void 0!==e.code){const t=Number.parseFloat(e.code);i=39===t?void 0:t}else void 0!==e.uri&&(n=0===e.uri.length?void 0:e.uri)}const r=eE.codes.get(Number(i));"\n"===h[e+1]?(n&&(s+=nE("")),i&&r&&(s+=iE(r))):"\n"===t&&(i&&r&&(s+=iE(i)),n&&(s+=nE(n))),c+=t.length}return s};function uE(e,t,r){return String(e).normalize().replaceAll("\r\n","\n").split("\n").map((e=>oE(e,t,r))).join("\n")}const aE="\n",hE=" ",cE="none",lE=()=>{const{env:e,stdout:r,stderr:i}=t;return r?.columns?r.columns:i?.columns?i.columns:e.COLUMNS?Number.parseInt(e.COLUMNS,10):80},DE=e=>"number"==typeof e?{top:e,right:3*e,bottom:e,left:3*e}:{top:0,right:0,bottom:0,left:0,...e},dE=e=>e===cE?0:2,fE=(e,t,r)=>{const i=e=>{const t=r.borderColor?_E(r.borderColor)(e):e;return r.dimBorder?Mi.dim(t):t},n=(e=>{const t=["topLeft","topRight","bottomRight","bottomLeft","left","right","top","bottom"];let r;if(e===cE){e={};for(const r of t)e[r]=""}if("string"==typeof e){if(r=vg[e],!r)throw new TypeError(`Invalid border style: ${e}`)}else{"string"==typeof e?.vertical&&(e.left=e.vertical,e.right=e.vertical),"string"==typeof e?.horizontal&&(e.top=e.horizontal,e.bottom=e.horizontal);for(const r of t)if(null===e[r]||"string"!=typeof e[r])throw new TypeError(`Invalid border style: ${r}`);r=e}return r})(r.borderStyle),s=lE();let o=hE.repeat(r.margin.left);if("center"===r.float){const e=Math.max((s-t-dE(r.borderStyle))/2,0);o=hE.repeat(e)}else if("right"===r.float){const e=Math.max(s-t-r.margin.right-dE(r.borderStyle),0);o=hE.repeat(e)}let u="";r.margin.top&&(u+=aE.repeat(r.margin.top)),(r.borderStyle!==cE||r.title)&&(u+=i(o+n.topLeft+(r.title?((e,t,r)=>{let i="";const n=Eg(e);switch(r){case"left":i=e+t.slice(n);break;case"right":i=t.slice(n)+e;break;default:i=(t=t.slice(n)).length%2==1?(t=t.slice(Math.floor(t.length/2))).slice(1)+e+t:(t=t.slice(t.length/2))+e+t}return i})(r.title,n.top.repeat(t),r.titleAlignment):n.top.repeat(t))+n.topRight)+aE);return u+=e.split(aE).map((e=>o+i(n.left)+(e=>r.backgroundColor?FE(r.backgroundColor)(e):e)(e)+i(n.right))).join(aE),r.borderStyle!==cE&&(u+=aE+i(o+n.bottomLeft+n.bottom.repeat(t)+n.bottomRight)),r.margin.bottom&&(u+=aE.repeat(r.margin.bottom)),u},pE=(e,t)=>t===cE?e:` ${e} `,gE=(e,r)=>{const i=void 0!==(r=(e=>{if(e.fullscreen&&t?.stdout){let r=[t.stdout.columns,t.stdout.rows];"function"==typeof e.fullscreen&&(r=e.fullscreen(...r)),e.width||=r[0],e.height||=r[1]}return e.width&&=Math.max(1,e.width-dE(e.borderStyle)),e.height&&=Math.max(1,e.height-dE(e.borderStyle)),e})(r)).width,n=lE(),s=dE(r.borderStyle),o=n-r.margin.left-r.margin.right-s,u=yg(uE(e,n-s,{hard:!0,trim:!1}))+r.padding.left+r.padding.right;if(r.title&&i?(r.title=r.title.slice(0,Math.max(0,r.width-2)),r.title&&=pE(r.title,r.borderStyle)):r.title&&(r.title=r.title.slice(0,Math.max(0,o-2)),r.title&&(r.title=pE(r.title,r.borderStyle),Eg(r.title)>u&&(r.width=Eg(r.title)))),r.width||=u,!i){if(r.margin.left&&r.margin.right&&r.width>o){const e=(n-r.width-s)/(r.margin.left+r.margin.right);r.margin.left=Math.max(0,Math.floor(r.margin.left*e)),r.margin.right=Math.max(0,Math.floor(r.margin.right*e))}r.width=Math.min(r.width,n-s-r.margin.left-r.margin.right)}return r.width-(r.padding.left+r.padding.right)<=0&&(r.padding.left=0,r.padding.right=0),r.height&&r.height-(r.padding.top+r.padding.bottom)<=0&&(r.padding.top=0,r.padding.bottom=0),r},EE=e=>e.match(/^#(?:[0-f]{3}){1,2}$/i),AE=e=>"string"==typeof e&&(Mi[e]??EE(e)),_E=e=>EE(e)?Mi.hex(e):Mi[e],FE=e=>EE(e)?Mi.bgHex(e):Mi[Pg(["bg",e])];function mE(e,t){if((t={padding:0,borderStyle:"single",dimBorder:!1,textAlignment:"left",float:"left",titleAlignment:"left",...t}).align&&(t.textAlignment=t.align),t.borderColor&&!AE(t.borderColor))throw new Error(`${t.borderColor} is not a valid borderColor`);if(t.backgroundColor&&!AE(t.backgroundColor))throw new Error(`${t.backgroundColor} is not a valid backgroundColor`);return t.padding=DE(t.padding),t.margin=DE(t.margin),e=((e,{padding:t,width:r,textAlignment:i,height:n})=>{let s=(e=Xg(e,{align:i})).split(aE);const o=yg(e),u=r-t.left-t.right;if(o>u){const e=[];for(const t of s){const r=uE(t,u,{hard:!0}),n=Xg(r,{align:i}).split("\n"),s=Math.max(...n.map((e=>Eg(e))));for(const t of n){let r;switch(i){case"center":r=hE.repeat((u-s)/2)+t;break;case"right":r=hE.repeat(u-s)+t;break;default:r=t}e.push(r)}}s=e}"center"===i&&o<u?s=s.map((e=>hE.repeat((u-o)/2)+e)):"right"===i&&o<u&&(s=s.map((e=>hE.repeat(u-o)+e)));const a=hE.repeat(t.left),h=hE.repeat(t.right);return s=s.map((e=>{const t=a+e+h;return t+hE.repeat(r-Eg(t))})),t.top>0&&(s=[...Array.from({length:t.top}).fill(hE.repeat(r)),...s]),t.bottom>0&&(s=[...s,...Array.from({length:t.bottom}).fill(hE.repeat(r))]),n&&s.length>n?s=s.slice(0,n):n&&s.length<n&&(s=[...s,...Array.from({length:n-s.length}).fill(hE.repeat(r))]),s.join(aE)})(e,t=gE(e,t)),fE(e,t.width,t)}const CE=`\n${ui.cyan("欢迎使用 @zd~/upload")}\n${ui.bgRed("警告")} ${ui.red("请不要将任何服务器信息存放到不受信任的地方!")}\n${ui.gray("建议将上传配置文件 upload.config.json 加入")}\n${ui.gray(".gitignore 以避免上传到版本控制系统。")}\n${ui.gray("由于操作失误导致的服务器信息泄露，概不负责。")}\n`,yE={example:{host:"127.0.0.1",port:22,username:"root",password:"123456"}},bE={padding:1,margin:1,borderColor:"#00FFFF",borderStyle:"round",align:"center"};async function wE(e){let r,i;switch(t.platform){case"win32":r="cmd",i=["/c","start","",e];break;case"darwin":r="open",i=[e];break;case"linux":r="xdg-open",i=[e];break;default:return void vn.error("Unsupported operating system.")}try{const e=await async function(e,r,i={}){return new Promise(((n,s)=>{const o=y.spawn(e,r,{stdio:["ignore","pipe","pipe"],...i,shell:"win32"===t.platform}),u=[],a=[];o.stderr?.on("data",(e=>{u.push(e)})),o.stdout?.on("data",(e=>{a.push(e)})),o.on("error",(e=>{s(e)})),o.on("exit",(e=>{const t=0===e,r=b.Buffer.concat(u).toString("utf-8").trim(),i=b.Buffer.concat(a).toString("utf-8").trim();n({ok:t,code:e,stderr:r,stdout:i})}))}))}(r,i);e.ok||vn.error(`Error opening file:${e.stderr}`)}catch(e){vn.error(`Error executing command:${e}`)}}function vE(e){return`${e.host}:${e.port}`.replace(/^(\d+)\.(\d+)\.(\d+)\.(\d+)/,((e,t,r,i,n)=>`${t}.***.***.${n}`))}const BE=r.normalize(r.join(`${t.env.HOME??t.env.USERPROFILE}/`,"upload.config.json"));!async function(){try{console.log(mE(CE,bE));if(!e.existsSync(BE)){const{create:t}=await Jr({name:"create",type:"toggle",message:"未找到配置文件，是否创建?",initial:!1,active:"是",inactive:"否"});t?(e.writeFileSync(BE,JSON.stringify(yE,null,2)),await wE(BE)):hi();const{proceed:r}=await Jr([{name:"proceed",type:"toggle",message:"请保存好你的配置后再继续操作",initial:!1,active:"保存好了",inactive:"取消"}],{onCancel:hi});r||hi()}if(!ci.localdir)throw new Error(`请使用 ${ui.cyan("--l xxx")} 指定本地文件夹 `);if(!ci.serverdir)throw new Error(`请使用 ${ui.cyan("--s xxx")} 指定服务器文件夹 `);const i=function(e){if(null==e)throw new Error("配置解析失败 config is null or undefined");const t=Object.keys(e);if(!t.length)throw new TypeError("配置解析失败 At least one configuration is required");const r=["host","port"];for(let i=0;i<t.length;i++){const n=e[t[i]];for(const e of r){if(void 0===n[e]||null===n[e])throw new TypeError(`配置解析失败 config[${i}][${e}] is null or undefined`);if("port"===e&&"number"!=typeof n[e])throw new TypeError(`配置解析失败 config[${i}][${e}] is not a number`);if("host"===e&&"string"!=typeof n[e])throw new TypeError(`配置解析失败 config[${i}][${e}] is not a string`)}}return e}(function(t){try{return JSON.parse(e.readFileSync(t,"utf8").toString())}catch(e){throw new Error("配置解析失败")}}(BE)),n=Object.keys(i);if(ci.config){if(!n.includes(ci.config))throw vn.warning(`当前所有配置文件如下：\n${n.map((e=>ui.cyan(`  ${e} (${i[e].host}:${i[e].port}) `))).join("\n")}`),new Error(`配置文件 "${ci.config}" 不存在 `)}else if(1===n.length)ci.config=n[0],vn.infoText(`当前只有一个配置文件，默认使用 ${ci.config} (${vE(i[ci.config])}) 配置`);else{const{config:e}=await Jr({name:"config",type:"select",message:"请选择配置文件",initial:0,choices:n.map((e=>({title:`${e} (${vE(i[e])})`,value:e})))},{onCancel:hi});ci.config=e}await async function(e,i,n){const s=t.cwd(),o=r.resolve(s,i),u=Dg(o);if(!u.length)return void vn.warning("本地文件夹为空，无需上传");console.log(" "),vn.infoText("🎈🎈🎈 开始上传"),console.log(" ");const a=u.map((e=>{const t=n+e.replace(o,"").replace(/\\/g,"/");return{filePath:e,remotePath:t}})),h=function(e){return 22===e.port?new cg({host:e.host,port:e.port,username:e.username,password:e.password}):new lg({host:e.host,port:e.port,user:""===e.username?void 0:e.username,password:""===e.password?void 0:e.password})}(e);await h.ensureRemoteDirectoryExists(n),await h.uploadMultipleFiles(a),console.log(" "),vn.successText("🎉🎉🎉 上传完成"),console.log(" ")}(i[`${ci.config}`],ci.localdir,ci.serverdir)}catch(e){vn.error(e.message)}}();
